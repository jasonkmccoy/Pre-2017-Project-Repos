(function() {
    var e;
    var t = function() {};
    var n = ["assert", "clear", "count", "debug", "dir", "dirxml", "error", "exception", "group", "groupCollapsed", "groupEnd", "info", "log", "markTimeline", "profile", "profileEnd", "table", "time", "timeEnd", "timeStamp", "trace", "warn"];
    var r = n.length;
    var i = window.console = window.console || {};
    while (r--) {
        e = n[r];
        if (!i[e]) {
            i[e] = t
        }
    }
})();
(function(e, t) {
    function n(t, n) {
        var i, s, o, u = t.nodeName.toLowerCase();
        return "area" === u ? (i = t.parentNode, s = i.name, t.href && s && "map" === i.nodeName.toLowerCase() ? (o = e("img[usemap=#" + s + "]")[0], !!o && r(o)) : !1) : (/input|select|textarea|button|object/.test(u) ? !t.disabled : "a" === u ? t.href || n : n) && r(t)
    }

    function r(t) {
        return e.expr.filters.visible(t) && !e(t).parents().addBack().filter(function() {
            return "hidden" === e.css(this, "visibility")
        }).length
    }
    var i = 0,
        s = /^ui-id-\d+$/;
    e.ui = e.ui || {}, e.extend(e.ui, {
        version: "1.10.3",
        keyCode: {
            BACKSPACE: 8,
            COMMA: 188,
            DELETE: 46,
            DOWN: 40,
            END: 35,
            ENTER: 13,
            ESCAPE: 27,
            HOME: 36,
            LEFT: 37,
            NUMPAD_ADD: 107,
            NUMPAD_DECIMAL: 110,
            NUMPAD_DIVIDE: 111,
            NUMPAD_ENTER: 108,
            NUMPAD_MULTIPLY: 106,
            NUMPAD_SUBTRACT: 109,
            PAGE_DOWN: 34,
            PAGE_UP: 33,
            PERIOD: 190,
            RIGHT: 39,
            SPACE: 32,
            TAB: 9,
            UP: 38
        }
    }), e.fn.extend({
        focus: function(t) {
            return function(n, r) {
                return "number" == typeof n ? this.each(function() {
                    var t = this;
                    setTimeout(function() {
                        e(t).focus(), r && r.call(t)
                    }, n)
                }) : t.apply(this, arguments)
            }
        }(e.fn.focus),
        scrollParent: function() {
            var t;
            return t = e.ui.ie && /(static|relative)/.test(this.css("position")) || /absolute/.test(this.css("position")) ? this.parents().filter(function() {
                return /(relative|absolute|fixed)/.test(e.css(this, "position")) && /(auto|scroll)/.test(e.css(this, "overflow") + e.css(this, "overflow-y") + e.css(this, "overflow-x"))
            }).eq(0) : this.parents().filter(function() {
                return /(auto|scroll)/.test(e.css(this, "overflow") + e.css(this, "overflow-y") + e.css(this, "overflow-x"))
            }).eq(0), /fixed/.test(this.css("position")) || !t.length ? e(document) : t
        },
        zIndex: function(n) {
            if (n !== t) return this.css("zIndex", n);
            if (this.length)
                for (var r, i, s = e(this[0]); s.length && s[0] !== document;) {
                    if (r = s.css("position"), ("absolute" === r || "relative" === r || "fixed" === r) && (i = parseInt(s.css("zIndex"), 10), !isNaN(i) && 0 !== i)) return i;
                    s = s.parent()
                }
            return 0
        },
        uniqueId: function() {
            return this.each(function() {
                this.id || (this.id = "ui-id-" + ++i)
            })
        },
        removeUniqueId: function() {
            return this.each(function() {
                s.test(this.id) && e(this).removeAttr("id")
            })
        }
    }), e.extend(e.expr[":"], {
        data: e.expr.createPseudo ? e.expr.createPseudo(function(t) {
            return function(n) {
                return !!e.data(n, t)
            }
        }) : function(t, n, r) {
            return !!e.data(t, r[3])
        },
        focusable: function(t) {
            return n(t, !isNaN(e.attr(t, "tabindex")))
        },
        tabbable: function(t) {
            var r = e.attr(t, "tabindex"),
                i = isNaN(r);
            return (i || r >= 0) && n(t, !i)
        }
    }), e("<a>").outerWidth(1).jquery || e.each(["Width", "Height"], function(n, r) {
        function i(t, n, r, i) {
            return e.each(s, function() {
                n -= parseFloat(e.css(t, "padding" + this)) || 0, r && (n -= parseFloat(e.css(t, "border" + this + "Width")) || 0), i && (n -= parseFloat(e.css(t, "margin" + this)) || 0)
            }), n
        }
        var s = "Width" === r ? ["Left", "Right"] : ["Top", "Bottom"],
            o = r.toLowerCase(),
            u = {
                innerWidth: e.fn.innerWidth,
                innerHeight: e.fn.innerHeight,
                outerWidth: e.fn.outerWidth,
                outerHeight: e.fn.outerHeight
            };
        e.fn["inner" + r] = function(n) {
            return n === t ? u["inner" + r].call(this) : this.each(function() {
                e(this).css(o, i(this, n) + "px")
            })
        }, e.fn["outer" + r] = function(t, n) {
            return "number" != typeof t ? u["outer" + r].call(this, t) : this.each(function() {
                e(this).css(o, i(this, t, !0, n) + "px")
            })
        }
    }), e.fn.addBack || (e.fn.addBack = function(e) {
        return this.add(null == e ? this.prevObject : this.prevObject.filter(e))
    }), e("<a>").data("a-b", "a").removeData("a-b").data("a-b") && (e.fn.removeData = function(t) {
        return function(n) {
            return arguments.length ? t.call(this, e.camelCase(n)) : t.call(this)
        }
    }(e.fn.removeData)), e.ui.ie = !!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()), e.support.selectstart = "onselectstart" in document.createElement("div"), e.fn.extend({
        disableSelection: function() {
            return this.bind((e.support.selectstart ? "selectstart" : "mousedown") + ".ui-disableSelection", function(e) {
                e.preventDefault()
            })
        },
        enableSelection: function() {
            return this.unbind(".ui-disableSelection")
        }
    }), e.extend(e.ui, {
        plugin: {
            add: function(t, n, r) {
                var i, s = e.ui[t].prototype;
                for (i in r) s.plugins[i] = s.plugins[i] || [], s.plugins[i].push([n, r[i]])
            },
            call: function(e, t, n) {
                var r, i = e.plugins[t];
                if (i && e.element[0].parentNode && 11 !== e.element[0].parentNode.nodeType)
                    for (r = 0; i.length > r; r++) e.options[i[r][0]] && i[r][1].apply(e.element, n)
            }
        },
        hasScroll: function(t, n) {
            if ("hidden" === e(t).css("overflow")) return !1;
            var r = n && "left" === n ? "scrollLeft" : "scrollTop",
                i = !1;
            return t[r] > 0 ? !0 : (t[r] = 1, i = t[r] > 0, t[r] = 0, i)
        }
    })
})(jQuery);
(function(e, t) {
    var n = 0,
        r = Array.prototype.slice,
        i = e.cleanData;
    e.cleanData = function(t) {
        for (var n, r = 0; null != (n = t[r]); r++) try {
            e(n).triggerHandler("remove")
        } catch (s) {}
        i(t)
    }, e.widget = function(n, r, i) {
        var s, o, u, a, f = {},
            l = n.split(".")[0];
        n = n.split(".")[1], s = l + "-" + n, i || (i = r, r = e.Widget), e.expr[":"][s.toLowerCase()] = function(t) {
            return !!e.data(t, s)
        }, e[l] = e[l] || {}, o = e[l][n], u = e[l][n] = function(e, n) {
            return this._createWidget ? (arguments.length && this._createWidget(e, n), t) : new u(e, n)
        }, e.extend(u, o, {
            version: i.version,
            _proto: e.extend({}, i),
            _childConstructors: []
        }), a = new r, a.options = e.widget.extend({}, a.options), e.each(i, function(n, i) {
            return e.isFunction(i) ? (f[n] = function() {
                var e = function() {
                        return r.prototype[n].apply(this, arguments)
                    },
                    t = function(e) {
                        return r.prototype[n].apply(this, e)
                    };
                return function() {
                    var n, r = this._super,
                        s = this._superApply;
                    return this._super = e, this._superApply = t, n = i.apply(this, arguments), this._super = r, this._superApply = s, n
                }
            }(), t) : (f[n] = i, t)
        }), u.prototype = e.widget.extend(a, {
            widgetEventPrefix: o ? a.widgetEventPrefix : n
        }, f, {
            constructor: u,
            namespace: l,
            widgetName: n,
            widgetFullName: s
        }), o ? (e.each(o._childConstructors, function(t, n) {
            var r = n.prototype;
            e.widget(r.namespace + "." + r.widgetName, u, n._proto)
        }), delete o._childConstructors) : r._childConstructors.push(u), e.widget.bridge(n, u)
    }, e.widget.extend = function(n) {
        for (var i, o, u = r.call(arguments, 1), a = 0, f = u.length; f > a; a++)
            for (i in u[a]) o = u[a][i], u[a].hasOwnProperty(i) && o !== t && (n[i] = e.isPlainObject(o) ? e.isPlainObject(n[i]) ? e.widget.extend({}, n[i], o) : e.widget.extend({}, o) : o);
        return n
    }, e.widget.bridge = function(n, i) {
        var o = i.prototype.widgetFullName || n;
        e.fn[n] = function(u) {
            var f = "string" == typeof u,
                l = r.call(arguments, 1),
                c = this;
            return u = !f && l.length ? e.widget.extend.apply(null, [u].concat(l)) : u, f ? this.each(function() {
                var r, i = e.data(this, o);
                return i ? e.isFunction(i[u]) && "_" !== u.charAt(0) ? (r = i[u].apply(i, l), r !== i && r !== t ? (c = r && r.jquery ? c.pushStack(r.get()) : r, !1) : t) : e.error("no such method '" + u + "' for " + n + " widget instance") : e.error("cannot call methods on " + n + " prior to initialization; " + "attempted to call method '" + u + "'")
            }) : this.each(function() {
                var t = e.data(this, o);
                t ? t.option(u || {})._init() : e.data(this, o, new i(u, this))
            }), c
        }
    }, e.Widget = function() {}, e.Widget._childConstructors = [], e.Widget.prototype = {
        widgetName: "widget",
        widgetEventPrefix: "",
        defaultElement: "<div>",
        options: {
            disabled: !1,
            create: null
        },
        _createWidget: function(t, r) {
            r = e(r || this.defaultElement || this)[0], this.element = e(r), this.uuid = n++, this.eventNamespace = "." + this.widgetName + this.uuid, this.options = e.widget.extend({}, this.options, this._getCreateOptions(), t), this.bindings = e(), this.hoverable = e(), this.focusable = e(), r !== this && (e.data(r, this.widgetFullName, this), this._on(!0, this.element, {
                remove: function(e) {
                    e.target === r && this.destroy()
                }
            }), this.document = e(r.style ? r.ownerDocument : r.document || r), this.window = e(this.document[0].defaultView || this.document[0].parentWindow)), this._create(), this._trigger("create", null, this._getCreateEventData()), this._init()
        },
        _getCreateOptions: e.noop,
        _getCreateEventData: e.noop,
        _create: e.noop,
        _init: e.noop,
        destroy: function() {
            this._destroy(), this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)), this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName + "-disabled " + "ui-state-disabled"), this.bindings.unbind(this.eventNamespace), this.hoverable.removeClass("ui-state-hover"), this.focusable.removeClass("ui-state-focus")
        },
        _destroy: e.noop,
        widget: function() {
            return this.element
        },
        option: function(n, r) {
            var i, s, o, u = n;
            if (0 === arguments.length) return e.widget.extend({}, this.options);
            if ("string" == typeof n)
                if (u = {}, i = n.split("."), n = i.shift(), i.length) {
                    for (s = u[n] = e.widget.extend({}, this.options[n]), o = 0; i.length - 1 > o; o++) s[i[o]] = s[i[o]] || {}, s = s[i[o]];
                    if (n = i.pop(), r === t) return s[n] === t ? null : s[n];
                    s[n] = r
                } else {
                    if (r === t) return this.options[n] === t ? null : this.options[n];
                    u[n] = r
                }
            return this._setOptions(u), this
        },
        _setOptions: function(e) {
            var t;
            for (t in e) this._setOption(t, e[t]);
            return this
        },
        _setOption: function(e, t) {
            return this.options[e] = t, "disabled" === e && (this.widget().toggleClass(this.widgetFullName + "-disabled ui-state-disabled", !!t).attr("aria-disabled", t), this.hoverable.removeClass("ui-state-hover"), this.focusable.removeClass("ui-state-focus")), this
        },
        enable: function() {
            return this._setOption("disabled", !1)
        },
        disable: function() {
            return this._setOption("disabled", !0)
        },
        _on: function(n, r, i) {
            var s, o = this;
            "boolean" != typeof n && (i = r, r = n, n = !1), i ? (r = s = e(r), this.bindings = this.bindings.add(r)) : (i = r, r = this.element, s = this.widget()), e.each(i, function(i, u) {
                function f() {
                    return n || o.options.disabled !== !0 && !e(this).hasClass("ui-state-disabled") ? ("string" == typeof u ? o[u] : u).apply(o, arguments) : t
                }
                "string" != typeof u && (f.guid = u.guid = u.guid || f.guid || e.guid++);
                var l = i.match(/^(\w+)\s*(.*)$/),
                    c = l[1] + o.eventNamespace,
                    h = l[2];
                h ? s.delegate(h, c, f) : r.bind(c, f)
            })
        },
        _off: function(e, t) {
            t = (t || "").split(" ").join(this.eventNamespace + " ") + this.eventNamespace, e.unbind(t).undelegate(t)
        },
        _delay: function(e, t) {
            function n() {
                return ("string" == typeof e ? r[e] : e).apply(r, arguments)
            }
            var r = this;
            return setTimeout(n, t || 0)
        },
        _hoverable: function(t) {
            this.hoverable = this.hoverable.add(t), this._on(t, {
                mouseenter: function(t) {
                    e(t.currentTarget).addClass("ui-state-hover")
                },
                mouseleave: function(t) {
                    e(t.currentTarget).removeClass("ui-state-hover")
                }
            })
        },
        _focusable: function(t) {
            this.focusable = this.focusable.add(t), this._on(t, {
                focusin: function(t) {
                    e(t.currentTarget).addClass("ui-state-focus")
                },
                focusout: function(t) {
                    e(t.currentTarget).removeClass("ui-state-focus")
                }
            })
        },
        _trigger: function(t, n, r) {
            var i, s, o = this.options[t];
            if (r = r || {}, n = e.Event(n), n.type = (t === this.widgetEventPrefix ? t : this.widgetEventPrefix + t).toLowerCase(), n.target = this.element[0], s = n.originalEvent)
                for (i in s) i in n || (n[i] = s[i]);
            return this.element.trigger(n, r), !(e.isFunction(o) && o.apply(this.element[0], [n].concat(r)) === !1 || n.isDefaultPrevented())
        }
    }, e.each({
        show: "fadeIn",
        hide: "fadeOut"
    }, function(t, n) {
        e.Widget.prototype["_" + t] = function(r, i, s) {
            "string" == typeof i && (i = {
                effect: i
            });
            var o, u = i ? i === !0 || "number" == typeof i ? n : i.effect || n : t;
            i = i || {}, "number" == typeof i && (i = {
                duration: i
            }), o = !e.isEmptyObject(i), i.complete = s, i.delay && r.delay(i.delay), o && e.effects && e.effects.effect[u] ? r[t](i) : u !== t && r[u] ? r[u](i.duration, i.easing, s) : r.queue(function(n) {
                e(this)[t](), s && s.call(r[0]), n()
            })
        }
    })
})(jQuery);
(function(e) {
    var t = !1;
    e(document).mouseup(function() {
        t = !1
    }), e.widget("ui.mouse", {
        version: "1.10.3",
        options: {
            cancel: "input,textarea,button,select,option",
            distance: 1,
            delay: 0
        },
        _mouseInit: function() {
            var t = this;
            this.element.bind("mousedown." + this.widgetName, function(e) {
                return t._mouseDown(e)
            }).bind("click." + this.widgetName, function(n) {
                return !0 === e.data(n.target, t.widgetName + ".preventClickEvent") ? (e.removeData(n.target, t.widgetName + ".preventClickEvent"), n.stopImmediatePropagation(), !1) : undefined
            }), this.started = !1
        },
        _mouseDestroy: function() {
            this.element.unbind("." + this.widgetName), this._mouseMoveDelegate && e(document).unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate)
        },
        _mouseDown: function(n) {
            if (!t) {
                this._mouseStarted && this._mouseUp(n), this._mouseDownEvent = n;
                var r = this,
                    i = 1 === n.which,
                    s = "string" == typeof this.options.cancel && n.target.nodeName ? e(n.target).closest(this.options.cancel).length : !1;
                return i && !s && this._mouseCapture(n) ? (this.mouseDelayMet = !this.options.delay, this.mouseDelayMet || (this._mouseDelayTimer = setTimeout(function() {
                    r.mouseDelayMet = !0
                }, this.options.delay)), this._mouseDistanceMet(n) && this._mouseDelayMet(n) && (this._mouseStarted = this._mouseStart(n) !== !1, !this._mouseStarted) ? (n.preventDefault(), !0) : (!0 === e.data(n.target, this.widgetName + ".preventClickEvent") && e.removeData(n.target, this.widgetName + ".preventClickEvent"), this._mouseMoveDelegate = function(e) {
                    return r._mouseMove(e)
                }, this._mouseUpDelegate = function(e) {
                    return r._mouseUp(e)
                }, e(document).bind("mousemove." + this.widgetName, this._mouseMoveDelegate).bind("mouseup." + this.widgetName, this._mouseUpDelegate), n.preventDefault(), t = !0, !0)) : !0
            }
        },
        _mouseMove: function(t) {
            return e.ui.ie && (!document.documentMode || 9 > document.documentMode) && !t.button ? this._mouseUp(t) : this._mouseStarted ? (this._mouseDrag(t), t.preventDefault()) : (this._mouseDistanceMet(t) && this._mouseDelayMet(t) && (this._mouseStarted = this._mouseStart(this._mouseDownEvent, t) !== !1, this._mouseStarted ? this._mouseDrag(t) : this._mouseUp(t)), !this._mouseStarted)
        },
        _mouseUp: function(t) {
            return e(document).unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate), this._mouseStarted && (this._mouseStarted = !1, t.target === this._mouseDownEvent.target && e.data(t.target, this.widgetName + ".preventClickEvent", !0), this._mouseStop(t)), !1
        },
        _mouseDistanceMet: function(e) {
            return Math.max(Math.abs(this._mouseDownEvent.pageX - e.pageX), Math.abs(this._mouseDownEvent.pageY - e.pageY)) >= this.options.distance
        },
        _mouseDelayMet: function() {
            return this.mouseDelayMet
        },
        _mouseStart: function() {},
        _mouseDrag: function() {},
        _mouseStop: function() {},
        _mouseCapture: function() {
            return !0
        }
    })
})(jQuery);
(function(e) {
    e.widget("ui.draggable", e.ui.mouse, {
        version: "1.10.3",
        widgetEventPrefix: "drag",
        options: {
            addClasses: !0,
            appendTo: "parent",
            axis: !1,
            connectToSortable: !1,
            containment: !1,
            cursor: "auto",
            cursorAt: !1,
            grid: !1,
            handle: !1,
            helper: "original",
            iframeFix: !1,
            opacity: !1,
            refreshPositions: !1,
            revert: !1,
            revertDuration: 500,
            scope: "default",
            scroll: !0,
            scrollSensitivity: 20,
            scrollSpeed: 20,
            snap: !1,
            snapMode: "both",
            snapTolerance: 20,
            stack: !1,
            zIndex: !1,
            drag: null,
            start: null,
            stop: null
        },
        _create: function() {
            "original" !== this.options.helper || /^(?:r|a|f)/.test(this.element.css("position")) || (this.element[0].style.position = "relative"), this.options.addClasses && this.element.addClass("ui-draggable"), this.options.disabled && this.element.addClass("ui-draggable-disabled"), this._mouseInit()
        },
        _destroy: function() {
            this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"), this._mouseDestroy()
        },
        _mouseCapture: function(t) {
            var n = this.options;
            return this.helper || n.disabled || e(t.target).closest(".ui-resizable-handle").length > 0 ? !1 : (this.handle = this._getHandle(t), this.handle ? (e(n.iframeFix === !0 ? "iframe" : n.iframeFix).each(function() {
                e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({
                    width: this.offsetWidth + "px",
                    height: this.offsetHeight + "px",
                    position: "absolute",
                    opacity: "0.001",
                    zIndex: 1e3
                }).css(e(this).offset()).appendTo("body")
            }), !0) : !1)
        },
        _mouseStart: function(t) {
            var n = this.options;
            return this.helper = this._createHelper(t), this.helper.addClass("ui-draggable-dragging"), this._cacheHelperProportions(), e.ui.ddmanager && (e.ui.ddmanager.current = this), this._cacheMargins(), this.cssPosition = this.helper.css("position"), this.scrollParent = this.helper.scrollParent(), this.offsetParent = this.helper.offsetParent(), this.offsetParentCssPosition = this.offsetParent.css("position"), this.offset = this.positionAbs = this.element.offset(), this.offset = {
                top: this.offset.top - this.margins.top,
                left: this.offset.left - this.margins.left
            }, this.offset.scroll = !1, e.extend(this.offset, {
                click: {
                    left: t.pageX - this.offset.left,
                    top: t.pageY - this.offset.top
                },
                parent: this._getParentOffset(),
                relative: this._getRelativeOffset()
            }), this.originalPosition = this.position = this._generatePosition(t), this.originalPageX = t.pageX, this.originalPageY = t.pageY, n.cursorAt && this._adjustOffsetFromHelper(n.cursorAt), this._setContainment(), this._trigger("start", t) === !1 ? (this._clear(), !1) : (this._cacheHelperProportions(), e.ui.ddmanager && !n.dropBehaviour && e.ui.ddmanager.prepareOffsets(this, t), this._mouseDrag(t, !0), e.ui.ddmanager && e.ui.ddmanager.dragStart(this, t), !0)
        },
        _mouseDrag: function(t, n) {
            if ("fixed" === this.offsetParentCssPosition && (this.offset.parent = this._getParentOffset()), this.position = this._generatePosition(t), this.positionAbs = this._convertPositionTo("absolute"), !n) {
                var r = this._uiHash();
                if (this._trigger("drag", t, r) === !1) return this._mouseUp({}), !1;
                this.position = r.position
            }
            return this.options.axis && "y" === this.options.axis || (this.helper[0].style.left = this.position.left + "px"), this.options.axis && "x" === this.options.axis || (this.helper[0].style.top = this.position.top + "px"), e.ui.ddmanager && e.ui.ddmanager.drag(this, t), !1
        },
        _mouseStop: function(t) {
            var n = this,
                r = !1;
            return e.ui.ddmanager && !this.options.dropBehaviour && (r = e.ui.ddmanager.drop(this, t)), this.dropped && (r = this.dropped, this.dropped = !1), "original" !== this.options.helper || e.contains(this.element[0].ownerDocument, this.element[0]) ? ("invalid" === this.options.revert && !r || "valid" === this.options.revert && r || this.options.revert === !0 || e.isFunction(this.options.revert) && this.options.revert.call(this.element, r) ? e(this.helper).animate(this.originalPosition, parseInt(this.options.revertDuration, 10), function() {
                n._trigger("stop", t) !== !1 && n._clear()
            }) : this._trigger("stop", t) !== !1 && this._clear(), !1) : !1
        },
        _mouseUp: function(t) {
            return e("div.ui-draggable-iframeFix").each(function() {
                this.parentNode.removeChild(this)
            }), e.ui.ddmanager && e.ui.ddmanager.dragStop(this, t), e.ui.mouse.prototype._mouseUp.call(this, t)
        },
        cancel: function() {
            return this.helper.is(".ui-draggable-dragging") ? this._mouseUp({}) : this._clear(), this
        },
        _getHandle: function(t) {
            return this.options.handle ? !!e(t.target).closest(this.element.find(this.options.handle)).length : !0
        },
        _createHelper: function(t) {
            var n = this.options,
                r = e.isFunction(n.helper) ? e(n.helper.apply(this.element[0], [t])) : "clone" === n.helper ? this.element.clone().removeAttr("id") : this.element;
            return r.parents("body").length || r.appendTo("parent" === n.appendTo ? this.element[0].parentNode : n.appendTo), r[0] === this.element[0] || /(fixed|absolute)/.test(r.css("position")) || r.css("position", "absolute"), r
        },
        _adjustOffsetFromHelper: function(t) {
            "string" == typeof t && (t = t.split(" ")), e.isArray(t) && (t = {
                left: +t[0],
                top: +t[1] || 0
            }), "left" in t && (this.offset.click.left = t.left + this.margins.left), "right" in t && (this.offset.click.left = this.helperProportions.width - t.right + this.margins.left), "top" in t && (this.offset.click.top = t.top + this.margins.top), "bottom" in t && (this.offset.click.top = this.helperProportions.height - t.bottom + this.margins.top)
        },
        _getParentOffset: function() {
            var t = this.offsetParent.offset();
            return "absolute" === this.cssPosition && this.scrollParent[0] !== document && e.contains(this.scrollParent[0], this.offsetParent[0]) && (t.left += this.scrollParent.scrollLeft(), t.top += this.scrollParent.scrollTop()), (this.offsetParent[0] === document.body || this.offsetParent[0].tagName && "html" === this.offsetParent[0].tagName.toLowerCase() && e.ui.ie) && (t = {
                top: 0,
                left: 0
            }), {
                top: t.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
                left: t.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)
            }
        },
        _getRelativeOffset: function() {
            if ("relative" === this.cssPosition) {
                var e = this.element.position();
                return {
                    top: e.top - (parseInt(this.helper.css("top"), 10) || 0) + this.scrollParent.scrollTop(),
                    left: e.left - (parseInt(this.helper.css("left"), 10) || 0) + this.scrollParent.scrollLeft()
                }
            }
            return {
                top: 0,
                left: 0
            }
        },
        _cacheMargins: function() {
            this.margins = {
                left: parseInt(this.element.css("marginLeft"), 10) || 0,
                top: parseInt(this.element.css("marginTop"), 10) || 0,
                right: parseInt(this.element.css("marginRight"), 10) || 0,
                bottom: parseInt(this.element.css("marginBottom"), 10) || 0
            }
        },
        _cacheHelperProportions: function() {
            this.helperProportions = {
                width: this.helper.outerWidth(),
                height: this.helper.outerHeight()
            }
        },
        _setContainment: function() {
            var t, n, r, i = this.options;
            return i.containment ? "window" === i.containment ? (this.containment = [e(window).scrollLeft() - this.offset.relative.left - this.offset.parent.left, e(window).scrollTop() - this.offset.relative.top - this.offset.parent.top, e(window).scrollLeft() + e(window).width() - this.helperProportions.width - this.margins.left, e(window).scrollTop() + (e(window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top], undefined) : "document" === i.containment ? (this.containment = [0, 0, e(document).width() - this.helperProportions.width - this.margins.left, (e(document).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top], undefined) : i.containment.constructor === Array ? (this.containment = i.containment, undefined) : ("parent" === i.containment && (i.containment = this.helper[0].parentNode), n = e(i.containment), r = n[0], r && (t = "hidden" !== n.css("overflow"), this.containment = [(parseInt(n.css("borderLeftWidth"), 10) || 0) + (parseInt(n.css("paddingLeft"), 10) || 0), (parseInt(n.css("borderTopWidth"), 10) || 0) + (parseInt(n.css("paddingTop"), 10) || 0), (t ? Math.max(r.scrollWidth, r.offsetWidth) : r.offsetWidth) - (parseInt(n.css("borderRightWidth"), 10) || 0) - (parseInt(n.css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left - this.margins.right, (t ? Math.max(r.scrollHeight, r.offsetHeight) : r.offsetHeight) - (parseInt(n.css("borderBottomWidth"), 10) || 0) - (parseInt(n.css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top - this.margins.bottom], this.relative_container = n), undefined) : (this.containment = null, undefined)
        },
        _convertPositionTo: function(t, n) {
            n || (n = this.position);
            var r = "absolute" === t ? 1 : -1,
                i = "absolute" !== this.cssPosition || this.scrollParent[0] !== document && e.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent;
            return this.offset.scroll || (this.offset.scroll = {
                top: i.scrollTop(),
                left: i.scrollLeft()
            }), {
                top: n.top + this.offset.relative.top * r + this.offset.parent.top * r - ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : this.offset.scroll.top) * r,
                left: n.left + this.offset.relative.left * r + this.offset.parent.left * r - ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : this.offset.scroll.left) * r
            }
        },
        _generatePosition: function(t) {
            var n, r, i, s, o = this.options,
                u = "absolute" !== this.cssPosition || this.scrollParent[0] !== document && e.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent,
                a = t.pageX,
                f = t.pageY;
            return this.offset.scroll || (this.offset.scroll = {
                top: u.scrollTop(),
                left: u.scrollLeft()
            }), this.originalPosition && (this.containment && (this.relative_container ? (r = this.relative_container.offset(), n = [this.containment[0] + r.left, this.containment[1] + r.top, this.containment[2] + r.left, this.containment[3] + r.top]) : n = this.containment, t.pageX - this.offset.click.left < n[0] && (a = n[0] + this.offset.click.left), t.pageY - this.offset.click.top < n[1] && (f = n[1] + this.offset.click.top), t.pageX - this.offset.click.left > n[2] && (a = n[2] + this.offset.click.left), t.pageY - this.offset.click.top > n[3] && (f = n[3] + this.offset.click.top)), o.grid && (i = o.grid[1] ? this.originalPageY + Math.round((f - this.originalPageY) / o.grid[1]) * o.grid[1] : this.originalPageY, f = n ? i - this.offset.click.top >= n[1] || i - this.offset.click.top > n[3] ? i : i - this.offset.click.top >= n[1] ? i - o.grid[1] : i + o.grid[1] : i, s = o.grid[0] ? this.originalPageX + Math.round((a - this.originalPageX) / o.grid[0]) * o.grid[0] : this.originalPageX, a = n ? s - this.offset.click.left >= n[0] || s - this.offset.click.left > n[2] ? s : s - this.offset.click.left >= n[0] ? s - o.grid[0] : s + o.grid[0] : s)), {
                top: f - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : this.offset.scroll.top),
                left: a - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : this.offset.scroll.left)
            }
        },
        _clear: function() {
            this.helper.removeClass("ui-draggable-dragging"), this.helper[0] === this.element[0] || this.cancelHelperRemoval || this.helper.remove(), this.helper = null, this.cancelHelperRemoval = !1
        },
        _trigger: function(t, n, r) {
            return r = r || this._uiHash(), e.ui.plugin.call(this, t, [n, r]), "drag" === t && (this.positionAbs = this._convertPositionTo("absolute")), e.Widget.prototype._trigger.call(this, t, n, r)
        },
        plugins: {},
        _uiHash: function() {
            return {
                helper: this.helper,
                position: this.position,
                originalPosition: this.originalPosition,
                offset: this.positionAbs
            }
        }
    }), e.ui.plugin.add("draggable", "connectToSortable", {
        start: function(t, n) {
            var r = e(this).data("ui-draggable"),
                i = r.options,
                s = e.extend({}, n, {
                    item: r.element
                });
            r.sortables = [], e(i.connectToSortable).each(function() {
                var n = e.data(this, "ui-sortable");
                n && !n.options.disabled && (r.sortables.push({
                    instance: n,
                    shouldRevert: n.options.revert
                }), n.refreshPositions(), n._trigger("activate", t, s))
            })
        },
        stop: function(t, n) {
            var r = e(this).data("ui-draggable"),
                i = e.extend({}, n, {
                    item: r.element
                });
            e.each(r.sortables, function() {
                this.instance.isOver ? (this.instance.isOver = 0, r.cancelHelperRemoval = !0, this.instance.cancelHelperRemoval = !1, this.shouldRevert && (this.instance.options.revert = this.shouldRevert), this.instance._mouseStop(t), this.instance.options.helper = this.instance.options._helper, "original" === r.options.helper && this.instance.currentItem.css({
                    top: "auto",
                    left: "auto"
                })) : (this.instance.cancelHelperRemoval = !1, this.instance._trigger("deactivate", t, i))
            })
        },
        drag: function(t, n) {
            var r = e(this).data("ui-draggable"),
                i = this;
            e.each(r.sortables, function() {
                var o = !1,
                    u = this;
                this.instance.positionAbs = r.positionAbs, this.instance.helperProportions = r.helperProportions, this.instance.offset.click = r.offset.click, this.instance._intersectsWith(this.instance.containerCache) && (o = !0, e.each(r.sortables, function() {
                    return this.instance.positionAbs = r.positionAbs, this.instance.helperProportions = r.helperProportions, this.instance.offset.click = r.offset.click, this !== u && this.instance._intersectsWith(this.instance.containerCache) && e.contains(u.instance.element[0], this.instance.element[0]) && (o = !1), o
                })), o ? (this.instance.isOver || (this.instance.isOver = 1, this.instance.currentItem = e(i).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item", !0), this.instance.options._helper = this.instance.options.helper, this.instance.options.helper = function() {
                    return n.helper[0]
                }, t.target = this.instance.currentItem[0], this.instance._mouseCapture(t, !0), this.instance._mouseStart(t, !0, !0), this.instance.offset.click.top = r.offset.click.top, this.instance.offset.click.left = r.offset.click.left, this.instance.offset.parent.left -= r.offset.parent.left - this.instance.offset.parent.left, this.instance.offset.parent.top -= r.offset.parent.top - this.instance.offset.parent.top, r._trigger("toSortable", t), r.dropped = this.instance.element, r.currentItem = r.element, this.instance.fromOutside = r), this.instance.currentItem && this.instance._mouseDrag(t)) : this.instance.isOver && (this.instance.isOver = 0, this.instance.cancelHelperRemoval = !0, this.instance.options.revert = !1, this.instance._trigger("out", t, this.instance._uiHash(this.instance)), this.instance._mouseStop(t, !0), this.instance.options.helper = this.instance.options._helper, this.instance.currentItem.remove(), this.instance.placeholder && this.instance.placeholder.remove(), r._trigger("fromSortable", t), r.dropped = !1)
            })
        }
    }), e.ui.plugin.add("draggable", "cursor", {
        start: function() {
            var t = e("body"),
                n = e(this).data("ui-draggable").options;
            t.css("cursor") && (n._cursor = t.css("cursor")), t.css("cursor", n.cursor)
        },
        stop: function() {
            var t = e(this).data("ui-draggable").options;
            t._cursor && e("body").css("cursor", t._cursor)
        }
    }), e.ui.plugin.add("draggable", "opacity", {
        start: function(t, n) {
            var r = e(n.helper),
                i = e(this).data("ui-draggable").options;
            r.css("opacity") && (i._opacity = r.css("opacity")), r.css("opacity", i.opacity)
        },
        stop: function(t, n) {
            var r = e(this).data("ui-draggable").options;
            r._opacity && e(n.helper).css("opacity", r._opacity)
        }
    }), e.ui.plugin.add("draggable", "scroll", {
        start: function() {
            var t = e(this).data("ui-draggable");
            t.scrollParent[0] !== document && "HTML" !== t.scrollParent[0].tagName && (t.overflowOffset = t.scrollParent.offset())
        },
        drag: function(t) {
            var n = e(this).data("ui-draggable"),
                r = n.options,
                i = !1;
            n.scrollParent[0] !== document && "HTML" !== n.scrollParent[0].tagName ? (r.axis && "x" === r.axis || (n.overflowOffset.top + n.scrollParent[0].offsetHeight - t.pageY < r.scrollSensitivity ? n.scrollParent[0].scrollTop = i = n.scrollParent[0].scrollTop + r.scrollSpeed : t.pageY - n.overflowOffset.top < r.scrollSensitivity && (n.scrollParent[0].scrollTop = i = n.scrollParent[0].scrollTop - r.scrollSpeed)), r.axis && "y" === r.axis || (n.overflowOffset.left + n.scrollParent[0].offsetWidth - t.pageX < r.scrollSensitivity ? n.scrollParent[0].scrollLeft = i = n.scrollParent[0].scrollLeft + r.scrollSpeed : t.pageX - n.overflowOffset.left < r.scrollSensitivity && (n.scrollParent[0].scrollLeft = i = n.scrollParent[0].scrollLeft - r.scrollSpeed))) : (r.axis && "x" === r.axis || (t.pageY - e(document).scrollTop() < r.scrollSensitivity ? i = e(document).scrollTop(e(document).scrollTop() - r.scrollSpeed) : e(window).height() - (t.pageY - e(document).scrollTop()) < r.scrollSensitivity && (i = e(document).scrollTop(e(document).scrollTop() + r.scrollSpeed))), r.axis && "y" === r.axis || (t.pageX - e(document).scrollLeft() < r.scrollSensitivity ? i = e(document).scrollLeft(e(document).scrollLeft() - r.scrollSpeed) : e(window).width() - (t.pageX - e(document).scrollLeft()) < r.scrollSensitivity && (i = e(document).scrollLeft(e(document).scrollLeft() + r.scrollSpeed)))), i !== !1 && e.ui.ddmanager && !r.dropBehaviour && e.ui.ddmanager.prepareOffsets(n, t)
        }
    }), e.ui.plugin.add("draggable", "snap", {
        start: function() {
            var t = e(this).data("ui-draggable"),
                n = t.options;
            t.snapElements = [], e(n.snap.constructor !== String ? n.snap.items || ":data(ui-draggable)" : n.snap).each(function() {
                var n = e(this),
                    r = n.offset();
                this !== t.element[0] && t.snapElements.push({
                    item: this,
                    width: n.outerWidth(),
                    height: n.outerHeight(),
                    top: r.top,
                    left: r.left
                })
            })
        },
        drag: function(t, n) {
            var r, i, s, o, u, a, f, l, c, h, p = e(this).data("ui-draggable"),
                d = p.options,
                v = d.snapTolerance,
                m = n.offset.left,
                g = m + p.helperProportions.width,
                y = n.offset.top,
                b = y + p.helperProportions.height;
            for (c = p.snapElements.length - 1; c >= 0; c--) u = p.snapElements[c].left, a = u + p.snapElements[c].width, f = p.snapElements[c].top, l = f + p.snapElements[c].height, u - v > g || m > a + v || f - v > b || y > l + v || !e.contains(p.snapElements[c].item.ownerDocument, p.snapElements[c].item) ? (p.snapElements[c].snapping && p.options.snap.release && p.options.snap.release.call(p.element, t, e.extend(p._uiHash(), {
                snapItem: p.snapElements[c].item
            })), p.snapElements[c].snapping = !1) : ("inner" !== d.snapMode && (r = v >= Math.abs(f - b), i = v >= Math.abs(l - y), s = v >= Math.abs(u - g), o = v >= Math.abs(a - m), r && (n.position.top = p._convertPositionTo("relative", {
                top: f - p.helperProportions.height,
                left: 0
            }).top - p.margins.top), i && (n.position.top = p._convertPositionTo("relative", {
                top: l,
                left: 0
            }).top - p.margins.top), s && (n.position.left = p._convertPositionTo("relative", {
                top: 0,
                left: u - p.helperProportions.width
            }).left - p.margins.left), o && (n.position.left = p._convertPositionTo("relative", {
                top: 0,
                left: a
            }).left - p.margins.left)), h = r || i || s || o, "outer" !== d.snapMode && (r = v >= Math.abs(f - y), i = v >= Math.abs(l - b), s = v >= Math.abs(u - m), o = v >= Math.abs(a - g), r && (n.position.top = p._convertPositionTo("relative", {
                top: f,
                left: 0
            }).top - p.margins.top), i && (n.position.top = p._convertPositionTo("relative", {
                top: l - p.helperProportions.height,
                left: 0
            }).top - p.margins.top), s && (n.position.left = p._convertPositionTo("relative", {
                top: 0,
                left: u
            }).left - p.margins.left), o && (n.position.left = p._convertPositionTo("relative", {
                top: 0,
                left: a - p.helperProportions.width
            }).left - p.margins.left)), !p.snapElements[c].snapping && (r || i || s || o || h) && p.options.snap.snap && p.options.snap.snap.call(p.element, t, e.extend(p._uiHash(), {
                snapItem: p.snapElements[c].item
            })), p.snapElements[c].snapping = r || i || s || o || h)
        }
    }), e.ui.plugin.add("draggable", "stack", {
        start: function() {
            var t, n = this.data("ui-draggable").options,
                r = e.makeArray(e(n.stack)).sort(function(t, n) {
                    return (parseInt(e(t).css("zIndex"), 10) || 0) - (parseInt(e(n).css("zIndex"), 10) || 0)
                });
            r.length && (t = parseInt(e(r[0]).css("zIndex"), 10) || 0, e(r).each(function(n) {
                e(this).css("zIndex", t + n)
            }), this.css("zIndex", t + r.length))
        }
    }), e.ui.plugin.add("draggable", "zIndex", {
        start: function(t, n) {
            var r = e(n.helper),
                i = e(this).data("ui-draggable").options;
            r.css("zIndex") && (i._zIndex = r.css("zIndex")), r.css("zIndex", i.zIndex)
        },
        stop: function(t, n) {
            var r = e(this).data("ui-draggable").options;
            r._zIndex && e(n.helper).css("zIndex", r._zIndex)
        }
    })
})(jQuery);
(function(e) {
    function t(e) {
        return parseInt(e, 10) || 0
    }

    function n(e) {
        return !isNaN(parseInt(e, 10))
    }
    e.widget("ui.resizable", e.ui.mouse, {
        version: "1.10.3",
        widgetEventPrefix: "resize",
        options: {
            alsoResize: !1,
            animate: !1,
            animateDuration: "slow",
            animateEasing: "swing",
            aspectRatio: !1,
            autoHide: !1,
            containment: !1,
            ghost: !1,
            grid: !1,
            handles: "e,s,se",
            helper: !1,
            maxHeight: null,
            maxWidth: null,
            minHeight: 10,
            minWidth: 10,
            zIndex: 90,
            resize: null,
            start: null,
            stop: null
        },
        _create: function() {
            var t, n, r, i, s, o = this,
                u = this.options;
            if (this.element.addClass("ui-resizable"), e.extend(this, {
                    _aspectRatio: !!u.aspectRatio,
                    aspectRatio: u.aspectRatio,
                    originalElement: this.element,
                    _proportionallyResizeElements: [],
                    _helper: u.helper || u.ghost || u.animate ? u.helper || "ui-resizable-helper" : null
                }), this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i) && (this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({
                    position: this.element.css("position"),
                    width: this.element.outerWidth(),
                    height: this.element.outerHeight(),
                    top: this.element.css("top"),
                    left: this.element.css("left")
                })), this.element = this.element.parent().data("ui-resizable", this.element.data("ui-resizable")), this.elementIsWrapper = !0, this.element.css({
                    marginLeft: this.originalElement.css("marginLeft"),
                    marginTop: this.originalElement.css("marginTop"),
                    marginRight: this.originalElement.css("marginRight"),
                    marginBottom: this.originalElement.css("marginBottom")
                }), this.originalElement.css({
                    marginLeft: 0,
                    marginTop: 0,
                    marginRight: 0,
                    marginBottom: 0
                }), this.originalResizeStyle = this.originalElement.css("resize"), this.originalElement.css("resize", "none"), this._proportionallyResizeElements.push(this.originalElement.css({
                    position: "static",
                    zoom: 1,
                    display: "block"
                })), this.originalElement.css({
                    margin: this.originalElement.css("margin")
                }), this._proportionallyResize()), this.handles = u.handles || (e(".ui-resizable-handle", this.element).length ? {
                    n: ".ui-resizable-n",
                    e: ".ui-resizable-e",
                    s: ".ui-resizable-s",
                    w: ".ui-resizable-w",
                    se: ".ui-resizable-se",
                    sw: ".ui-resizable-sw",
                    ne: ".ui-resizable-ne",
                    nw: ".ui-resizable-nw"
                } : "e,s,se"), this.handles.constructor === String)
                for ("all" === this.handles && (this.handles = "n,e,s,w,se,sw,ne,nw"), t = this.handles.split(","), this.handles = {}, n = 0; t.length > n; n++) r = e.trim(t[n]), s = "ui-resizable-" + r, i = e("<div class='ui-resizable-handle " + s + "'></div>"), i.css({
                    zIndex: u.zIndex
                }), "se" === r && i.addClass("ui-icon ui-icon-gripsmall-diagonal-se"), this.handles[r] = ".ui-resizable-" + r, this.element.append(i);
            this._renderAxis = function(t) {
                var n, r, i, s;
                t = t || this.element;
                for (n in this.handles) this.handles[n].constructor === String && (this.handles[n] = e(this.handles[n], this.element).show()), this.elementIsWrapper && this.originalElement[0].nodeName.match(/textarea|input|select|button/i) && (r = e(this.handles[n], this.element), s = /sw|ne|nw|se|n|s/.test(n) ? r.outerHeight() : r.outerWidth(), i = ["padding", /ne|nw|n/.test(n) ? "Top" : /se|sw|s/.test(n) ? "Bottom" : /^e$/.test(n) ? "Right" : "Left"].join(""), t.css(i, s), this._proportionallyResize()), e(this.handles[n]).length
            }, this._renderAxis(this.element), this._handles = e(".ui-resizable-handle", this.element).disableSelection(), this._handles.mouseover(function() {
                o.resizing || (this.className && (i = this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)), o.axis = i && i[1] ? i[1] : "se")
            }), u.autoHide && (this._handles.hide(), e(this.element).addClass("ui-resizable-autohide").mouseenter(function() {
                u.disabled || (e(this).removeClass("ui-resizable-autohide"), o._handles.show())
            }).mouseleave(function() {
                u.disabled || o.resizing || (e(this).addClass("ui-resizable-autohide"), o._handles.hide())
            })), this._mouseInit()
        },
        _destroy: function() {
            this._mouseDestroy();
            var t, n = function(t) {
                e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()
            };
            return this.elementIsWrapper && (n(this.element), t = this.element, this.originalElement.css({
                position: t.css("position"),
                width: t.outerWidth(),
                height: t.outerHeight(),
                top: t.css("top"),
                left: t.css("left")
            }).insertAfter(t), t.remove()), this.originalElement.css("resize", this.originalResizeStyle), n(this.originalElement), this
        },
        _mouseCapture: function(t) {
            var n, r, i = !1;
            for (n in this.handles) r = e(this.handles[n])[0], (r === t.target || e.contains(r, t.target)) && (i = !0);
            return !this.options.disabled && i
        },
        _mouseStart: function(n) {
            var r, i, s, o = this.options,
                u = this.element.position(),
                a = this.element;
            return this.resizing = !0, /absolute/.test(a.css("position")) ? a.css({
                position: "absolute",
                top: a.css("top"),
                left: a.css("left")
            }) : a.is(".ui-draggable") && a.css({
                position: "absolute",
                top: u.top,
                left: u.left
            }), this._renderProxy(), r = t(this.helper.css("left")), i = t(this.helper.css("top")), o.containment && (r += e(o.containment).scrollLeft() || 0, i += e(o.containment).scrollTop() || 0), this.offset = this.helper.offset(), this.position = {
                left: r,
                top: i
            }, this.size = this._helper ? {
                width: a.outerWidth(),
                height: a.outerHeight()
            } : {
                width: a.width(),
                height: a.height()
            }, this.originalSize = this._helper ? {
                width: a.outerWidth(),
                height: a.outerHeight()
            } : {
                width: a.width(),
                height: a.height()
            }, this.originalPosition = {
                left: r,
                top: i
            }, this.sizeDiff = {
                width: a.outerWidth() - a.width(),
                height: a.outerHeight() - a.height()
            }, this.originalMousePosition = {
                left: n.pageX,
                top: n.pageY
            }, this.aspectRatio = "number" == typeof o.aspectRatio ? o.aspectRatio : this.originalSize.width / this.originalSize.height || 1, s = e(".ui-resizable-" + this.axis).css("cursor"), e("body").css("cursor", "auto" === s ? this.axis + "-resize" : s), a.addClass("ui-resizable-resizing"), this._propagate("start", n), !0
        },
        _mouseDrag: function(t) {
            var n, r = this.helper,
                i = {},
                s = this.originalMousePosition,
                o = this.axis,
                u = this.position.top,
                a = this.position.left,
                f = this.size.width,
                l = this.size.height,
                c = t.pageX - s.left || 0,
                h = t.pageY - s.top || 0,
                p = this._change[o];
            return p ? (n = p.apply(this, [t, c, h]), this._updateVirtualBoundaries(t.shiftKey), (this._aspectRatio || t.shiftKey) && (n = this._updateRatio(n, t)), n = this._respectSize(n, t), this._updateCache(n), this._propagate("resize", t), this.position.top !== u && (i.top = this.position.top + "px"), this.position.left !== a && (i.left = this.position.left + "px"), this.size.width !== f && (i.width = this.size.width + "px"), this.size.height !== l && (i.height = this.size.height + "px"), r.css(i), !this._helper && this._proportionallyResizeElements.length && this._proportionallyResize(), e.isEmptyObject(i) || this._trigger("resize", t, this.ui()), !1) : !1
        },
        _mouseStop: function(t) {
            this.resizing = !1;
            var n, r, i, s, o, u, a, f = this.options,
                l = this;
            return this._helper && (n = this._proportionallyResizeElements, r = n.length && /textarea/i.test(n[0].nodeName), i = r && e.ui.hasScroll(n[0], "left") ? 0 : l.sizeDiff.height, s = r ? 0 : l.sizeDiff.width, o = {
                width: l.helper.width() - s,
                height: l.helper.height() - i
            }, u = parseInt(l.element.css("left"), 10) + (l.position.left - l.originalPosition.left) || null, a = parseInt(l.element.css("top"), 10) + (l.position.top - l.originalPosition.top) || null, f.animate || this.element.css(e.extend(o, {
                top: a,
                left: u
            })), l.helper.height(l.size.height), l.helper.width(l.size.width), this._helper && !f.animate && this._proportionallyResize()), e("body").css("cursor", "auto"), this.element.removeClass("ui-resizable-resizing"), this._propagate("stop", t), this._helper && this.helper.remove(), !1
        },
        _updateVirtualBoundaries: function(e) {
            var t, r, s, o, u, a = this.options;
            u = {
                minWidth: n(a.minWidth) ? a.minWidth : 0,
                maxWidth: n(a.maxWidth) ? a.maxWidth : 1 / 0,
                minHeight: n(a.minHeight) ? a.minHeight : 0,
                maxHeight: n(a.maxHeight) ? a.maxHeight : 1 / 0
            }, (this._aspectRatio || e) && (t = u.minHeight * this.aspectRatio, s = u.minWidth / this.aspectRatio, r = u.maxHeight * this.aspectRatio, o = u.maxWidth / this.aspectRatio, t > u.minWidth && (u.minWidth = t), s > u.minHeight && (u.minHeight = s), u.maxWidth > r && (u.maxWidth = r), u.maxHeight > o && (u.maxHeight = o)), this._vBoundaries = u
        },
        _updateCache: function(e) {
            this.offset = this.helper.offset(), n(e.left) && (this.position.left = e.left), n(e.top) && (this.position.top = e.top), n(e.height) && (this.size.height = e.height), n(e.width) && (this.size.width = e.width)
        },
        _updateRatio: function(e) {
            var t = this.position,
                r = this.size,
                s = this.axis;
            return n(e.height) ? e.width = e.height * this.aspectRatio : n(e.width) && (e.height = e.width / this.aspectRatio), "sw" === s && (e.left = t.left + (r.width - e.width), e.top = null), "nw" === s && (e.top = t.top + (r.height - e.height), e.left = t.left + (r.width - e.width)), e
        },
        _respectSize: function(e) {
            var t = this._vBoundaries,
                r = this.axis,
                s = n(e.width) && t.maxWidth && t.maxWidth < e.width,
                o = n(e.height) && t.maxHeight && t.maxHeight < e.height,
                u = n(e.width) && t.minWidth && t.minWidth > e.width,
                a = n(e.height) && t.minHeight && t.minHeight > e.height,
                f = this.originalPosition.left + this.originalSize.width,
                l = this.position.top + this.size.height,
                c = /sw|nw|w/.test(r),
                h = /nw|ne|n/.test(r);
            return u && (e.width = t.minWidth), a && (e.height = t.minHeight), s && (e.width = t.maxWidth), o && (e.height = t.maxHeight), u && c && (e.left = f - t.minWidth), s && c && (e.left = f - t.maxWidth), a && h && (e.top = l - t.minHeight), o && h && (e.top = l - t.maxHeight), e.width || e.height || e.left || !e.top ? e.width || e.height || e.top || !e.left || (e.left = null) : e.top = null, e
        },
        _proportionallyResize: function() {
            if (this._proportionallyResizeElements.length) {
                var e, t, n, r, i, s = this.helper || this.element;
                for (e = 0; this._proportionallyResizeElements.length > e; e++) {
                    if (i = this._proportionallyResizeElements[e], !this.borderDif)
                        for (this.borderDif = [], n = [i.css("borderTopWidth"), i.css("borderRightWidth"), i.css("borderBottomWidth"), i.css("borderLeftWidth")], r = [i.css("paddingTop"), i.css("paddingRight"), i.css("paddingBottom"), i.css("paddingLeft")], t = 0; n.length > t; t++) this.borderDif[t] = (parseInt(n[t], 10) || 0) + (parseInt(r[t], 10) || 0);
                    i.css({
                        height: s.height() - this.borderDif[0] - this.borderDif[2] || 0,
                        width: s.width() - this.borderDif[1] - this.borderDif[3] || 0
                    })
                }
            }
        },
        _renderProxy: function() {
            var t = this.element,
                n = this.options;
            this.elementOffset = t.offset(), this._helper ? (this.helper = this.helper || e("<div style='overflow:hidden;'></div>"), this.helper.addClass(this._helper).css({
                width: this.element.outerWidth() - 1,
                height: this.element.outerHeight() - 1,
                position: "absolute",
                left: this.elementOffset.left + "px",
                top: this.elementOffset.top + "px",
                zIndex: ++n.zIndex
            }), this.helper.appendTo("body").disableSelection()) : this.helper = this.element
        },
        _change: {
            e: function(e, t) {
                return {
                    width: this.originalSize.width + t
                }
            },
            w: function(e, t) {
                var n = this.originalSize,
                    r = this.originalPosition;
                return {
                    left: r.left + t,
                    width: n.width - t
                }
            },
            n: function(e, t, n) {
                var r = this.originalSize,
                    i = this.originalPosition;
                return {
                    top: i.top + n,
                    height: r.height - n
                }
            },
            s: function(e, t, n) {
                return {
                    height: this.originalSize.height + n
                }
            },
            se: function(t, n, r) {
                return e.extend(this._change.s.apply(this, arguments), this._change.e.apply(this, [t, n, r]))
            },
            sw: function(t, n, r) {
                return e.extend(this._change.s.apply(this, arguments), this._change.w.apply(this, [t, n, r]))
            },
            ne: function(t, n, r) {
                return e.extend(this._change.n.apply(this, arguments), this._change.e.apply(this, [t, n, r]))
            },
            nw: function(t, n, r) {
                return e.extend(this._change.n.apply(this, arguments), this._change.w.apply(this, [t, n, r]))
            }
        },
        _propagate: function(t, n) {
            e.ui.plugin.call(this, t, [n, this.ui()]), "resize" !== t && this._trigger(t, n, this.ui())
        },
        plugins: {},
        ui: function() {
            return {
                originalElement: this.originalElement,
                element: this.element,
                helper: this.helper,
                position: this.position,
                size: this.size,
                originalSize: this.originalSize,
                originalPosition: this.originalPosition
            }
        }
    }), e.ui.plugin.add("resizable", "animate", {
        stop: function(t) {
            var n = e(this).data("ui-resizable"),
                r = n.options,
                i = n._proportionallyResizeElements,
                s = i.length && /textarea/i.test(i[0].nodeName),
                o = s && e.ui.hasScroll(i[0], "left") ? 0 : n.sizeDiff.height,
                u = s ? 0 : n.sizeDiff.width,
                a = {
                    width: n.size.width - u,
                    height: n.size.height - o
                },
                f = parseInt(n.element.css("left"), 10) + (n.position.left - n.originalPosition.left) || null,
                l = parseInt(n.element.css("top"), 10) + (n.position.top - n.originalPosition.top) || null;
            n.element.animate(e.extend(a, l && f ? {
                top: l,
                left: f
            } : {}), {
                duration: r.animateDuration,
                easing: r.animateEasing,
                step: function() {
                    var r = {
                        width: parseInt(n.element.css("width"), 10),
                        height: parseInt(n.element.css("height"), 10),
                        top: parseInt(n.element.css("top"), 10),
                        left: parseInt(n.element.css("left"), 10)
                    };
                    i && i.length && e(i[0]).css({
                        width: r.width,
                        height: r.height
                    }), n._updateCache(r), n._propagate("resize", t)
                }
            })
        }
    }), e.ui.plugin.add("resizable", "containment", {
        start: function() {
            var n, r, i, s, o, u, a, f = e(this).data("ui-resizable"),
                l = f.options,
                c = f.element,
                h = l.containment,
                p = h instanceof e ? h.get(0) : /parent/.test(h) ? c.parent().get(0) : h;
            p && (f.containerElement = e(p), /document/.test(h) || h === document ? (f.containerOffset = {
                left: 0,
                top: 0
            }, f.containerPosition = {
                left: 0,
                top: 0
            }, f.parentData = {
                element: e(document),
                left: 0,
                top: 0,
                width: e(document).width(),
                height: e(document).height() || document.body.parentNode.scrollHeight
            }) : (n = e(p), r = [], e(["Top", "Right", "Left", "Bottom"]).each(function(e, i) {
                r[e] = t(n.css("padding" + i))
            }), f.containerOffset = n.offset(), f.containerPosition = n.position(), f.containerSize = {
                height: n.innerHeight() - r[3],
                width: n.innerWidth() - r[1]
            }, i = f.containerOffset, s = f.containerSize.height, o = f.containerSize.width, u = e.ui.hasScroll(p, "left") ? p.scrollWidth : o, a = e.ui.hasScroll(p) ? p.scrollHeight : s, f.parentData = {
                element: p,
                left: i.left,
                top: i.top,
                width: u,
                height: a
            }))
        },
        resize: function(t) {
            var n, r, i, s, o = e(this).data("ui-resizable"),
                u = o.options,
                a = o.containerOffset,
                f = o.position,
                l = o._aspectRatio || t.shiftKey,
                c = {
                    top: 0,
                    left: 0
                },
                h = o.containerElement;
            h[0] !== document && /static/.test(h.css("position")) && (c = a), f.left < (o._helper ? a.left : 0) && (o.size.width = o.size.width + (o._helper ? o.position.left - a.left : o.position.left - c.left), l && (o.size.height = o.size.width / o.aspectRatio), o.position.left = u.helper ? a.left : 0), f.top < (o._helper ? a.top : 0) && (o.size.height = o.size.height + (o._helper ? o.position.top - a.top : o.position.top), l && (o.size.width = o.size.height * o.aspectRatio), o.position.top = o._helper ? a.top : 0), o.offset.left = o.parentData.left + o.position.left, o.offset.top = o.parentData.top + o.position.top, n = Math.abs((o._helper ? o.offset.left - c.left : o.offset.left - c.left) + o.sizeDiff.width), r = Math.abs((o._helper ? o.offset.top - c.top : o.offset.top - a.top) + o.sizeDiff.height), i = o.containerElement.get(0) === o.element.parent().get(0), s = /relative|absolute/.test(o.containerElement.css("position")), i && s && (n -= o.parentData.left), n + o.size.width >= o.parentData.width && (o.size.width = o.parentData.width - n, l && (o.size.height = o.size.width / o.aspectRatio)), r + o.size.height >= o.parentData.height && (o.size.height = o.parentData.height - r, l && (o.size.width = o.size.height * o.aspectRatio))
        },
        stop: function() {
            var t = e(this).data("ui-resizable"),
                n = t.options,
                r = t.containerOffset,
                i = t.containerPosition,
                s = t.containerElement,
                o = e(t.helper),
                u = o.offset(),
                a = o.outerWidth() - t.sizeDiff.width,
                f = o.outerHeight() - t.sizeDiff.height;
            t._helper && !n.animate && /relative/.test(s.css("position")) && e(this).css({
                left: u.left - i.left - r.left,
                width: a,
                height: f
            }), t._helper && !n.animate && /static/.test(s.css("position")) && e(this).css({
                left: u.left - i.left - r.left,
                width: a,
                height: f
            })
        }
    }), e.ui.plugin.add("resizable", "alsoResize", {
        start: function() {
            var t = e(this).data("ui-resizable"),
                n = t.options,
                r = function(t) {
                    e(t).each(function() {
                        var t = e(this);
                        t.data("ui-resizable-alsoresize", {
                            width: parseInt(t.width(), 10),
                            height: parseInt(t.height(), 10),
                            left: parseInt(t.css("left"), 10),
                            top: parseInt(t.css("top"), 10)
                        })
                    })
                };
            "object" != typeof n.alsoResize || n.alsoResize.parentNode ? r(n.alsoResize) : n.alsoResize.length ? (n.alsoResize = n.alsoResize[0], r(n.alsoResize)) : e.each(n.alsoResize, function(e) {
                r(e)
            })
        },
        resize: function(t, n) {
            var r = e(this).data("ui-resizable"),
                i = r.options,
                s = r.originalSize,
                o = r.originalPosition,
                u = {
                    height: r.size.height - s.height || 0,
                    width: r.size.width - s.width || 0,
                    top: r.position.top - o.top || 0,
                    left: r.position.left - o.left || 0
                },
                a = function(t, r) {
                    e(t).each(function() {
                        var t = e(this),
                            i = e(this).data("ui-resizable-alsoresize"),
                            s = {},
                            o = r && r.length ? r : t.parents(n.originalElement[0]).length ? ["width", "height"] : ["width", "height", "top", "left"];
                        e.each(o, function(e, t) {
                            var n = (i[t] || 0) + (u[t] || 0);
                            n && n >= 0 && (s[t] = n || null)
                        }), t.css(s)
                    })
                };
            "object" != typeof i.alsoResize || i.alsoResize.nodeType ? a(i.alsoResize) : e.each(i.alsoResize, function(e, t) {
                a(e, t)
            })
        },
        stop: function() {
            e(this).removeData("resizable-alsoresize")
        }
    }), e.ui.plugin.add("resizable", "ghost", {
        start: function() {
            var t = e(this).data("ui-resizable"),
                n = t.options,
                r = t.size;
            t.ghost = t.originalElement.clone(), t.ghost.css({
                opacity: .25,
                display: "block",
                position: "relative",
                height: r.height,
                width: r.width,
                margin: 0,
                left: 0,
                top: 0
            }).addClass("ui-resizable-ghost").addClass("string" == typeof n.ghost ? n.ghost : ""), t.ghost.appendTo(t.helper)
        },
        resize: function() {
            var t = e(this).data("ui-resizable");
            t.ghost && t.ghost.css({
                position: "relative",
                height: t.size.height,
                width: t.size.width
            })
        },
        stop: function() {
            var t = e(this).data("ui-resizable");
            t.ghost && t.helper && t.helper.get(0).removeChild(t.ghost.get(0))
        }
    }), e.ui.plugin.add("resizable", "grid", {
        resize: function() {
            var t = e(this).data("ui-resizable"),
                n = t.options,
                r = t.size,
                i = t.originalSize,
                s = t.originalPosition,
                o = t.axis,
                u = "number" == typeof n.grid ? [n.grid, n.grid] : n.grid,
                a = u[0] || 1,
                f = u[1] || 1,
                l = Math.round((r.width - i.width) / a) * a,
                c = Math.round((r.height - i.height) / f) * f,
                h = i.width + l,
                p = i.height + c,
                d = n.maxWidth && h > n.maxWidth,
                v = n.maxHeight && p > n.maxHeight,
                m = n.minWidth && n.minWidth > h,
                g = n.minHeight && n.minHeight > p;
            n.grid = u, m && (h += a), g && (p += f), d && (h -= a), v && (p -= f), /^(se|s|e)$/.test(o) ? (t.size.width = h, t.size.height = p) : /^(ne)$/.test(o) ? (t.size.width = h, t.size.height = p, t.position.top = s.top - c) : /^(sw)$/.test(o) ? (t.size.width = h, t.size.height = p, t.position.left = s.left - l) : (t.size.width = h, t.size.height = p, t.position.top = s.top - c, t.position.left = s.left - l)
        }
    })
})(jQuery);
(function(e) {
    jQuery.fn.extend({
        slimScroll: function(t) {
            var n = e.extend({
                width: "auto",
                height: "250px",
                size: "7px",
                color: "#000",
                position: "right",
                distance: "1px",
                start: "top",
                opacity: .4,
                alwaysVisible: !1,
                disableFadeOut: !1,
                railVisible: !1,
                railColor: "#333",
                railOpacity: .2,
                railDraggable: !0,
                railClass: "slimScrollRail",
                barClass: "slimScrollBar",
                wrapperClass: "slimScrollDiv",
                allowPageScroll: !1,
                wheelStep: 20,
                touchScrollStep: 200
            }, t);
            this.each(function() {
                function r(t) {
                    if (h) {
                        t = t || window.event;
                        var r = 0;
                        t.wheelDelta && (r = -t.wheelDelta / 120);
                        t.detail && (r = t.detail / 3);
                        e(t.target || t.srcTarget).closest("." + n.wrapperClass).is(S.parent()) && i(r, !0);
                        t.preventDefault && !E && t.preventDefault();
                        E || (t.returnValue = !1)
                    }
                }

                function i(e, t, r) {
                    var i = e,
                        s = S.outerHeight() - T.outerHeight();
                    t && (i = parseInt(T.css("top")) + e * parseInt(n.wheelStep) / 100 * T.outerHeight(), i = Math.min(Math.max(i, 0), s), i = 0 < e ? Math.ceil(i) : Math.floor(i), T.css({
                        top: i + "px"
                    }));
                    y = parseInt(T.css("top")) / (S.outerHeight() - T.outerHeight());
                    i = y * (S[0].scrollHeight - S.outerHeight());
                    r && (i = e, e = i / S[0].scrollHeight * S.outerHeight(), e = Math.min(Math.max(e, 0), s), T.css({
                        top: e + "px"
                    }));
                    S.scrollTop(i);
                    S.trigger("slimscrolling", ~~i);
                    u();
                    c()
                }

                function s() {
                    window.addEventListener ? (this.addEventListener("DOMMouseScroll", r, !1), this.addEventListener("mousewheel", r, !1)) : document.attachEvent("onmousewheel", r)
                }

                function o() {
                    g = Math.max(S.outerHeight() / S[0].scrollHeight * S.outerHeight(), w);
                    T.css({
                        height: g + "px"
                    });
                    var e = g == S.outerHeight() ? "none" : "block";
                    T.css({
                        display: e
                    })
                }

                function u() {
                    o();
                    clearTimeout(v);
                    y == ~~y && (E = n.allowPageScroll, b != y && S.trigger("slimscroll", 0 == ~~y ? "top" : "bottom"));
                    b = y;
                    g >= S.outerHeight() ? E = !0 : (T.stop(!0, !0).fadeIn("fast"), n.railVisible && N.stop(!0, !0).fadeIn("fast"))
                }

                function c() {
                    n.alwaysVisible || (v = setTimeout(function() {
                        if ((!n.disableFadeOut || !h) && !p && !d) T.fadeOut("slow"), N.fadeOut("slow")
                    }, 1e3))
                }
                var h, p, d, v, m, g, y, b, w = 30,
                    E = !1,
                    S = e(this);
                if (S.parent().hasClass(n.wrapperClass)) {
                    var x = S.scrollTop(),
                        T = S.parent().find("." + n.barClass),
                        N = S.parent().find("." + n.railClass);
                    o();
                    if (e.isPlainObject(t)) {
                        if ("scrollTo" in t) x = parseInt(n.scrollTo);
                        else if ("scrollBy" in t) x += parseInt(n.scrollBy);
                        else if ("destroy" in t) {
                            T.remove();
                            N.remove();
                            S.unwrap();
                            return
                        }
                        i(x, !1, !0)
                    }
                } else {
                    n.height = "auto" == n.height ? S.parent().innerHeight() : n.height;
                    x = e("<div></div>").addClass(n.wrapperClass).css({
                        position: "relative",
                        overflow: "hidden",
                        width: n.width,
                        height: n.height
                    });
                    S.css({
                        overflow: "hidden",
                        width: n.width,
                        height: n.height
                    });
                    var N = e("<div></div>").addClass(n.railClass).css({
                            width: n.size,
                            height: "100%",
                            position: "absolute",
                            top: 0,
                            display: n.alwaysVisible && n.railVisible ? "block" : "none",
                            "border-radius": n.size,
                            background: n.railColor,
                            opacity: n.railOpacity,
                            zIndex: 90
                        }),
                        T = e("<div></div>").addClass(n.barClass).css({
                            background: n.color,
                            width: n.size,
                            position: "absolute",
                            top: 0,
                            opacity: n.opacity,
                            display: n.alwaysVisible ? "block" : "none",
                            "border-radius": n.size,
                            BorderRadius: n.size,
                            MozBorderRadius: n.size,
                            WebkitBorderRadius: n.size,
                            zIndex: 99
                        }),
                        C = "right" == n.position ? {
                            right: n.distance
                        } : {
                            left: n.distance
                        };
                    N.css(C);
                    T.css(C);
                    S.wrap(x);
                    S.parent().append(T);
                    S.parent().append(N);
                    n.railDraggable && T.draggable({
                        axis: "y",
                        containment: "parent",
                        start: function() {
                            d = !0
                        },
                        stop: function() {
                            d = !1;
                            c()
                        },
                        drag: function() {
                            i(0, e(this).position().top, !1)
                        }
                    });
                    N.hover(function() {
                        u()
                    }, function() {
                        c()
                    });
                    T.hover(function() {
                        p = !0
                    }, function() {
                        p = !1
                    });
                    S.hover(function() {
                        h = !0;
                        u();
                        c()
                    }, function() {
                        h = !1;
                        c()
                    });
                    S.bind("touchstart", function(e) {
                        e.originalEvent.touches.length && (m = e.originalEvent.touches[0].pageY)
                    });
                    S.bind("touchmove", function(e) {
                        e.originalEvent.preventDefault();
                        e.originalEvent.touches.length && i((m - e.originalEvent.touches[0].pageY) / n.touchScrollStep, !0)
                    });
                    "bottom" === n.start ? (T.css({
                        top: S.outerHeight() - T.outerHeight()
                    }), i(0, !0)) : "top" !== n.start && (i(e(n.start).position().top, null, !0), n.alwaysVisible || T.hide());
                    s();
                    o()
                }
            });
            return this
        }
    });
    jQuery.fn.extend({
        slimscroll: jQuery.fn.slimScroll
    })
})(jQuery);
(function(X, l, n) {
        var L = function(h) {
            var j = function(e) {
                function o(e, t) {
                    var r = j.defaults.columns,
                        i = e.aoColumns.length,
                        r = h.extend({}, j.models.oColumn, r, {
                            sSortingClass: e.oClasses.sSortable,
                            sSortingClassJUI: e.oClasses.sSortJUI,
                            nTh: t ? t : l.createElement("th"),
                            sTitle: r.sTitle ? r.sTitle : t ? t.innerHTML : "",
                            aDataSort: r.aDataSort ? r.aDataSort : [i],
                            mData: r.mData ? r.oDefaults : i
                        });
                    e.aoColumns.push(r);
                    if (e.aoPreSearchCols[i] === n || null === e.aoPreSearchCols[i]) e.aoPreSearchCols[i] = h.extend({}, j.models.oSearch);
                    else if (r = e.aoPreSearchCols[i], r.bRegex === n && (r.bRegex = !0), r.bSmart === n && (r.bSmart = !0), r.bCaseInsensitive === n) r.bCaseInsensitive = !0;
                    m(e, i, null)
                }

                function m(e, t, r) {
                    var i = e.aoColumns[t];
                    r !== n && null !== r && (r.mDataProp && !r.mData && (r.mData = r.mDataProp), r.sType !== n && (i.sType = r.sType, i._bAutoType = !1), h.extend(i, r), p(i, r, "sWidth", "sWidthOrig"), r.iDataSort !== n && (i.aDataSort = [r.iDataSort]), p(i, r, "aDataSort"));
                    var s = i.mRender ? Q(i.mRender) : null,
                        o = Q(i.mData);
                    i.fnGetData = function(e, t) {
                        var n = o(e, t);
                        return i.mRender && t && "" !== t ? s(n, t, e) : n
                    };
                    i.fnSetData = L(i.mData);
                    e.oFeatures.bSort || (i.bSortable = !1);
                    !i.bSortable || -1 == h.inArray("asc", i.asSorting) && -1 == h.inArray("desc", i.asSorting) ? (i.sSortingClass = e.oClasses.sSortableNone, i.sSortingClassJUI = "") : -1 == h.inArray("asc", i.asSorting) && -1 == h.inArray("desc", i.asSorting) ? (i.sSortingClass = e.oClasses.sSortable, i.sSortingClassJUI = e.oClasses.sSortJUI) : -1 != h.inArray("asc", i.asSorting) && -1 == h.inArray("desc", i.asSorting) ? (i.sSortingClass = e.oClasses.sSortableAsc, i.sSortingClassJUI = e.oClasses.sSortJUIAscAllowed) : -1 == h.inArray("asc", i.asSorting) && -1 != h.inArray("desc", i.asSorting) && (i.sSortingClass = e.oClasses.sSortableDesc, i.sSortingClassJUI = e.oClasses.sSortJUIDescAllowed)
                }

                function k(e) {
                    if (!1 === e.oFeatures.bAutoWidth) return !1;
                    da(e);
                    for (var t = 0, n = e.aoColumns.length; t < n; t++) e.aoColumns[t].nTh.style.width = e.aoColumns[t].sWidth
                }

                function G(e, t) {
                    var n = r(e, "bVisible");
                    return "number" === typeof n[t] ? n[t] : null
                }

                function R(e, t) {
                    var n = r(e, "bVisible"),
                        n = h.inArray(t, n);
                    return -1 !== n ? n : null
                }

                function t(e) {
                    return r(e, "bVisible").length
                }

                function r(e, t) {
                    var n = [];
                    h.map(e.aoColumns, function(e, r) {
                        e[t] && n.push(r)
                    });
                    return n
                }

                function B(e) {
                    for (var t = j.ext.aTypes, n = t.length, r = 0; r < n; r++) {
                        var i = t[r](e);
                        if (null !== i) return i
                    }
                    return "string"
                }

                function u(e, t) {
                    for (var n = t.split(","), r = [], i = 0, s = e.aoColumns.length; i < s; i++)
                        for (var o = 0; o < s; o++)
                            if (e.aoColumns[i].sName == n[o]) {
                                r.push(o);
                                break
                            }
                    return r
                }

                function M(e) {
                    for (var t = "", n = 0, r = e.aoColumns.length; n < r; n++) t += e.aoColumns[n].sName + ",";
                    return t.length == r ? "" : t.slice(0, -1)
                }

                function ta(e, t, n, r) {
                    var i, s, u, a, f;
                    if (t)
                        for (i = t.length - 1; 0 <= i; i--) {
                            var l = t[i].aTargets;
                            h.isArray(l) || D(e, 1, "aTargets must be an array of targets, not a " + typeof l);
                            s = 0;
                            for (u = l.length; s < u; s++)
                                if ("number" === typeof l[s] && 0 <= l[s]) {
                                    for (; e.aoColumns.length <= l[s];) o(e);
                                    r(l[s], t[i])
                                } else if ("number" === typeof l[s] && 0 > l[s]) r(e.aoColumns.length + l[s], t[i]);
                            else if ("string" === typeof l[s]) {
                                a = 0;
                                for (f = e.aoColumns.length; a < f; a++)("_all" == l[s] || h(e.aoColumns[a].nTh).hasClass(l[s])) && r(a, t[i])
                            }
                        }
                    if (n) {
                        i = 0;
                        for (e = n.length; i < e; i++) r(i, n[i])
                    }
                }

                function H(e, t) {
                    var n;
                    n = h.isArray(t) ? t.slice() : h.extend(!0, {}, t);
                    var r = e.aoData.length,
                        i = h.extend(!0, {}, j.models.oRow);
                    i._aData = n;
                    e.aoData.push(i);
                    for (var s, i = 0, o = e.aoColumns.length; i < o; i++) n = e.aoColumns[i], "function" === typeof n.fnRender && n.bUseRendered && null !== n.mData ? F(e, r, i, S(e, r, i)) : F(e, r, i, v(e, r, i)), n._bAutoType && "string" != n.sType && (s = v(e, r, i, "type"), null !== s && "" !== s && (s = B(s), null === n.sType ? n.sType = s : n.sType != s && "html" != n.sType && (n.sType = "string")));
                    e.aiDisplayMaster.push(r);
                    e.oFeatures.bDeferRender || ea(e, r);
                    return r
                }

                function ua(e) {
                    var t, n, r, i, s, o, u;
                    if (e.bDeferLoading || null === e.sAjaxSource)
                        for (t = e.nTBody.firstChild; t;) {
                            if ("TR" == t.nodeName.toUpperCase()) {
                                n = e.aoData.length;
                                t._DT_RowIndex = n;
                                e.aoData.push(h.extend(!0, {}, j.models.oRow, {
                                    nTr: t
                                }));
                                e.aiDisplayMaster.push(n);
                                s = t.firstChild;
                                for (r = 0; s;) {
                                    o = s.nodeName.toUpperCase();
                                    if ("TD" == o || "TH" == o) F(e, n, r, h.trim(s.innerHTML)), r++;
                                    s = s.nextSibling
                                }
                            }
                            t = t.nextSibling
                        }
                    i = T(e);
                    r = [];
                    t = 0;
                    for (n = i.length; t < n; t++)
                        for (s = i[t].firstChild; s;) o = s.nodeName.toUpperCase(), ("TD" == o || "TH" == o) && r.push(s), s = s.nextSibling;
                    n = 0;
                    for (i = e.aoColumns.length; n < i; n++) {
                        u = e.aoColumns[n];
                        null === u.sTitle && (u.sTitle = u.nTh.innerHTML);
                        var a = u._bAutoType,
                            f = "function" === typeof u.fnRender,
                            l = null !== u.sClass,
                            c = u.bVisible,
                            p, d;
                        if (a || f || l || !c) {
                            o = 0;
                            for (t = e.aoData.length; o < t; o++) s = e.aoData[o], p = r[o * i + n], a && "string" != u.sType && (d = v(e, o, n, "type"), "" !== d && (d = B(d), null === u.sType ? u.sType = d : u.sType != d && "html" != u.sType && (u.sType = "string"))), u.mRender ? p.innerHTML = v(e, o, n, "display") : u.mData !== n && (p.innerHTML = v(e, o, n, "display")), f && (d = S(e, o, n), p.innerHTML = d, u.bUseRendered && F(e, o, n, d)), l && (p.className += " " + u.sClass), c ? s._anHidden[n] = null : (s._anHidden[n] = p, p.parentNode.removeChild(p)), u.fnCreatedCell && u.fnCreatedCell.call(e.oInstance, p, v(e, o, n, "display"), s._aData, o, n)
                        }
                    }
                    if (0 !== e.aoRowCreatedCallback.length) {
                        t = 0;
                        for (n = e.aoData.length; t < n; t++) s = e.aoData[t], A(e, "aoRowCreatedCallback", null, [s.nTr, s._aData, t])
                    }
                }

                function I(e, t) {
                    return t._DT_RowIndex !== n ? t._DT_RowIndex : null
                }

                function fa(e, t, n) {
                    for (var t = J(e, t), r = 0, e = e.aoColumns.length; r < e; r++)
                        if (t[r] === n) return r;
                    return -1
                }

                function Y(e, t, n, r) {
                    for (var i = [], s = 0, o = r.length; s < o; s++) i.push(v(e, t, r[s], n));
                    return i
                }

                function v(e, t, r, i) {
                    var s = e.aoColumns[r];
                    if ((r = s.fnGetData(e.aoData[t]._aData, i)) === n) return e.iDrawError != e.iDraw && null === s.sDefaultContent && (D(e, 0, "Requested unknown parameter " + ("function" == typeof s.mData ? "{mData function}" : "'" + s.mData + "'") + " from the data source for row " + t), e.iDrawError = e.iDraw), s.sDefaultContent;
                    if (null === r && null !== s.sDefaultContent) r = s.sDefaultContent;
                    else if ("function" === typeof r) return r();
                    return "display" == i && null === r ? "" : r
                }

                function F(e, t, n, r) {
                    e.aoColumns[n].fnSetData(e.aoData[t]._aData, r)
                }

                function Q(e) {
                    if (null === e) return function() {
                        return null
                    };
                    if ("function" === typeof e) return function(t, n, r) {
                        return e(t, n, r)
                    };
                    if ("string" === typeof e && (-1 !== e.indexOf(".") || -1 !== e.indexOf("["))) {
                        var t = function(e, r, i) {
                            var s = i.split("."),
                                o;
                            if ("" !== i) {
                                var u = 0;
                                for (o = s.length; u < o; u++) {
                                    if (i = s[u].match(U)) {
                                        s[u] = s[u].replace(U, "");
                                        "" !== s[u] && (e = e[s[u]]);
                                        o = [];
                                        s.splice(0, u + 1);
                                        for (var s = s.join("."), u = 0, a = e.length; u < a; u++) o.push(t(e[u], r, s));
                                        e = i[0].substring(1, i[0].length - 1);
                                        e = "" === e ? o : o.join(e);
                                        break
                                    }
                                    if (null === e || e[s[u]] === n) return n;
                                    e = e[s[u]]
                                }
                            }
                            return e
                        };
                        return function(n, r) {
                            return t(n, r, e)
                        }
                    }
                    return function(t) {
                        return t[e]
                    }
                }

                function L(e) {
                    if (null === e) return function() {};
                    if ("function" === typeof e) return function(t, n) {
                        e(t, "set", n)
                    };
                    if ("string" === typeof e && (-1 !== e.indexOf(".") || -1 !== e.indexOf("["))) {
                        var t = function(e, r, i) {
                            var i = i.split("."),
                                s, o, u = 0;
                            for (o = i.length - 1; u < o; u++) {
                                if (s = i[u].match(U)) {
                                    i[u] = i[u].replace(U, "");
                                    e[i[u]] = [];
                                    s = i.slice();
                                    s.splice(0, u + 1);
                                    o = s.join(".");
                                    for (var a = 0, f = r.length; a < f; a++) s = {}, t(s, r[a], o), e[i[u]].push(s);
                                    return
                                }
                                if (null === e[i[u]] || e[i[u]] === n) e[i[u]] = {};
                                e = e[i[u]]
                            }
                            e[i[i.length - 1].replace(U, "")] = r
                        };
                        return function(n, r) {
                            return t(n, r, e)
                        }
                    }
                    return function(t, n) {
                        t[e] = n
                    }
                }

                function Z(e) {
                    for (var t = [], n = e.aoData.length, r = 0; r < n; r++) t.push(e.aoData[r]._aData);
                    return t
                }

                function ga(e) {
                    e.aoData.splice(0, e.aoData.length);
                    e.aiDisplayMaster.splice(0, e.aiDisplayMaster.length);
                    e.aiDisplay.splice(0, e.aiDisplay.length);
                    y(e)
                }

                function ha(e, t) {
                    for (var n = -1, r = 0, i = e.length; r < i; r++) e[r] == t ? n = r : e[r] > t && e[r] --; - 1 != n && e.splice(n, 1)
                }

                function S(e, t, n) {
                    var r = e.aoColumns[n];
                    return r.fnRender({
                        iDataRow: t,
                        iDataColumn: n,
                        oSettings: e,
                        aData: e.aoData[t]._aData,
                        mDataProp: r.mData
                    }, v(e, t, n, "display"))
                }

                function ea(e, t) {
                    var n = e.aoData[t],
                        r;
                    if (null === n.nTr) {
                        n.nTr = l.createElement("tr");
                        n.nTr._DT_RowIndex = t;
                        n._aData.DT_RowId && (n.nTr.id = n._aData.DT_RowId);
                        n._aData.DT_RowClass && (n.nTr.className = n._aData.DT_RowClass);
                        for (var i = 0, s = e.aoColumns.length; i < s; i++) {
                            var o = e.aoColumns[i];
                            r = l.createElement(o.sCellType);
                            r.innerHTML = "function" === typeof o.fnRender && (!o.bUseRendered || null === o.mData) ? S(e, t, i) : v(e, t, i, "display");
                            null !== o.sClass && (r.className = o.sClass);
                            o.bVisible ? (n.nTr.appendChild(r), n._anHidden[i] = null) : n._anHidden[i] = r;
                            o.fnCreatedCell && o.fnCreatedCell.call(e.oInstance, r, v(e, t, i, "display"), n._aData, t, i)
                        }
                        A(e, "aoRowCreatedCallback", null, [n.nTr, n._aData, t])
                    }
                }

                function va(e) {
                    var t, n, r;
                    if (0 !== h("th, td", e.nTHead).length) {
                        t = 0;
                        for (r = e.aoColumns.length; t < r; t++)
                            if (n = e.aoColumns[t].nTh, n.setAttribute("role", "columnheader"), e.aoColumns[t].bSortable && (n.setAttribute("tabindex", e.iTabIndex), n.setAttribute("aria-controls", e.sTableId)), null !== e.aoColumns[t].sClass && h(n).addClass(e.aoColumns[t].sClass), e.aoColumns[t].sTitle != n.innerHTML) n.innerHTML = e.aoColumns[t].sTitle
                    } else {
                        var i = l.createElement("tr");
                        t = 0;
                        for (r = e.aoColumns.length; t < r; t++) n = e.aoColumns[t].nTh, n.innerHTML = e.aoColumns[t].sTitle, n.setAttribute("tabindex", "0"), null !== e.aoColumns[t].sClass && h(n).addClass(e.aoColumns[t].sClass), i.appendChild(n);
                        h(e.nTHead).html("")[0].appendChild(i);
                        V(e.aoHeader, e.nTHead)
                    }
                    h(e.nTHead).children("tr").attr("role", "row");
                    if (e.bJUI) {
                        t = 0;
                        for (r = e.aoColumns.length; t < r; t++) {
                            n = e.aoColumns[t].nTh;
                            i = l.createElement("div");
                            i.className = e.oClasses.sSortJUIWrapper;
                            h(n).contents().appendTo(i);
                            var s = l.createElement("span");
                            s.className = e.oClasses.sSortIcon;
                            i.appendChild(s);
                            n.appendChild(i)
                        }
                    }
                    if (e.oFeatures.bSort)
                        for (t = 0; t < e.aoColumns.length; t++) !1 !== e.aoColumns[t].bSortable ? ia(e, e.aoColumns[t].nTh, t) : h(e.aoColumns[t].nTh).addClass(e.oClasses.sSortableNone);
                    "" !== e.oClasses.sFooterTH && h(e.nTFoot).children("tr").children("th").addClass(e.oClasses.sFooterTH);
                    if (null !== e.nTFoot) {
                        n = N(e, null, e.aoFooter);
                        t = 0;
                        for (r = e.aoColumns.length; t < r; t++) n[t] && (e.aoColumns[t].nTf = n[t], e.aoColumns[t].sClass && h(n[t]).addClass(e.aoColumns[t].sClass))
                    }
                }

                function W(e, t, r) {
                    var i, s, o, u = [],
                        a = [],
                        f = e.aoColumns.length,
                        l;
                    r === n && (r = !1);
                    i = 0;
                    for (s = t.length; i < s; i++) {
                        u[i] = t[i].slice();
                        u[i].nTr = t[i].nTr;
                        for (o = f - 1; 0 <= o; o--) !e.aoColumns[o].bVisible && !r && u[i].splice(o, 1);
                        a.push([])
                    }
                    i = 0;
                    for (s = u.length; i < s; i++) {
                        if (e = u[i].nTr)
                            for (; o = e.firstChild;) e.removeChild(o);
                        o = 0;
                        for (t = u[i].length; o < t; o++)
                            if (l = f = 1, a[i][o] === n) {
                                e.appendChild(u[i][o].cell);
                                for (a[i][o] = 1; u[i + f] !== n && u[i][o].cell == u[i + f][o].cell;) a[i + f][o] = 1, f++;
                                for (; u[i][o + l] !== n && u[i][o].cell == u[i][o + l].cell;) {
                                    for (r = 0; r < f; r++) a[i + r][o + l] = 1;
                                    l++
                                }
                                u[i][o].cell.rowSpan = f;
                                u[i][o].cell.colSpan = l
                            }
                    }
                }

                function x(e) {
                    var r = A(e, "aoPreDrawCallback", "preDraw", [e]);
                    if (-1 !== h.inArray(!1, r)) E(e, !1);
                    else {
                        var i, s, r = [],
                            o = 0,
                            u = e.asStripeClasses.length;
                        i = e.aoOpenRows.length;
                        e.bDrawing = !0;
                        e.iInitDisplayStart !== n && -1 != e.iInitDisplayStart && (e._iDisplayStart = e.oFeatures.bServerSide ? e.iInitDisplayStart : e.iInitDisplayStart >= e.fnRecordsDisplay() ? 0 : e.iInitDisplayStart, e.iInitDisplayStart = -1, y(e));
                        if (e.bDeferLoading) e.bDeferLoading = !1, e.iDraw++;
                        else if (e.oFeatures.bServerSide) {
                            if (!e.bDestroying && !wa(e)) return
                        } else e.iDraw++;
                        if (0 !== e.aiDisplay.length) {
                            var a = e._iDisplayStart;
                            s = e._iDisplayEnd;
                            e.oFeatures.bServerSide && (a = 0, s = e.aoData.length);
                            for (; a < s; a++) {
                                var f = e.aoData[e.aiDisplay[a]];
                                null === f.nTr && ea(e, e.aiDisplay[a]);
                                var c = f.nTr;
                                if (0 !== u) {
                                    var p = e.asStripeClasses[o % u];
                                    f._sRowStripe != p && (h(c).removeClass(f._sRowStripe).addClass(p), f._sRowStripe = p)
                                }
                                A(e, "aoRowCallback", null, [c, e.aoData[e.aiDisplay[a]]._aData, o, a]);
                                r.push(c);
                                o++;
                                if (0 !== i)
                                    for (f = 0; f < i; f++)
                                        if (c == e.aoOpenRows[f].nParent) {
                                            r.push(e.aoOpenRows[f].nTr);
                                            break
                                        }
                            }
                        } else r[0] = l.createElement("tr"), e.asStripeClasses[0] && (r[0].className = e.asStripeClasses[0]), i = e.oLanguage, u = i.sZeroRecords, 1 == e.iDraw && null !== e.sAjaxSource && !e.oFeatures.bServerSide ? u = i.sLoadingRecords : i.sEmptyTable && 0 === e.fnRecordsTotal() && (u = i.sEmptyTable), i = l.createElement("td"), i.setAttribute("valign", "top"), i.colSpan = t(e), i.className = e.oClasses.sRowEmpty, i.innerHTML = ja(e, u), r[o].appendChild(i);
                        A(e, "aoHeaderCallback", "header", [h(e.nTHead).children("tr")[0], Z(e), e._iDisplayStart, e.fnDisplayEnd(), e.aiDisplay]);
                        A(e, "aoFooterCallback", "footer", [h(e.nTFoot).children("tr")[0], Z(e), e._iDisplayStart, e.fnDisplayEnd(), e.aiDisplay]);
                        o = l.createDocumentFragment();
                        i = l.createDocumentFragment();
                        if (e.nTBody) {
                            u = e.nTBody.parentNode;
                            i.appendChild(e.nTBody);
                            if (!e.oScroll.bInfinite || !e._bInitComplete || e.bSorted || e.bFiltered)
                                for (; i = e.nTBody.firstChild;) e.nTBody.removeChild(i);
                            i = 0;
                            for (s = r.length; i < s; i++) o.appendChild(r[i]);
                            e.nTBody.appendChild(o);
                            null !== u && u.appendChild(e.nTBody)
                        }
                        A(e, "aoDrawCallback", "draw", [e]);
                        e.bSorted = !1;
                        e.bFiltered = !1;
                        e.bDrawing = !1;
                        e.oFeatures.bServerSide && (E(e, !1), e._bInitComplete || $(e))
                    }
                }

                function aa(e) {
                    e.oFeatures.bSort ? O(e, e.oPreviousSearch) : e.oFeatures.bFilter ? K(e, e.oPreviousSearch) : (y(e), x(e))
                }

                function xa(e) {
                    var t = h("<div></div>")[0];
                    e.nTable.parentNode.insertBefore(t, e.nTable);
                    e.nTableWrapper = h('<div id="' + e.sTableId + '_wrapper" class="' + e.oClasses.sWrapper + '" role="grid"></div>')[0];
                    e.nTableReinsertBefore = e.nTable.nextSibling;
                    for (var n = e.nTableWrapper, r = e.sDom.split(""), i, s, o, u, a, f, l, c = 0; c < r.length; c++) {
                        s = 0;
                        o = r[c];
                        if ("<" == o) {
                            u = h("<div></div>")[0];
                            a = r[c + 1];
                            if ("'" == a || '"' == a) {
                                f = "";
                                for (l = 2; r[c + l] != a;) f += r[c + l], l++;
                                "H" == f ? f = e.oClasses.sJUIHeader : "F" == f && (f = e.oClasses.sJUIFooter); - 1 != f.indexOf(".") ? (a = f.split("."), u.id = a[0].substr(1, a[0].length - 1), u.className = a[1]) : "#" == f.charAt(0) ? u.id = f.substr(1, f.length - 1) : u.className = f;
                                c += l
                            }
                            n.appendChild(u);
                            n = u
                        } else if (">" == o) n = n.parentNode;
                        else if ("l" == o && e.oFeatures.bPaginate && e.oFeatures.bLengthChange) i = ya(e), s = 1;
                        else if ("f" == o && e.oFeatures.bFilter) i = za(e), s = 1;
                        else if ("r" == o && e.oFeatures.bProcessing) i = Aa(e), s = 1;
                        else if ("t" == o) i = Ba(e), s = 1;
                        else if ("i" == o && e.oFeatures.bInfo) i = Ca(e), s = 1;
                        else if ("p" == o && e.oFeatures.bPaginate) i = Da(e), s = 1;
                        else if (0 !== j.ext.aoFeatures.length) {
                            u = j.ext.aoFeatures;
                            l = 0;
                            for (a = u.length; l < a; l++)
                                if (o == u[l].cFeature) {
                                    (i = u[l].fnInit(e)) && (s = 1);
                                    break
                                }
                        }
                        1 == s && null !== i && ("object" !== typeof e.aanFeatures[o] && (e.aanFeatures[o] = []), e.aanFeatures[o].push(i), n.appendChild(i))
                    }
                    t.parentNode.replaceChild(e.nTableWrapper, t)
                }

                function V(e, t) {
                    var n = h(t).children("tr"),
                        r, i, s, o, u, a, f, l, c, p;
                    e.splice(0, e.length);
                    s = 0;
                    for (a = n.length; s < a; s++) e.push([]);
                    s = 0;
                    for (a = n.length; s < a; s++) {
                        r = n[s];
                        for (i = r.firstChild; i;) {
                            if ("TD" == i.nodeName.toUpperCase() || "TH" == i.nodeName.toUpperCase()) {
                                l = 1 * i.getAttribute("colspan");
                                c = 1 * i.getAttribute("rowspan");
                                l = !l || 0 === l || 1 === l ? 1 : l;
                                c = !c || 0 === c || 1 === c ? 1 : c;
                                o = 0;
                                for (u = e[s]; u[o];) o++;
                                f = o;
                                p = 1 === l ? !0 : !1;
                                for (u = 0; u < l; u++)
                                    for (o = 0; o < c; o++) e[s + o][f + u] = {
                                        cell: i,
                                        unique: p
                                    }, e[s + o].nTr = r
                            }
                            i = i.nextSibling
                        }
                    }
                }

                function N(e, t, n) {
                    var r = [];
                    n || (n = e.aoHeader, t && (n = [], V(n, t)));
                    for (var t = 0, i = n.length; t < i; t++)
                        for (var s = 0, o = n[t].length; s < o; s++)
                            if (n[t][s].unique && (!r[s] || !e.bSortCellsTop)) r[s] = n[t][s].cell;
                    return r
                }

                function wa(e) {
                    if (e.bAjaxDataGet) {
                        e.iDraw++;
                        E(e, !0);
                        var t = Ea(e);
                        ka(e, t);
                        e.fnServerData.call(e.oInstance, e.sAjaxSource, t, function(t) {
                            Fa(e, t)
                        }, e);
                        return !1
                    }
                    return !0
                }

                function Ea(e) {
                    var t = e.aoColumns.length,
                        n = [],
                        r, i, s, o;
                    n.push({
                        name: "sEcho",
                        value: e.iDraw
                    });
                    n.push({
                        name: "iColumns",
                        value: t
                    });
                    n.push({
                        name: "sColumns",
                        value: M(e)
                    });
                    n.push({
                        name: "iDisplayStart",
                        value: e._iDisplayStart
                    });
                    n.push({
                        name: "iDisplayLength",
                        value: !1 !== e.oFeatures.bPaginate ? e._iDisplayLength : -1
                    });
                    for (s = 0; s < t; s++) r = e.aoColumns[s].mData, n.push({
                        name: "mDataProp_" + s,
                        value: "function" === typeof r ? "function" : r
                    });
                    if (!1 !== e.oFeatures.bFilter) {
                        n.push({
                            name: "sSearch",
                            value: e.oPreviousSearch.sSearch
                        });
                        n.push({
                            name: "bRegex",
                            value: e.oPreviousSearch.bRegex
                        });
                        for (s = 0; s < t; s++) n.push({
                            name: "sSearch_" + s,
                            value: e.aoPreSearchCols[s].sSearch
                        }), n.push({
                            name: "bRegex_" + s,
                            value: e.aoPreSearchCols[s].bRegex
                        }), n.push({
                            name: "bSearchable_" + s,
                            value: e.aoColumns[s].bSearchable
                        })
                    }
                    if (!1 !== e.oFeatures.bSort) {
                        var u = 0;
                        r = null !== e.aaSortingFixed ? e.aaSortingFixed.concat(e.aaSorting) : e.aaSorting.slice();
                        for (s = 0; s < r.length; s++) {
                            i = e.aoColumns[r[s][0]].aDataSort;
                            for (o = 0; o < i.length; o++) n.push({
                                name: "iSortCol_" + u,
                                value: i[o]
                            }), n.push({
                                name: "sSortDir_" + u,
                                value: r[s][1]
                            }), u++
                        }
                        n.push({
                            name: "iSortingCols",
                            value: u
                        });
                        for (s = 0; s < t; s++) n.push({
                            name: "bSortable_" + s,
                            value: e.aoColumns[s].bSortable
                        })
                    }
                    return n
                }

                function ka(e, t) {
                    A(e, "aoServerParams", "serverParams", [t])
                }

                function Fa(e, t) {
                    if (t.sEcho !== n) {
                        if (1 * t.sEcho < e.iDraw) return;
                        e.iDraw = 1 * t.sEcho
                    }(!e.oScroll.bInfinite || e.oScroll.bInfinite && (e.bSorted || e.bFiltered)) && ga(e);
                    e._iRecordsTotal = parseInt(t.iTotalRecords, 10);
                    e._iRecordsDisplay = parseInt(t.iTotalDisplayRecords, 10);
                    var r = M(e),
                        r = t.sColumns !== n && "" !== r && t.sColumns != r,
                        i;
                    r && (i = u(e, t.sColumns));
                    for (var s = Q(e.sAjaxDataProp)(t), o = 0, a = s.length; o < a; o++)
                        if (r) {
                            for (var f = [], l = 0, c = e.aoColumns.length; l < c; l++) f.push(s[o][i[l]]);
                            H(e, f)
                        } else H(e, s[o]);
                    e.aiDisplay = e.aiDisplayMaster.slice();
                    e.bAjaxDataGet = !1;
                    x(e);
                    e.bAjaxDataGet = !0;
                    E(e, !1)
                }

                function za(e) {
                    var t = e.oPreviousSearch,
                        n = e.oLanguage.sSearch,
                        n = -1 !== n.indexOf("_INPUT_") ? n.replace("_INPUT_", '<input type="text" />') : "" === n ? '<input type="text" />' : n + ' <input type="text" />',
                        r = l.createElement("div");
                    r.className = e.oClasses.sFilter;
                    r.innerHTML = "<label>" + n + "</label>";
                    e.aanFeatures.f || (r.id = e.sTableId + "_filter");
                    n = h('input[type="text"]', r);
                    r._DT_Input = n[0];
                    n.val(t.sSearch.replace('"', ""
                            "));
                            n.bind("keyup.DT", function() {
                                for (var n = e.aanFeatures.f, r = this.value === "" ? "" : this.value, i = 0, s = n.length; i < s; i++) n[i] != h(this).parents("div.dataTables_filter")[0] && h(n[i]._DT_Input).val(r);
                                r != t.sSearch && K(e, {
                                    sSearch: r,
                                    bRegex: t.bRegex,
                                    bSmart: t.bSmart,
                                    bCaseInsensitive: t.bCaseInsensitive
                                })
                            }); n.attr("aria-controls", e.sTableId).bind("keypress.DT", function(e) {
                                if (e.keyCode == 13) return false
                            });
                            return r
                        }

                        function K(e, t, n) {
                            var r = e.oPreviousSearch,
                                i = e.aoPreSearchCols,
                                s = function(e) {
                                    r.sSearch = e.sSearch;
                                    r.bRegex = e.bRegex;
                                    r.bSmart = e.bSmart;
                                    r.bCaseInsensitive = e.bCaseInsensitive
                                };
                            if (e.oFeatures.bServerSide) s(t);
                            else {
                                Ga(e, t.sSearch, n, t.bRegex, t.bSmart, t.bCaseInsensitive);
                                s(t);
                                for (t = 0; t < e.aoPreSearchCols.length; t++) Ha(e, i[t].sSearch, t, i[t].bRegex, i[t].bSmart, i[t].bCaseInsensitive);
                                Ia(e)
                            }
                            e.bFiltered = !0;
                            h(e.oInstance).trigger("filter", e);
                            e._iDisplayStart = 0;
                            y(e);
                            x(e);
                            la(e, 0)
                        }

                        function Ia(e) {
                            for (var t = j.ext.afnFiltering, n = r(e, "bSearchable"), i = 0, s = t.length; i < s; i++)
                                for (var o = 0, u = 0, a = e.aiDisplay.length; u < a; u++) {
                                    var f = e.aiDisplay[u - o];
                                    t[i](e, Y(e, f, "filter", n), f) || (e.aiDisplay.splice(u - o, 1), o++)
                                }
                        }

                        function Ha(e, t, n, r, i, s) {
                            if ("" !== t)
                                for (var o = 0, t = ma(t, r, i, s), r = e.aiDisplay.length - 1; 0 <= r; r--) i = Ja(v(e, e.aiDisplay[r], n, "filter"), e.aoColumns[n].sType), t.test(i) || (e.aiDisplay.splice(r, 1), o++)
                        }

                        function Ga(e, t, n, r, i, s) {
                            r = ma(t, r, i, s);
                            i = e.oPreviousSearch;
                            n || (n = 0);
                            0 !== j.ext.afnFiltering.length && (n = 1);
                            if (0 >= t.length) e.aiDisplay.splice(0, e.aiDisplay.length), e.aiDisplay = e.aiDisplayMaster.slice();
                            else if (e.aiDisplay.length == e.aiDisplayMaster.length || i.sSearch.length > t.length || 1 == n || 0 !== t.indexOf(i.sSearch)) {
                                e.aiDisplay.splice(0, e.aiDisplay.length);
                                la(e, 1);
                                for (t = 0; t < e.aiDisplayMaster.length; t++) r.test(e.asDataSearch[t]) && e.aiDisplay.push(e.aiDisplayMaster[t])
                            } else
                                for (t = n = 0; t < e.asDataSearch.length; t++) r.test(e.asDataSearch[t]) || (e.aiDisplay.splice(t - n, 1), n++)
                        }

                        function la(e, t) {
                            if (!e.oFeatures.bServerSide) {
                                e.asDataSearch = [];
                                for (var n = r(e, "bSearchable"), i = 1 === t ? e.aiDisplayMaster : e.aiDisplay, s = 0, o = i.length; s < o; s++) e.asDataSearch[s] = na(e, Y(e, i[s], "filter", n))
                            }
                        }

                        function na(e, t) {
                            var n = t.join("  "); - 1 !== n.indexOf("&") && (n = h("<div>").html(n).text());
                            return n.replace(/[\n\r]/g, " ")
                        }

                        function ma(e, t, n, r) {
                            if (n) return e = t ? e.split(" ") : oa(e).split(" "), e = "^(?=.*?" + e.join(")(?=.*?") + ").*$", RegExp(e, r ? "i" : "");
                            e = t ? e : oa(e);
                            return RegExp(e, r ? "i" : "")
                        }

                        function Ja(e, t) {
                            return "function" === typeof j.ext.ofnSearch[t] ? j.ext.ofnSearch[t](e) : null === e ? "" : "html" == t ? e.replace(/[\r\n]/g, " ").replace(/<.*?>/g, "") : "string" === typeof e ? e.replace(/[\r\n]/g, " ") : e
                        }

                        function oa(e) {
                            return e.replace(RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\|\\$|\\^|\\-)", "g"), "\\$1")
                        }

                        function Ca(e) {
                            var t = l.createElement("div");
                            t.className = e.oClasses.sInfo;
                            e.aanFeatures.i || (e.aoDrawCallback.push({
                                fn: Ka,
                                sName: "information"
                            }), t.id = e.sTableId + "_info");
                            e.nTable.setAttribute("aria-describedby", e.sTableId + "_info");
                            return t
                        }

                        function Ka(e) {
                            if (e.oFeatures.bInfo && 0 !== e.aanFeatures.i.length) {
                                var t = e.oLanguage,
                                    n = e._iDisplayStart + 1,
                                    r = e.fnDisplayEnd(),
                                    i = e.fnRecordsTotal(),
                                    s = e.fnRecordsDisplay(),
                                    o;
                                o = 0 === s ? t.sInfoEmpty : t.sInfo;
                                s != i && (o += " " + t.sInfoFiltered);
                                o += t.sInfoPostFix;
                                o = ja(e, o);
                                null !== t.fnInfoCallback && (o = t.fnInfoCallback.call(e.oInstance, e, n, r, i, s, o));
                                e = e.aanFeatures.i;
                                t = 0;
                                for (n = e.length; t < n; t++) h(e[t]).html(o)
                            }
                        }

                        function ja(e, t) {
                            var n = e.fnFormatNumber(e._iDisplayStart + 1),
                                r = e.fnDisplayEnd(),
                                r = e.fnFormatNumber(r),
                                i = e.fnRecordsDisplay(),
                                i = e.fnFormatNumber(i),
                                s = e.fnRecordsTotal(),
                                s = e.fnFormatNumber(s);
                            e.oScroll.bInfinite && (n = e.fnFormatNumber(1));
                            return t.replace(/_START_/g, n).replace(/_END_/g, r).replace(/_TOTAL_/g, i).replace(/_MAX_/g, s)
                        }

                        function ba(e) {
                            var t, n, r = e.iInitDisplayStart;
                            if (!1 === e.bInitialised) setTimeout(function() {
                                ba(e)
                            }, 200);
                            else {
                                xa(e);
                                va(e);
                                W(e, e.aoHeader);
                                e.nTFoot && W(e, e.aoFooter);
                                E(e, !0);
                                e.oFeatures.bAutoWidth && da(e);
                                t = 0;
                                for (n = e.aoColumns.length; t < n; t++) null !== e.aoColumns[t].sWidth && (e.aoColumns[t].nTh.style.width = q(e.aoColumns[t].sWidth));
                                e.oFeatures.bSort ? O(e) : e.oFeatures.bFilter ? K(e, e.oPreviousSearch) : (e.aiDisplay = e.aiDisplayMaster.slice(), y(e), x(e));
                                null !== e.sAjaxSource && !e.oFeatures.bServerSide ? (n = [], ka(e, n), e.fnServerData.call(e.oInstance, e.sAjaxSource, n, function(n) {
                                    var i = e.sAjaxDataProp !== "" ? Q(e.sAjaxDataProp)(n) : n;
                                    for (t = 0; t < i.length; t++) H(e, i[t]);
                                    e.iInitDisplayStart = r;
                                    if (e.oFeatures.bSort) O(e);
                                    else {
                                        e.aiDisplay = e.aiDisplayMaster.slice();
                                        y(e);
                                        x(e)
                                    }
                                    E(e, false);
                                    $(e, n)
                                }, e)) : e.oFeatures.bServerSide || (E(e, !1), $(e))
                            }
                        }

                        function $(e, t) {
                            e._bInitComplete = !0;
                            A(e, "aoInitComplete", "init", [e, t])
                        }

                        function pa(e) {
                            var t = j.defaults.oLanguage;
                            !e.sEmptyTable && e.sZeroRecords && "No data available in table" === t.sEmptyTable && p(e, e, "sZeroRecords", "sEmptyTable");
                            !e.sLoadingRecords && e.sZeroRecords && "Loading..." === t.sLoadingRecords && p(e, e, "sZeroRecords", "sLoadingRecords")
                        }

                        function ya(e) {
                            if (e.oScroll.bInfinite) return null;
                            var t = '<select size="1" ' + ('name="' + e.sTableId + '_length"') + ">",
                                n, r, i = e.aLengthMenu;
                            if (2 == i.length && "object" === typeof i[0] && "object" === typeof i[1]) {
                                n = 0;
                                for (r = i[0].length; n < r; n++) t += '<option value="' + i[0][n] + '">' + i[1][n] + "</option>"
                            } else {
                                n = 0;
                                for (r = i.length; n < r; n++) t += '<option value="' + i[n] + '">' + i[n] + "</option>"
                            }
                            t += "</select>";
                            i = l.createElement("div");
                            e.aanFeatures.l || (i.id = e.sTableId + "_length");
                            i.className = e.oClasses.sLength;
                            i.innerHTML = "<label>" + e.oLanguage.sLengthMenu.replace("_MENU_", t) + "</label>";
                            h('select option[value="' + e._iDisplayLength + '"]', i).attr("selected", !0);
                            h("select", i).bind("change.DT", function() {
                                var t = h(this).val(),
                                    i = e.aanFeatures.l;
                                n = 0;
                                for (r = i.length; n < r; n++) i[n] != this.parentNode && h("select", i[n]).val(t);
                                e._iDisplayLength = parseInt(t, 10);
                                y(e);
                                if (e.fnDisplayEnd() == e.fnRecordsDisplay()) {
                                    e._iDisplayStart = e.fnDisplayEnd() - e._iDisplayLength;
                                    if (e._iDisplayStart < 0) e._iDisplayStart = 0
                                }
                                if (e._iDisplayLength == -1) e._iDisplayStart = 0;
                                x(e)
                            });
                            h("select", i).attr("aria-controls", e.sTableId);
                            return i
                        }

                        function y(e) {
                            e._iDisplayEnd = !1 === e.oFeatures.bPaginate ? e.aiDisplay.length : e._iDisplayStart + e._iDisplayLength > e.aiDisplay.length || -1 == e._iDisplayLength ? e.aiDisplay.length : e._iDisplayStart + e._iDisplayLength
                        }

                        function Da(e) {
                            if (e.oScroll.bInfinite) return null;
                            var t = l.createElement("div");
                            t.className = e.oClasses.sPaging + e.sPaginationType;
                            j.ext.oPagination[e.sPaginationType].fnInit(e, t, function(e) {
                                y(e);
                                x(e)
                            });
                            e.aanFeatures.p || e.aoDrawCallback.push({
                                fn: function(e) {
                                    j.ext.oPagination[e.sPaginationType].fnUpdate(e, function(e) {
                                        y(e);
                                        x(e)
                                    })
                                },
                                sName: "pagination"
                            });
                            return t
                        }

                        function qa(e, t) {
                            var n = e._iDisplayStart;
                            if ("number" === typeof t) e._iDisplayStart = t * e._iDisplayLength, e._iDisplayStart > e.fnRecordsDisplay() && (e._iDisplayStart = 0);
                            else if ("first" == t) e._iDisplayStart = 0;
                            else if ("previous" == t) e._iDisplayStart = 0 <= e._iDisplayLength ? e._iDisplayStart - e._iDisplayLength : 0, 0 > e._iDisplayStart && (e._iDisplayStart = 0);
                            else if ("next" == t) 0 <= e._iDisplayLength ? e._iDisplayStart + e._iDisplayLength < e.fnRecordsDisplay() && (e._iDisplayStart += e._iDisplayLength) : e._iDisplayStart = 0;
                            else if ("last" == t)
                                if (0 <= e._iDisplayLength) {
                                    var r = parseInt((e.fnRecordsDisplay() - 1) / e._iDisplayLength, 10) + 1;
                                    e._iDisplayStart = (r - 1) * e._iDisplayLength
                                } else e._iDisplayStart = 0;
                            else D(e, 0, "Unknown paging action: " + t);
                            h(e.oInstance).trigger("page", e);
                            return n != e._iDisplayStart
                        }

                        function Aa(e) {
                            var t = l.createElement("div");
                            e.aanFeatures.r || (t.id = e.sTableId + "_processing");
                            t.innerHTML = e.oLanguage.sProcessing;
                            t.className = e.oClasses.sProcessing;
                            e.nTable.parentNode.insertBefore(t, e.nTable);
                            return t
                        }

                        function E(e, t) {
                            if (e.oFeatures.bProcessing)
                                for (var n = e.aanFeatures.r, r = 0, i = n.length; r < i; r++) n[r].style.visibility = t ? "visible" : "hidden";
                            h(e.oInstance).trigger("processing", [e, t])
                        }

                        function Ba(e) {
                            if ("" === e.oScroll.sX && "" === e.oScroll.sY) return e.nTable;
                            var t = l.createElement("div"),
                                n = l.createElement("div"),
                                r = l.createElement("div"),
                                i = l.createElement("div"),
                                s = l.createElement("div"),
                                o = l.createElement("div"),
                                u = e.nTable.cloneNode(!1),
                                a = e.nTable.cloneNode(!1),
                                f = e.nTable.getElementsByTagName("thead")[0],
                                c = 0 === e.nTable.getElementsByTagName("tfoot").length ? null : e.nTable.getElementsByTagName("tfoot")[0],
                                p = e.oClasses;
                            n.appendChild(r);
                            s.appendChild(o);
                            i.appendChild(e.nTable);
                            t.appendChild(n);
                            t.appendChild(i);
                            r.appendChild(u);
                            u.appendChild(f);
                            null !== c && (t.appendChild(s), o.appendChild(a), a.appendChild(c));
                            t.className = p.sScrollWrapper;
                            n.className = p.sScrollHead;
                            r.className = p.sScrollHeadInner;
                            i.className = p.sScrollBody;
                            s.className = p.sScrollFoot;
                            o.className = p.sScrollFootInner;
                            e.oScroll.bAutoCss && (n.style.overflow = "hidden", n.style.position = "relative", s.style.overflow = "hidden", i.style.overflow = "auto");
                            n.style.border = "0";
                            n.style.width = "100%";
                            s.style.border = "0";
                            r.style.width = "" !== e.oScroll.sXInner ? e.oScroll.sXInner : "100%";
                            u.removeAttribute("id");
                            u.style.marginLeft = "0";
                            e.nTable.style.marginLeft = "0";
                            null !== c && (a.removeAttribute("id"), a.style.marginLeft = "0");
                            r = h(e.nTable).children("caption");
                            0 < r.length && (r = r[0], "top" === r._captionSide ? u.appendChild(r) : "bottom" === r._captionSide && c && a.appendChild(r));
                            "" !== e.oScroll.sX && (n.style.width = q(e.oScroll.sX), i.style.width = q(e.oScroll.sX), null !== c && (s.style.width = q(e.oScroll.sX)), h(i).scroll(function() {
                                n.scrollLeft = this.scrollLeft;
                                if (c !== null) s.scrollLeft = this.scrollLeft
                            }));
                            "" !== e.oScroll.sY && (i.style.height = q(e.oScroll.sY));
                            e.aoDrawCallback.push({
                                fn: La,
                                sName: "scrolling"
                            });
                            e.oScroll.bInfinite && h(i).scroll(function() {
                                if (!e.bDrawing && h(this).scrollTop() !== 0 && h(this).scrollTop() + h(this).height() > h(e.nTable).height() - e.oScroll.iLoadGap && e.fnDisplayEnd() < e.fnRecordsDisplay()) {
                                    qa(e, "next");
                                    y(e);
                                    x(e)
                                }
                            });
                            e.nScrollHead = n;
                            e.nScrollFoot = s;
                            return t
                        }

                        function La(e) {
                            var t = e.nScrollHead.getElementsByTagName("div")[0],
                                n = t.getElementsByTagName("table")[0],
                                r = e.nTable.parentNode,
                                i, s, o, u, a, f, l, c, p = [],
                                d = [],
                                v = null !== e.nTFoot ? e.nScrollFoot.getElementsByTagName("div")[0] : null,
                                m = null !== e.nTFoot ? v.getElementsByTagName("table")[0] : null,
                                g = e.oBrowser.bScrollOversize,
                                y = function(e) {
                                    l = e.style;
                                    l.paddingTop = "0";
                                    l.paddingBottom = "0";
                                    l.borderTopWidth = "0";
                                    l.borderBottomWidth = "0";
                                    l.height = 0
                                };
                            h(e.nTable).children("thead, tfoot").remove();
                            i = h(e.nTHead).clone()[0];
                            e.nTable.insertBefore(i, e.nTable.childNodes[0]);
                            o = e.nTHead.getElementsByTagName("tr");
                            u = i.getElementsByTagName("tr");
                            null !== e.nTFoot && (a = h(e.nTFoot).clone()[0], e.nTable.insertBefore(a, e.nTable.childNodes[1]), f = e.nTFoot.getElementsByTagName("tr"), a = a.getElementsByTagName("tr"));
                            "" === e.oScroll.sX && (r.style.width = "100%", t.parentNode.style.width = "100%");
                            var b = N(e, i);
                            i = 0;
                            for (s = b.length; i < s; i++) c = G(e, i), b[i].style.width = e.aoColumns[c].sWidth;
                            null !== e.nTFoot && C(function(e) {
                                e.style.width = ""
                            }, a);
                            e.oScroll.bCollapse && "" !== e.oScroll.sY && (r.style.height = r.offsetHeight + e.nTHead.offsetHeight + "px");
                            i = h(e.nTable).outerWidth();
                            if ("" === e.oScroll.sX) {
                                if (e.nTable.style.width = "100%", g && (h("tbody", r).height() > r.offsetHeight || "scroll" == h(r).css("overflow-y"))) e.nTable.style.width = q(h(e.nTable).outerWidth() - e.oScroll.iBarWidth)
                            } else "" !== e.oScroll.sXInner ? e.nTable.style.width = q(e.oScroll.sXInner) : i == h(r).width() && h(r).height() < h(e.nTable).height() ? (e.nTable.style.width = q(i - e.oScroll.iBarWidth), h(e.nTable).outerWidth() > i - e.oScroll.iBarWidth && (e.nTable.style.width = q(i))) : e.nTable.style.width = q(i);
                            i = h(e.nTable).outerWidth();
                            C(y, u);
                            C(function(e) {
                                p.push(q(h(e).width()))
                            }, u);
                            C(function(e, t) {
                                e.style.width = p[t]
                            }, o);
                            h(u).height(0);
                            null !== e.nTFoot && (C(y, a), C(function(e) {
                                d.push(q(h(e).width()))
                            }, a), C(function(e, t) {
                                e.style.width = d[t]
                            }, f), h(a).height(0));
                            C(function(e, t) {
                                e.innerHTML = "";
                                e.style.width = p[t]
                            }, u);
                            null !== e.nTFoot && C(function(e, t) {
                                e.innerHTML = "";
                                e.style.width = d[t]
                            }, a);
                            if (h(e.nTable).outerWidth() < i) {
                                o = r.scrollHeight > r.offsetHeight || "scroll" == h(r).css("overflow-y") ? i + e.oScroll.iBarWidth : i;
                                if (g && (r.scrollHeight > r.offsetHeight || "scroll" == h(r).css("overflow-y"))) e.nTable.style.width = q(o - e.oScroll.iBarWidth);
                                r.style.width = q(o);
                                e.nScrollHead.style.width = q(o);
                                null !== e.nTFoot && (e.nScrollFoot.style.width = q(o));
                                "" === e.oScroll.sX ? D(e, 1, "The table cannot fit into the current element which will cause column misalignment. The table has been drawn at its minimum possible width.") : "" !== e.oScroll.sXInner && D(e, 1, "The table cannot fit into the current element which will cause column misalignment. Increase the sScrollXInner value or remove it to allow automatic calculation")
                            } else r.style.width = q("100%"), e.nScrollHead.style.width = q("100%"), null !== e.nTFoot && (e.nScrollFoot.style.width = q("100%"));
                            "" === e.oScroll.sY && g && (r.style.height = q(e.nTable.offsetHeight + e.oScroll.iBarWidth));
                            "" !== e.oScroll.sY && e.oScroll.bCollapse && (r.style.height = q(e.oScroll.sY), g = "" !== e.oScroll.sX && e.nTable.offsetWidth > r.offsetWidth ? e.oScroll.iBarWidth : 0, e.nTable.offsetHeight < r.offsetHeight && (r.style.height = q(e.nTable.offsetHeight + g)));
                            g = h(e.nTable).outerWidth();
                            n.style.width = q(g);
                            t.style.width = q(g);
                            n = h(e.nTable).height() > r.clientHeight || "scroll" == h(r).css("overflow-y");
                            t.style.paddingRight = n ? e.oScroll.iBarWidth + "px" : "0px";
                            null !== e.nTFoot && (m.style.width = q(g), v.style.width = q(g), v.style.paddingRight = n ? e.oScroll.iBarWidth + "px" : "0px");
                            h(r).scroll();
                            if (e.bSorted || e.bFiltered) r.scrollTop = 0
                        }

                        function C(e, t, n) {
                            for (var r = 0, i = 0, s = t.length, o, u; i < s;) {
                                o = t[i].firstChild;
                                for (u = n ? n[i].firstChild : null; o;) 1 === o.nodeType && (n ? e(o, u, r) : e(o, r), r++), o = o.nextSibling, u = n ? u.nextSibling : null;
                                i++
                            }
                        }

                        function Ma(e, t) {
                            if (!e || null === e || "" === e) return 0;
                            t || (t = l.body);
                            var n, r = l.createElement("div");
                            r.style.width = q(e);
                            t.appendChild(r);
                            n = r.offsetWidth;
                            t.removeChild(r);
                            return n
                        }

                        function da(e) {
                            var t = 0,
                                n, r = 0,
                                i = e.aoColumns.length,
                                s, o, u = h("th", e.nTHead),
                                a = e.nTable.getAttribute("width");
                            o = e.nTable.parentNode;
                            for (s = 0; s < i; s++) e.aoColumns[s].bVisible && (r++, null !== e.aoColumns[s].sWidth && (n = Ma(e.aoColumns[s].sWidthOrig, o), null !== n && (e.aoColumns[s].sWidth = q(n)), t++));
                            if (i == u.length && 0 === t && r == i && "" === e.oScroll.sX && "" === e.oScroll.sY)
                                for (s = 0; s < e.aoColumns.length; s++) n = h(u[s]).width(), null !== n && (e.aoColumns[s].sWidth = q(n));
                            else {
                                t = e.nTable.cloneNode(!1);
                                s = e.nTHead.cloneNode(!0);
                                r = l.createElement("tbody");
                                n = l.createElement("tr");
                                t.removeAttribute("id");
                                t.appendChild(s);
                                null !== e.nTFoot && (t.appendChild(e.nTFoot.cloneNode(!0)), C(function(e) {
                                    e.style.width = ""
                                }, t.getElementsByTagName("tr")));
                                t.appendChild(r);
                                r.appendChild(n);
                                r = h("thead th", t);
                                0 === r.length && (r = h("tbody tr:eq(0)>td", t));
                                u = N(e, s);
                                for (s = r = 0; s < i; s++) {
                                    var f = e.aoColumns[s];
                                    f.bVisible && null !== f.sWidthOrig && "" !== f.sWidthOrig ? u[s - r].style.width = q(f.sWidthOrig) : f.bVisible ? u[s - r].style.width = "" : r++
                                }
                                for (s = 0; s < i; s++) e.aoColumns[s].bVisible && (r = Na(e, s), null !== r && (r = r.cloneNode(!0), "" !== e.aoColumns[s].sContentPadding && (r.innerHTML += e.aoColumns[s].sContentPadding), n.appendChild(r)));
                                o.appendChild(t);
                                "" !== e.oScroll.sX && "" !== e.oScroll.sXInner ? t.style.width = q(e.oScroll.sXInner) : "" !== e.oScroll.sX ? (t.style.width = "", h(t).width() < o.offsetWidth && (t.style.width = q(o.offsetWidth))) : "" !== e.oScroll.sY ? t.style.width = q(o.offsetWidth) : a && (t.style.width = q(a));
                                t.style.visibility = "hidden";
                                Oa(e, t);
                                i = h("tbody tr:eq(0)", t).children();
                                0 === i.length && (i = N(e, h("thead", t)[0]));
                                if ("" !== e.oScroll.sX) {
                                    for (s = r = o = 0; s < e.aoColumns.length; s++) e.aoColumns[s].bVisible && (o = null === e.aoColumns[s].sWidthOrig ? o + h(i[r]).outerWidth() : o + (parseInt(e.aoColumns[s].sWidth.replace("px", ""), 10) + (h(i[r]).outerWidth() - h(i[r]).width())), r++);
                                    t.style.width = q(o);
                                    e.nTable.style.width = q(o)
                                }
                                for (s = r = 0; s < e.aoColumns.length; s++) e.aoColumns[s].bVisible && (o = h(i[r]).width(), null !== o && 0 < o && (e.aoColumns[s].sWidth = q(o)), r++);
                                i = h(t).css("width");
                                e.nTable.style.width = -1 !== i.indexOf("%") ? i : q(h(t).outerWidth());
                                t.parentNode.removeChild(t)
                            }
                            a && (e.nTable.style.width = q(a))
                        }

                        function Oa(e, t) {
                            "" === e.oScroll.sX && "" !== e.oScroll.sY ? (h(t).width(), t.style.width = q(h(t).outerWidth() - e.oScroll.iBarWidth)) : "" !== e.oScroll.sX && (t.style.width = q(h(t).outerWidth()))
                        }

                        function Na(e, t) {
                            var n = Pa(e, t);
                            if (0 > n) return null;
                            if (null === e.aoData[n].nTr) {
                                var r = l.createElement("td");
                                r.innerHTML = v(e, n, t, "");
                                return r
                            }
                            return J(e, n)[t]
                        }

                        function Pa(e, t) {
                            for (var n = -1, r = -1, i = 0; i < e.aoData.length; i++) {
                                var s = v(e, i, t, "display") + "",
                                    s = s.replace(/<.*?>/g, "");
                                s.length > n && (n = s.length, r = i)
                            }
                            return r
                        }

                        function q(e) {
                            if (null === e) return "0px";
                            if ("number" == typeof e) return 0 > e ? "0px" : e + "px";
                            var t = e.charCodeAt(e.length - 1);
                            return 48 > t || 57 < t ? e : e + "px"
                        }

                        function Qa() {
                            var e = l.createElement("p"),
                                t = e.style;
                            t.width = "100%";
                            t.height = "200px";
                            t.padding = "0px";
                            var n = l.createElement("div"),
                                t = n.style;
                            t.position = "absolute";
                            t.top = "0px";
                            t.left = "0px";
                            t.visibility = "hidden";
                            t.width = "200px";
                            t.height = "150px";
                            t.padding = "0px";
                            t.overflow = "hidden";
                            n.appendChild(e);
                            l.body.appendChild(n);
                            t = e.offsetWidth;
                            n.style.overflow = "scroll";
                            e = e.offsetWidth;
                            t == e && (e = n.clientWidth);
                            l.body.removeChild(n);
                            return t - e
                        }

                        function O(e, t) {
                            var r, i, s, o, u, a, f = [],
                                l = [],
                                c = j.ext.oSort,
                                p = e.aoData,
                                d = e.aoColumns,
                                m = e.oLanguage.oAria;
                            if (!e.oFeatures.bServerSide && (0 !== e.aaSorting.length || null !== e.aaSortingFixed)) {
                                f = null !== e.aaSortingFixed ? e.aaSortingFixed.concat(e.aaSorting) : e.aaSorting.slice();
                                for (r = 0; r < f.length; r++)
                                    if (i = f[r][0], s = R(e, i), o = e.aoColumns[i].sSortDataType, j.ext.afnSortData[o])
                                        if (u = j.ext.afnSortData[o].call(e.oInstance, e, i, s), u.length === p.length) {
                                            s = 0;
                                            for (o = p.length; s < o; s++) F(e, s, i, u[s])
                                        } else D(e, 0, "Returned data sort array (col " + i + ") is the wrong length");
                                r = 0;
                                for (i = e.aiDisplayMaster.length; r < i; r++) l[e.aiDisplayMaster[r]] = r;
                                var g = f.length,
                                    b;
                                r = 0;
                                for (i = p.length; r < i; r++)
                                    for (s = 0; s < g; s++) {
                                        b = d[f[s][0]].aDataSort;
                                        u = 0;
                                        for (a = b.length; u < a; u++) o = d[b[u]].sType, o = c[(o ? o : "string") + "-pre"], p[r]._aSortData[b[u]] = o ? o(v(e, r, b[u], "sort")) : v(e, r, b[u], "sort")
                                    }
                                e.aiDisplayMaster.sort(function(e, t) {
                                    var n, r, i, s, o;
                                    for (n = 0; n < g; n++) {
                                        o = d[f[n][0]].aDataSort;
                                        r = 0;
                                        for (i = o.length; r < i; r++)
                                            if (s = d[o[r]].sType, s = c[(s ? s : "string") + "-" + f[n][1]](p[e]._aSortData[o[r]], p[t]._aSortData[o[r]]), 0 !== s) return s
                                    }
                                    return c["numeric-asc"](l[e], l[t])
                                })
                            }(t === n || t) && !e.oFeatures.bDeferRender && P(e);
                            r = 0;
                            for (i = e.aoColumns.length; r < i; r++) o = d[r].sTitle.replace(/<.*?>/g, ""), s = d[r].nTh, s.removeAttribute("aria-sort"), s.removeAttribute("aria-label"), d[r].bSortable ? 0 < f.length && f[0][0] == r ? (s.setAttribute("aria-sort", "asc" == f[0][1] ? "ascending" : "descending"), s.setAttribute("aria-label", o + ("asc" == (d[r].asSorting[f[0][2] + 1] ? d[r].asSorting[f[0][2] + 1] : d[r].asSorting[0]) ? m.sSortAscending : m.sSortDescending))) : s.setAttribute("aria-label", o + ("asc" == d[r].asSorting[0] ? m.sSortAscending : m.sSortDescending)) : s.setAttribute("aria-label", o);
                            e.bSorted = !0;
                            h(e.oInstance).trigger("sort", e);
                            e.oFeatures.bFilter ? K(e, e.oPreviousSearch, 1) : (e.aiDisplay = e.aiDisplayMaster.slice(), e._iDisplayStart = 0, y(e), x(e))
                        }

                        function ia(e, t, n, r) {
                            Ra(t, {}, function(t) {
                                if (!1 !== e.aoColumns[n].bSortable) {
                                    var i = function() {
                                        var r, i;
                                        if (t.shiftKey) {
                                            for (var s = !1, o = 0; o < e.aaSorting.length; o++)
                                                if (e.aaSorting[o][0] == n) {
                                                    s = !0;
                                                    r = e.aaSorting[o][0];
                                                    i = e.aaSorting[o][2] + 1;
                                                    e.aoColumns[r].asSorting[i] ? (e.aaSorting[o][1] = e.aoColumns[r].asSorting[i], e.aaSorting[o][2] = i) : e.aaSorting.splice(o, 1);
                                                    break
                                                }!1 === s && e.aaSorting.push([n, e.aoColumns[n].asSorting[0], 0])
                                        } else 1 == e.aaSorting.length && e.aaSorting[0][0] == n ? (r = e.aaSorting[0][0], i = e.aaSorting[0][2] + 1, e.aoColumns[r].asSorting[i] || (i = 0), e.aaSorting[0][1] = e.aoColumns[r].asSorting[i], e.aaSorting[0][2] = i) : (e.aaSorting.splice(0, e.aaSorting.length), e.aaSorting.push([n, e.aoColumns[n].asSorting[0], 0]));
                                        O(e)
                                    };
                                    e.oFeatures.bProcessing ? (E(e, !0), setTimeout(function() {
                                        i();
                                        e.oFeatures.bServerSide || E(e, !1)
                                    }, 0)) : i();
                                    "function" == typeof r && r(e)
                                }
                            })
                        }

                        function P(e) {
                            var t, n, r, i, s, o = e.aoColumns.length,
                                u = e.oClasses;
                            for (t = 0; t < o; t++) e.aoColumns[t].bSortable && h(e.aoColumns[t].nTh).removeClass(u.sSortAsc + " " + u.sSortDesc + " " + e.aoColumns[t].sSortingClass);
                            n = null !== e.aaSortingFixed ? e.aaSortingFixed.concat(e.aaSorting) : e.aaSorting.slice();
                            for (t = 0; t < e.aoColumns.length; t++)
                                if (e.aoColumns[t].bSortable) {
                                    s = e.aoColumns[t].sSortingClass;
                                    i = -1;
                                    for (r = 0; r < n.length; r++)
                                        if (n[r][0] == t) {
                                            s = "asc" == n[r][1] ? u.sSortAsc : u.sSortDesc;
                                            i = r;
                                            break
                                        }
                                    h(e.aoColumns[t].nTh).addClass(s);
                                    e.bJUI && (s = h("span." + u.sSortIcon, e.aoColumns[t].nTh), s.removeClass(u.sSortJUIAsc + " " + u.sSortJUIDesc + " " + u.sSortJUI + " " + u.sSortJUIAscAllowed + " " + u.sSortJUIDescAllowed), s.addClass(-1 == i ? e.aoColumns[t].sSortingClassJUI : "asc" == n[i][1] ? u.sSortJUIAsc : u.sSortJUIDesc))
                                } else h(e.aoColumns[t].nTh).addClass(e.aoColumns[t].sSortingClass);
                            s = u.sSortColumn;
                            if (e.oFeatures.bSort && e.oFeatures.bSortClasses) {
                                e = J(e);
                                i = [];
                                for (t = 0; t < o; t++) i.push("");
                                t = 0;
                                for (r = 1; t < n.length; t++) u = parseInt(n[t][0], 10), i[u] = s + r, 3 > r && r++;
                                s = RegExp(s + "[123]");
                                var a;
                                t = 0;
                                for (n = e.length; t < n; t++) u = t % o, r = e[t].className, a = i[u], u = r.replace(s, a), u != r ? e[t].className = h.trim(u) : 0 < a.length && -1 == r.indexOf(a) && (e[t].className = r + " " + a)
                            }
                        }

                        function ra(e) {
                            if (e.oFeatures.bStateSave && !e.bDestroying) {
                                var t, n;
                                t = e.oScroll.bInfinite;
                                var r = {
                                    iCreate: (new Date).getTime(),
                                    iStart: t ? 0 : e._iDisplayStart,
                                    iEnd: t ? e._iDisplayLength : e._iDisplayEnd,
                                    iLength: e._iDisplayLength,
                                    aaSorting: h.extend(!0, [], e.aaSorting),
                                    oSearch: h.extend(!0, {}, e.oPreviousSearch),
                                    aoSearchCols: h.extend(!0, [], e.aoPreSearchCols),
                                    abVisCols: []
                                };
                                t = 0;
                                for (n = e.aoColumns.length; t < n; t++) r.abVisCols.push(e.aoColumns[t].bVisible);
                                A(e, "aoStateSaveParams", "stateSaveParams", [e, r]);
                                e.fnStateSave.call(e.oInstance, e, r)
                            }
                        }

                        function Sa(e, t) {
                            if (e.oFeatures.bStateSave) {
                                var n = e.fnStateLoad.call(e.oInstance, e);
                                if (n) {
                                    var r = A(e, "aoStateLoadParams", "stateLoadParams", [e, n]);
                                    if (-1 === h.inArray(!1, r)) {
                                        e.oLoadedState = h.extend(!0, {}, n);
                                        e._iDisplayStart = n.iStart;
                                        e.iInitDisplayStart = n.iStart;
                                        e._iDisplayEnd = n.iEnd;
                                        e._iDisplayLength = n.iLength;
                                        e.aaSorting = n.aaSorting.slice();
                                        e.saved_aaSorting = n.aaSorting.slice();
                                        h.extend(e.oPreviousSearch, n.oSearch);
                                        h.extend(!0, e.aoPreSearchCols, n.aoSearchCols);
                                        t.saved_aoColumns = [];
                                        for (r = 0; r < n.abVisCols.length; r++) t.saved_aoColumns[r] = {}, t.saved_aoColumns[r].bVisible = n.abVisCols[r];
                                        A(e, "aoStateLoaded", "stateLoaded", [e, n])
                                    }
                                }
                            }
                        }

                        function s(e) {
                            for (var t = 0; t < j.settings.length; t++)
                                if (j.settings[t].nTable === e) return j.settings[t];
                            return null
                        }

                        function T(e) {
                            for (var t = [], e = e.aoData, n = 0, r = e.length; n < r; n++) null !== e[n].nTr && t.push(e[n].nTr);
                            return t
                        }

                        function J(e, t) {
                            var r = [],
                                i, s, o, u, a, f;
                            s = 0;
                            var l = e.aoData.length;
                            t !== n && (s = t, l = t + 1);
                            for (o = s; o < l; o++)
                                if (f = e.aoData[o], null !== f.nTr) {
                                    s = [];
                                    for (i = f.nTr.firstChild; i;) u = i.nodeName.toLowerCase(), ("td" == u || "th" == u) && s.push(i), i = i.nextSibling;
                                    u = i = 0;
                                    for (a = e.aoColumns.length; u < a; u++) e.aoColumns[u].bVisible ? r.push(s[u - i]) : (r.push(f._anHidden[u]), i++)
                                }
                            return r
                        }

                        function D(e, t, n) {
                            e = null === e ? "DataTables warning: " + n : "DataTables warning (table id = '" + e.sTableId + "'): " + n;
                            if (0 === t)
                                if ("alert" == j.ext.sErrMode) alert(e);
                                else throw Error(e);
                            else X.console && console.log && console.log(e)
                        }

                        function p(e, t, r, i) {
                            i === n && (i = r);
                            t[r] !== n && (e[i] = t[r])
                        }

                        function Ta(t, n) {
                            var r, i;
                            for (i in n) n.hasOwnProperty(i) && (r = n[i], "object" === typeof e[i] && null !== r && !1 === h.isArray(r) ? h.extend(!0, t[i], r) : t[i] = r);
                            return t
                        }

                        function Ra(e, t, n) {
                            h(e).bind("click.DT", t, function(t) {
                                e.blur();
                                n(t)
                            }).bind("keypress.DT", t, function(e) {
                                13 === e.which && n(e)
                            }).bind("selectstart.DT", function() {
                                return !1
                            })
                        }

                        function z(e, t, n, r) {
                            n && e[t].push({
                                fn: n,
                                sName: r
                            })
                        }

                        function A(e, t, n, r) {
                            for (var t = e[t], i = [], s = t.length - 1; 0 <= s; s--) i.push(t[s].fn.apply(e.oInstance, r));
                            null !== n && h(e.oInstance).trigger(n, r);
                            return i
                        }

                        function Ua(e) {
                            var t = h('<div style="position:absolute; top:0; left:0; height:1px; width:1px; overflow:hidden"><div style="position:absolute; top:1px; left:1px; width:100px; overflow:scroll;"><div id="DT_BrowserTest" style="width:100%; height:10px;"></div></div></div>')[0];
                            l.body.appendChild(t);
                            e.oBrowser.bScrollOversize = 100 === h("#DT_BrowserTest", t)[0].offsetWidth ? !0 : !1;
                            l.body.removeChild(t)
                        }

                        function Va(e) {
                            return function() {
                                var t = [s(this[j.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));
                                return j.ext.oApi[e].apply(this, t)
                            }
                        }
                        var U = /\[.*?\]$/,
                            Wa = X.JSON ? JSON.stringify : function(e) {
                                var t = typeof e;
                                if ("object" !== t || null === e) return "string" === t && (e = '"' + e + '"'), e + "";
                                var n, r, i = [],
                                    s = h.isArray(e);
                                for (n in e) r = e[n], t = typeof r, "string" === t ? r = '"' + r + '"' : "object" === t && null !== r && (r = Wa(r)), i.push((s ? "" : '"' + n + '":') + r);
                                return (s ? "[" : "{") + i + (s ? "]" : "}")
                            }; this.$ = function(e, t) {
                            var n, r, i = [],
                                o;
                            r = s(this[j.ext.iApiIndex]);
                            var u = r.aoData,
                                a = r.aiDisplay,
                                f = r.aiDisplayMaster;
                            t || (t = {});
                            t = h.extend({}, {
                                filter: "none",
                                order: "current",
                                page: "all"
                            }, t);
                            if ("current" == t.page) {
                                n = r._iDisplayStart;
                                for (r = r.fnDisplayEnd(); n < r; n++)(o = u[a[n]].nTr) && i.push(o)
                            } else if ("current" == t.order && "none" == t.filter) {
                                n = 0;
                                for (r = f.length; n < r; n++)(o = u[f[n]].nTr) && i.push(o)
                            } else if ("current" == t.order && "applied" == t.filter) {
                                n = 0;
                                for (r = a.length; n < r; n++)(o = u[a[n]].nTr) && i.push(o)
                            } else if ("original" == t.order && "none" == t.filter) {
                                n = 0;
                                for (r = u.length; n < r; n++)(o = u[n].nTr) && i.push(o)
                            } else if ("original" == t.order && "applied" == t.filter) {
                                n = 0;
                                for (r = u.length; n < r; n++) o = u[n].nTr, -1 !== h.inArray(n, a) && o && i.push(o)
                            } else D(r, 1, "Unknown selection options");
                            i = h(i);
                            n = i.filter(e);
                            i = i.find(e);
                            return h([].concat(h.makeArray(n), h.makeArray(i)))
                        }; this._ = function(e, t) {
                            var n = [],
                                r, i, s = this.$(e, t);
                            r = 0;
                            for (i = s.length; r < i; r++) n.push(this.fnGetData(s[r]));
                            return n
                        }; this.fnAddData = function(e, t) {
                            if (0 === e.length) return [];
                            var r = [],
                                i, o = s(this[j.ext.iApiIndex]);
                            if ("object" === typeof e[0] && null !== e[0])
                                for (var u = 0; u < e.length; u++) {
                                    i = H(o, e[u]);
                                    if (-1 == i) return r;
                                    r.push(i)
                                } else {
                                    i = H(o, e);
                                    if (-1 == i) return r;
                                    r.push(i)
                                }
                            o.aiDisplay = o.aiDisplayMaster.slice();
                            (t === n || t) && aa(o);
                            return r
                        }; this.fnAdjustColumnSizing = function(e) {
                            var t = s(this[j.ext.iApiIndex]);
                            k(t);
                            e === n || e ? this.fnDraw(!1) : ("" !== t.oScroll.sX || "" !== t.oScroll.sY) && this.oApi._fnScrollDraw(t)
                        }; this.fnClearTable = function(e) {
                            var t = s(this[j.ext.iApiIndex]);
                            ga(t);
                            (e === n || e) && x(t)
                        }; this.fnClose = function(e) {
                            for (var t = s(this[j.ext.iApiIndex]), n = 0; n < t.aoOpenRows.length; n++)
                                if (t.aoOpenRows[n].nParent == e) return (e = t.aoOpenRows[n].nTr.parentNode) && e.removeChild(t.aoOpenRows[n].nTr), t.aoOpenRows.splice(n, 1), 0;
                            return 1
                        }; this.fnDeleteRow = function(e, t, r) {
                            var i = s(this[j.ext.iApiIndex]),
                                o, u, e = "object" === typeof e ? I(i, e) : e,
                                a = i.aoData.splice(e, 1);
                            o = 0;
                            for (u = i.aoData.length; o < u; o++) null !== i.aoData[o].nTr && (i.aoData[o].nTr._DT_RowIndex = o);
                            o = h.inArray(e, i.aiDisplay);
                            i.asDataSearch.splice(o, 1);
                            ha(i.aiDisplayMaster, e);
                            ha(i.aiDisplay, e);
                            "function" === typeof t && t.call(this, i, a);
                            i._iDisplayStart >= i.fnRecordsDisplay() && (i._iDisplayStart -= i._iDisplayLength, 0 > i._iDisplayStart && (i._iDisplayStart = 0));
                            if (r === n || r) y(i), x(i);
                            return a
                        }; this.fnDestroy = function(t) {
                            var r = s(this[j.ext.iApiIndex]),
                                i = r.nTableWrapper.parentNode,
                                o = r.nTBody,
                                u, a, t = t === n ? !1 : t;
                            r.bDestroying = !0;
                            A(r, "aoDestroyCallback", "destroy", [r]);
                            if (!t) {
                                u = 0;
                                for (a = r.aoColumns.length; u < a; u++) !1 === r.aoColumns[u].bVisible && this.fnSetColumnVis(u, !0)
                            }
                            h(r.nTableWrapper).find("*").andSelf().unbind(".DT");
                            h("tbody>tr>td." + r.oClasses.sRowEmpty, r.nTable).parent().remove();
                            r.nTable != r.nTHead.parentNode && (h(r.nTable).children("thead").remove(), r.nTable.appendChild(r.nTHead));
                            r.nTFoot && r.nTable != r.nTFoot.parentNode && (h(r.nTable).children("tfoot").remove(), r.nTable.appendChild(r.nTFoot));
                            r.nTable.parentNode.removeChild(r.nTable);
                            h(r.nTableWrapper).remove();
                            r.aaSorting = [];
                            r.aaSortingFixed = [];
                            P(r);
                            h(T(r)).removeClass(r.asStripeClasses.join(" "));
                            h("th, td", r.nTHead).removeClass([r.oClasses.sSortable, r.oClasses.sSortableAsc, r.oClasses.sSortableDesc, r.oClasses.sSortableNone].join(" "));
                            r.bJUI && (h("th span." + r.oClasses.sSortIcon + ", td span." + r.oClasses.sSortIcon, r.nTHead).remove(), h("th, td", r.nTHead).each(function() {
                                var e = h("div." + r.oClasses.sSortJUIWrapper, this),
                                    t = e.contents();
                                h(this).append(t);
                                e.remove()
                            }));
                            !t && r.nTableReinsertBefore ? i.insertBefore(r.nTable, r.nTableReinsertBefore) : t || i.appendChild(r.nTable);
                            u = 0;
                            for (a = r.aoData.length; u < a; u++) null !== r.aoData[u].nTr && o.appendChild(r.aoData[u].nTr);
                            !0 === r.oFeatures.bAutoWidth && (r.nTable.style.width = q(r.sDestroyWidth));
                            if (a = r.asDestroyStripes.length) {
                                t = h(o).children("tr");
                                for (u = 0; u < a; u++) t.filter(":nth-child(" + a + "n + " + u + ")").addClass(r.asDestroyStripes[u])
                            }
                            u = 0;
                            for (a = j.settings.length; u < a; u++) j.settings[u] == r && j.settings.splice(u, 1);
                            e = r = null
                        }; this.fnDraw = function(e) {
                            var t = s(this[j.ext.iApiIndex]);
                            !1 === e ? (y(t), x(t)) : aa(t)
                        }; this.fnFilter = function(e, t, r, i, o, u) {
                            var a = s(this[j.ext.iApiIndex]);
                            if (a.oFeatures.bFilter) {
                                if (r === n || null === r) r = !1;
                                if (i === n || null === i) i = !0;
                                if (o === n || null === o) o = !0;
                                if (u === n || null === u) u = !0;
                                if (t === n || null === t) {
                                    if (K(a, {
                                            sSearch: e + "",
                                            bRegex: r,
                                            bSmart: i,
                                            bCaseInsensitive: u
                                        }, 1), o && a.aanFeatures.f) {
                                        t = a.aanFeatures.f;
                                        r = 0;
                                        for (i = t.length; r < i; r++) try {
                                            t[r]._DT_Input != l.activeElement && h(t[r]._DT_Input).val(e)
                                        } catch (f) {
                                            h(t[r]._DT_Input).val(e)
                                        }
                                    }
                                } else h.extend(a.aoPreSearchCols[t], {
                                    sSearch: e + "",
                                    bRegex: r,
                                    bSmart: i,
                                    bCaseInsensitive: u
                                }), K(a, a.oPreviousSearch, 1)
                            }
                        }; this.fnGetData = function(e, t) {
                            var r = s(this[j.ext.iApiIndex]);
                            if (e !== n) {
                                var i = e;
                                if ("object" === typeof e) {
                                    var o = e.nodeName.toLowerCase();
                                    "tr" === o ? i = I(r, e) : "td" === o && (i = I(r, e.parentNode), t = fa(r, i, e))
                                }
                                return t !== n ? v(r, i, t, "") : r.aoData[i] !== n ? r.aoData[i]._aData : null
                            }
                            return Z(r)
                        }; this.fnGetNodes = function(e) {
                            var t = s(this[j.ext.iApiIndex]);
                            return e !== n ? t.aoData[e] !== n ? t.aoData[e].nTr : null : T(t)
                        }; this.fnGetPosition = function(e) {
                            var t = s(this[j.ext.iApiIndex]),
                                n = e.nodeName.toUpperCase();
                            return "TR" == n ? I(t, e) : "TD" == n || "TH" == n ? (n = I(t, e.parentNode), e = fa(t, n, e), [n, R(t, e), e]) : null
                        }; this.fnIsOpen = function(e) {
                            for (var t = s(this[j.ext.iApiIndex]), n = 0; n < t.aoOpenRows.length; n++)
                                if (t.aoOpenRows[n].nParent == e) return !0;
                            return !1
                        }; this.fnOpen = function(e, n, r) {
                            var i = s(this[j.ext.iApiIndex]),
                                o = T(i);
                            if (-1 !== h.inArray(e, o)) {
                                this.fnClose(e);
                                var o = l.createElement("tr"),
                                    u = l.createElement("td");
                                o.appendChild(u);
                                u.className = r;
                                u.colSpan = t(i);
                                "string" === typeof n ? u.innerHTML = n : h(u).html(n);
                                n = h("tr", i.nTBody); - 1 != h.inArray(e, n) && h(o).insertAfter(e);
                                i.aoOpenRows.push({
                                    nTr: o,
                                    nParent: e
                                });
                                return o
                            }
                        }; this.fnPageChange = function(e, t) {
                            var r = s(this[j.ext.iApiIndex]);
                            qa(r, e);
                            y(r);
                            (t === n || t) && x(r)
                        }; this.fnSetColumnVis = function(e, r, i) {
                            var o = s(this[j.ext.iApiIndex]),
                                u, a, f = o.aoColumns,
                                l = o.aoData,
                                c, h;
                            if (f[e].bVisible != r) {
                                if (r) {
                                    for (u = a = 0; u < e; u++) f[u].bVisible && a++;
                                    h = a >= t(o);
                                    if (!h)
                                        for (u = e; u < f.length; u++)
                                            if (f[u].bVisible) {
                                                c = u;
                                                break
                                            }
                                    u = 0;
                                    for (a = l.length; u < a; u++) null !== l[u].nTr && (h ? l[u].nTr.appendChild(l[u]._anHidden[e]) : l[u].nTr.insertBefore(l[u]._anHidden[e], J(o, u)[c]))
                                } else {
                                    u = 0;
                                    for (a = l.length; u < a; u++) null !== l[u].nTr && (c = J(o, u)[e], l[u]._anHidden[e] = c, c.parentNode.removeChild(c))
                                }
                                f[e].bVisible = r;
                                W(o, o.aoHeader);
                                o.nTFoot && W(o, o.aoFooter);
                                u = 0;
                                for (a = o.aoOpenRows.length; u < a; u++) o.aoOpenRows[u].nTr.colSpan = t(o);
                                if (i === n || i) k(o), x(o);
                                ra(o)
                            }
                        }; this.fnSettings = function() {
                            return s(this[j.ext.iApiIndex])
                        }; this.fnSort = function(e) {
                            var t = s(this[j.ext.iApiIndex]);
                            t.aaSorting = e;
                            O(t)
                        }; this.fnSortListener = function(e, t, n) {
                            ia(s(this[j.ext.iApiIndex]), e, t, n)
                        }; this.fnUpdate = function(e, t, i, o, u) {
                            var a = s(this[j.ext.iApiIndex]),
                                t = "object" === typeof t ? I(a, t) : t;
                            if (h.isArray(e) && i === n) {
                                a.aoData[t]._aData = e.slice();
                                for (i = 0; i < a.aoColumns.length; i++) this.fnUpdate(v(a, t, i), t, i, !1, !1)
                            } else if (h.isPlainObject(e) && i === n) {
                                a.aoData[t]._aData = h.extend(!0, {}, e);
                                for (i = 0; i < a.aoColumns.length; i++) this.fnUpdate(v(a, t, i), t, i, !1, !1)
                            } else {
                                F(a, t, i, e);
                                var e = v(a, t, i, "display"),
                                    f = a.aoColumns[i];
                                null !== f.fnRender && (e = S(a, t, i), f.bUseRendered && F(a, t, i, e));
                                null !== a.aoData[t].nTr && (J(a, t)[i].innerHTML = e)
                            }
                            i = h.inArray(t, a.aiDisplay);
                            a.asDataSearch[i] = na(a, Y(a, t, "filter", r(a, "bSearchable")));
                            (u === n || u) && k(a);
                            (o === n || o) && aa(a);
                            return 0
                        }; this.fnVersionCheck = j.ext.fnVersionCheck; this.oApi = {
                            _fnExternApiFunc: Va,
                            _fnInitialise: ba,
                            _fnInitComplete: $,
                            _fnLanguageCompat: pa,
                            _fnAddColumn: o,
                            _fnColumnOptions: m,
                            _fnAddData: H,
                            _fnCreateTr: ea,
                            _fnGatherData: ua,
                            _fnBuildHead: va,
                            _fnDrawHead: W,
                            _fnDraw: x,
                            _fnReDraw: aa,
                            _fnAjaxUpdate: wa,
                            _fnAjaxParameters: Ea,
                            _fnAjaxUpdateDraw: Fa,
                            _fnServerParams: ka,
                            _fnAddOptionsHtml: xa,
                            _fnFeatureHtmlTable: Ba,
                            _fnScrollDraw: La,
                            _fnAdjustColumnSizing: k,
                            _fnFeatureHtmlFilter: za,
                            _fnFilterComplete: K,
                            _fnFilterCustom: Ia,
                            _fnFilterColumn: Ha,
                            _fnFilter: Ga,
                            _fnBuildSearchArray: la,
                            _fnBuildSearchRow: na,
                            _fnFilterCreateSearch: ma,
                            _fnDataToSearch: Ja,
                            _fnSort: O,
                            _fnSortAttachListener: ia,
                            _fnSortingClasses: P,
                            _fnFeatureHtmlPaginate: Da,
                            _fnPageChange: qa,
                            _fnFeatureHtmlInfo: Ca,
                            _fnUpdateInfo: Ka,
                            _fnFeatureHtmlLength: ya,
                            _fnFeatureHtmlProcessing: Aa,
                            _fnProcessingDisplay: E,
                            _fnVisibleToColumnIndex: G,
                            _fnColumnIndexToVisible: R,
                            _fnNodeToDataIndex: I,
                            _fnVisbleColumns: t,
                            _fnCalculateEnd: y,
                            _fnConvertToWidth: Ma,
                            _fnCalculateColumnWidths: da,
                            _fnScrollingWidthAdjust: Oa,
                            _fnGetWidestNode: Na,
                            _fnGetMaxLenString: Pa,
                            _fnStringToCss: q,
                            _fnDetectType: B,
                            _fnSettingsFromNode: s,
                            _fnGetDataMaster: Z,
                            _fnGetTrNodes: T,
                            _fnGetTdNodes: J,
                            _fnEscapeRegex: oa,
                            _fnDeleteIndex: ha,
                            _fnReOrderIndex: u,
                            _fnColumnOrdering: M,
                            _fnLog: D,
                            _fnClearTable: ga,
                            _fnSaveState: ra,
                            _fnLoadState: Sa,
                            _fnCreateCookie: function(a, b, c, d, e) {
                                var f = new Date;
                                f.setTime(f.getTime() + 1e3 * c);
                                var c = X.location.pathname.split("/"),
                                    a = a + "_" + c.pop().replace(/[\/:]/g, "").toLowerCase(),
                                    g;
                                null !== e ? (g = "function" === typeof h.parseJSON ? h.parseJSON(b) : eval("(" + b + ")"), b = e(a, g, f.toGMTString(), c.join("/") + "/")) : b = a + "=" + encodeURIComponent(b) + "; expires=" + f.toGMTString() + "; path=" + c.join("/") + "/";
                                a = l.cookie.split(";");
                                e = b.split(";")[0].length;
                                f = [];
                                if (4096 < e + l.cookie.length + 10) {
                                    for (var j = 0, o = a.length; j < o; j++)
                                        if (-1 != a[j].indexOf(d)) {
                                            var k = a[j].split("=");
                                            try {
                                                (g = eval("(" + decodeURIComponent(k[1]) + ")")) && g.iCreate && f.push({
                                                    name: k[0],
                                                    time: g.iCreate
                                                })
                                            } catch (m) {}
                                        }
                                    for (f.sort(function(e, t) {
                                            return t.time - e.time
                                        }); 4096 < e + l.cookie.length + 10;) {
                                        if (0 === f.length) return;
                                        d = f.pop();
                                        l.cookie = d.name + "=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=" + c.join("/") + "/"
                                    }
                                }
                                l.cookie = b
                            },
                            _fnReadCookie: function(e) {
                                for (var t = X.location.pathname.split("/"), e = e + "_" + t[t.length - 1].replace(/[\/:]/g, "").toLowerCase() + "=", t = l.cookie.split(";"), n = 0; n < t.length; n++) {
                                    for (var r = t[n];
                                        " " == r.charAt(0);) r = r.substring(1, r.length);
                                    if (0 === r.indexOf(e)) return decodeURIComponent(r.substring(e.length, r.length))
                                }
                                return null
                            },
                            _fnDetectHeader: V,
                            _fnGetUniqueThs: N,
                            _fnScrollBarWidth: Qa,
                            _fnApplyToChildren: C,
                            _fnMap: p,
                            _fnGetRowData: Y,
                            _fnGetCellData: v,
                            _fnSetCellData: F,
                            _fnGetObjectDataFn: Q,
                            _fnSetObjectDataFn: L,
                            _fnApplyColumnDefs: ta,
                            _fnBindAction: Ra,
                            _fnExtend: Ta,
                            _fnCallbackReg: z,
                            _fnCallbackFire: A,
                            _fnJsonString: Wa,
                            _fnRender: S,
                            _fnNodeToColumnIndex: fa,
                            _fnInfoMacros: ja,
                            _fnBrowserDetect: Ua,
                            _fnGetColumns: r
                        }; h.extend(j.ext.oApi, this.oApi);
                        for (var sa in j.ext.oApi) sa && (this[sa] = Va(sa));
                        var ca = this; this.each(function() {
                            var t = 0,
                                r, i, s;
                            i = this.getAttribute("id");
                            var u = !1,
                                a = !1;
                            if ("table" != this.nodeName.toLowerCase()) D(null, 0, "Attempted to initialise DataTables on a node which is not a table: " + this.nodeName);
                            else {
                                t = 0;
                                for (r = j.settings.length; t < r; t++) {
                                    if (j.settings[t].nTable == this) {
                                        if (e === n || e.bRetrieve) return j.settings[t].oInstance;
                                        if (e.bDestroy) {
                                            j.settings[t].oInstance.fnDestroy();
                                            break
                                        } else {
                                            D(j.settings[t], 0, "Cannot reinitialise DataTable.\n\nTo retrieve the DataTables object for this table, pass no arguments or see the docs for bRetrieve and bDestroy");
                                            return
                                        }
                                    }
                                    if (j.settings[t].sTableId == this.id) {
                                        j.settings.splice(t, 1);
                                        break
                                    }
                                }
                                if (null === i || "" === i) this.id = i = "DataTables_Table_" + j.ext._oExternConfig.iNextUnique++;
                                var f = h.extend(!0, {}, j.models.oSettings, {
                                    nTable: this,
                                    oApi: ca.oApi,
                                    oInit: e,
                                    sDestroyWidth: h(this).width(),
                                    sInstance: i,
                                    sTableId: i
                                });
                                j.settings.push(f);
                                f.oInstance = 1 === ca.length ? ca : h(this).dataTable();
                                e || (e = {});
                                e.oLanguage && pa(e.oLanguage);
                                e = Ta(h.extend(!0, {}, j.defaults), e);
                                p(f.oFeatures, e, "bPaginate");
                                p(f.oFeatures, e, "bLengthChange");
                                p(f.oFeatures, e, "bFilter");
                                p(f.oFeatures, e, "bSort");
                                p(f.oFeatures, e, "bInfo");
                                p(f.oFeatures, e, "bProcessing");
                                p(f.oFeatures, e, "bAutoWidth");
                                p(f.oFeatures, e, "bSortClasses");
                                p(f.oFeatures, e, "bServerSide");
                                p(f.oFeatures, e, "bDeferRender");
                                p(f.oScroll, e, "sScrollX", "sX");
                                p(f.oScroll, e, "sScrollXInner", "sXInner");
                                p(f.oScroll, e, "sScrollY", "sY");
                                p(f.oScroll, e, "bScrollCollapse", "bCollapse");
                                p(f.oScroll, e, "bScrollInfinite", "bInfinite");
                                p(f.oScroll, e, "iScrollLoadGap", "iLoadGap");
                                p(f.oScroll, e, "bScrollAutoCss", "bAutoCss");
                                p(f, e, "asStripeClasses");
                                p(f, e, "asStripClasses", "asStripeClasses");
                                p(f, e, "fnServerData");
                                p(f, e, "fnFormatNumber");
                                p(f, e, "sServerMethod");
                                p(f, e, "aaSorting");
                                p(f, e, "aaSortingFixed");
                                p(f, e, "aLengthMenu");
                                p(f, e, "sPaginationType");
                                p(f, e, "sAjaxSource");
                                p(f, e, "sAjaxDataProp");
                                p(f, e, "iCookieDuration");
                                p(f, e, "sCookiePrefix");
                                p(f, e, "sDom");
                                p(f, e, "bSortCellsTop");
                                p(f, e, "iTabIndex");
                                p(f, e, "oSearch", "oPreviousSearch");
                                p(f, e, "aoSearchCols", "aoPreSearchCols");
                                p(f, e, "iDisplayLength", "_iDisplayLength");
                                p(f, e, "bJQueryUI", "bJUI");
                                p(f, e, "fnCookieCallback");
                                p(f, e, "fnStateLoad");
                                p(f, e, "fnStateSave");
                                p(f.oLanguage, e, "fnInfoCallback");
                                z(f, "aoDrawCallback", e.fnDrawCallback, "user");
                                z(f, "aoServerParams", e.fnServerParams, "user");
                                z(f, "aoStateSaveParams", e.fnStateSaveParams, "user");
                                z(f, "aoStateLoadParams", e.fnStateLoadParams, "user");
                                z(f, "aoStateLoaded", e.fnStateLoaded, "user");
                                z(f, "aoRowCallback", e.fnRowCallback, "user");
                                z(f, "aoRowCreatedCallback", e.fnCreatedRow, "user");
                                z(f, "aoHeaderCallback", e.fnHeaderCallback, "user");
                                z(f, "aoFooterCallback", e.fnFooterCallback, "user");
                                z(f, "aoInitComplete", e.fnInitComplete, "user");
                                z(f, "aoPreDrawCallback", e.fnPreDrawCallback, "user");
                                f.oFeatures.bServerSide && f.oFeatures.bSort && f.oFeatures.bSortClasses ? z(f, "aoDrawCallback", P, "server_side_sort_classes") : f.oFeatures.bDeferRender && z(f, "aoDrawCallback", P, "defer_sort_classes");
                                e.bJQueryUI ? (h.extend(f.oClasses, j.ext.oJUIClasses), e.sDom === j.defaults.sDom && "lfrtip" === j.defaults.sDom && (f.sDom = '<"H"lfr>t<"F"ip>')) : h.extend(f.oClasses, j.ext.oStdClasses);
                                h(this).addClass(f.oClasses.sTable);
                                if ("" !== f.oScroll.sX || "" !== f.oScroll.sY) f.oScroll.iBarWidth = Qa();
                                f.iInitDisplayStart === n && (f.iInitDisplayStart = e.iDisplayStart, f._iDisplayStart = e.iDisplayStart);
                                e.bStateSave && (f.oFeatures.bStateSave = !0, Sa(f, e), z(f, "aoDrawCallback", ra, "state_save"));
                                null !== e.iDeferLoading && (f.bDeferLoading = !0, t = h.isArray(e.iDeferLoading), f._iRecordsDisplay = t ? e.iDeferLoading[0] : e.iDeferLoading, f._iRecordsTotal = t ? e.iDeferLoading[1] : e.iDeferLoading);
                                null !== e.aaData && (a = !0);
                                "" !== e.oLanguage.sUrl ? (f.oLanguage.sUrl = e.oLanguage.sUrl, h.getJSON(f.oLanguage.sUrl, null, function(t) {
                                    pa(t);
                                    h.extend(true, f.oLanguage, e.oLanguage, t);
                                    ba(f)
                                }), u = !0) : h.extend(!0, f.oLanguage, e.oLanguage);
                                null === e.asStripeClasses && (f.asStripeClasses = [f.oClasses.sStripeOdd, f.oClasses.sStripeEven]);
                                r = f.asStripeClasses.length;
                                f.asDestroyStripes = [];
                                if (r) {
                                    i = !1;
                                    s = h(this).children("tbody").children("tr:lt(" + r + ")");
                                    for (t = 0; t < r; t++) s.hasClass(f.asStripeClasses[t]) && (i = !0, f.asDestroyStripes.push(f.asStripeClasses[t]));
                                    i && s.removeClass(f.asStripeClasses.join(" "))
                                }
                                i = [];
                                t = this.getElementsByTagName("thead");
                                0 !== t.length && (V(f.aoHeader, t[0]), i = N(f));
                                if (null === e.aoColumns) {
                                    s = [];
                                    t = 0;
                                    for (r = i.length; t < r; t++) s.push(null)
                                } else s = e.aoColumns;
                                t = 0;
                                for (r = s.length; t < r; t++) e.saved_aoColumns !== n && e.saved_aoColumns.length == r && (null === s[t] && (s[t] = {}), s[t].bVisible = e.saved_aoColumns[t].bVisible), o(f, i ? i[t] : null);
                                ta(f, e.aoColumnDefs, s, function(e, t) {
                                    m(f, e, t)
                                });
                                t = 0;
                                for (r = f.aaSorting.length; t < r; t++) {
                                    f.aaSorting[t][0] >= f.aoColumns.length && (f.aaSorting[t][0] = 0);
                                    var c = f.aoColumns[f.aaSorting[t][0]];
                                    f.aaSorting[t][2] === n && (f.aaSorting[t][2] = 0);
                                    e.aaSorting === n && f.saved_aaSorting === n && (f.aaSorting[t][1] = c.asSorting[0]);
                                    i = 0;
                                    for (s = c.asSorting.length; i < s; i++)
                                        if (f.aaSorting[t][1] == c.asSorting[i]) {
                                            f.aaSorting[t][2] = i;
                                            break
                                        }
                                }
                                P(f);
                                Ua(f);
                                t = h(this).children("caption").each(function() {
                                    this._captionSide = h(this).css("caption-side")
                                });
                                r = h(this).children("thead");
                                0 === r.length && (r = [l.createElement("thead")], this.appendChild(r[0]));
                                f.nTHead = r[0];
                                r = h(this).children("tbody");
                                0 === r.length && (r = [l.createElement("tbody")], this.appendChild(r[0]));
                                f.nTBody = r[0];
                                f.nTBody.setAttribute("role", "alert");
                                f.nTBody.setAttribute("aria-live", "polite");
                                f.nTBody.setAttribute("aria-relevant", "all");
                                r = h(this).children("tfoot");
                                if (0 === r.length && 0 < t.length && ("" !== f.oScroll.sX || "" !== f.oScroll.sY)) r = [l.createElement("tfoot")], this.appendChild(r[0]);
                                0 < r.length && (f.nTFoot = r[0], V(f.aoFooter, f.nTFoot));
                                if (a)
                                    for (t = 0; t < e.aaData.length; t++) H(f, e.aaData[t]);
                                else ua(f);
                                f.aiDisplay = f.aiDisplayMaster.slice();
                                f.bInitialised = !0;
                                !1 === u && ba(f)
                            }
                        }); ca = null;
                        return this
                    };
                    j.fnVersionCheck = function(e) {
                        for (var t = function(e, t) {
                                for (; e.length < t;) e += "0";
                                return e
                            }, n = j.ext.sVersion.split("."), e = e.split("."), r = "", i = "", s = 0, o = e.length; s < o; s++) r += t(n[s], 3), i += t(e[s], 3);
                        return parseInt(r, 10) >= parseInt(i, 10)
                    };
                    j.fnIsDataTable = function(e) {
                        for (var t = j.settings, n = 0; n < t.length; n++)
                            if (t[n].nTable === e || t[n].nScrollHead === e || t[n].nScrollFoot === e) return !0;
                        return !1
                    };
                    j.fnTables = function(e) {
                        var t = [];
                        jQuery.each(j.settings, function(n, r) {
                            (!e || !0 === e && h(r.nTable).is(":visible")) && t.push(r.nTable)
                        });
                        return t
                    };
                    j.version = "1.9.4";
                    j.settings = [];
                    j.models = {};
                    j.models.ext = {
                        afnFiltering: [],
                        afnSortData: [],
                        aoFeatures: [],
                        aTypes: [],
                        fnVersionCheck: j.fnVersionCheck,
                        iApiIndex: 0,
                        ofnSearch: {},
                        oApi: {},
                        oStdClasses: {},
                        oJUIClasses: {},
                        oPagination: {},
                        oSort: {},
                        sVersion: j.version,
                        sErrMode: "alert",
                        _oExternConfig: {
                            iNextUnique: 0
                        }
                    };
                    j.models.oSearch = {
                        bCaseInsensitive: !0,
                        sSearch: "",
                        bRegex: !1,
                        bSmart: !0
                    };
                    j.models.oRow = {
                        nTr: null,
                        _aData: [],
                        _aSortData: [],
                        _anHidden: [],
                        _sRowStripe: ""
                    };
                    j.models.oColumn = {
                        aDataSort: null,
                        asSorting: null,
                        bSearchable: null,
                        bSortable: null,
                        bUseRendered: null,
                        bVisible: null,
                        _bAutoType: !0,
                        fnCreatedCell: null,
                        fnGetData: null,
                        fnRender: null,
                        fnSetData: null,
                        mData: null,
                        mRender: null,
                        nTh: null,
                        nTf: null,
                        sClass: null,
                        sContentPadding: null,
                        sDefaultContent: null,
                        sName: null,
                        sSortDataType: "std",
                        sSortingClass: null,
                        sSortingClassJUI: null,
                        sTitle: null,
                        sType: null,
                        sWidth: null,
                        sWidthOrig: null
                    };
                    j.defaults = {
                        aaData: null,
                        aaSorting: [
                            [0, "asc"]
                        ],
                        aaSortingFixed: null,
                        aLengthMenu: [10, 25, 50, 100],
                        aoColumns: null,
                        aoColumnDefs: null,
                        aoSearchCols: [],
                        asStripeClasses: null,
                        bAutoWidth: !0,
                        bDeferRender: !1,
                        bDestroy: !1,
                        bFilter: !0,
                        bInfo: !0,
                        bJQueryUI: !1,
                        bLengthChange: !0,
                        bPaginate: !0,
                        bProcessing: !1,
                        bRetrieve: !1,
                        bScrollAutoCss: !0,
                        bScrollCollapse: !1,
                        bScrollInfinite: !1,
                        bServerSide: !1,
                        bSort: !0,
                        bSortCellsTop: !1,
                        bSortClasses: !0,
                        bStateSave: !1,
                        fnCookieCallback: null,
                        fnCreatedRow: null,
                        fnDrawCallback: null,
                        fnFooterCallback: null,
                        fnFormatNumber: function(e) {
                            if (1e3 > e) return e;
                            for (var t = e + "", e = t.split(""), n = "", t = t.length, r = 0; r < t; r++) 0 === r % 3 && 0 !== r && (n = this.oLanguage.sInfoThousands + n), n = e[t - r - 1] + n;
                            return n
                        },
                        fnHeaderCallback: null,
                        fnInfoCallback: null,
                        fnInitComplete: null,
                        fnPreDrawCallback: null,
                        fnRowCallback: null,
                        fnServerData: function(e, t, n, r) {
                            r.jqXHR = h.ajax({
                                url: e,
                                data: t,
                                success: function(e) {
                                    e.sError && r.oApi._fnLog(r, 0, e.sError);
                                    h(r.oInstance).trigger("xhr", [r, e]);
                                    n(e)
                                },
                                dataType: "json",
                                cache: !1,
                                type: r.sServerMethod,
                                error: function(e, t) {
                                    "parsererror" == t && r.oApi._fnLog(r, 0, "DataTables warning: JSON data from server could not be parsed. This is caused by a JSON formatting error.")
                                }
                            })
                        },
                        fnServerParams: null,
                        fnStateLoad: function(e) {
                            var e = this.oApi._fnReadCookie(e.sCookiePrefix + e.sInstance),
                                j;
                            try {
                                j = "function" === typeof h.parseJSON ? h.parseJSON(e) : eval("(" + e + ")")
                            } catch (m) {
                                j = null
                            }
                            return j
                        },
                        fnStateLoadParams: null,
                        fnStateLoaded: null,
                        fnStateSave: function(e, t) {
                            this.oApi._fnCreateCookie(e.sCookiePrefix + e.sInstance, this.oApi._fnJsonString(t), e.iCookieDuration, e.sCookiePrefix, e.fnCookieCallback)
                        },
                        fnStateSaveParams: null,
                        iCookieDuration: 7200,
                        iDeferLoading: null,
                        iDisplayLength: 10,
                        iDisplayStart: 0,
                        iScrollLoadGap: 100,
                        iTabIndex: 0,
                        oLanguage: {
                            oAria: {
                                sSortAscending: ": activate to sort column ascending",
                                sSortDescending: ": activate to sort column descending"
                            },
                            oPaginate: {
                                sFirst: "First",
                                sLast: "Last",
                                sNext: "Next",
                                sPrevious: "Previous"
                            },
                            sEmptyTable: "No data available in table",
                            sInfo: "Showing _START_ to _END_ of _TOTAL_ entries",
                            sInfoEmpty: "Showing 0 to 0 of 0 entries",
                            sInfoFiltered: "(filtered from _MAX_ total entries)",
                            sInfoPostFix: "",
                            sInfoThousands: ",",
                            sLengthMenu: "Show _MENU_ entries",
                            sLoadingRecords: "Loading...",
                            sProcessing: "Processing...",
                            sSearch: "Search:",
                            sUrl: "",
                            sZeroRecords: "No matching records found"
                        },
                        oSearch: h.extend({}, j.models.oSearch),
                        sAjaxDataProp: "aaData",
                        sAjaxSource: null,
                        sCookiePrefix: "SpryMedia_DataTables_",
                        sDom: "lfrtip",
                        sPaginationType: "two_button",
                        sScrollX: "",
                        sScrollXInner: "",
                        sScrollY: "",
                        sServerMethod: "GET"
                    };
                    j.defaults.columns = {
                        aDataSort: null,
                        asSorting: ["asc", "desc"],
                        bSearchable: !0,
                        bSortable: !0,
                        bUseRendered: !0,
                        bVisible: !0,
                        fnCreatedCell: null,
                        fnRender: null,
                        iDataSort: -1,
                        mData: null,
                        mRender: null,
                        sCellType: "td",
                        sClass: "",
                        sContentPadding: "",
                        sDefaultContent: null,
                        sName: "",
                        sSortDataType: "std",
                        sTitle: null,
                        sType: null,
                        sWidth: null
                    };
                    j.models.oSettings = {
                        oFeatures: {
                            bAutoWidth: null,
                            bDeferRender: null,
                            bFilter: null,
                            bInfo: null,
                            bLengthChange: null,
                            bPaginate: null,
                            bProcessing: null,
                            bServerSide: null,
                            bSort: null,
                            bSortClasses: null,
                            bStateSave: null
                        },
                        oScroll: {
                            bAutoCss: null,
                            bCollapse: null,
                            bInfinite: null,
                            iBarWidth: 0,
                            iLoadGap: null,
                            sX: null,
                            sXInner: null,
                            sY: null
                        },
                        oLanguage: {
                            fnInfoCallback: null
                        },
                        oBrowser: {
                            bScrollOversize: !1
                        },
                        aanFeatures: [],
                        aoData: [],
                        aiDisplay: [],
                        aiDisplayMaster: [],
                        aoColumns: [],
                        aoHeader: [],
                        aoFooter: [],
                        asDataSearch: [],
                        oPreviousSearch: {},
                        aoPreSearchCols: [],
                        aaSorting: null,
                        aaSortingFixed: null,
                        asStripeClasses: null,
                        asDestroyStripes: [],
                        sDestroyWidth: 0,
                        aoRowCallback: [],
                        aoHeaderCallback: [],
                        aoFooterCallback: [],
                        aoDrawCallback: [],
                        aoRowCreatedCallback: [],
                        aoPreDrawCallback: [],
                        aoInitComplete: [],
                        aoStateSaveParams: [],
                        aoStateLoadParams: [],
                        aoStateLoaded: [],
                        sTableId: "",
                        nTable: null,
                        nTHead: null,
                        nTFoot: null,
                        nTBody: null,
                        nTableWrapper: null,
                        bDeferLoading: !1,
                        bInitialised: !1,
                        aoOpenRows: [],
                        sDom: null,
                        sPaginationType: "two_button",
                        iCookieDuration: 0,
                        sCookiePrefix: "",
                        fnCookieCallback: null,
                        aoStateSave: [],
                        aoStateLoad: [],
                        oLoadedState: null,
                        sAjaxSource: null,
                        sAjaxDataProp: null,
                        bAjaxDataGet: !0,
                        jqXHR: null,
                        fnServerData: null,
                        aoServerParams: [],
                        sServerMethod: null,
                        fnFormatNumber: null,
                        aLengthMenu: null,
                        iDraw: 0,
                        bDrawing: !1,
                        iDrawError: -1,
                        _iDisplayLength: 10,
                        _iDisplayStart: 0,
                        _iDisplayEnd: 10,
                        _iRecordsTotal: 0,
                        _iRecordsDisplay: 0,
                        bJUI: null,
                        oClasses: {},
                        bFiltered: !1,
                        bSorted: !1,
                        bSortCellsTop: null,
                        oInit: null,
                        aoDestroyCallback: [],
                        fnRecordsTotal: function() {
                            return this.oFeatures.bServerSide ? parseInt(this._iRecordsTotal, 10) : this.aiDisplayMaster.length
                        },
                        fnRecordsDisplay: function() {
                            return this.oFeatures.bServerSide ? parseInt(this._iRecordsDisplay, 10) : this.aiDisplay.length
                        },
                        fnDisplayEnd: function() {
                            return this.oFeatures.bServerSide ? !1 === this.oFeatures.bPaginate || -1 == this._iDisplayLength ? this._iDisplayStart + this.aiDisplay.length : Math.min(this._iDisplayStart + this._iDisplayLength, this._iRecordsDisplay) : this._iDisplayEnd
                        },
                        oInstance: null,
                        sInstance: null,
                        iTabIndex: 0,
                        nScrollHead: null,
                        nScrollFoot: null
                    };
                    j.ext = h.extend(!0, {}, j.models.ext);
                    h.extend(j.ext.oStdClasses, {
                        sTable: "dataTable",
                        sPagePrevEnabled: "paginate_enabled_previous",
                        sPagePrevDisabled: "paginate_disabled_previous",
                        sPageNextEnabled: "paginate_enabled_next",
                        sPageNextDisabled: "paginate_disabled_next",
                        sPageJUINext: "",
                        sPageJUIPrev: "",
                        sPageButton: "paginate_button",
                        sPageButtonActive: "paginate_active",
                        sPageButtonStaticDisabled: "paginate_button paginate_button_disabled",
                        sPageFirst: "first",
                        sPagePrevious: "previous",
                        sPageNext: "next",
                        sPageLast: "last",
                        sStripeOdd: "odd",
                        sStripeEven: "even",
                        sRowEmpty: "dataTables_empty",
                        sWrapper: "dataTables_wrapper",
                        sFilter: "dataTables_filter",
                        sInfo: "dataTables_info",
                        sPaging: "dataTables_paginate paging_",
                        sLength: "dataTables_length",
                        sProcessing: "dataTables_processing",
                        sSortAsc: "sorting_asc",
                        sSortDesc: "sorting_desc",
                        sSortable: "sorting",
                        sSortableAsc: "sorting_asc_disabled",
                        sSortableDesc: "sorting_desc_disabled",
                        sSortableNone: "sorting_disabled",
                        sSortColumn: "sorting_",
                        sSortJUIAsc: "",
                        sSortJUIDesc: "",
                        sSortJUI: "",
                        sSortJUIAscAllowed: "",
                        sSortJUIDescAllowed: "",
                        sSortJUIWrapper: "",
                        sSortIcon: "",
                        sScrollWrapper: "dataTables_scroll",
                        sScrollHead: "dataTables_scrollHead",
                        sScrollHeadInner: "dataTables_scrollHeadInner",
                        sScrollBody: "dataTables_scrollBody",
                        sScrollFoot: "dataTables_scrollFoot",
                        sScrollFootInner: "dataTables_scrollFootInner",
                        sFooterTH: "",
                        sJUIHeader: "",
                        sJUIFooter: ""
                    });
                    h.extend(j.ext.oJUIClasses, j.ext.oStdClasses, {
                        sPagePrevEnabled: "fg-button ui-button ui-state-default ui-corner-left",
                        sPagePrevDisabled: "fg-button ui-button ui-state-default ui-corner-left ui-state-disabled",
                        sPageNextEnabled: "fg-button ui-button ui-state-default ui-corner-right",
                        sPageNextDisabled: "fg-button ui-button ui-state-default ui-corner-right ui-state-disabled",
                        sPageJUINext: "ui-icon ui-icon-circle-arrow-e",
                        sPageJUIPrev: "ui-icon ui-icon-circle-arrow-w",
                        sPageButton: "fg-button ui-button ui-state-default",
                        sPageButtonActive: "fg-button ui-button ui-state-default ui-state-disabled",
                        sPageButtonStaticDisabled: "fg-button ui-button ui-state-default ui-state-disabled",
                        sPageFirst: "first ui-corner-tl ui-corner-bl",
                        sPageLast: "last ui-corner-tr ui-corner-br",
                        sPaging: "dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",
                        sSortAsc: "ui-state-default",
                        sSortDesc: "ui-state-default",
                        sSortable: "ui-state-default",
                        sSortableAsc: "ui-state-default",
                        sSortableDesc: "ui-state-default",
                        sSortableNone: "ui-state-default",
                        sSortJUIAsc: "css_right ui-icon ui-icon-triangle-1-n",
                        sSortJUIDesc: "css_right ui-icon ui-icon-triangle-1-s",
                        sSortJUI: "css_right ui-icon ui-icon-carat-2-n-s",
                        sSortJUIAscAllowed: "css_right ui-icon ui-icon-carat-1-n",
                        sSortJUIDescAllowed: "css_right ui-icon ui-icon-carat-1-s",
                        sSortJUIWrapper: "DataTables_sort_wrapper",
                        sSortIcon: "DataTables_sort_icon",
                        sScrollHead: "dataTables_scrollHead ui-state-default",
                        sScrollFoot: "dataTables_scrollFoot ui-state-default",
                        sFooterTH: "ui-state-default",
                        sJUIHeader: "fg-toolbar ui-toolbar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix",
                        sJUIFooter: "fg-toolbar ui-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix"
                    });
                    h.extend(j.ext.oPagination, {
                        two_button: {
                            fnInit: function(e, t, n) {
                                var r = e.oLanguage.oPaginate,
                                    i = function(t) {
                                        e.oApi._fnPageChange(e, t.data.action) && n(e)
                                    },
                                    r = !e.bJUI ? '<a class="' + e.oClasses.sPagePrevDisabled + '" tabindex="' + e.iTabIndex + '" role="button">' + r.sPrevious + '</a><a class="' + e.oClasses.sPageNextDisabled + '" tabindex="' + e.iTabIndex + '" role="button">' + r.sNext + "</a>" : '<a class="' + e.oClasses.sPagePrevDisabled + '" tabindex="' + e.iTabIndex + '" role="button"><span class="' + e.oClasses.sPageJUIPrev + '"></span></a><a class="' + e.oClasses.sPageNextDisabled + '" tabindex="' + e.iTabIndex + '" role="button"><span class="' + e.oClasses.sPageJUINext + '"></span></a>';
                                h(t).append(r);
                                var s = h("a", t),
                                    r = s[0],
                                    s = s[1];
                                e.oApi._fnBindAction(r, {
                                    action: "previous"
                                }, i);
                                e.oApi._fnBindAction(s, {
                                    action: "next"
                                }, i);
                                e.aanFeatures.p || (t.id = e.sTableId + "_paginate", r.id = e.sTableId + "_previous", s.id = e.sTableId + "_next", r.setAttribute("aria-controls", e.sTableId), s.setAttribute("aria-controls", e.sTableId))
                            },
                            fnUpdate: function(e) {
                                if (e.aanFeatures.p)
                                    for (var t = e.oClasses, n = e.aanFeatures.p, r, i = 0, s = n.length; i < s; i++)
                                        if (r = n[i].firstChild) r.className = 0 === e._iDisplayStart ? t.sPagePrevDisabled : t.sPagePrevEnabled, r = r.nextSibling, r.className = e.fnDisplayEnd() == e.fnRecordsDisplay() ? t.sPageNextDisabled : t.sPageNextEnabled
                            }
                        },
                        iFullNumbersShowPages: 5,
                        full_numbers: {
                            fnInit: function(e, t, n) {
                                var r = e.oLanguage.oPaginate,
                                    i = e.oClasses,
                                    s = function(t) {
                                        e.oApi._fnPageChange(e, t.data.action) && n(e)
                                    };
                                h(t).append('<a  tabindex="' + e.iTabIndex + '" class="' + i.sPageButton + " " + i.sPageFirst + '">' + r.sFirst + '</a><a  tabindex="' + e.iTabIndex + '" class="' + i.sPageButton + " " + i.sPagePrevious + '">' + r.sPrevious + '</a><span></span><a tabindex="' + e.iTabIndex + '" class="' + i.sPageButton + " " + i.sPageNext + '">' + r.sNext + '</a><a tabindex="' + e.iTabIndex + '" class="' + i.sPageButton + " " + i.sPageLast + '">' + r.sLast + "</a>");
                                var o = h("a", t),
                                    r = o[0],
                                    i = o[1],
                                    u = o[2],
                                    o = o[3];
                                e.oApi._fnBindAction(r, {
                                    action: "first"
                                }, s);
                                e.oApi._fnBindAction(i, {
                                    action: "previous"
                                }, s);
                                e.oApi._fnBindAction(u, {
                                    action: "next"
                                }, s);
                                e.oApi._fnBindAction(o, {
                                    action: "last"
                                }, s);
                                e.aanFeatures.p || (t.id = e.sTableId + "_paginate", r.id = e.sTableId + "_first", i.id = e.sTableId + "_previous", u.id = e.sTableId + "_next", o.id = e.sTableId + "_last")
                            },
                            fnUpdate: function(e, t) {
                                if (e.aanFeatures.p) {
                                    var n = j.ext.oPagination.iFullNumbersShowPages,
                                        r = Math.floor(n / 2),
                                        i = Math.ceil(e.fnRecordsDisplay() / e._iDisplayLength),
                                        s = Math.ceil(e._iDisplayStart / e._iDisplayLength) + 1,
                                        o = "",
                                        u, a = e.oClasses,
                                        f, l = e.aanFeatures.p,
                                        c = function(n) {
                                            e.oApi._fnBindAction(this, {
                                                page: n + u - 1
                                            }, function(n) {
                                                e.oApi._fnPageChange(e, n.data.page);
                                                t(e);
                                                n.preventDefault()
                                            })
                                        }; - 1 === e._iDisplayLength ? s = r = u = 1 : i < n ? (u = 1, r = i) : s <= r ? (u = 1, r = n) : s >= i - r ? (u = i - n + 1, r = i) : (u = s - Math.ceil(n / 2) + 1, r = u + n - 1);
                                    for (n = u; n <= r; n++) o += s !== n ? '<a tabindex="' + e.iTabIndex + '" class="' + a.sPageButton + '">' + e.fnFormatNumber(n) + "</a>" : '<a tabindex="' + e.iTabIndex + '" class="' + a.sPageButtonActive + '">' + e.fnFormatNumber(n) + "</a>";
                                    n = 0;
                                    for (r = l.length; n < r; n++) f = l[n], f.hasChildNodes() && (h("span:eq(0)", f).html(o).children("a").each(c), f = f.getElementsByTagName("a"), f = [f[0], f[1], f[f.length - 2], f[f.length - 1]], h(f).removeClass(a.sPageButton + " " + a.sPageButtonActive + " " + a.sPageButtonStaticDisabled), h([f[0], f[1]]).addClass(1 == s ? a.sPageButtonStaticDisabled : a.sPageButton), h([f[2], f[3]]).addClass(0 === i || s === i || -1 === e._iDisplayLength ? a.sPageButtonStaticDisabled : a.sPageButton))
                                }
                            }
                        }
                    });
                    h.extend(j.ext.oSort, {
                        "string-pre": function(e) {
                            "string" != typeof e && (e = null !== e && e.toString ? e.toString() : "");
                            return e.toLowerCase()
                        },
                        "string-asc": function(e, t) {
                            return e < t ? -1 : e > t ? 1 : 0
                        },
                        "string-desc": function(e, t) {
                            return e < t ? 1 : e > t ? -1 : 0
                        },
                        "html-pre": function(e) {
                            return e.replace(/<.*?>/g, "").toLowerCase()
                        },
                        "html-asc": function(e, t) {
                            return e < t ? -1 : e > t ? 1 : 0
                        },
                        "html-desc": function(e, t) {
                            return e < t ? 1 : e > t ? -1 : 0
                        },
                        "date-pre": function(e) {
                            e = Date.parse(e);
                            if (isNaN(e) || "" === e) e = Date.parse("01/01/1970 00:00:00");
                            return e
                        },
                        "date-asc": function(e, t) {
                            return e - t
                        },
                        "date-desc": function(e, t) {
                            return t - e
                        },
                        "numeric-pre": function(e) {
                            return "-" == e || "" === e ? 0 : 1 * e
                        },
                        "numeric-asc": function(e, t) {
                            return e - t
                        },
                        "numeric-desc": function(e, t) {
                            return t - e
                        }
                    });
                    h.extend(j.ext.aTypes, [function(e) {
                        if ("number" === typeof e) return "numeric";
                        if ("string" !== typeof e) return null;
                        var t, n = !1;
                        t = e.charAt(0);
                        if (-1 == "0123456789-".indexOf(t)) return null;
                        for (var r = 1; r < e.length; r++) {
                            t = e.charAt(r);
                            if (-1 == "0123456789.".indexOf(t)) return null;
                            if ("." == t) {
                                if (n) return null;
                                n = !0
                            }
                        }
                        return "numeric"
                    }, function(e) {
                        var t = Date.parse(e);
                        return null !== t && !isNaN(t) || "string" === typeof e && 0 === e.length ? "date" : null
                    }, function(e) {
                        return "string" === typeof e && -1 != e.indexOf("<") && -1 != e.indexOf(">") ? "html" : null
                    }]);
                    h.fn.DataTable = j;
                    h.fn.dataTable = j;
                    h.fn.dataTableSettings = j.settings;
                    h.fn.dataTableExt = j.ext
                };
                "function" === typeof define && define.amd ? define(["jquery"], L) : jQuery && !jQuery.fn.dataTable && L(jQuery)
            })(window, document);
        (function(e, t) {
                function n(t) {
                    e.extend(!0, yt, t)
                }

                function r(n, r, f) {
                    function l(e) {
                        Y ? (T(), x(), _(), b(e)) : c()
                    }

                    function c() {
                        Z = r.theme ? "ui" : "fc", n.addClass("fc"), r.isRTL ? n.addClass("fc-rtl") : n.addClass("fc-ltr"), r.theme && n.addClass("ui-widget"), Y = e("<div class='fc-content' style='position:relative'/>").prependTo(n), Q = new i(K, r), G = Q.render(), G && n.prepend(G), y(r.defaultView), e(window).resize(C), g() || p()
                    }

                    function p() {
                        setTimeout(function() {
                            !et.start && g() && b()
                        }, 0)
                    }

                    function d() {
                        e(window).unbind("resize", C), Q.destroy(), Y.remove(), n.removeClass("fc fc-rtl ui-widget")
                    }

                    function v() {
                        return 0 !== ut.offsetWidth
                    }

                    function g() {
                        return 0 !== e("body")[0].offsetWidth
                    }

                    function y(t) {
                        if (!et || t != et.name) {
                            lt++, P();
                            var n, r = et;
                            r ? ((r.beforeHide || R)(), q(Y, Y.height()), r.element.hide()) : q(Y, 1), Y.css("overflow", "hidden"), et = at[t], et ? et.element.show() : et = at[t] = new Et[t](n = rt = e("<div class='fc-view fc-view-" + t + "' style='position:absolute'/>").appendTo(Y), K), r && Q.deactivateButton(r.name), Q.activateButton(t), b(), Y.css("overflow", ""), r && q(Y, 1), n || (et.afterShow || R)(), lt--
                        }
                    }

                    function b(e) {
                        if (v()) {
                            lt++, P(), nt === t && T();
                            var r = !1;
                            !et.start || e || et.start > ct || ct >= et.end ? (et.render(ct, e || 0), N(!0), r = !0) : et.sizeDirty ? (et.clearEvents(), N(), r = !0) : et.eventsDirty && (et.clearEvents(), r = !0), et.sizeDirty = !1, et.eventsDirty = !1, k(r), tt = n.outerWidth(), Q.updateTitle(et.title);
                            var i = new Date;
                            i >= et.start && et.end > i ? Q.disableButton("today") : Q.enableButton("today"), lt--, et.trigger("viewDisplay", ut)
                        }
                    }

                    function S() {
                        x(), v() && (T(), N(), P(), et.clearEvents(), et.renderEvents(ht), et.sizeDirty = !1)
                    }

                    function x() {
                        e.each(at, function(e, t) {
                            t.sizeDirty = !0
                        })
                    }

                    function T() {
                        nt = r.contentHeight ? r.contentHeight : r.height ? r.height - (G ? G.height() : 0) - B(Y) : Math.round(Y.width() / Math.max(r.aspectRatio, .5))
                    }

                    function N(e) {
                        lt++, et.setHeight(nt, e), rt && (rt.css("position", "relative"), rt = null), et.setWidth(Y.width(), e), lt--
                    }

                    function C() {
                        if (!lt)
                            if (et.start) {
                                var e = ++ft;
                                setTimeout(function() {
                                    e == ft && !lt && v() && tt != (tt = n.outerWidth()) && (lt++, S(), et.trigger("windowResize", ut), lt--)
                                }, 200)
                            } else p()
                    }

                    function k(e) {
                        !r.lazyFetching || st(et.visStart, et.visEnd) ? L() : e && M()
                    }

                    function L() {
                        ot(et.visStart, et.visEnd)
                    }

                    function A(e) {
                        ht = e, M()
                    }

                    function O(e) {
                        M(e)
                    }

                    function M(e) {
                        _(), v() && (et.clearEvents(), et.renderEvents(ht, e), et.eventsDirty = !1)
                    }

                    function _() {
                        e.each(at, function(e, t) {
                            t.eventsDirty = !0
                        })
                    }

                    function D(e, n, r) {
                        et.select(e, n, r === t ? !0 : r)
                    }

                    function P() {
                        et && et.unselect()
                    }

                    function H() {
                        b(-1)
                    }

                    function j() {
                        b(1)
                    }

                    function F() {
                        o(ct, -1), b()
                    }

                    function I() {
                        o(ct, 1), b()
                    }

                    function U() {
                        ct = new Date, b()
                    }

                    function z(e, t, n) {
                        e instanceof Date ? ct = h(e) : m(ct, e, t, n), b()
                    }

                    function W(e, n, r) {
                        e !== t && o(ct, e), n !== t && u(ct, n), r !== t && a(ct, r), b()
                    }

                    function X() {
                        return h(ct)
                    }

                    function V() {
                        return et
                    }

                    function $(e, n) {
                        return n === t ? r[e] : (("height" == e || "contentHeight" == e || "aspectRatio" == e) && (r[e] = n, S()), t)
                    }

                    function J(e, n) {
                        return r[e] ? r[e].apply(n || ut, Array.prototype.slice.call(arguments, 2)) : t
                    }
                    var K = this;
                    K.options = r, K.render = l, K.destroy = d, K.refetchEvents = L, K.reportEvents = A, K.reportEventChange = O, K.rerenderEvents = M, K.changeView = y, K.select = D, K.unselect = P, K.prev = H, K.next = j, K.prevYear = F, K.nextYear = I, K.today = U, K.gotoDate = z, K.incrementDate = W, K.formatDate = function(e, t) {
                        return w(e, t, r)
                    }, K.formatDates = function(e, t, n) {
                        return E(e, t, n, r)
                    }, K.getDate = X, K.getView = V, K.option = $, K.trigger = J, s.call(K, r, f);
                    var Q, G, Y, Z, et, tt, nt, rt, it, st = K.isFetchNeeded,
                        ot = K.fetchEvents,
                        ut = n[0],
                        at = {},
                        ft = 0,
                        lt = 0,
                        ct = new Date,
                        ht = [];
                    m(ct, r.year, r.month, r.date), r.droppable && e(document).bind("dragstart", function(t, n) {
                        var i = t.target,
                            s = e(i);
                        if (!s.parents(".fc").length) {
                            var o = r.dropAccept;
                            (e.isFunction(o) ? o.call(i, s) : s.is(o)) && (it = i, et.dragStart(it, t, n))
                        }
                    }).bind("dragstop", function(e, t) {
                        it && (et.dragStop(it, e, t), it = null)
                    })
                }

                function i(n, r) {
                    function i() {
                        p = r.theme ? "ui" : "fc";
                        var n = r.header;
                        return n ? d = e("<table class='fc-header' style='width:100%'/>").append(e("<tr/>").append(o("left")).append(o("center")).append(o("right"))) : t
                    }

                    function s() {
                        d.remove()
                    }

                    function o(t) {
                        var i = e("<td class='fc-header-" + t + "'/>"),
                            s = r.header[t];
                        return s && e.each(s.split(" "), function(t) {
                            t > 0 && i.append("<span class='fc-header-space'/>");
                            var s;
                            e.each(this.split(","), function(t, o) {
                                if ("title" == o) i.append("<span class='fc-header-title'><h2> </h2></span>"), s && s.addClass(p + "-corner-right"), s = null;
                                else {
                                    var u;
                                    if (n[o] ? u = n[o] : Et[o] && (u = function() {
                                            l.removeClass(p + "-state-hover"), n.changeView(o)
                                        }), u) {
                                        var a = r.theme ? X(r.buttonIcons, o) : null,
                                            f = X(r.buttonText, o),
                                            l = e("<span class='fc-button fc-button-" + o + " " + p + "-state-default'>" + (a ? "<span class='fc-icon-wrap'><span class='ui-icon ui-icon-" + a + "'/>" + "</span>" : f) + "</span>").click(function() {
                                                l.hasClass(p + "-state-disabled") || u()
                                            }).mousedown(function() {
                                                l.not("." + p + "-state-active").not("." + p + "-state-disabled").addClass(p + "-state-down")
                                            }).mouseup(function() {
                                                l.removeClass(p + "-state-down")
                                            }).hover(function() {
                                                l.not("." + p + "-state-active").not("." + p + "-state-disabled").addClass(p + "-state-hover")
                                            }, function() {
                                                l.removeClass(p + "-state-hover").removeClass(p + "-state-down")
                                            }).appendTo(i);
                                        J(l), s || l.addClass(p + "-corner-left"), s = l
                                    }
                                }
                            }), s && s.addClass(p + "-corner-right")
                        }), i
                    }

                    function u(e) {
                        d.find("h2").html(e)
                    }

                    function a(e) {
                        d.find("span.fc-button-" + e).addClass(p + "-state-active")
                    }

                    function f(e) {
                        d.find("span.fc-button-" + e).removeClass(p + "-state-active")
                    }

                    function l(e) {
                        d.find("span.fc-button-" + e).addClass(p + "-state-disabled")
                    }

                    function c(e) {
                        d.find("span.fc-button-" + e).removeClass(p + "-state-disabled")
                    }
                    var h = this;
                    h.render = i, h.destroy = s, h.updateTitle = u, h.activateButton = a, h.deactivateButton = f, h.disableButton = l, h.enableButton = c;
                    var p, d = e([])
                }

                function s(n, r) {
                    function i(e, t) {
                        return !T || T > e || t > N
                    }

                    function s(e, t) {
                        T = e, N = t, P = [];
                        var n = ++M,
                            r = O.length;
                        _ = r;
                        for (var i = 0; r > i; i++) o(O[i], n)
                    }

                    function o(t, r) {
                        u(t, function(i) {
                            if (r == M) {
                                if (i) {
                                    n.eventDataTransform && (i = e.map(i, n.eventDataTransform)), t.eventDataTransform && (i = e.map(i, t.eventDataTransform));
                                    for (var s = 0; i.length > s; s++) i[s].source = t, b(i[s]);
                                    P = P.concat(i)
                                }
                                _--, _ || L(P)
                            }
                        })
                    }

                    function u(r, i) {
                        var s, o, a = wt.sourceFetchers;
                        for (s = 0; a.length > s; s++) {
                            if (o = a[s](r, T, N, i), o === !0) return;
                            if ("object" == typeof o) return u(o, i), t
                        }
                        var f = r.events;
                        if (f) e.isFunction(f) ? (m(), f(h(T), h(N), function(e) {
                            i(e), y()
                        })) : e.isArray(f) ? i(f) : i();
                        else {
                            var l = r.url;
                            if (l) {
                                var c = r.success,
                                    p = r.error,
                                    d = r.complete,
                                    v = e.extend({}, r.data || {}),
                                    g = Z(r.startParam, n.startParam),
                                    b = Z(r.endParam, n.endParam);
                                g && (v[g] = Math.round(+T / 1e3)), b && (v[b] = Math.round(+N / 1e3)), m(), e.ajax(e.extend({}, St, r, {
                                    data: v,
                                    success: function(t) {
                                        t = t || [];
                                        var n = Y(c, this, arguments);
                                        e.isArray(n) && (t = n), i(t)
                                    },
                                    error: function() {
                                        Y(p, this, arguments), i()
                                    },
                                    complete: function() {
                                        Y(d, this, arguments), y()
                                    }
                                }))
                            } else i()
                        }
                    }

                    function a(e) {
                        e = f(e), e && (_++, o(e, M))
                    }

                    function f(n) {
                        return e.isFunction(n) || e.isArray(n) ? n = {
                            events: n
                        } : "string" == typeof n && (n = {
                            url: n
                        }), "object" == typeof n ? (w(n), O.push(n), n) : t
                    }

                    function l(t) {
                        O = e.grep(O, function(e) {
                            return !E(e, t)
                        }), P = e.grep(P, function(e) {
                            return !E(e.source, t)
                        }), L(P)
                    }

                    function c(e) {
                        var t, n, r = P.length,
                            i = k().defaultEventEnd,
                            s = e.start - e._start,
                            o = e.end ? e.end - (e._end || i(e)) : 0;
                        for (t = 0; r > t; t++) n = P[t], n._id == e._id && n != e && (n.start = new Date(+n.start + s), n.end = e.end ? n.end ? new Date(+n.end + o) : new Date(+i(n) + o) : null, n.title = e.title, n.url = e.url, n.allDay = e.allDay, n.className = e.className, n.editable = e.editable, n.color = e.color, n.backgroudColor = e.backgroudColor, n.borderColor = e.borderColor, n.textColor = e.textColor, b(n));
                        b(e), L(P)
                    }

                    function p(e, t) {
                        b(e), e.source || (t && (A.events.push(e), e.source = A), P.push(e)), L(P)
                    }

                    function d(t) {
                        if (t) {
                            if (!e.isFunction(t)) {
                                var n = t + "";
                                t = function(e) {
                                    return e._id == n
                                }
                            }
                            P = e.grep(P, t, !0);
                            for (var r = 0; O.length > r; r++) e.isArray(O[r].events) && (O[r].events = e.grep(O[r].events, t, !0))
                        } else {
                            P = [];
                            for (var r = 0; O.length > r; r++) e.isArray(O[r].events) && (O[r].events = [])
                        }
                        L(P)
                    }

                    function v(t) {
                        return e.isFunction(t) ? e.grep(P, t) : t ? (t += "", e.grep(P, function(e) {
                            return e._id == t
                        })) : P
                    }

                    function m() {
                        D++ || C("loading", null, !0)
                    }

                    function y() {
                        --D || C("loading", null, !1)
                    }

                    function b(e) {
                        var r = e.source || {},
                            i = Z(r.ignoreTimezone, n.ignoreTimezone);
                        e._id = e._id || (e.id === t ? "_fc" + xt++ : e.id + ""), e.date && (e.start || (e.start = e.date), delete e.date), e._start = h(e.start = g(e.start, i)), e.end = g(e.end, i), e.end && e.end <= e.start && (e.end = null), e._end = e.end ? h(e.end) : null, e.allDay === t && (e.allDay = Z(r.allDayDefault, n.allDayDefault)), e.className ? "string" == typeof e.className && (e.className = e.className.split(/\s+/)) : e.className = []
                    }

                    function w(e) {
                        e.className ? "string" == typeof e.className && (e.className = e.className.split(/\s+/)) : e.className = [];
                        for (var t = wt.sourceNormalizers, n = 0; t.length > n; n++) t[n](e)
                    }

                    function E(e, t) {
                        return e && t && S(e) == S(t)
                    }

                    function S(e) {
                        return ("object" == typeof e ? e.events || e.url : "") || e
                    }
                    var x = this;
                    x.isFetchNeeded = i, x.fetchEvents = s, x.addEventSource = a, x.removeEventSource = l, x.updateEvent = c, x.renderEvent = p, x.removeEvents = d, x.clientEvents = v, x.normalizeEvent = b;
                    for (var T, N, C = x.trigger, k = x.getView, L = x.reportEvents, A = {
                            events: []
                        }, O = [A], M = 0, _ = 0, D = 0, P = [], H = 0; r.length > H; H++) f(r[H])
                }

                function o(e, t, n) {
                    return e.setFullYear(e.getFullYear() + t), n || c(e), e
                }

                function u(e, t, n) {
                    if (+e) {
                        var r = e.getMonth() + t,
                            i = h(e);
                        for (i.setDate(1), i.setMonth(r), e.setMonth(r), n || c(e); e.getMonth() != i.getMonth();) e.setDate(e.getDate() + (i > e ? 1 : -1))
                    }
                    return e
                }

                function a(e, t, n) {
                    if (+e) {
                        var r = e.getDate() + t,
                            i = h(e);
                        i.setHours(9), i.setDate(r), e.setDate(r), n || c(e), f(e, i)
                    }
                    return e
                }

                function f(e, t) {
                    if (+e)
                        for (; e.getDate() != t.getDate();) e.setTime(+e + (t > e ? 1 : -1) * Ct)
                }

                function l(e, t) {
                    return e.setMinutes(e.getMinutes() + t), e
                }

                function c(e) {
                    return e.setHours(0), e.setMinutes(0), e.setSeconds(0), e.setMilliseconds(0), e
                }

                function h(e, t) {
                    return t ? c(new Date(+e)) : new Date(+e)
                }

                function p() {
                    var e, t = 0;
                    do e = new Date(1970, t++, 1);
                    while (e.getHours());
                    return e
                }

                function d(e, t, n) {
                    for (t = t || 1; !e.getDay() || n && 1 == e.getDay() || !n && 6 == e.getDay();) a(e, t);
                    return e
                }

                function v(e, t) {
                    return Math.round((h(e, !0) - h(t, !0)) / Nt)
                }

                function m(e, n, r, i) {
                    n !== t && n != e.getFullYear() && (e.setDate(1), e.setMonth(0), e.setFullYear(n)), r !== t && r != e.getMonth() && (e.setDate(1), e.setMonth(r)), i !== t && e.setDate(i)
                }

                function g(e, n) {
                    return "object" == typeof e ? e : "number" == typeof e ? new Date(1e3 * e) : "string" == typeof e ? e.match(/^\d+(\.\d+)?$/) ? new Date(1e3 * parseFloat(e)) : (n === t && (n = !0), y(e, n) || (e ? new Date(e) : null)) : null
                }

                function y(e, t) {
                    var n = e.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);
                    if (!n) return null;
                    var r = new Date(n[1], 0, 1);
                    if (t || !n[13]) {
                        var i = new Date(n[1], 0, 1, 9, 0);
                        n[3] && (r.setMonth(n[3] - 1), i.setMonth(n[3] - 1)), n[5] && (r.setDate(n[5]), i.setDate(n[5])), f(r, i), n[7] && r.setHours(n[7]), n[8] && r.setMinutes(n[8]), n[10] && r.setSeconds(n[10]), n[12] && r.setMilliseconds(1e3 * Number("0." + n[12])), f(r, i)
                    } else if (r.setUTCFullYear(n[1], n[3] ? n[3] - 1 : 0, n[5] || 1), r.setUTCHours(n[7] || 0, n[8] || 0, n[10] || 0, n[12] ? 1e3 * Number("0." + n[12]) : 0), n[14]) {
                        var s = 60 * Number(n[16]) + (n[18] ? Number(n[18]) : 0);
                        s *= "-" == n[15] ? 1 : -1, r = new Date(+r + 1e3 * 60 * s)
                    }
                    return r
                }

                function b(e) {
                    if ("number" == typeof e) return 60 * e;
                    if ("object" == typeof e) return 60 * e.getHours() + e.getMinutes();
                    var t = e.match(/(\d+)(?::(\d+))?\s*(\w+)?/);
                    if (t) {
                        var n = parseInt(t[1], 10);
                        return t[3] && (n %= 12, "p" == t[3].toLowerCase().charAt(0) && (n += 12)), 60 * n + (t[2] ? parseInt(t[2], 10) : 0)
                    }
                }

                function w(e, t, n) {
                    return E(e, null, t, n)
                }

                function E(e, t, n, r) {
                    r = r || yt;
                    var i, s, o, u, a = e,
                        f = t,
                        l = n.length,
                        c = "";
                    for (i = 0; l > i; i++)
                        if (s = n.charAt(i), "'" == s) {
                            for (o = i + 1; l > o; o++)
                                if ("'" == n.charAt(o)) {
                                    a && (c += o == i + 1 ? "'" : n.substring(i + 1, o), i = o);
                                    break
                                }
                        } else if ("(" == s) {
                        for (o = i + 1; l > o; o++)
                            if (")" == n.charAt(o)) {
                                var h = w(a, n.substring(i + 1, o), r);
                                parseInt(h.replace(/\D/, ""), 10) && (c += h), i = o;
                                break
                            }
                    } else if ("[" == s) {
                        for (o = i + 1; l > o; o++)
                            if ("]" == n.charAt(o)) {
                                var p = n.substring(i + 1, o),
                                    h = w(a, p, r);
                                h != w(f, p, r) && (c += h), i = o;
                                break
                            }
                    } else if ("{" == s) a = t, f = e;
                    else if ("}" == s) a = e, f = t;
                    else {
                        for (o = l; o > i; o--)
                            if (u = Lt[n.substring(i, o)]) {
                                a && (c += u(a, r)), i = o - 1;
                                break
                            }
                        o == i && a && (c += s)
                    }
                    return c
                }

                function S(e) {
                    var t, n = new Date(e.getTime());
                    return n.setDate(n.getDate() + 4 - (n.getDay() || 7)), t = n.getTime(), n.setMonth(0), n.setDate(1), Math.floor(Math.round((t - n) / 864e5) / 7) + 1
                }

                function x(e) {
                    return e.end ? T(e.end, e.allDay) : a(h(e.start), 1)
                }

                function T(e, t) {
                    return e = h(e), t || e.getHours() || e.getMinutes() ? a(e, 1) : c(e)
                }

                function N(e, t) {
                    return 100 * (t.msLength - e.msLength) + (e.event.start - t.event.start)
                }

                function C(e, t) {
                    return e.end > t.start && e.start < t.end
                }

                function k(e, t, n, r) {
                    var i, s, o, u, a, f, l, c, p = [],
                        d = e.length;
                    for (i = 0; d > i; i++) s = e[i], o = s.start, u = t[i], u > n && r > o && (n > o ? (a = h(n), l = !1) : (a = o, l = !0), u > r ? (f = h(r), c = !1) : (f = u, c = !0), p.push({
                        event: s,
                        start: a,
                        end: f,
                        isStart: l,
                        isEnd: c,
                        msLength: f - a
                    }));
                    return p.sort(N)
                }

                function L(e) {
                    var t, n, r, i, s, o = [],
                        u = e.length;
                    for (t = 0; u > t; t++) {
                        for (n = e[t], r = 0;;) {
                            if (i = !1, o[r])
                                for (s = 0; o[r].length > s; s++)
                                    if (C(o[r][s], n)) {
                                        i = !0;
                                        break
                                    }
                            if (!i) break;
                            r++
                        }
                        o[r] ? o[r].push(n) : o[r] = [n]
                    }
                    return o
                }

                function A(n, r, i) {
                    n.unbind("mouseover").mouseover(function(n) {
                        for (var s, o, u, a = n.target; a != this;) s = a, a = a.parentNode;
                        (o = s._fci) !== t && (s._fci = t, u = r[o], i(u.event, u.element, u), e(n.target).trigger(n)), n.stopPropagation()
                    })
                }

                function O(t, n, r) {
                    for (var i, s = 0; t.length > s; s++) i = e(t[s]), i.width(Math.max(0, n - _(i, r)))
                }

                function M(t, n, r) {
                    for (var i, s = 0; t.length > s; s++) i = e(t[s]), i.height(Math.max(0, n - B(i, r)))
                }

                function _(e, t) {
                    return D(e) + H(e) + (t ? P(e) : 0)
                }

                function D(t) {
                    return (parseFloat(e.css(t[0], "paddingLeft", !0)) || 0) + (parseFloat(e.css(t[0], "paddingRight", !0)) || 0)
                }

                function P(t) {
                    return (parseFloat(e.css(t[0], "marginLeft", !0)) || 0) + (parseFloat(e.css(t[0], "marginRight", !0)) || 0)
                }

                function H(t) {
                    return (parseFloat(e.css(t[0], "borderLeftWidth", !0)) || 0) + (parseFloat(e.css(t[0], "borderRightWidth", !0)) || 0)
                }

                function B(e, t) {
                    return j(e) + I(e) + (t ? F(e) : 0)
                }

                function j(t) {
                    return (parseFloat(e.css(t[0], "paddingTop", !0)) || 0) + (parseFloat(e.css(t[0], "paddingBottom", !0)) || 0)
                }

                function F(t) {
                    return (parseFloat(e.css(t[0], "marginTop", !0)) || 0) + (parseFloat(e.css(t[0], "marginBottom", !0)) || 0)
                }

                function I(t) {
                    return (parseFloat(e.css(t[0], "borderTopWidth", !0)) || 0) + (parseFloat(e.css(t[0], "borderBottomWidth", !0)) || 0)
                }

                function q(e, t) {
                    t = "number" == typeof t ? t + "px" : t, e.each(function(e, n) {
                        n.style.cssText += ";min-height:" + t + ";_height:" + t
                    })
                }

                function R() {}

                function U(e, t) {
                    return e - t
                }

                function z(e) {
                    return Math.max.apply(Math, e)
                }

                function W(e) {
                    return (10 > e ? "0" : "") + e
                }

                function X(e, n) {
                    if (e[n] !== t) return e[n];
                    for (var r, i = n.split(/(?=[A-Z])/), s = i.length - 1; s >= 0; s--)
                        if (r = e[i[s].toLowerCase()], r !== t) return r;
                    return e[""]
                }

                function V(e) {
                    return e.replace(/&/g, "&").replace(/</g, "<").replace(/>/g, ">").replace(/'/g, "'").replace(/"/g, ""
                        ").replace(/\n/g, " < br / > ")
                    }

                    function $(e) {
                        return e.id + "/" + e.className + "/" + e.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/gi, "")
                    }

                    function J(e) {
                        e.attr("unselectable", "on").css("MozUserSelect", "none").bind("selectstart.ui", function() {
                            return !1
                        })
                    }

                    function K(e) {
                        e.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")
                    }

                    function Q(e, t) {
                        e.each(function(e, n) {
                            n.className = n.className.replace(/^fc-\w*/, "fc-" + Tt[t.getDay()])
                        })
                    }

                    function G(e, t) {
                        var n = e.source || {},
                            r = e.color,
                            i = n.color,
                            s = t("eventColor"),
                            o = e.backgroundColor || r || n.backgroundColor || i || t("eventBackgroundColor") || s,
                            u = e.borderColor || r || n.borderColor || i || t("eventBorderColor") || s,
                            a = e.textColor || n.textColor || t("eventTextColor"),
                            f = [];
                        return o && f.push("background-color:" + o), u && f.push("border-color:" + u), a && f.push("color:" + a), f.join(";")
                    }

                    function Y(t, n, r) {
                        if (e.isFunction(t) && (t = [t]), t) {
                            var i, s;
                            for (i = 0; t.length > i; i++) s = t[i].apply(n, r) || s;
                            return s
                        }
                    }

                    function Z() {
                        for (var e = 0; arguments.length > e; e++)
                            if (arguments[e] !== t) return arguments[e]
                    }

                    function et(e, t) {
                        function n(e, t) {
                            t && (u(e, t), e.setDate(1));
                            var n = h(e, !0);
                            n.setDate(1);
                            var f = u(h(n), 1),
                                l = h(n),
                                c = h(f),
                                p = i("firstDay"),
                                v = i("weekends") ? 0 : 1;
                            v && (d(l), d(c, -1, !0)), a(l, -((l.getDay() - Math.max(p, v) + 7) % 7)), a(c, (7 - c.getDay() + Math.max(p, v)) % 7);
                            var m = Math.round((c - l) / (7 * Nt));
                            "fixed" == i("weekMode") && (a(c, 7 * (6 - m)), m = 6), r.title = o(n, i("titleFormat")), r.start = n, r.end = f, r.visStart = l, r.visEnd = c, s(m, v ? 5 : 7, !0)
                        }
                        var r = this;
                        r.render = n, rt.call(r, e, t, "month");
                        var i = r.opt,
                            s = r.renderBasic,
                            o = t.formatDate
                    }

                    function tt(e, t) {
                        function n(e, t) {
                            t && a(e, 7 * t);
                            var n = a(h(e), -((e.getDay() - i("firstDay") + 7) % 7)),
                                u = a(h(n), 7),
                                f = h(n),
                                l = h(u),
                                c = i("weekends");
                            c || (d(f), d(l, -1, !0)), r.title = o(f, a(h(l), -1), i("titleFormat")), r.start = n, r.end = u, r.visStart = f, r.visEnd = l, s(1, c ? 7 : 5, !1)
                        }
                        var r = this;
                        r.render = n, rt.call(r, e, t, "basicWeek");
                        var i = r.opt,
                            s = r.renderBasic,
                            o = t.formatDates
                    }

                    function nt(e, t) {
                        function n(e, t) {
                            t && (a(e, t), i("weekends") || d(e, 0 > t ? -1 : 1)), r.title = o(e, i("titleFormat")), r.start = r.visStart = h(e, !0), r.end = r.visEnd = a(h(r.start), 1), s(1, 1, !1)
                        }
                        var r = this;
                        r.render = n, rt.call(r, e, t, "basicDay");
                        var i = r.opt,
                            s = r.renderBasic,
                            o = t.formatDate
                    }

                    function rt(t, n, r) {
                        function i(e, t, n) {
                            nt = e, rt = t, s();
                            var r = !W;
                            r ? o() : kt(), u(n)
                        }

                        function s() {
                            at = Nt("isRTL"), at ? (ft = -1, ct = rt - 1) : (ft = 1, ct = 0), mt = Nt("firstDay"), yt = Nt("weekends") ? 0 : 1, bt = Nt("theme") ? "ui" : "fc", wt = Nt("columnFormat"), Et = Nt("weekNumbers"), St = Nt("weekNumberTitle"), xt = "iso" != Nt("weekNumberCalculation") ? "w" : "W"
                        }

                        function o() {
                            G = e("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(t)
                        }

                        function u(n) {
                            var r, i, s, o, u = "",
                                a = bt + "-widget-header",
                                f = bt + "-widget-content",
                                l = I.start.getMonth(),
                                h = c(new Date);
                            for (u += "<table class='fc-border-separate' style='width:100%' cellspacing='0'><thead><tr>", Et && (u += "<th class='fc-week-number " + a + "'/>"), r = 0; rt > r; r++) s = M(0, r), u += "<th class='fc-day-header fc-" + Tt[s.getDay()] + " " + a + "'/>";
                            for (u += "</tr></thead><tbody>", r = 0; nt > r; r++) {
                                for (u += "<tr class='fc-week'>", Et && (u += "<td class='fc-week-number " + f + "'>" + "<div/>" + "</td>"), i = 0; rt > i; i++) s = M(r, i), o = ["fc-day", "fc-" + Tt[s.getDay()], f], s.getMonth() != l && o.push("fc-other-month"), +s == +h && (o.push("fc-today"), o.push(bt + "-state-highlight")), u += "<td class='" + o.join(" ") + "'" + " data-date='" + Mt(s, "yyyy-MM-dd") + "'" + ">" + "<div>", n && (u += "<div class='fc-day-number'>" + s.getDate() + "</div>"), u += "<div class='fc-day-content'><div style='position:relative'> </div></div></div></td>";
                                u += "</tr>"
                            }
                            u += "</tbody></table>", j(), R && R.remove(), R = e(u).appendTo(t), U = R.find("thead"), z = U.find(".fc-day-header"), W = R.find("tbody"), X = W.find("tr"), V = W.find(".fc-day"), $ = X.find("td:first-child"), Q = X.eq(0).find(".fc-day-content > div"), K(U.add(U.find("tr"))), K(X), X.eq(0).addClass("fc-first"), X.filter(":last").addClass("fc-last"), Et && U.find(".fc-week-number").text(St), z.each(function(t, n) {
                                var r = _(t);
                                e(n).text(Mt(r, wt))
                            }), Et && W.find(".fc-week-number > div").each(function(t, n) {
                                var r = M(t, 0);
                                e(n).text(Mt(r, xt))
                            }), V.each(function(t, n) {
                                var r = _(t);
                                Ct("dayRender", I, r, e(n))
                            }), p(V)
                        }

                        function f(t) {
                            Z = t;
                            var n, r, i, s = Z - U.height();
                            "variable" == Nt("weekMode") ? n = r = Math.floor(s / (1 == nt ? 2 : 6)) : (n = Math.floor(s / nt), r = s - n * (nt - 1)), $.each(function(t, s) {
                                nt > t && (i = e(s), q(i.find("> div"), (t == nt - 1 ? r : n) - B(i)))
                            }), F()
                        }

                        function l(e) {
                            Y = e, ut.clear(), tt = 0, Et && (tt = U.find("th.fc-week-number").outerWidth()), et = Math.floor((Y - tt) / rt), O(z.slice(0, -1), et)
                        }

                        function p(e) {
                            e.click(d).mousedown(Ot)
                        }

                        function d(t) {
                            if (!Nt("selectable")) {
                                var n = y(e(this).data("date"));
                                Ct("dayClick", this, n, !0, t)
                            }
                        }

                        function m(e, t, n) {
                            n && st.build();
                            for (var r = h(I.visStart), i = a(h(r), rt), s = 0; nt > s; s++) {
                                var o = new Date(Math.max(r, e)),
                                    u = new Date(Math.min(i, t));
                                if (u > o) {
                                    var f, l;
                                    at ? (f = v(u, r) * ft + ct + 1, l = v(o, r) * ft + ct + 1) : (f = v(o, r), l = v(u, r)), p(g(s, f, s, l - 1))
                                }
                                a(r, 7), a(i, 7)
                            }
                        }

                        function g(e, n, r, i) {
                            var s = st.rect(e, n, r, i, t);
                            return Lt(s, t)
                        }

                        function b(e) {
                            return h(e)
                        }

                        function w(e, t) {
                            m(e, a(h(t), 1), !0)
                        }

                        function E() {
                            At()
                        }

                        function S(e, t, n) {
                            var r = L(e),
                                i = V[r.row * rt + r.col];
                            Ct("dayClick", i, e, t, n)
                        }

                        function x(e, t) {
                            ot.start(function(e) {
                                At(), e && g(e.row, e.col, e.row, e.col)
                            }, t)
                        }

                        function T(e, t, n) {
                            var r = ot.stop();
                            if (At(), r) {
                                var i = A(r);
                                Ct("drop", e, i, !0, t, n)
                            }
                        }

                        function N(e) {
                            return h(e.start)
                        }

                        function C(e) {
                            return ut.left(e)
                        }

                        function k(e) {
                            return ut.right(e)
                        }

                        function L(e) {
                            return {
                                row: Math.floor(v(e, I.visStart) / 7),
                                col: D(e.getDay())
                            }
                        }

                        function A(e) {
                            return M(e.row, e.col)
                        }

                        function M(e, t) {
                            return a(h(I.visStart), 7 * e + t * ft + ct)
                        }

                        function _(e) {
                            return M(Math.floor(e / rt), e % rt)
                        }

                        function D(e) {
                            return (e - Math.max(mt, yt) + rt) % rt * ft + ct
                        }

                        function P(e) {
                            return X.eq(e)
                        }

                        function H() {
                            var e = 0;
                            return Et && (e += tt), {
                                left: e,
                                right: Y
                            }
                        }

                        function j() {
                            q(t, t.height())
                        }

                        function F() {
                            q(t, 1)
                        }
                        var I = this;
                        I.renderBasic = i, I.setHeight = f, I.setWidth = l, I.renderDayOverlay = m, I.defaultSelectionEnd = b, I.renderSelection = w, I.clearSelection = E, I.reportDayClick = S, I.dragStart = x, I.dragStop = T, I.defaultEventEnd = N, I.getHoverListener = function() {
                            return ot
                        }, I.colContentLeft = C, I.colContentRight = k, I.dayOfWeekCol = D, I.dateCell = L, I.cellDate = A, I.cellIsAllDay = function() {
                            return !0
                        }, I.allDayRow = P, I.allDayBounds = H, I.getRowCnt = function() {
                            return nt
                        }, I.getColCnt = function() {
                            return rt
                        }, I.getColWidth = function() {
                            return et
                        }, I.getDaySegmentContainer = function() {
                            return G
                        }, lt.call(I, t, n, r), pt.call(I), ht.call(I), it.call(I);
                        var R, U, z, W, X, V, $, Q, G, Y, Z, et, tt, nt, rt, st, ot, ut, at, ft, ct, mt, yt, bt, wt, Et, St, xt, Nt = I.opt,
                            Ct = I.trigger,
                            kt = I.clearEvents,
                            Lt = I.renderOverlay,
                            At = I.clearOverlays,
                            Ot = I.daySelectionMousedown,
                            Mt = n.formatDate;
                        J(t.addClass("fc-grid")), st = new dt(function(t, n) {
                            var r, i, s;
                            z.each(function(t, o) {
                                r = e(o), i = r.offset().left, t && (s[1] = i), s = [i], n[t] = s
                            }), s[1] = i + r.outerWidth(), X.each(function(n, o) {
                                nt > n && (r = e(o), i = r.offset().top, n && (s[1] = i), s = [i], t[n] = s)
                            }), s[1] = i + r.outerHeight()
                        }), ot = new vt(st), ut = new gt(function(e) {
                            return Q.eq(e)
                        })
                    }

                    function it() {
                        function t(e, t) {
                            p(e), C(r(e), t), f("eventAfterAllRender")
                        }

                        function n() {
                            d(), b().empty()
                        }

                        function r(t) {
                            var n, r, i, s, u, f, l = T(),
                                c = N(),
                                p = h(o.visStart),
                                d = a(h(p), c),
                                v = e.map(t, x),
                                m = [];
                            for (n = 0; l > n; n++) {
                                for (r = L(k(t, v, p, d)), i = 0; r.length > i; i++)
                                    for (s = r[i], u = 0; s.length > u; u++) f = s[u], f.row = n, f.level = i, m.push(f);
                                a(p, 7), a(d, 7)
                            }
                            return m
                        }

                        function i(e, t, n) {
                            l(e) && s(e, t), n.isEnd && c(e) && A(e, t, n), v(e, t)
                        }

                        function s(e, t) {
                            var n, r = w();
                            t.draggable({
                                zIndex: 9,
                                delay: 50,
                                opacity: u("dragOpacity"),
                                revertDuration: u("dragRevertDuration"),
                                start: function(i, s) {
                                    f("eventDragStart", t, e, i, s), g(e, t), r.start(function(r, i, s, o) {
                                        t.draggable("option", "revert", !r || !s && !o), S(), r ? (n = 7 * s + o * (u("isRTL") ? -1 : 1), E(a(h(e.start), n), a(x(e), n))) : n = 0
                                    }, i, "drag")
                                },
                                stop: function(i, s) {
                                    r.stop(), S(), f("eventDragStop", t, e, i, s), n ? y(this, e, n, 0, e.allDay, i, s) : (t.css("filter", ""), m(e, t))
                                }
                            })
                        }
                        var o = this;
                        o.renderEvents = t, o.compileDaySegs = r, o.clearEvents = n, o.bindDaySeg = i, ct.call(o);
                        var u = o.opt,
                            f = o.trigger,
                            l = o.isEventDraggable,
                            c = o.isEventResizable,
                            p = o.reportEvents,
                            d = o.reportEventClear,
                            v = o.eventElementHandlers,
                            m = o.showEvents,
                            g = o.hideEvents,
                            y = o.eventDrop,
                            b = o.getDaySegmentContainer,
                            w = o.getHoverListener,
                            E = o.renderDayOverlay,
                            S = o.clearOverlays,
                            T = o.getRowCnt,
                            N = o.getColCnt,
                            C = o.renderDaySegs,
                            A = o.resizableDayEvent
                    }

                    function st(e, t) {
                        function n(e, t) {
                            t && a(e, 7 * t);
                            var n = a(h(e), -((e.getDay() - i("firstDay") + 7) % 7)),
                                u = a(h(n), 7),
                                f = h(n),
                                l = h(u),
                                c = i("weekends");
                            c || (d(f), d(l, -1, !0)), r.title = o(f, a(h(l), -1), i("titleFormat")), r.start = n, r.end = u, r.visStart = f, r.visEnd = l, s(c ? 7 : 5)
                        }
                        var r = this;
                        r.render = n, ut.call(r, e, t, "agendaWeek");
                        var i = r.opt,
                            s = r.renderAgenda,
                            o = t.formatDates
                    }

                    function ot(e, t) {
                        function n(e, t) {
                            t && (a(e, t), i("weekends") || d(e, 0 > t ? -1 : 1));
                            var n = h(e, !0),
                                u = a(h(n), 1);
                            r.title = o(e, i("titleFormat")), r.start = r.visStart = n, r.end = r.visEnd = u, s(1)
                        }
                        var r = this;
                        r.render = n, ut.call(r, e, t, "agendaDay");
                        var i = r.opt,
                            s = r.renderAgenda,
                            o = t.formatDate
                    }

                    function ut(n, r, i) {
                        function s(e) {
                            Bt = e, o(), et ? nn() : u(), f()
                        }

                        function o() {
                            Ut = en("theme") ? "ui" : "fc", Wt = en("weekends") ? 0 : 1, zt = en("firstDay"), (Xt = en("isRTL")) ? (Vt = -1, $t = Bt - 1) : (Vt = 1, $t = 0), Jt = b(en("minTime")), Kt = b(en("maxTime")), Qt = en("columnFormat"), Gt = en("weekNumbers"), Yt = en("weekNumberTitle"), Zt = "iso" != en("weekNumberCalculation") ? "w" : "W", Dt = en("snapMinutes") || en("slotMinutes")
                        }

                        function u() {
                            var t, r, i, s, o, u = Ut + "-widget-header",
                                a = Ut + "-widget-content",
                                f = 0 == en("slotMinutes") % 15;
                            for (t = "<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'><thead><tr>", t += Gt ? "<th class='fc-agenda-axis fc-week-number " + u + "'/>" : "<th class='fc-agenda-axis " + u + "'> </th>", r = 0; Bt > r; r++) t += "<th class='fc- fc-col" + r + " " + u + "'/>";
                            for (t += "<th class='fc-agenda-gutter " + u + "'> </th>" + "</tr>" + "</thead>" + "<tbody>" + "<tr>" + "<th class='fc-agenda-axis " + u + "'> </th>", r = 0; Bt > r; r++) t += "<td class='fc- fc-col" + r + " " + a + "'>" + "<div>" + "<div class='fc-day-content'>" + "<div style='position:relative'> </div>" + "</div>" + "</div>" + "</td>";
                            for (t += "<td class='fc-agenda-gutter " + a + "'> </td>" + "</tr>" + "</tbody>" + "</table>", et = e(t).appendTo(n), tt = et.find("thead"), nt = tt.find("th").slice(1, -1), rt = et.find("tbody"), it = rt.find("td").slice(0, -1), st = it.find("div.fc-day-content div"), ot = it.eq(0), ut = ot.find("> div"), K(tt.add(tt.find("tr"))), K(rt.add(rt.find("tr"))), Tt = tt.find("th:first"), Nt = et.find(".fc-agenda-gutter"), ft = e("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(n), en("allDaySlot") ? (ct = e("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ft), t = "<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='" + u + " fc-agenda-axis'>" + en("allDayText") + "</th>" + "<td>" + "<div class='fc-day-content'><div style='position:relative'/></div>" + "</td>" + "<th class='" + u + " fc-agenda-gutter'> </th>" + "</tr>" + "</table>", mt = e(t).appendTo(ft), yt = mt.find("tr"), E(yt.find("td")), Tt = Tt.add(mt.find("th:first")), Nt = Nt.add(mt.find("th.fc-agenda-gutter")), ft.append("<div class='fc-agenda-divider " + u + "'>" + "<div class='fc-agenda-divider-inner'/>" + "</div>")) : ct = e([]), bt = e("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(ft), wt = e("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(bt), Et = e("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(wt), t = "<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>", i = p(), s = l(h(i), Kt), l(i, Jt), jt = 0, r = 0; s > i; r++) o = i.getMinutes(), t += "<tr class='fc-slot" + r + " " + (o ? "fc-minor" : "") + "'>" + "<th class='fc-agenda-axis " + u + "'>" + (f && o ? " " : ln(i, en("axisFormat"))) + "</th>" + "<td class='" + a + "'>" + "<div style='position:relative'> </div>" + "</td>" + "</tr>", l(i, en("slotMinutes")), jt++;
                            t += "</tbody></table>", St = e(t).appendTo(wt), xt = St.find("div:first"), S(St.find("td")), Tt = Tt.add(St.find("th:first"))
                        }

                        function f() {
                            var e, t, n, r, i = c(new Date);
                            if (Gt) {
                                var s = ln(D(0), Zt);
                                Xt ? s += Yt : s = Yt + s, tt.find(".fc-week-number").text(s)
                            }
                            for (e = 0; Bt > e; e++) r = D(e), t = nt.eq(e), t.html(ln(r, Qt)), n = it.eq(e), +r == +i ? n.addClass(Ut + "-state-highlight fc-today") : n.removeClass(Ut + "-state-highlight fc-today"), Q(t.add(n), r)
                        }

                        function d(e, n) {
                            e === t && (e = Lt), Lt = e, cn = {};
                            var r = rt.position().top,
                                i = bt.position().top,
                                s = Math.min(e - r, St.height() + i + 1);
                            ut.height(s - B(ot)), ft.css("top", r), bt.height(s - i - 1), _t = xt.height() + 1, Pt = en("slotMinutes") / Dt, Ht = _t / Pt, n && g()
                        }

                        function m(t) {
                            kt = t, qt.clear(), At = 0, O(Tt.width("").each(function(t, n) {
                                At = Math.max(At, e(n).outerWidth())
                            }), At);
                            var n = bt[0].clientWidth;
                            Mt = bt.width() - n, Mt ? (O(Nt, Mt), Nt.show().prev().removeClass("fc-last")) : Nt.hide().prev().addClass("fc-last"), Ot = Math.floor((n - At) / Bt), O(nt.slice(0, -1), Ot)
                        }

                        function g() {
                            function e() {
                                bt.scrollTop(r)
                            }
                            var t = p(),
                                n = h(t);
                            n.setHours(en("firstHour"));
                            var r = j(t, n) + 1;
                            e(), setTimeout(e, 0)
                        }

                        function y() {
                            Rt = bt.scrollTop()
                        }

                        function w() {
                            bt.scrollTop(Rt)
                        }

                        function E(e) {
                            e.click(x).mousedown(an)
                        }

                        function S(e) {
                            e.click(x).mousedown(V)
                        }

                        function x(e) {
                            if (!en("selectable")) {
                                var t = Math.min(Bt - 1, Math.floor((e.pageX - et.offset().left - At) / Ot)),
                                    n = D(t),
                                    r = this.parentNode.className.match(/fc-slot(\d+)/);
                                if (r) {
                                    var i = parseInt(r[1]) * en("slotMinutes"),
                                        s = Math.floor(i / 60);
                                    n.setHours(s), n.setMinutes(i % 60 + Jt), tn("dayClick", it[t], n, !1, e)
                                } else tn("dayClick", it[t], n, !0, e)
                            }
                        }

                        function T(e, t, n) {
                            n && Ft.build();
                            var r, i, s = h(Z.visStart);
                            Xt ? (r = v(t, s) * Vt + $t + 1, i = v(e, s) * Vt + $t + 1) : (r = v(e, s), i = v(t, s)), r = Math.max(0, r), i = Math.min(Bt, i), i > r && E(N(0, r, 0, i - 1))
                        }

                        function N(e, t, n, r) {
                            var i = Ft.rect(e, t, n, r, ft);
                            return rn(i, ft)
                        }

                        function C(e, t) {
                            for (var n = h(Z.visStart), r = a(h(n), 1), i = 0; Bt > i; i++) {
                                var s = new Date(Math.max(n, e)),
                                    o = new Date(Math.min(r, t));
                                if (o > s) {
                                    var u = i * Vt + $t,
                                        f = Ft.rect(0, u, 0, u, wt),
                                        l = j(n, s),
                                        c = j(n, o);
                                    f.top = l, f.height = c - l, S(rn(f, wt))
                                }
                                a(n, 1), a(r, 1)
                            }
                        }

                        function k(e) {
                            return qt.left(e)
                        }

                        function L(e) {
                            return qt.right(e)
                        }

                        function A(e) {
                            return {
                                row: Math.floor(v(e, Z.visStart) / 7),
                                col: H(e.getDay())
                            }
                        }

                        function _(e) {
                            var t = D(e.col),
                                n = e.row;
                            return en("allDaySlot") && n--, n >= 0 && l(t, Jt + n * Dt), t
                        }

                        function D(e) {
                            return a(h(Z.visStart), e * Vt + $t)
                        }

                        function P(e) {
                            return en("allDaySlot") && !e.row
                        }

                        function H(e) {
                            return (e - Math.max(zt, Wt) + Bt) % Bt * Vt + $t
                        }

                        function j(e, n) {
                            if (e = h(e, !0), l(h(e), Jt) > n) return 0;
                            if (n >= l(h(e), Kt)) return St.height();
                            var r = en("slotMinutes"),
                                i = 60 * n.getHours() + n.getMinutes() - Jt,
                                s = Math.floor(i / r),
                                o = cn[s];
                            return o === t && (o = cn[s] = St.find("tr:eq(" + s + ") td div")[0].offsetTop), Math.max(0, Math.round(o - 1 + _t * (i % r / r)))
                        }

                        function F() {
                            return {
                                left: At,
                                right: kt - Mt
                            }
                        }

                        function I() {
                            return yt
                        }

                        function q(e) {
                            var t = h(e.start);
                            return e.allDay ? t : l(t, en("defaultEventMinutes"))
                        }

                        function R(e, t) {
                            return t ? h(e) : l(h(e), en("slotMinutes"))
                        }

                        function z(e, t, n) {
                            n ? en("allDaySlot") && T(e, a(h(t), 1), !0) : W(e, t)
                        }

                        function W(t, n) {
                            var r = en("selectHelper");
                            if (Ft.build(), r) {
                                var i = v(t, Z.visStart) * Vt + $t;
                                if (i >= 0 && Bt > i) {
                                    var s = Ft.rect(0, i, 0, i, wt),
                                        o = j(t, t),
                                        u = j(t, n);
                                    if (u > o) {
                                        if (s.top = o, s.height = u - o, s.left += 2, s.width -= 5, e.isFunction(r)) {
                                            var a = r(t, n);
                                            a && (s.position = "absolute", s.zIndex = 8, Ct = e(a).css(s).appendTo(wt))
                                        } else s.isStart = !0, s.isEnd = !0, Ct = e(fn({
                                            title: "",
                                            start: t,
                                            end: n,
                                            className: ["fc-select-helper"],
                                            editable: !1
                                        }, s)), Ct.css("opacity", en("dragOpacity"));
                                        Ct && (S(Ct), wt.append(Ct), O(Ct, s.width, !0), M(Ct, s.height, !0))
                                    }
                                }
                            } else C(t, n)
                        }

                        function X() {
                            sn(), Ct && (Ct.remove(), Ct = null)
                        }

                        function V(t) {
                            if (1 == t.which && en("selectable")) {
                                un(t);
                                var n;
                                It.start(function(e, t) {
                                    if (X(), e && e.col == t.col && !P(e)) {
                                        var r = _(t),
                                            i = _(e);
                                        n = [r, l(h(r), Dt), i, l(h(i), Dt)].sort(U), W(n[0], n[3])
                                    } else n = null
                                }, t), e(document).one("mouseup", function(e) {
                                    It.stop(), n && (+n[0] == +n[1] && $(n[0], !1, e), on(n[0], n[3], !1, e))
                                })
                            }
                        }

                        function $(e, t, n) {
                            tn("dayClick", it[H(e.getDay())], e, t, n)
                        }

                        function G(e, t) {
                            It.start(function(e) {
                                if (sn(), e)
                                    if (P(e)) N(e.row, e.col, e.row, e.col);
                                    else {
                                        var t = _(e),
                                            n = l(h(t), en("defaultEventMinutes"));
                                        C(t, n)
                                    }
                            }, t)
                        }

                        function Y(e, t, n) {
                            var r = It.stop();
                            sn(), r && tn("drop", e, _(r), P(r), t, n)
                        }
                        var Z = this;
                        Z.renderAgenda = s, Z.setWidth = m, Z.setHeight = d, Z.beforeHide = y, Z.afterShow = w, Z.defaultEventEnd = q, Z.timePosition = j, Z.dayOfWeekCol = H, Z.dateCell = A, Z.cellDate = _, Z.cellIsAllDay = P, Z.allDayRow = I, Z.allDayBounds = F, Z.getHoverListener = function() {
                            return It
                        }, Z.colContentLeft = k, Z.colContentRight = L, Z.getDaySegmentContainer = function() {
                            return ct
                        }, Z.getSlotSegmentContainer = function() {
                            return Et
                        }, Z.getMinMinute = function() {
                            return Jt
                        }, Z.getMaxMinute = function() {
                            return Kt
                        }, Z.getBodyContent = function() {
                            return wt
                        }, Z.getRowCnt = function() {
                            return 1
                        }, Z.getColCnt = function() {
                            return Bt
                        }, Z.getColWidth = function() {
                            return Ot
                        }, Z.getSnapHeight = function() {
                            return Ht
                        }, Z.getSnapMinutes = function() {
                            return Dt
                        }, Z.defaultSelectionEnd = R, Z.renderDayOverlay = T, Z.renderSelection = z, Z.clearSelection = X, Z.reportDayClick = $, Z.dragStart = G, Z.dragStop = Y, lt.call(Z, n, r, i), pt.call(Z), ht.call(Z), at.call(Z);
                        var et, tt, nt, rt, it, st, ot, ut, ft, ct, mt, yt, bt, wt, Et, St, xt, Tt, Nt, Ct, kt, Lt, At, Ot, Mt, _t, Dt, Pt, Ht, Bt, jt, Ft, It, qt, Rt, Ut, zt, Wt, Xt, Vt, $t, Jt, Kt, Qt, Gt, Yt, Zt, en = Z.opt,
                            tn = Z.trigger,
                            nn = Z.clearEvents,
                            rn = Z.renderOverlay,
                            sn = Z.clearOverlays,
                            on = Z.reportSelection,
                            un = Z.unselect,
                            an = Z.daySelectionMousedown,
                            fn = Z.slotSegHtml,
                            ln = r.formatDate,
                            cn = {};
                        J(n.addClass("fc-agenda")), Ft = new dt(function(t, n) {
                            function r(e) {
                                return Math.max(a, Math.min(f, e))
                            }
                            var i, s, o;
                            nt.each(function(t, r) {
                                i = e(r), s = i.offset().left, t && (o[1] = s), o = [s], n[t] = o
                            }), o[1] = s + i.outerWidth(), en("allDaySlot") && (i = yt, s = i.offset().top, t[0] = [s, s + i.outerHeight()]);
                            for (var u = wt.offset().top, a = bt.offset().top, f = a + bt.outerHeight(), l = 0; jt * Pt > l; l++) t.push([r(u + Ht * l), r(u + Ht * (l + 1))])
                        }), It = new vt(Ft), qt = new gt(function(e) {
                            return st.eq(e)
                        })
                    }

                    function at() {
                        function n(e, t) {
                            T(e);
                            var n, r = e.length,
                                o = [],
                                a = [];
                            for (n = 0; r > n; n++) e[n].allDay ? o.push(e[n]) : a.push(e[n]);
                            y("allDaySlot") && (U(i(o), t), O()), u(s(a), t), b("eventAfterAllRender")
                        }

                        function r() {
                            N(), D().empty(), P().empty()
                        }

                        function i(t) {
                            var n, r, i, s, o = L(k(t, e.map(t, x), g.visStart, g.visEnd)),
                                u = o.length,
                                a = [];
                            for (n = 0; u > n; n++)
                                for (r = o[n], i = 0; r.length > i; i++) s = r[i], s.row = 0, s.level = n, a.push(s);
                            return a
                        }

                        function s(t) {
                            var n, r, i, s, u, f, c = W(),
                                p = F(),
                                d = j(),
                                v = l(h(g.visStart), p),
                                m = e.map(t, o),
                                y = [];
                            for (n = 0; c > n; n++) {
                                for (r = L(k(t, m, v, l(h(v), d - p))), ft(r), i = 0; r.length > i; i++)
                                    for (s = r[i], u = 0; s.length > u; u++) f = s[u], f.col = n, f.level = i, y.push(f);
                                a(v, 1, !0)
                            }
                            return y
                        }

                        function o(e) {
                            return e.end ? h(e.end) : l(h(e.start), y("defaultEventMinutes"))
                        }

                        function u(n, r) {
                            var i, s, o, u, a, l, c, h, d, v, m, g, w, E, S, x, T, N, C, k, L, O, M = n.length,
                                D = "",
                                H = {},
                                j = {},
                                F = P(),
                                U = W();
                            for ((k = y("isRTL")) ? (L = -1, O = U - 1) : (L = 1, O = 0), i = 0; M > i; i++) s = n[i], o = s.event, u = I(s.start, s.start), a = I(s.start, s.end), l = s.col, c = s.level, h = s.forward || 0, d = q(l * L + O), v = R(l * L + O) - d, v = Math.min(v - 6, .95 * v), m = c ? v / (c + h + 1) : h ? 2 * (v / (h + 1) - 6) : v, g = d + v / (c + h + 1) * c * L + (k ? v - m : 0), s.top = u, s.left = g, s.outerWidth = m, s.outerHeight = a - u, D += f(o, s);
                            for (F[0].innerHTML = D, w = F.children(), i = 0; M > i; i++) s = n[i], o = s.event, E = e(w[i]), S = b("eventRender", o, o, E), S === !1 ? E.remove() : (S && S !== !0 && (E.remove(), E = e(S).css({
                                position: "absolute",
                                top: s.top,
                                left: s.left
                            }).appendTo(F)), s.element = E, o._id === r ? p(o, E, s) : E[0]._fci = i, Y(o, E));
                            for (A(F, n, p), i = 0; M > i; i++) s = n[i], (E = s.element) && (T = H[x = s.key = $(E[0])], s.vsides = T === t ? H[x] = B(E, !0) : T, T = j[x], s.hsides = T === t ? j[x] = _(E, !0) : T, N = E.find(".fc-event-title"), N.length && (s.contentTop = N[0].offsetTop));
                            for (i = 0; M > i; i++) s = n[i], (E = s.element) && (E[0].style.width = Math.max(0, s.outerWidth - s.hsides) + "px", C = Math.max(0, s.outerHeight - s.vsides), E[0].style.height = C + "px", o = s.event, s.contentTop !== t && 10 > C - s.contentTop && (E.find("div.fc-event-time").text(ot(o.start, y("timeFormat")) + " - " + o.title), E.find("div.fc-event-title").remove()), b("eventAfterRender", o, o, E))
                        }

                        function f(e, t) {
                            var n = "<",
                                r = e.url,
                                i = G(e, y),
                                s = ["fc-event", "fc-event-vert"];
                            return w(e) && s.push("fc-event-draggable"), t.isStart && s.push("fc-event-start"), t.isEnd && s.push("fc-event-end"), s = s.concat(e.className), e.source && (s = s.concat(e.source.className || [])), n += r ? "a href='" + V(e.url) + "'" : "div", n += " class='" + s.join(" ") + "'" + " style='position:absolute;z-index:8;top:" + t.top + "px;left:" + t.left + "px;" + i + "'" + ">" + "<div class='fc-event-inner'>" + "<div class='fc-event-time'>" + V(ut(e.start, e.end, y("timeFormat"))) + "</div>" + "<div class='fc-event-title'>" + V(e.title) + "</div>" + "</div>" + "<div class='fc-event-bg'></div>", t.isEnd && E(e) && (n += "<div class='ui-resizable-handle ui-resizable-s'>=</div>"), n += "</" + (r ? "a" : "div") + ">"
                        }

                        function c(e, t, n) {
                            w(e) && d(e, t, n.isStart), n.isEnd && E(e) && z(e, t, n), C(e, t)
                        }

                        function p(e, t, n) {
                            var r = t.find("div.fc-event-time");
                            w(e) && v(e, t, r), n.isEnd && E(e) && m(e, t, r), C(e, t)
                        }

                        function d(e, t, n) {
                            function r() {
                                u || (t.width(i).height("").draggable("option", "grid", null), u = !0)
                            }
                            var i, s, o, u = !0,
                                f = y("isRTL") ? -1 : 1,
                                l = H(),
                                c = X(),
                                p = J(),
                                d = K(),
                                v = F();
                            t.draggable({
                                zIndex: 9,
                                opacity: y("dragOpacity", "month"),
                                revertDuration: y("dragRevertDuration"),
                                start: function(v, m) {
                                    b("eventDragStart", t, e, v, m), et(e, t), i = t.width(), l.start(function(i, l, v, m) {
                                        it(), i ? (s = !1, o = m * f, i.row ? n ? u && (t.width(c - 10), M(t, p * Math.round((e.end ? (e.end - e.start) / kt : y("defaultEventMinutes")) / d)), t.draggable("option", "grid", [c, 1]), u = !1) : s = !0 : (rt(a(h(e.start), o), a(x(e), o)), r()), s = s || u && !o) : (r(), s = !0), t.draggable("option", "revert", s)
                                    }, v, "drag")
                                },
                                stop: function(n, i) {
                                    if (l.stop(), it(), b("eventDragStop", t, e, n, i), s) r(), t.css("filter", ""), Z(e, t);
                                    else {
                                        var a = 0;
                                        u || (a = Math.round((t.offset().top - Q().offset().top) / p) * d + v - (60 * e.start.getHours() + e.start.getMinutes())), tt(this, e, o, a, u, n, i)
                                    }
                                }
                            })
                        }

                        function v(e, t, n) {
                            function r(t) {
                                var r, i = l(h(e.start), t);
                                e.end && (r = l(h(e.end), t)), n.text(ut(i, r, y("timeFormat")))
                            }

                            function i() {
                                c && (n.css("display", ""), t.draggable("option", "grid", [m, g]), c = !1)
                            }
                            var s, o, u, f, c = !1,
                                p = y("isRTL") ? -1 : 1,
                                d = H(),
                                v = W(),
                                m = X(),
                                g = J(),
                                w = K();
                            t.draggable({
                                zIndex: 9,
                                scroll: !1,
                                grid: [m, g],
                                axis: 1 == v ? "y" : !1,
                                opacity: y("dragOpacity"),
                                revertDuration: y("dragRevertDuration"),
                                start: function(r, l) {
                                    b("eventDragStart", t, e, r, l), et(e, t), s = t.position(), u = f = 0, d.start(function(r, s, u, f) {
                                        t.draggable("option", "revert", !r), it(), r && (o = f * p, y("allDaySlot") && !r.row ? (c || (c = !0, n.hide(), t.draggable("option", "grid", null)), rt(a(h(e.start), o), a(x(e), o))) : i())
                                    }, r, "drag")
                                },
                                drag: function(e, t) {
                                    u = Math.round((t.position.top - s.top) / g) * w, u != f && (c || r(u), f = u)
                                },
                                stop: function(n, a) {
                                    var f = d.stop();
                                    it(), b("eventDragStop", t, e, n, a), f && (o || u || c) ? tt(this, e, o, c ? 0 : u, c, n, a) : (i(), t.css("filter", ""), t.css(s), r(0), Z(e, t))
                                }
                            })
                        }

                        function m(e, t, n) {
                            var r, i, s = J(),
                                o = K();
                            t.resizable({
                                handles: {
                                    s: ".ui-resizable-handle"
                                },
                                grid: s,
                                start: function(n, s) {
                                    r = i = 0, et(e, t), t.css("z-index", 9), b("eventResizeStart", this, e, n, s)
                                },
                                resize: function(u, a) {
                                    r = Math.round((Math.max(s, t.height()) - a.originalSize.height) / s), r != i && (n.text(ut(e.start, r || e.end ? l(S(e), o * r) : null, y("timeFormat"))), i = r)
                                },
                                stop: function(n, i) {
                                    b("eventResizeStop", this, e, n, i), r ? nt(this, e, 0, o * r, n, i) : (t.css("z-index", 8), Z(e, t))
                                }
                            })
                        }
                        var g = this;
                        g.renderEvents = n, g.compileDaySegs = i, g.clearEvents = r, g.slotSegHtml = f, g.bindDaySeg = c, ct.call(g);
                        var y = g.opt,
                            b = g.trigger,
                            w = g.isEventDraggable,
                            E = g.isEventResizable,
                            S = g.eventEnd,
                            T = g.reportEvents,
                            N = g.reportEventClear,
                            C = g.eventElementHandlers,
                            O = g.setHeight,
                            D = g.getDaySegmentContainer,
                            P = g.getSlotSegmentContainer,
                            H = g.getHoverListener,
                            j = g.getMaxMinute,
                            F = g.getMinMinute,
                            I = g.timePosition,
                            q = g.colContentLeft,
                            R = g.colContentRight,
                            U = g.renderDaySegs,
                            z = g.resizableDayEvent,
                            W = g.getColCnt,
                            X = g.getColWidth,
                            J = g.getSnapHeight,
                            K = g.getSnapMinutes,
                            Q = g.getBodyContent,
                            Y = g.reportEventElement,
                            Z = g.showEvents,
                            et = g.hideEvents,
                            tt = g.eventDrop,
                            nt = g.eventResize,
                            rt = g.renderDayOverlay,
                            it = g.clearOverlays,
                            st = g.calendar,
                            ot = st.formatDate,
                            ut = st.formatDates
                    }

                    function ft(e) {
                        var t, n, r, i, s, o;
                        for (t = e.length - 1; t > 0; t--)
                            for (i = e[t], n = 0; i.length > n; n++)
                                for (s = i[n], r = 0; e[t - 1].length > r; r++) o = e[t - 1][r], C(s, o) && (o.forward = Math.max(o.forward || 0, (s.forward || 0) + 1))
                    }

                    function lt(e, n, r) {
                        function i(e, t) {
                            var n = M[e];
                            return "object" == typeof n ? X(n, t || r) : n
                        }

                        function s(e, t) {
                            return n.trigger.apply(n, [e, t || T].concat(Array.prototype.slice.call(arguments, 2), [T]))
                        }

                        function o(e) {
                            return f(e) && !i("disableDragging")
                        }

                        function u(e) {
                            return f(e) && !i("disableResizing")
                        }

                        function f(e) {
                            return Z(e.editable, (e.source || {}).editable, i("editable"))
                        }

                        function c(e) {
                            L = {};
                            var t, n, r = e.length;
                            for (t = 0; r > t; t++) n = e[t], L[n._id] ? L[n._id].push(n) : L[n._id] = [n]
                        }

                        function p(e) {
                            return e.end ? h(e.end) : N(e)
                        }

                        function d(e, t) {
                            A.push(t), O[e._id] ? O[e._id].push(t) : O[e._id] = [t]
                        }

                        function v() {
                            A = [], O = {}
                        }

                        function m(e, n) {
                            n.click(function(r) {
                                return n.hasClass("ui-draggable-dragging") || n.hasClass("ui-resizable-resizing") ? t : s("eventClick", this, e, r)
                            }).hover(function(t) {
                                s("eventMouseover", this, e, t)
                            }, function(t) {
                                s("eventMouseout", this, e, t)
                            })
                        }

                        function g(e, t) {
                            b(e, t, "show")
                        }

                        function y(e, t) {
                            b(e, t, "hide")
                        }

                        function b(e, t, n) {
                            var r, i = O[e._id],
                                s = i.length;
                            for (r = 0; s > r; r++) t && i[r][0] == t[0] || i[r][n]()
                        }

                        function w(e, t, n, r, i, o, u) {
                            var a = t.allDay,
                                f = t._id;
                            S(L[f], n, r, i), s("eventDrop", e, t, n, r, i, function() {
                                S(L[f], -n, -r, a), k(f)
                            }, o, u), k(f)
                        }

                        function E(e, t, n, r, i, o) {
                            var u = t._id;
                            x(L[u], n, r), s("eventResize", e, t, n, r, function() {
                                x(L[u], -n, -r), k(u)
                            }, i, o), k(u)
                        }

                        function S(e, n, r, i) {
                            r = r || 0;
                            for (var s, o = e.length, u = 0; o > u; u++) s = e[u], i !== t && (s.allDay = i), l(a(s.start, n, !0), r), s.end && (s.end = l(a(s.end, n, !0), r)), C(s, M)
                        }

                        function x(e, t, n) {
                            n = n || 0;
                            for (var r, i = e.length, s = 0; i > s; s++) r = e[s], r.end = l(a(p(r), t, !0), n), C(r, M)
                        }
                        var T = this;
                        T.element = e, T.calendar = n, T.name = r, T.opt = i, T.trigger = s, T.isEventDraggable = o, T.isEventResizable = u, T.reportEvents = c, T.eventEnd = p, T.reportEventElement = d, T.reportEventClear = v, T.eventElementHandlers = m, T.showEvents = g, T.hideEvents = y, T.eventDrop = w, T.eventResize = E;
                        var N = T.defaultEventEnd,
                            C = n.normalizeEvent,
                            k = n.reportEventChange,
                            L = {},
                            A = [],
                            O = {},
                            M = n.options
                    }

                    function ct() {
                        function n(e, t) {
                            var n, r, a, h, m, g, y, b, w = I(),
                                E = k(),
                                S = L(),
                                x = 0,
                                T = e.length;
                            for (w[0].innerHTML = i(e), s(e, w.children()), o(e), u(e, w, t), f(e), l(e), c(e), n = p(), r = 0; E > r; r++) {
                                for (a = 0, h = [], m = 0; S > m; m++) h[m] = 0;
                                for (; T > x && (g = e[x]).row == r;) {
                                    for (y = z(h.slice(g.startCol, g.endCol)), g.top = y, y += g.outerHeight, b = g.startCol; g.endCol > b; b++) h[b] = y;
                                    x++
                                }
                                n[r].height(z(h))
                            }
                            v(e, d(n))
                        }

                        function r(t, n, r) {
                            var o, u, a, h = e("<div/>"),
                                m = I(),
                                g = t.length;
                            for (h[0].innerHTML = i(t), o = h.children(), m.append(o), s(t, o), f(t), l(t), c(t), v(t, d(p())), o = [], u = 0; g > u; u++) a = t[u].element, a && (t[u].row === n && a.css("top", r), o.push(a[0]));
                            return e(o)
                        }

                        function i(e) {
                            var t, n, r, i, s, o, u, a, f, l, c = y("isRTL"),
                                h = e.length,
                                p = M(),
                                d = p.left,
                                v = p.right,
                                m = "";
                            for (t = 0; h > t; t++) n = e[t], r = n.event, s = ["fc-event", "fc-event-hori"], w(r) && s.push("fc-event-draggable"), n.isStart && s.push("fc-event-start"), n.isEnd && s.push("fc-event-end"), c ? (o = H(n.end.getDay() - 1), u = H(n.start.getDay()), a = n.isEnd ? D(o) : d, f = n.isStart ? P(u) : v) : (o = H(n.start.getDay()), u = H(n.end.getDay() - 1), a = n.isStart ? D(o) : d, f = n.isEnd ? P(u) : v), s = s.concat(r.className), r.source && (s = s.concat(r.source.className || [])), i = r.url, l = G(r, y), m += i ? "<a href='" + V(i) + "'" : "<div", m += " class='" + s.join(" ") + "'" + " style='position:absolute;z-index:8;left:" + a + "px;" + l + "'" + ">" + "<div class='fc-event-inner'>", !r.allDay && n.isStart && (m += "<span class='fc-event-time'>" + V(R(r.start, r.end, y("timeFormat"))) + "</span>"), m += "<span class='fc-event-title'>" + V(r.title) + "</span>" + "</div>", n.isEnd && E(r) && (m += "<div class='ui-resizable-handle ui-resizable-" + (c ? "w" : "e") + "'>" + "   " + "</div>"), m += "</" + (i ? "a" : "div") + ">", n.left = a, n.outerWidth = f - a, n.startCol = o, n.endCol = u + 1;
                            return m
                        }

                        function s(t, n) {
                            var r, i, s, o, u, a = t.length;
                            for (r = 0; a > r; r++) i = t[r], s = i.event, o = e(n[r]), u = b("eventRender", s, s, o), u === !1 ? o.remove() : (u && u !== !0 && (u = e(u).css({
                                position: "absolute",
                                left: i.left
                            }), o.replaceWith(u), o = u), i.element = o)
                        }

                        function o(e) {
                            var t, n, r, i = e.length;
                            for (t = 0; i > t; t++) n = e[t], r = n.element, r && x(n.event, r)
                        }

                        function u(e, t, n) {
                            var r, i, s, o, u = e.length;
                            for (r = 0; u > r; r++) i = e[r], s = i.element, s && (o = i.event, o._id === n ? q(o, s, i) : s[0]._fci = r);
                            A(t, e, q)
                        }

                        function f(e) {
                            var n, r, i, s, o, u = e.length,
                                a = {};
                            for (n = 0; u > n; n++) r = e[n], i = r.element, i && (s = r.key = $(i[0]), o = a[s], o === t && (o = a[s] = _(i, !0)), r.hsides = o)
                        }

                        function l(e) {
                            var t, n, r, i = e.length;
                            for (t = 0; i > t; t++) n = e[t], r = n.element, r && (r[0].style.width = Math.max(0, n.outerWidth - n.hsides) + "px")
                        }

                        function c(e) {
                            var n, r, i, s, o, u = e.length,
                                a = {};
                            for (n = 0; u > n; n++) r = e[n], i = r.element, i && (s = r.key, o = a[s], o === t && (o = a[s] = F(i)), r.outerHeight = i[0].offsetHeight + o)
                        }

                        function p() {
                            var e, t = k(),
                                n = [];
                            for (e = 0; t > e; e++) n[e] = O(e).find("div.fc-day-content > div");
                            return n
                        }

                        function d(e) {
                            var t, n = e.length,
                                r = [];
                            for (t = 0; n > t; t++) r[t] = e[t][0].offsetTop;
                            return r
                        }

                        function v(e, t) {
                            var n, r, i, s, o = e.length;
                            for (n = 0; o > n; n++) r = e[n], i = r.element, i && (i[0].style.top = t[r.row] + (r.top || 0) + "px", s = r.event, b("eventAfterRender", s, s, i))
                        }

                        function m(t, n, i) {
                            var s = y("isRTL"),
                                o = s ? "w" : "e",
                                u = n.find(".ui-resizable-" + o),
                                f = !1;
                            J(n), n.mousedown(function(e) {
                                e.preventDefault()
                            }).click(function(e) {
                                f && (e.preventDefault(), e.stopImmediatePropagation())
                            }), u.mousedown(function(u) {
                                function l(n) {
                                    b("eventResizeStop", this, t, n), e("body").css("cursor", ""), d.stop(), W(), c && C(this, t, c, 0, n), setTimeout(function() {
                                        f = !1
                                    }, 0)
                                }
                                if (1 == u.which) {
                                    f = !0;
                                    var c, p, d = g.getHoverListener(),
                                        v = k(),
                                        m = L(),
                                        y = s ? -1 : 1,
                                        w = s ? m - 1 : 0,
                                        E = n.css("top"),
                                        x = e.extend({}, t),
                                        A = B(t.start);
                                    X(), e("body").css("cursor", o + "-resize").one("mouseup", l), b("eventResizeStart", this, t, u), d.start(function(e, n) {
                                        if (e) {
                                            var u = Math.max(A.row, e.row),
                                                f = e.col;
                                            1 == v && (u = 0), u == A.row && (f = s ? Math.min(A.col, f) : Math.max(A.col, f)), c = 7 * u + f * y + w - (7 * n.row + n.col * y + w);
                                            var l = a(S(t), c, !0);
                                            if (c) {
                                                x.end = l;
                                                var d = p;
                                                p = r(j([x]), i.row, E), p.find("*").css("cursor", o + "-resize"), d && d.remove(), N(t)
                                            } else p && (T(t), p.remove(), p = null);
                                            W(), U(t.start, a(h(l), 1))
                                        }
                                    }, u)
                                }
                            })
                        }
                        var g = this;
                        g.renderDaySegs = n, g.resizableDayEvent = m;
                        var y = g.opt,
                            b = g.trigger,
                            w = g.isEventDraggable,
                            E = g.isEventResizable,
                            S = g.eventEnd,
                            x = g.reportEventElement,
                            T = g.showEvents,
                            N = g.hideEvents,
                            C = g.eventResize,
                            k = g.getRowCnt,
                            L = g.getColCnt;
                        g.getColWidth;
                        var O = g.allDayRow,
                            M = g.allDayBounds,
                            D = g.colContentLeft,
                            P = g.colContentRight,
                            H = g.dayOfWeekCol,
                            B = g.dateCell,
                            j = g.compileDaySegs,
                            I = g.getDaySegmentContainer,
                            q = g.bindDaySeg,
                            R = g.calendar.formatDates,
                            U = g.renderDayOverlay,
                            W = g.clearOverlays,
                            X = g.clearSelection
                    }

                    function ht() {
                        function t(e, t, i) {
                            n(), t || (t = a(e, i)), f(e, t, i), r(e, t, i)
                        }

                        function n(e) {
                            c && (c = !1, l(), u("unselect", null, e))
                        }

                        function r(e, t, n, r) {
                            c = !0, u("select", null, e, t, n, r)
                        }

                        function i(t) {
                            var i = s.cellDate,
                                u = s.cellIsAllDay,
                                a = s.getHoverListener(),
                                c = s.reportDayClick;
                            if (1 == t.which && o("selectable")) {
                                n(t);
                                var h;
                                a.start(function(e, t) {
                                    l(), e && u(e) ? (h = [i(t), i(e)].sort(U), f(h[0], h[1], !0)) : h = null
                                }, t), e(document).one("mouseup", function(e) {
                                    a.stop(), h && (+h[0] == +h[1] && c(h[0], !0, e), r(h[0], h[1], !0, e))
                                })
                            }
                        }
                        var s = this;
                        s.select = t, s.unselect = n, s.reportSelection = r, s.daySelectionMousedown = i;
                        var o = s.opt,
                            u = s.trigger,
                            a = s.defaultSelectionEnd,
                            f = s.renderSelection,
                            l = s.clearSelection,
                            c = !1;
                        o("selectable") && o("unselectAuto") && e(document).mousedown(function(t) {
                            var r = o("unselectCancel");
                            r && e(t.target).parents(r).length || n(t)
                        })
                    }

                    function pt() {
                        function t(t, n) {
                            var r = s.shift();
                            return r || (r = e("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")), r[0].parentNode != n[0] && r.appendTo(n), i.push(r.css(t).show()), r
                        }

                        function n() {
                            for (var e; e = i.shift();) s.push(e.hide().unbind())
                        }
                        var r = this;
                        r.renderOverlay = t, r.clearOverlays = n;
                        var i = [],
                            s = []
                    }

                    function dt(e) {
                        var t, n, r = this;
                        r.build = function() {
                            t = [], n = [], e(t, n)
                        }, r.cell = function(e, r) {
                            var i, s = t.length,
                                o = n.length,
                                u = -1,
                                a = -1;
                            for (i = 0; s > i; i++)
                                if (r >= t[i][0] && t[i][1] > r) {
                                    u = i;
                                    break
                                }
                            for (i = 0; o > i; i++)
                                if (e >= n[i][0] && n[i][1] > e) {
                                    a = i;
                                    break
                                }
                            return u >= 0 && a >= 0 ? {
                                row: u,
                                col: a
                            } : null
                        }, r.rect = function(e, r, i, s, o) {
                            var u = o.offset();
                            return {
                                top: t[e][0] - u.top,
                                left: n[r][0] - u.left,
                                width: n[s][1] - n[r][0],
                                height: t[i][1] - t[e][0]
                            }
                        }
                    }

                    function vt(t) {
                        function n(e) {
                            mt(e);
                            var n = t.cell(e.pageX, e.pageY);
                            (!n != !o || n && (n.row != o.row || n.col != o.col)) && (n ? (s || (s = n), i(n, s, n.row - s.row, n.col - s.col)) : i(n, s), o = n)
                        }
                        var r, i, s, o, u = this;
                        u.start = function(u, a, f) {
                            i = u, s = o = null, t.build(), n(a), r = f || "mousemove", e(document).bind(r, n)
                        }, u.stop = function() {
                            return e(document).unbind(r, n), o
                        }
                    }

                    function mt(e) {
                        e.pageX === t && (e.pageX = e.originalEvent.pageX, e.pageY = e.originalEvent.pageY)
                    }

                    function gt(e) {
                        function n(t) {
                            return i[t] = i[t] || e(t)
                        }
                        var r = this,
                            i = {},
                            s = {},
                            o = {};
                        r.left = function(e) {
                            return s[e] = s[e] === t ? n(e).position().left : s[e]
                        }, r.right = function(e) {
                            return o[e] = o[e] === t ? r.left(e) + n(e).width() : o[e]
                        }, r.clear = function() {
                            i = {}, s = {}, o = {}
                        }
                    }
                    var yt = {
                            defaultView: "month",
                            aspectRatio: 1.35,
                            header: {
                                left: "title",
                                center: "",
                                right: "today prev,next"
                            },
                            weekends: !0,
                            weekNumbers: !1,
                            weekNumberCalculation: "iso",
                            weekNumberTitle: "W",
                            allDayDefault: !0,
                            ignoreTimezone: !0,
                            lazyFetching: !0,
                            startParam: "start",
                            endParam: "end",
                            titleFormat: {
                                month: "MMMM yyyy",
                                week: "MMM d[ yyyy]{ ''[ MMM] d yyyy}",
                                day: "dddd, MMM d, yyyy"
                            },
                            columnFormat: {
                                month: "ddd",
                                week: "ddd M/d",
                                day: "dddd M/d"
                            },
                            timeFormat: {
                                "": "h(:mm)t"
                            },
                            isRTL: !1,
                            firstDay: 0,
                            monthNames: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
                            monthNamesShort: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
                            dayNames: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
                            dayNamesShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
                            buttonText: {
                                prev: "<span class='fc-text-arrow'></span>",
                                next: "<span class='fc-text-arrow'></span>",
                                prevYear: "<span class='fc-text-arrow'></span>",
                                nextYear: "<span class='fc-text-arrow'></span>",
                                today: "today",
                                month: "month",
                                week: "week",
                                day: "day"
                            },
                            theme: !1,
                            buttonIcons: {
                                prev: "circle-triangle-w",
                                next: "circle-triangle-e"
                            },
                            unselectAuto: !0,
                            dropAccept: "*"
                        },
                        bt = {
                            header: {
                                left: "next,prev today",
                                center: "",
                                right: "title"
                            },
                            buttonText: {
                                prev: "<span class='fc-text-arrow'></span>",
                                next: "<span class='fc-text-arrow'></span>",
                                prevYear: "<span class='fc-text-arrow'></span>",
                                nextYear: "<span class='fc-text-arrow'></span>"
                            },
                            buttonIcons: {
                                prev: "circle-triangle-e",
                                next: "circle-triangle-w"
                            }
                        },
                        wt = e.fullCalendar = {
                            version: "1.6.1"
                        },
                        Et = wt.views = {};
                    e.fn.fullCalendar = function(n) {
                        if ("string" == typeof n) {
                            var i, s = Array.prototype.slice.call(arguments, 1);
                            return this.each(function() {
                                var r = e.data(this, "fullCalendar");
                                if (r && e.isFunction(r[n])) {
                                    var o = r[n].apply(r, s);
                                    i === t && (i = o), "destroy" == n && e.removeData(this, "fullCalendar")
                                }
                            }), i !== t ? i : this
                        }
                        var o = n.eventSources || [];
                        return delete n.eventSources, n.events && (o.push(n.events), delete n.events), n = e.extend(!0, {}, yt, n.isRTL || n.isRTL === t && yt.isRTL ? bt : {}, n), this.each(function(t, i) {
                            var s = e(i),
                                u = new r(s, n, o);
                            s.data("fullCalendar", u), u.render()
                        }), this
                    }, wt.sourceNormalizers = [], wt.sourceFetchers = [];
                    var St = {
                            dataType: "json",
                            cache: !1
                        },
                        xt = 1;
                    wt.addDays = a, wt.cloneDate = h, wt.parseDate = g, wt.parseISO8601 = y, wt.parseTime = b, wt.formatDate = w, wt.formatDates = E;
                    var Tt = ["sun", "mon", "tue", "wed", "thu", "fri", "sat"],
                        Nt = 864e5,
                        Ct = 36e5,
                        kt = 6e4,
                        Lt = {
                            s: function(e) {
                                return e.getSeconds()
                            },
                            ss: function(e) {
                                return W(e.getSeconds())
                            },
                            m: function(e) {
                                return e.getMinutes()
                            },
                            mm: function(e) {
                                return W(e.getMinutes())
                            },
                            h: function(e) {
                                return e.getHours() % 12 || 12
                            },
                            hh: function(e) {
                                return W(e.getHours() % 12 || 12)
                            },
                            H: function(e) {
                                return e.getHours()
                            },
                            HH: function(e) {
                                return W(e.getHours())
                            },
                            d: function(e) {
                                return e.getDate()
                            },
                            dd: function(e) {
                                return W(e.getDate())
                            },
                            ddd: function(e, t) {
                                return t.dayNamesShort[e.getDay()]
                            },
                            dddd: function(e, t) {
                                return t.dayNames[e.getDay()]
                            },
                            M: function(e) {
                                return e.getMonth() + 1
                            },
                            MM: function(e) {
                                return W(e.getMonth() + 1)
                            },
                            MMM: function(e, t) {
                                return t.monthNamesShort[e.getMonth()]
                            },
                            MMMM: function(e, t) {
                                return t.monthNames[e.getMonth()]
                            },
                            yy: function(e) {
                                return (e.getFullYear() + "").substring(2)
                            },
                            yyyy: function(e) {
                                return e.getFullYear()
                            },
                            t: function(e) {
                                return 12 > e.getHours() ? "a" : "p"
                            },
                            tt: function(e) {
                                return 12 > e.getHours() ? "am" : "pm"
                            },
                            T: function(e) {
                                return 12 > e.getHours() ? "A" : "P"
                            },
                            TT: function(e) {
                                return 12 > e.getHours() ? "AM" : "PM"
                            },
                            u: function(e) {
                                return w(e, "yyyy-MM-dd'T'HH:mm:ss'Z'")
                            },
                            S: function(e) {
                                var t = e.getDate();
                                return t > 10 && 20 > t ? "th" : ["st", "nd", "rd"][t % 10 - 1] || "th"
                            },
                            w: function(e, t) {
                                return t.weekNumberCalculation(e)
                            },
                            W: function(e) {
                                return S(e)
                            }
                        };
                    wt.dateFormatters = Lt, wt.applyAll = Y, Et.month = et, Et.basicWeek = tt, Et.basicDay = nt, n({
                        weekMode: "fixed"
                    }), Et.agendaWeek = st, Et.agendaDay = ot, n({
                        allDaySlot: !0,
                        allDayText: "all-day",
                        firstHour: 6,
                        slotMinutes: 30,
                        defaultEventMinutes: 120,
                        axisFormat: "h(:mm)tt",
                        timeFormat: {
                            agenda: "h:mm{ - h:mm}"
                        },
                        dragOpacity: {
                            agenda: .5
                        },
                        minTime: 0,
                        maxTime: 24
                    })
                })(jQuery);
            (function(e) {
                function t(t, n, u) {
                    var a = t.success;
                    var f = e.extend({}, t.data || {}, {
                        "start-min": r(n, "u"),
                        "start-max": r(u, "u"),
                        singleevents: true,
                        "max-results": 9999
                    });
                    var l = t.currentTimezone;
                    if (l) {
                        f.ctz = l = l.replace(" ", "_")
                    }
                    return e.extend({}, t, {
                        url: t.url.replace(/\/basic$/, "/full") + "?alt=json-in-script&callback=?",
                        dataType: "jsonp",
                        data: f,
                        startParam: false,
                        endParam: false,
                        success: function(t) {
                            var n = [];
                            if (t.feed.entry) {
                                e.each(t.feed.entry, function(t, r) {
                                    var o = r["gd$when"][0]["startTime"];
                                    var u = i(o, true);
                                    var a = i(r["gd$when"][0]["endTime"], true);
                                    var f = o.indexOf("T") == -1;
                                    var c;
                                    e.each(r.link, function(e, t) {
                                        if (t.type == "text/html") {
                                            c = t.href;
                                            if (l) {
                                                c += (c.indexOf("?") == -1 ? "?" : "&") + "ctz=" + l
                                            }
                                        }
                                    });
                                    if (f) {
                                        s(a, -1)
                                    }
                                    n.push({
                                        id: r["gCal$uid"]["value"],
                                        title: r["title"]["$t"],
                                        url: c,
                                        start: u,
                                        end: a,
                                        allDay: f,
                                        location: r["gd$where"][0]["valueString"],
                                        description: r["content"]["$t"]
                                    })
                                })
                            }
                            var r = [n].concat(Array.prototype.slice.call(arguments, 1));
                            var u = o(a, this, r);
                            if (e.isArray(u)) {
                                return u
                            }
                            return n
                        }
                    })
                }
                var n = e.fullCalendar;
                var r = n.formatDate;
                var i = n.parseISO8601;
                var s = n.addDays;
                var o = n.applyAll;
                n.sourceNormalizers.push(function(e) {
                    if (e.dataType == "gcal" || e.dataType === undefined && (e.url || "").match(/^(http|https):\/\/www.google.com\/calendar\/feeds\//)) {
                        e.dataType = "gcal";
                        if (e.editable === undefined) {
                            e.editable = false
                        }
                    }
                });
                n.sourceFetchers.push(function(e, n, r) {
                    if (e.dataType == "gcal") {
                        return t(e, n, r)
                    }
                });
                n.gcalFeed = function(t, n) {
                    return e.extend({}, n, {
                        url: t,
                        dataType: "gcal"
                    })
                }
            })(jQuery);
            (function(e) {
                e.color = {}, e.color.make = function(t, n, r, i) {
                    var s = {};
                    return s.r = t || 0, s.g = n || 0, s.b = r || 0, s.a = i != null ? i : 1, s.add = function(e, t) {
                        for (var n = 0; n < e.length; ++n) s[e.charAt(n)] += t;
                        return s.normalize()
                    }, s.scale = function(e, t) {
                        for (var n = 0; n < e.length; ++n) s[e.charAt(n)] *= t;
                        return s.normalize()
                    }, s.toString = function() {
                        return s.a >= 1 ? "rgb(" + [s.r, s.g, s.b].join(",") + ")" : "rgba(" + [s.r, s.g, s.b, s.a].join(",") + ")"
                    }, s.normalize = function() {
                        function e(e, t, n) {
                            return t < e ? e : t > n ? n : t
                        }
                        return s.r = e(0, parseInt(s.r), 255), s.g = e(0, parseInt(s.g), 255), s.b = e(0, parseInt(s.b), 255), s.a = e(0, s.a, 1), s
                    }, s.clone = function() {
                        return e.color.make(s.r, s.b, s.g, s.a)
                    }, s.normalize()
                }, e.color.extract = function(t, n) {
                    var r;
                    do {
                        r = t.css(n).toLowerCase();
                        if (r != "" && r != "transparent") break;
                        t = t.parent()
                    } while (!e.nodeName(t.get(0), "body"));
                    return r == "rgba(0, 0, 0, 0)" && (r = "transparent"), e.color.parse(r)
                }, e.color.parse = function(n) {
                    var r, i = e.color.make;
                    if (r = /rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(n)) return i(parseInt(r[1], 10), parseInt(r[2], 10), parseInt(r[3], 10));
                    if (r = /rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(n)) return i(parseInt(r[1], 10), parseInt(r[2], 10), parseInt(r[3], 10), parseFloat(r[4]));
                    if (r = /rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(n)) return i(parseFloat(r[1]) * 2.55, parseFloat(r[2]) * 2.55, parseFloat(r[3]) * 2.55);
                    if (r = /rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(n)) return i(parseFloat(r[1]) * 2.55, parseFloat(r[2]) * 2.55, parseFloat(r[3]) * 2.55, parseFloat(r[4]));
                    if (r = /#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(n)) return i(parseInt(r[1], 16), parseInt(r[2], 16), parseInt(r[3], 16));
                    if (r = /#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(n)) return i(parseInt(r[1] + r[1], 16), parseInt(r[2] + r[2], 16), parseInt(r[3] + r[3], 16));
                    var s = e.trim(n).toLowerCase();
                    return s == "transparent" ? i(255, 255, 255, 0) : (r = t[s] || [0, 0, 0], i(r[0], r[1], r[2]))
                };
                var t = {
                    aqua: [0, 255, 255],
                    azure: [240, 255, 255],
                    beige: [245, 245, 220],
                    black: [0, 0, 0],
                    blue: [0, 0, 255],
                    brown: [165, 42, 42],
                    cyan: [0, 255, 255],
                    darkblue: [0, 0, 139],
                    darkcyan: [0, 139, 139],
                    darkgrey: [169, 169, 169],
                    darkgreen: [0, 100, 0],
                    darkkhaki: [189, 183, 107],
                    darkmagenta: [139, 0, 139],
                    darkolivegreen: [85, 107, 47],
                    darkorange: [255, 140, 0],
                    darkorchid: [153, 50, 204],
                    darkred: [139, 0, 0],
                    darksalmon: [233, 150, 122],
                    darkviolet: [148, 0, 211],
                    fuchsia: [255, 0, 255],
                    gold: [255, 215, 0],
                    green: [0, 128, 0],
                    indigo: [75, 0, 130],
                    khaki: [240, 230, 140],
                    lightblue: [173, 216, 230],
                    lightcyan: [224, 255, 255],
                    lightgreen: [144, 238, 144],
                    lightgrey: [211, 211, 211],
                    lightpink: [255, 182, 193],
                    lightyellow: [255, 255, 224],
                    lime: [0, 255, 0],
                    magenta: [255, 0, 255],
                    maroon: [128, 0, 0],
                    navy: [0, 0, 128],
                    olive: [128, 128, 0],
                    orange: [255, 165, 0],
                    pink: [255, 192, 203],
                    purple: [128, 0, 128],
                    violet: [128, 0, 128],
                    red: [255, 0, 0],
                    silver: [192, 192, 192],
                    white: [255, 255, 255],
                    yellow: [255, 255, 0]
                }
            })(jQuery),
            function(e) {
                function t(t, n) {
                    var r = n.children("." + t)[0];
                    if (r == null) {
                        r = document.createElement("canvas"), r.className = t, e(r).css({
                            direction: "ltr",
                            position: "absolute",
                            left: 0,
                            top: 0
                        }).appendTo(n);
                        if (!r.getContext) {
                            if (!window.G_vmlCanvasManager) throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");
                            r = window.G_vmlCanvasManager.initElement(r)
                        }
                    }
                    this.element = r;
                    var i = this.context = r.getContext("2d"),
                        s = window.devicePixelRatio || 1,
                        o = i.webkitBackingStorePixelRatio || i.mozBackingStorePixelRatio || i.msBackingStorePixelRatio || i.oBackingStorePixelRatio || i.backingStorePixelRatio || 1;
                    this.pixelRatio = s / o, this.resize(n.width(), n.height()), this.textContainer = null, this.text = {}, this._textCache = {}
                }

                function n(n, i, s, o) {
                    function u(e, t) {
                        t = [mt].concat(t);
                        for (var n = 0; n < e.length; ++n) e[n].apply(this, t)
                    }

                    function a() {
                        var n = {
                            Canvas: t
                        };
                        for (var r = 0; r < o.length; ++r) {
                            var i = o[r];
                            i.init(mt, n), i.options && e.extend(!0, it, i.options)
                        }
                    }

                    function f(t) {
                        e.extend(!0, it, t), t && t.colors && (it.colors = t.colors), it.xaxis.color == null && (it.xaxis.color = e.color.parse(it.grid.color).scale("a", .22).toString()), it.yaxis.color == null && (it.yaxis.color = e.color.parse(it.grid.color).scale("a", .22).toString()), it.xaxis.tickColor == null && (it.xaxis.tickColor = it.grid.tickColor || it.xaxis.color), it.yaxis.tickColor == null && (it.yaxis.tickColor = it.grid.tickColor || it.yaxis.color), it.grid.borderColor == null && (it.grid.borderColor = it.grid.color), it.grid.tickColor == null && (it.grid.tickColor = e.color.parse(it.grid.color).scale("a", .22).toString());
                        var r, i, s, o = {
                            style: n.css("font-style"),
                            size: Math.round(.8 * (+n.css("font-size").replace("px", "") || 13)),
                            variant: n.css("font-variant"),
                            weight: n.css("font-weight"),
                            family: n.css("font-family")
                        };
                        o.lineHeight = o.size * 1.15, s = it.xaxes.length || 1;
                        for (r = 0; r < s; ++r) i = it.xaxes[r], i && !i.tickColor && (i.tickColor = i.color), i = e.extend(!0, {}, it.xaxis, i), it.xaxes[r] = i, i.font && (i.font = e.extend({}, o, i.font), i.font.color || (i.font.color = i.color));
                        s = it.yaxes.length || 1;
                        for (r = 0; r < s; ++r) i = it.yaxes[r], i && !i.tickColor && (i.tickColor = i.color), i = e.extend(!0, {}, it.yaxis, i), it.yaxes[r] = i, i.font && (i.font = e.extend({}, o, i.font), i.font.color || (i.font.color = i.color));
                        it.xaxis.noTicks && it.xaxis.ticks == null && (it.xaxis.ticks = it.xaxis.noTicks), it.yaxis.noTicks && it.yaxis.ticks == null && (it.yaxis.ticks = it.yaxis.noTicks), it.x2axis && (it.xaxes[1] = e.extend(!0, {}, it.xaxis, it.x2axis), it.xaxes[1].position = "top"), it.y2axis && (it.yaxes[1] = e.extend(!0, {}, it.yaxis, it.y2axis), it.yaxes[1].position = "right"), it.grid.coloredAreas && (it.grid.markings = it.grid.coloredAreas), it.grid.coloredAreasColor && (it.grid.markingsColor = it.grid.coloredAreasColor), it.lines && e.extend(!0, it.series.lines, it.lines), it.points && e.extend(!0, it.series.points, it.points), it.bars && e.extend(!0, it.series.bars, it.bars), it.shadowSize != null && (it.series.shadowSize = it.shadowSize), it.highlightColor != null && (it.series.highlightColor = it.highlightColor);
                        for (r = 0; r < it.xaxes.length; ++r) m(lt, r + 1).options = it.xaxes[r];
                        for (r = 0; r < it.yaxes.length; ++r) m(ct, r + 1).options = it.yaxes[r];
                        for (var a in vt) it.hooks[a] && it.hooks[a].length && (vt[a] = vt[a].concat(it.hooks[a]));
                        u(vt.processOptions, [it])
                    }

                    function l(e) {
                        rt = c(e), g(), y()
                    }

                    function c(t) {
                        var n = [];
                        for (var r = 0; r < t.length; ++r) {
                            var i = e.extend(!0, {}, it.series);
                            t[r].data != null ? (i.data = t[r].data, delete t[r].data, e.extend(!0, i, t[r]), t[r].data = i.data) : i.data = t[r], n.push(i)
                        }
                        return n
                    }

                    function h(e, t) {
                        var n = e[t + "axis"];
                        return typeof n == "object" && (n = n.n), typeof n != "number" && (n = 1), n
                    }

                    function p() {
                        return e.grep(lt.concat(ct), function(e) {
                            return e
                        })
                    }

                    function d(e) {
                        var t = {},
                            n, r;
                        for (n = 0; n < lt.length; ++n) r = lt[n], r && r.used && (t["x" + r.n] = r.c2p(e.left));
                        for (n = 0; n < ct.length; ++n) r = ct[n], r && r.used && (t["y" + r.n] = r.c2p(e.top));
                        return t.x1 !== undefined && (t.x = t.x1), t.y1 !== undefined && (t.y = t.y1), t
                    }

                    function v(e) {
                        var t = {},
                            n, r, i;
                        for (n = 0; n < lt.length; ++n) {
                            r = lt[n];
                            if (r && r.used) {
                                i = "x" + r.n, e[i] == null && r.n == 1 && (i = "x");
                                if (e[i] != null) {
                                    t.left = r.p2c(e[i]);
                                    break
                                }
                            }
                        }
                        for (n = 0; n < ct.length; ++n) {
                            r = ct[n];
                            if (r && r.used) {
                                i = "y" + r.n, e[i] == null && r.n == 1 && (i = "y");
                                if (e[i] != null) {
                                    t.top = r.p2c(e[i]);
                                    break
                                }
                            }
                        }
                        return t
                    }

                    function m(t, n) {
                        return t[n - 1] || (t[n - 1] = {
                            n: n,
                            direction: t == lt ? "x" : "y",
                            options: e.extend(!0, {}, t == lt ? it.xaxis : it.yaxis)
                        }), t[n - 1]
                    }

                    function g() {
                        var t = rt.length,
                            n = -1,
                            r;
                        for (r = 0; r < rt.length; ++r) {
                            var i = rt[r].color;
                            i != null && (t--, typeof i == "number" && i > n && (n = i))
                        }
                        t <= n && (t = n + 1);
                        var s, o = [],
                            u = it.colors,
                            a = u.length,
                            f = 0;
                        for (r = 0; r < t; r++) s = e.color.parse(u[r % a] || "#666"), r % a == 0 && r && (f >= 0 ? f < .5 ? f = -f - .2 : f = 0 : f = -f), o[r] = s.scale("rgb", 1 + f);
                        var l = 0,
                            c;
                        for (r = 0; r < rt.length; ++r) {
                            c = rt[r], c.color == null ? (c.color = o[l].toString(), ++l) : typeof c.color == "number" && (c.color = o[c.color].toString());
                            if (c.lines.show == null) {
                                var p, d = !0;
                                for (p in c)
                                    if (c[p] && c[p].show) {
                                        d = !1;
                                        break
                                    }
                                d && (c.lines.show = !0)
                            }
                            c.lines.zero == null && (c.lines.zero = !!c.lines.fill), c.xaxis = m(lt, h(c, "x")), c.yaxis = m(ct, h(c, "y"))
                        }
                    }

                    function y() {
                        function t(e, t, n) {
                            t < e.datamin && t != -i && (e.datamin = t), n > e.datamax && n != i && (e.datamax = n)
                        }
                        var n = Number.POSITIVE_INFINITY,
                            r = Number.NEGATIVE_INFINITY,
                            i = Number.MAX_VALUE,
                            s, o, a, f, l, c, h, d, v, m, g, y, b, w, E, S;
                        e.each(p(), function(e, t) {
                            t.datamin = n, t.datamax = r, t.used = !1
                        });
                        for (s = 0; s < rt.length; ++s) c = rt[s], c.datapoints = {
                            points: []
                        }, u(vt.processRawData, [c, c.data, c.datapoints]);
                        for (s = 0; s < rt.length; ++s) {
                            c = rt[s], E = c.data, S = c.datapoints.format;
                            if (!S) {
                                S = [], S.push({
                                    x: !0,
                                    number: !0,
                                    required: !0
                                }), S.push({
                                    y: !0,
                                    number: !0,
                                    required: !0
                                });
                                if (c.bars.show || c.lines.show && c.lines.fill) {
                                    var x = !!(c.bars.show && c.bars.zero || c.lines.show && c.lines.zero);
                                    S.push({
                                        y: !0,
                                        number: !0,
                                        required: !1,
                                        defaultValue: 0,
                                        autoscale: x
                                    }), c.bars.horizontal && (delete S[S.length - 1].y, S[S.length - 1].x = !0)
                                }
                                c.datapoints.format = S
                            }
                            if (c.datapoints.pointsize != null) continue;
                            c.datapoints.pointsize = S.length, d = c.datapoints.pointsize, h = c.datapoints.points;
                            var T = c.lines.show && c.lines.steps;
                            c.xaxis.used = c.yaxis.used = !0;
                            for (o = a = 0; o < E.length; ++o, a += d) {
                                w = E[o];
                                var N = w == null;
                                if (!N)
                                    for (f = 0; f < d; ++f) y = w[f], b = S[f], b && (b.number && y != null && (y = +y, isNaN(y) ? y = null : y == Infinity ? y = i : y == -Infinity && (y = -i)), y == null && (b.required && (N = !0), b.defaultValue != null && (y = b.defaultValue))), h[a + f] = y;
                                if (N)
                                    for (f = 0; f < d; ++f) y = h[a + f], y != null && (b = S[f], b.autoscale && (b.x && t(c.xaxis, y, y), b.y && t(c.yaxis, y, y))), h[a + f] = null;
                                else if (T && a > 0 && h[a - d] != null && h[a - d] != h[a] && h[a - d + 1] != h[a + 1]) {
                                    for (f = 0; f < d; ++f) h[a + d + f] = h[a + f];
                                    h[a + 1] = h[a - d + 1], a += d
                                }
                            }
                        }
                        for (s = 0; s < rt.length; ++s) c = rt[s], u(vt.processDatapoints, [c, c.datapoints]);
                        for (s = 0; s < rt.length; ++s) {
                            c = rt[s], h = c.datapoints.points, d = c.datapoints.pointsize, S = c.datapoints.format;
                            var C = n,
                                k = n,
                                L = r,
                                A = r;
                            for (o = 0; o < h.length; o += d) {
                                if (h[o] == null) continue;
                                for (f = 0; f < d; ++f) {
                                    y = h[o + f], b = S[f];
                                    if (!b || b.autoscale === !1 || y == i || y == -i) continue;
                                    b.x && (y < C && (C = y), y > L && (L = y)), b.y && (y < k && (k = y), y > A && (A = y))
                                }
                            }
                            if (c.bars.show) {
                                var O;
                                switch (c.bars.align) {
                                    case "left":
                                        O = 0;
                                        break;
                                    case "right":
                                        O = -c.bars.barWidth;
                                        break;
                                    case "center":
                                        O = -c.bars.barWidth / 2;
                                        break;
                                    default:
                                        throw new Error("Invalid bar alignment: " + c.bars.align)
                                }
                                c.bars.horizontal ? (k += O, A += O + c.bars.barWidth) : (C += O, L += O + c.bars.barWidth)
                            }
                            t(c.xaxis, C, L), t(c.yaxis, k, A)
                        }
                        e.each(p(), function(e, t) {
                            t.datamin == n && (t.datamin = null), t.datamax == r && (t.datamax = null)
                        })
                    }

                    function b() {
                        n.css("padding", 0).children(":not(.flot-base,.flot-overlay)").remove(), n.css("position") == "static" && n.css("position", "relative"), st = new t("flot-base", n), ot = new t("flot-overlay", n), at = st.context, ft = ot.context, ut = e(ot.element).unbind();
                        var r = n.data("plot");
                        r && (r.shutdown(), ot.clear()), n.data("plot", mt)
                    }

                    function w() {
                        it.grid.hoverable && (ut.mousemove(X), ut.bind("mouseleave", V)), it.grid.clickable && ut.click($), u(vt.bindEvents, [ut])
                    }

                    function E() {
                        yt && clearTimeout(yt), ut.unbind("mousemove", X), ut.unbind("mouseleave", V), ut.unbind("click", $), u(vt.shutdown, [ut])
                    }

                    function S(e) {
                        function t(e) {
                            return e
                        }
                        var n, r, i = e.options.transform || t,
                            s = e.options.inverseTransform;
                        e.direction == "x" ? (n = e.scale = pt / Math.abs(i(e.max) - i(e.min)), r = Math.min(i(e.max), i(e.min))) : (n = e.scale = dt / Math.abs(i(e.max) - i(e.min)), n = -n, r = Math.max(i(e.max), i(e.min))), i == t ? e.p2c = function(e) {
                            return (e - r) * n
                        } : e.p2c = function(e) {
                            return (i(e) - r) * n
                        }, s ? e.c2p = function(e) {
                            return s(r + e / n)
                        } : e.c2p = function(e) {
                            return r + e / n
                        }
                    }

                    function x(e) {
                        var t = e.options,
                            n = e.ticks || [],
                            r = t.labelWidth || 0,
                            i = t.labelHeight || 0,
                            s = r || e.direction == "x" ? Math.floor(st.width / (n.length || 1)) : null;
                        legacyStyles = e.direction + "Axis " + e.direction + e.n + "Axis", layer = "flot-" + e.direction + "-axis flot-" + e.direction + e.n + "-axis " + legacyStyles, font = t.font || "flot-tick-label tickLabel";
                        for (var o = 0; o < n.length; ++o) {
                            var u = n[o];
                            if (!u.label) continue;
                            var a = st.getTextInfo(layer, u.label, font, null, s);
                            r = Math.max(r, a.width), i = Math.max(i, a.height)
                        }
                        e.labelWidth = t.labelWidth || r, e.labelHeight = t.labelHeight || i
                    }

                    function T(t) {
                        var n = t.labelWidth,
                            r = t.labelHeight,
                            i = t.options.position,
                            s = t.options.tickLength,
                            o = it.grid.axisMargin,
                            u = it.grid.labelMargin,
                            a = t.direction == "x" ? lt : ct,
                            f, l, c = e.grep(a, function(e) {
                                return e && e.options.position == i && e.reserveSpace
                            });
                        e.inArray(t, c) == c.length - 1 && (o = 0);
                        if (s == null) {
                            var h = e.grep(a, function(e) {
                                return e && e.reserveSpace
                            });
                            l = e.inArray(t, h) == 0, l ? s = "full" : s = 5
                        }
                        isNaN(+s) || (u += +s), t.direction == "x" ? (r += u, i == "bottom" ? (ht.bottom += r + o, t.box = {
                            top: st.height - ht.bottom,
                            height: r
                        }) : (t.box = {
                            top: ht.top + o,
                            height: r
                        }, ht.top += r + o)) : (n += u, i == "left" ? (t.box = {
                            left: ht.left + o,
                            width: n
                        }, ht.left += n + o) : (ht.right += n + o, t.box = {
                            left: st.width - ht.right,
                            width: n
                        })), t.position = i, t.tickLength = s, t.box.padding = u, t.innermost = l
                    }

                    function N(e) {
                        e.direction == "x" ? (e.box.left = ht.left - e.labelWidth / 2, e.box.width = st.width - ht.left - ht.right + e.labelWidth) : (e.box.top = ht.top - e.labelHeight / 2, e.box.height = st.height - ht.bottom - ht.top + e.labelHeight)
                    }

                    function C() {
                        var t = it.grid.minBorderMargin,
                            n = {
                                x: 0,
                                y: 0
                            },
                            r, i;
                        if (t == null) {
                            t = 0;
                            for (r = 0; r < rt.length; ++r) t = Math.max(t, 2 * (rt[r].points.radius + rt[r].points.lineWidth / 2))
                        }
                        n.x = n.y = Math.ceil(t), e.each(p(), function(e, t) {
                            var r = t.direction;
                            t.reserveSpace && (n[r] = Math.ceil(Math.max(n[r], (r == "x" ? t.labelWidth : t.labelHeight) / 2)))
                        }), ht.left = Math.max(n.x, ht.left), ht.right = Math.max(n.x, ht.right), ht.top = Math.max(n.y, ht.top), ht.bottom = Math.max(n.y, ht.bottom)
                    }

                    function k() {
                        var t, n = p(),
                            r = it.grid.show;
                        for (var i in ht) {
                            var s = it.grid.margin || 0;
                            ht[i] = typeof s == "number" ? s : s[i] || 0
                        }
                        u(vt.processOffset, [ht]);
                        for (var i in ht) typeof it.grid.borderWidth == "object" ? ht[i] += r ? it.grid.borderWidth[i] : 0 : ht[i] += r ? it.grid.borderWidth : 0;
                        e.each(n, function(e, t) {
                            t.show = t.options.show, t.show == null && (t.show = t.used), t.reserveSpace = t.show || t.options.reserveSpace, L(t)
                        });
                        if (r) {
                            var o = e.grep(n, function(e) {
                                return e.reserveSpace
                            });
                            e.each(o, function(e, t) {
                                A(t), O(t), M(t, t.ticks), x(t)
                            });
                            for (t = o.length - 1; t >= 0; --t) T(o[t]);
                            C(), e.each(o, function(e, t) {
                                N(t)
                            })
                        }
                        pt = st.width - ht.left - ht.right, dt = st.height - ht.bottom - ht.top, e.each(n, function(e, t) {
                            S(t)
                        }), r && B(), z()
                    }

                    function L(e) {
                        var t = e.options,
                            n = +(t.min != null ? t.min : e.datamin),
                            r = +(t.max != null ? t.max : e.datamax),
                            i = r - n;
                        if (i == 0) {
                            var s = r == 0 ? 1 : .01;
                            t.min == null && (n -= s);
                            if (t.max == null || t.min != null) r += s
                        } else {
                            var o = t.autoscaleMargin;
                            o != null && (t.min == null && (n -= i * o, n < 0 && e.datamin != null && e.datamin >= 0 && (n = 0)), t.max == null && (r += i * o, r > 0 && e.datamax != null && e.datamax <= 0 && (r = 0)))
                        }
                        e.min = n, e.max = r
                    }

                    function A(t) {
                        var n = t.options,
                            i;
                        typeof n.ticks == "number" && n.ticks > 0 ? i = n.ticks : i = .3 * Math.sqrt(t.direction == "x" ? st.width : st.height);
                        var s = (t.max - t.min) / i,
                            o = -Math.floor(Math.log(s) / Math.LN10),
                            u = n.tickDecimals;
                        u != null && o > u && (o = u);
                        var a = Math.pow(10, -o),
                            f = s / a,
                            l;
                        f < 1.5 ? l = 1 : f < 3 ? (l = 2, f > 2.25 && (u == null || o + 1 <= u) && (l = 2.5, ++o)) : f < 7.5 ? l = 5 : l = 10, l *= a, n.minTickSize != null && l < n.minTickSize && (l = n.minTickSize), t.delta = s, t.tickDecimals = Math.max(0, u != null ? u : o), t.tickSize = n.tickSize || l;
                        if (n.mode == "time" && !t.tickGenerator) throw new Error("Time mode requires the flot.time plugin.");
                        t.tickGenerator || (t.tickGenerator = function(e) {
                            var t = [],
                                n = r(e.min, e.tickSize),
                                i = 0,
                                s = Number.NaN,
                                o;
                            do o = s, s = n + i * e.tickSize, t.push(s), ++i;
                            while (s < e.max && s != o);
                            return t
                        }, t.tickFormatter = function(e, t) {
                            var n = t.tickDecimals ? Math.pow(10, t.tickDecimals) : 1,
                                r = "" + Math.round(e * n) / n;
                            if (t.tickDecimals != null) {
                                var i = r.indexOf("."),
                                    s = i == -1 ? 0 : r.length - i - 1;
                                if (s < t.tickDecimals) return (s ? r : r + ".") + ("" + n).substr(1, t.tickDecimals - s)
                            }
                            return r
                        }), e.isFunction(n.tickFormatter) && (t.tickFormatter = function(e, t) {
                            return "" + n.tickFormatter(e, t)
                        });
                        if (n.alignTicksWithAxis != null) {
                            var c = (t.direction == "x" ? lt : ct)[n.alignTicksWithAxis - 1];
                            if (c && c.used && c != t) {
                                var h = t.tickGenerator(t);
                                h.length > 0 && (n.min == null && (t.min = Math.min(t.min, h[0])), n.max == null && h.length > 1 && (t.max = Math.max(t.max, h[h.length - 1]))), t.tickGenerator = function(e) {
                                    var t = [],
                                        n, r;
                                    for (r = 0; r < c.ticks.length; ++r) n = (c.ticks[r].v - c.min) / (c.max - c.min), n = e.min + n * (e.max - e.min), t.push(n);
                                    return t
                                };
                                if (!t.mode && n.tickDecimals == null) {
                                    var p = Math.max(0, -Math.floor(Math.log(t.delta) / Math.LN10) + 1),
                                        d = t.tickGenerator(t);
                                    d.length > 1 && /\..*0$/.test((d[1] - d[0]).toFixed(p)) || (t.tickDecimals = p)
                                }
                            }
                        }
                    }

                    function O(t) {
                        var n = t.options.ticks,
                            r = [];
                        n == null || typeof n == "number" && n > 0 ? r = t.tickGenerator(t) : n && (e.isFunction(n) ? r = n(t) : r = n);
                        var i, s;
                        t.ticks = [];
                        for (i = 0; i < r.length; ++i) {
                            var o = null,
                                u = r[i];
                            typeof u == "object" ? (s = +u[0], u.length > 1 && (o = u[1])) : s = +u, o == null && (o = t.tickFormatter(s, t)), isNaN(s) || t.ticks.push({
                                v: s,
                                label: o
                            })
                        }
                    }

                    function M(e, t) {
                        e.options.autoscaleMargin && t.length > 0 && (e.options.min == null && (e.min = Math.min(e.min, t[0].v)), e.options.max == null && t.length > 1 && (e.max = Math.max(e.max, t[t.length - 1].v)))
                    }

                    function _() {
                        st.clear(), u(vt.drawBackground, [at]);
                        var e = it.grid;
                        e.show && e.backgroundColor && P(), e.show && !e.aboveData && H();
                        for (var t = 0; t < rt.length; ++t) u(vt.drawSeries, [at, rt[t]]), j(rt[t]);
                        u(vt.draw, [at]), e.show && e.aboveData && H(), st.render(), K()
                    }

                    function D(e, t) {
                        var n, r, i, s, o = p();
                        for (var u = 0; u < o.length; ++u) {
                            n = o[u];
                            if (n.direction == t) {
                                s = t + n.n + "axis", !e[s] && n.n == 1 && (s = t + "axis");
                                if (e[s]) {
                                    r = e[s].from, i = e[s].to;
                                    break
                                }
                            }
                        }
                        e[s] || (n = t == "x" ? lt[0] : ct[0], r = e[t + "1"], i = e[t + "2"]);
                        if (r != null && i != null && r > i) {
                            var a = r;
                            r = i, i = a
                        }
                        return {
                            from: r,
                            to: i,
                            axis: n
                        }
                    }

                    function P() {
                        at.save(), at.translate(ht.left, ht.top), at.fillStyle = nt(it.grid.backgroundColor, dt, 0, "rgba(255, 255, 255, 0)"), at.fillRect(0, 0, pt, dt), at.restore()
                    }

                    function H() {
                        var t, n, r, i;
                        at.save(), at.translate(ht.left, ht.top);
                        var s = it.grid.markings;
                        if (s) {
                            e.isFunction(s) && (n = mt.getAxes(), n.xmin = n.xaxis.min, n.xmax = n.xaxis.max, n.ymin = n.yaxis.min, n.ymax = n.yaxis.max, s = s(n));
                            for (t = 0; t < s.length; ++t) {
                                var o = s[t],
                                    u = D(o, "x"),
                                    a = D(o, "y");
                                u.from == null && (u.from = u.axis.min), u.to == null && (u.to = u.axis.max), a.from == null && (a.from = a.axis.min), a.to == null && (a.to = a.axis.max);
                                if (u.to < u.axis.min || u.from > u.axis.max || a.to < a.axis.min || a.from > a.axis.max) continue;
                                u.from = Math.max(u.from, u.axis.min), u.to = Math.min(u.to, u.axis.max), a.from = Math.max(a.from, a.axis.min), a.to = Math.min(a.to, a.axis.max);
                                if (u.from == u.to && a.from == a.to) continue;
                                u.from = u.axis.p2c(u.from), u.to = u.axis.p2c(u.to), a.from = a.axis.p2c(a.from), a.to = a.axis.p2c(a.to), u.from == u.to || a.from == a.to ? (at.beginPath(), at.strokeStyle = o.color || it.grid.markingsColor, at.lineWidth = o.lineWidth || it.grid.markingsLineWidth, at.moveTo(u.from, a.from), at.lineTo(u.to, a.to), at.stroke()) : (at.fillStyle = o.color || it.grid.markingsColor, at.fillRect(u.from, a.to, u.to - u.from, a.from - a.to))
                            }
                        }
                        n = p(), r = it.grid.borderWidth;
                        for (var f = 0; f < n.length; ++f) {
                            var l = n[f],
                                c = l.box,
                                h = l.tickLength,
                                d, v, m, g;
                            if (!l.show || l.ticks.length == 0) continue;
                            at.lineWidth = 1, l.direction == "x" ? (d = 0, h == "full" ? v = l.position == "top" ? 0 : dt : v = c.top - ht.top + (l.position == "top" ? c.height : 0)) : (v = 0, h == "full" ? d = l.position == "left" ? 0 : pt : d = c.left - ht.left + (l.position == "left" ? c.width : 0)), l.innermost || (at.strokeStyle = l.options.color, at.beginPath(), m = g = 0, l.direction == "x" ? m = pt + 1 : g = dt + 1, at.lineWidth == 1 && (l.direction == "x" ? v = Math.floor(v) + .5 : d = Math.floor(d) + .5), at.moveTo(d, v), at.lineTo(d + m, v + g), at.stroke()), at.strokeStyle = l.options.tickColor, at.beginPath();
                            for (t = 0; t < l.ticks.length; ++t) {
                                var y = l.ticks[t].v;
                                m = g = 0;
                                if (isNaN(y) || y < l.min || y > l.max || h == "full" && (typeof r == "object" && r[l.position] > 0 || r > 0) && (y == l.min || y == l.max)) continue;
                                l.direction == "x" ? (d = l.p2c(y), g = h == "full" ? -dt : h, l.position == "top" && (g = -g)) : (v = l.p2c(y), m = h == "full" ? -pt : h, l.position == "left" && (m = -m)), at.lineWidth == 1 && (l.direction == "x" ? d = Math.floor(d) + .5 : v = Math.floor(v) + .5), at.moveTo(d, v), at.lineTo(d + m, v + g)
                            }
                            at.stroke()
                        }
                        r && (i = it.grid.borderColor, typeof r == "object" || typeof i == "object" ? (typeof r != "object" && (r = {
                            top: r,
                            right: r,
                            bottom: r,
                            left: r
                        }), typeof i != "object" && (i = {
                            top: i,
                            right: i,
                            bottom: i,
                            left: i
                        }), r.top > 0 && (at.strokeStyle = i.top, at.lineWidth = r.top, at.beginPath(), at.moveTo(0 - r.left, 0 - r.top / 2), at.lineTo(pt, 0 - r.top / 2), at.stroke()), r.right > 0 && (at.strokeStyle = i.right, at.lineWidth = r.right, at.beginPath(), at.moveTo(pt + r.right / 2, 0 - r.top), at.lineTo(pt + r.right / 2, dt), at.stroke()), r.bottom > 0 && (at.strokeStyle = i.bottom, at.lineWidth = r.bottom, at.beginPath(), at.moveTo(pt + r.right, dt + r.bottom / 2), at.lineTo(0, dt + r.bottom / 2), at.stroke()), r.left > 0 && (at.strokeStyle = i.left, at.lineWidth = r.left, at.beginPath(), at.moveTo(0 - r.left / 2, dt + r.bottom), at.lineTo(0 - r.left / 2, 0), at.stroke())) : (at.lineWidth = r, at.strokeStyle = it.grid.borderColor, at.strokeRect(-r / 2, -r / 2, pt + r, dt + r))), at.restore()
                    }

                    function B() {
                        e.each(p(), function(e, t) {
                            if (!t.show || t.ticks.length == 0) return;
                            var n = t.box,
                                r = t.direction + "Axis " + t.direction + t.n + "Axis",
                                i = "flot-" + t.direction + "-axis flot-" + t.direction + t.n + "-axis " + r,
                                s = t.options.font || "flot-tick-label tickLabel",
                                o, u, a, f, l;
                            st.removeText(i);
                            for (var c = 0; c < t.ticks.length; ++c) {
                                o = t.ticks[c];
                                if (!o.label || o.v < t.min || o.v > t.max) continue;
                                t.direction == "x" ? (f = "center", u = ht.left + t.p2c(o.v), t.position == "bottom" ? a = n.top + n.padding : (a = n.top + n.height - n.padding, l = "bottom")) : (l = "middle", a = ht.top + t.p2c(o.v), t.position == "left" ? (u = n.left + n.width - n.padding, f = "right") : u = n.left + n.padding), st.addText(i, u, a, o.label, s, null, null, f, l)
                            }
                        })
                    }

                    function j(e) {
                        e.lines.show && F(e), e.bars.show && R(e), e.points.show && I(e)
                    }

                    function F(e) {
                        function t(e, t, n, r, i) {
                            var s = e.points,
                                o = e.pointsize,
                                u = null,
                                a = null;
                            at.beginPath();
                            for (var f = o; f < s.length; f += o) {
                                var l = s[f - o],
                                    c = s[f - o + 1],
                                    h = s[f],
                                    p = s[f + 1];
                                if (l == null || h == null) continue;
                                if (c <= p && c < i.min) {
                                    if (p < i.min) continue;
                                    l = (i.min - c) / (p - c) * (h - l) + l, c = i.min
                                } else if (p <= c && p < i.min) {
                                    if (c < i.min) continue;
                                    h = (i.min - c) / (p - c) * (h - l) + l, p = i.min
                                }
                                if (c >= p && c > i.max) {
                                    if (p > i.max) continue;
                                    l = (i.max - c) / (p - c) * (h - l) + l, c = i.max
                                } else if (p >= c && p > i.max) {
                                    if (c > i.max) continue;
                                    h = (i.max - c) / (p - c) * (h - l) + l, p = i.max
                                }
                                if (l <= h && l < r.min) {
                                    if (h < r.min) continue;
                                    c = (r.min - l) / (h - l) * (p - c) + c, l = r.min
                                } else if (h <= l && h < r.min) {
                                    if (l < r.min) continue;
                                    p = (r.min - l) / (h - l) * (p - c) + c, h = r.min
                                }
                                if (l >= h && l > r.max) {
                                    if (h > r.max) continue;
                                    c = (r.max - l) / (h - l) * (p - c) + c, l = r.max
                                } else if (h >= l && h > r.max) {
                                    if (l > r.max) continue;
                                    p = (r.max - l) / (h - l) * (p - c) + c, h = r.max
                                }(l != u || c != a) && at.moveTo(r.p2c(l) + t, i.p2c(c) + n), u = h, a = p, at.lineTo(r.p2c(h) + t, i.p2c(p) + n)
                            }
                            at.stroke()
                        }

                        function n(e, t, n) {
                            var r = e.points,
                                i = e.pointsize,
                                s = Math.min(Math.max(0, n.min), n.max),
                                o = 0,
                                u, a = !1,
                                f = 1,
                                l = 0,
                                c = 0;
                            for (;;) {
                                if (i > 0 && o > r.length + i) break;
                                o += i;
                                var h = r[o - i],
                                    p = r[o - i + f],
                                    d = r[o],
                                    v = r[o + f];
                                if (a) {
                                    if (i > 0 && h != null && d == null) {
                                        c = o, i = -i, f = 2;
                                        continue
                                    }
                                    if (i < 0 && o == l + i) {
                                        at.fill(), a = !1, i = -i, f = 1, o = l = c + i;
                                        continue
                                    }
                                }
                                if (h == null || d == null) continue;
                                if (h <= d && h < t.min) {
                                    if (d < t.min) continue;
                                    p = (t.min - h) / (d - h) * (v - p) + p, h = t.min
                                } else if (d <= h && d < t.min) {
                                    if (h < t.min) continue;
                                    v = (t.min - h) / (d - h) * (v - p) + p, d = t.min
                                }
                                if (h >= d && h > t.max) {
                                    if (d > t.max) continue;
                                    p = (t.max - h) / (d - h) * (v - p) + p, h = t.max
                                } else if (d >= h && d > t.max) {
                                    if (h > t.max) continue;
                                    v = (t.max - h) / (d - h) * (v - p) + p, d = t.max
                                }
                                a || (at.beginPath(), at.moveTo(t.p2c(h), n.p2c(s)), a = !0);
                                if (p >= n.max && v >= n.max) {
                                    at.lineTo(t.p2c(h), n.p2c(n.max)), at.lineTo(t.p2c(d), n.p2c(n.max));
                                    continue
                                }
                                if (p <= n.min && v <= n.min) {
                                    at.lineTo(t.p2c(h), n.p2c(n.min)), at.lineTo(t.p2c(d), n.p2c(n.min));
                                    continue
                                }
                                var m = h,
                                    g = d;
                                p <= v && p < n.min && v >= n.min ? (h = (n.min - p) / (v - p) * (d - h) + h, p = n.min) : v <= p && v < n.min && p >= n.min && (d = (n.min - p) / (v - p) * (d - h) + h, v = n.min), p >= v && p > n.max && v <= n.max ? (h = (n.max - p) / (v - p) * (d - h) + h, p = n.max) : v >= p && v > n.max && p <= n.max && (d = (n.max - p) / (v - p) * (d - h) + h, v = n.max), h != m && at.lineTo(t.p2c(m), n.p2c(p)), at.lineTo(t.p2c(h), n.p2c(p)), at.lineTo(t.p2c(d), n.p2c(v)), d != g && (at.lineTo(t.p2c(d), n.p2c(v)), at.lineTo(t.p2c(g), n.p2c(v)))
                            }
                        }
                        at.save(), at.translate(ht.left, ht.top), at.lineJoin = "round";
                        var r = e.lines.lineWidth,
                            i = e.shadowSize;
                        if (r > 0 && i > 0) {
                            at.lineWidth = i, at.strokeStyle = "rgba(0,0,0,0.1)";
                            var s = Math.PI / 18;
                            t(e.datapoints, Math.sin(s) * (r / 2 + i / 2), Math.cos(s) * (r / 2 + i / 2), e.xaxis, e.yaxis), at.lineWidth = i / 2, t(e.datapoints, Math.sin(s) * (r / 2 + i / 4), Math.cos(s) * (r / 2 + i / 4), e.xaxis, e.yaxis)
                        }
                        at.lineWidth = r, at.strokeStyle = e.color;
                        var o = U(e.lines, e.color, 0, dt);
                        o && (at.fillStyle = o, n(e.datapoints, e.xaxis, e.yaxis)), r > 0 && t(e.datapoints, 0, 0, e.xaxis, e.yaxis), at.restore()
                    }

                    function I(e) {
                        function t(e, t, n, r, i, s, o, u) {
                            var a = e.points,
                                f = e.pointsize;
                            for (var l = 0; l < a.length; l += f) {
                                var c = a[l],
                                    h = a[l + 1];
                                if (c == null || c < s.min || c > s.max || h < o.min || h > o.max) continue;
                                at.beginPath(), c = s.p2c(c), h = o.p2c(h) + r, u == "circle" ? at.arc(c, h, t, 0, i ? Math.PI : Math.PI * 2, !1) : u(at, c, h, t, i), at.closePath(), n && (at.fillStyle = n, at.fill()), at.stroke()
                            }
                        }
                        at.save(), at.translate(ht.left, ht.top);
                        var n = e.points.lineWidth,
                            r = e.shadowSize,
                            i = e.points.radius,
                            s = e.points.symbol;
                        n == 0 && (n = 1e-4);
                        if (n > 0 && r > 0) {
                            var o = r / 2;
                            at.lineWidth = o, at.strokeStyle = "rgba(0,0,0,0.1)", t(e.datapoints, i, null, o + o / 2, !0, e.xaxis, e.yaxis, s), at.strokeStyle = "rgba(0,0,0,0.2)", t(e.datapoints, i, null, o / 2, !0, e.xaxis, e.yaxis, s)
                        }
                        at.lineWidth = n, at.strokeStyle = e.color, t(e.datapoints, i, U(e.points, e.color), 0, !1, e.xaxis, e.yaxis, s), at.restore()
                    }

                    function q(e, t, n, r, i, s, o, u, a, f, l, c) {
                        var h, p, d, v, m, g, y, b, w;
                        l ? (b = g = y = !0, m = !1, h = n, p = e, v = t + r, d = t + i, p < h && (w = p, p = h, h = w, m = !0, g = !1)) : (m = g = y = !0, b = !1, h = e + r, p = e + i, d = n, v = t, v < d && (w = v, v = d, d = w, b = !0, y = !1));
                        if (p < u.min || h > u.max || v < a.min || d > a.max) return;
                        h < u.min && (h = u.min, m = !1), p > u.max && (p = u.max, g = !1), d < a.min && (d = a.min, b = !1), v > a.max && (v = a.max, y = !1), h = u.p2c(h), d = a.p2c(d), p = u.p2c(p), v = a.p2c(v), o && (f.beginPath(), f.moveTo(h, d), f.lineTo(h, v), f.lineTo(p, v), f.lineTo(p, d), f.fillStyle = o(d, v), f.fill()), c > 0 && (m || g || y || b) && (f.beginPath(), f.moveTo(h, d + s), m ? f.lineTo(h, v + s) : f.moveTo(h, v + s), y ? f.lineTo(p, v + s) : f.moveTo(p, v + s), g ? f.lineTo(p, d + s) : f.moveTo(p, d + s), b ? f.lineTo(h, d + s) : f.moveTo(h, d + s), f.stroke())
                    }

                    function R(e) {
                        function t(t, n, r, i, s, o, u) {
                            var a = t.points,
                                f = t.pointsize;
                            for (var l = 0; l < a.length; l += f) {
                                if (a[l] == null) continue;
                                q(a[l], a[l + 1], a[l + 2], n, r, i, s, o, u, at, e.bars.horizontal, e.bars.lineWidth)
                            }
                        }
                        at.save(), at.translate(ht.left, ht.top), at.lineWidth = e.bars.lineWidth, at.strokeStyle = e.color;
                        var n;
                        switch (e.bars.align) {
                            case "left":
                                n = 0;
                                break;
                            case "right":
                                n = -e.bars.barWidth;
                                break;
                            case "center":
                                n = -e.bars.barWidth / 2;
                                break;
                            default:
                                throw new Error("Invalid bar alignment: " + e.bars.align)
                        }
                        var r = e.bars.fill ? function(t, n) {
                            return U(e.bars, e.color, t, n)
                        } : null;
                        t(e.datapoints, n, n + e.bars.barWidth, 0, r, e.xaxis, e.yaxis), at.restore()
                    }

                    function U(t, n, r, i) {
                        var s = t.fill;
                        if (!s) return null;
                        if (t.fillColor) return nt(t.fillColor, r, i, n);
                        var o = e.color.parse(n);
                        return o.a = typeof s == "number" ? s : .4, o.normalize(), o.toString()
                    }

                    function z() {
                        n.find(".legend").remove();
                        if (!it.legend.show) return;
                        var t = [],
                            r = [],
                            i = !1,
                            s = it.legend.labelFormatter,
                            o, u;
                        for (var a = 0; a < rt.length; ++a) o = rt[a], o.label && (u = s ? s(o.label, o) : o.label, u && r.push({
                            label: u,
                            color: o.color
                        }));
                        if (it.legend.sorted)
                            if (e.isFunction(it.legend.sorted)) r.sort(it.legend.sorted);
                            else if (it.legend.sorted == "reverse") r.reverse();
                        else {
                            var f = it.legend.sorted != "descending";
                            r.sort(function(e, t) {
                                return e.label == t.label ? 0 : e.label < t.label != f ? 1 : -1
                            })
                        }
                        for (var a = 0; a < r.length; ++a) {
                            var l = r[a];
                            a % it.legend.noColumns == 0 && (i && t.push("</tr>"), t.push("<tr>"), i = !0), t.push('<td class="legendColorBox"><div style="border:1px solid ' + it.legend.labelBoxBorderColor + ';padding:1px"><div style="width:4px;height:0;border:5px solid ' + l.color + ';overflow:hidden"></div></div></td>' + '<td class="legendLabel">' + l.label + "</td>")
                        }
                        i && t.push("</tr>");
                        if (t.length == 0) return;
                        var c = '<table style="font-size:smaller;color:' + it.grid.color + '">' + t.join("") + "</table>";
                        if (it.legend.container != null) e(it.legend.container).html(c);
                        else {
                            var h = "",
                                p = it.legend.position,
                                d = it.legend.margin;
                            d[0] == null && (d = [d, d]), p.charAt(0) == "n" ? h += "top:" + (d[1] + ht.top) + "px;" : p.charAt(0) == "s" && (h += "bottom:" + (d[1] + ht.bottom) + "px;"), p.charAt(1) == "e" ? h += "right:" + (d[0] + ht.right) + "px;" : p.charAt(1) == "w" && (h += "left:" + (d[0] + ht.left) + "px;");
                            var v = e('<div class="legend">' + c.replace('style="', 'style="position:absolute;' + h + ";") + "</div>").appendTo(n);
                            if (it.legend.backgroundOpacity != 0) {
                                var m = it.legend.backgroundColor;
                                m == null && (m = it.grid.backgroundColor, m && typeof m == "string" ? m = e.color.parse(m) : m = e.color.extract(v, "background-color"), m.a = 1, m = m.toString());
                                var g = v.children();
                                e('<div style="position:absolute;width:' + g.width() + "px;height:" + g.height() + "px;" + h + "background-color:" + m + ';"> </div>').prependTo(v).css("opacity", it.legend.backgroundOpacity)
                            }
                        }
                    }

                    function W(e, t, n) {
                        var r = it.grid.mouseActiveRadius,
                            i = r * r + 1,
                            s = null,
                            o = !1,
                            u, a, f;
                        for (u = rt.length - 1; u >= 0; --u) {
                            if (!n(rt[u])) continue;
                            var l = rt[u],
                                c = l.xaxis,
                                h = l.yaxis,
                                p = l.datapoints.points,
                                d = c.c2p(e),
                                v = h.c2p(t),
                                m = r / c.scale,
                                g = r / h.scale;
                            f = l.datapoints.pointsize, c.options.inverseTransform && (m = Number.MAX_VALUE), h.options.inverseTransform && (g = Number.MAX_VALUE);
                            if (l.lines.show || l.points.show)
                                for (a = 0; a < p.length; a += f) {
                                    var y = p[a],
                                        b = p[a + 1];
                                    if (y == null) continue;
                                    if (y - d > m || y - d < -m || b - v > g || b - v < -g) continue;
                                    var w = Math.abs(c.p2c(y) - e),
                                        E = Math.abs(h.p2c(b) - t),
                                        S = w * w + E * E;
                                    S < i && (i = S, s = [u, a / f])
                                }
                            if (l.bars.show && !s) {
                                var x = l.bars.align == "left" ? 0 : -l.bars.barWidth / 2,
                                    T = x + l.bars.barWidth;
                                for (a = 0; a < p.length; a += f) {
                                    var y = p[a],
                                        b = p[a + 1],
                                        N = p[a + 2];
                                    if (y == null) continue;
                                    if (rt[u].bars.horizontal ? d <= Math.max(N, y) && d >= Math.min(N, y) && v >= b + x && v <= b + T : d >= y + x && d <= y + T && v >= Math.min(N, b) && v <= Math.max(N, b)) s = [u, a / f]
                                }
                            }
                        }
                        return s ? (u = s[0], a = s[1], f = rt[u].datapoints.pointsize, {
                            datapoint: rt[u].datapoints.points.slice(a * f, (a + 1) * f),
                            dataIndex: a,
                            series: rt[u],
                            seriesIndex: u
                        }) : null
                    }

                    function X(e) {
                        it.grid.hoverable && J("plothover", e, function(e) {
                            return e["hoverable"] != 0
                        })
                    }

                    function V(e) {
                        it.grid.hoverable && J("plothover", e, function(e) {
                            return !1
                        })
                    }

                    function $(e) {
                        J("plotclick", e, function(e) {
                            return e["clickable"] != 0
                        })
                    }

                    function J(e, t, r) {
                        var i = ut.offset(),
                            s = t.pageX - i.left - ht.left,
                            o = t.pageY - i.top - ht.top,
                            u = d({
                                left: s,
                                top: o
                            });
                        u.pageX = t.pageX, u.pageY = t.pageY;
                        var a = W(s, o, r);
                        a && (a.pageX = parseInt(a.series.xaxis.p2c(a.datapoint[0]) + i.left + ht.left, 10), a.pageY = parseInt(a.series.yaxis.p2c(a.datapoint[1]) + i.top + ht.top, 10));
                        if (it.grid.autoHighlight) {
                            for (var f = 0; f < gt.length; ++f) {
                                var l = gt[f];
                                l.auto == e && (!a || l.series != a.series || l.point[0] != a.datapoint[0] || l.point[1] != a.datapoint[1]) && Y(l.series, l.point)
                            }
                            a && G(a.series, a.datapoint, e)
                        }
                        n.trigger(e, [u, a])
                    }

                    function K() {
                        var e = it.interaction.redrawOverlayInterval;
                        if (e == -1) {
                            Q();
                            return
                        }
                        yt || (yt = setTimeout(Q, e))
                    }

                    function Q() {
                        yt = null, ft.save(), ot.clear(), ft.translate(ht.left, ht.top);
                        var e, t;
                        for (e = 0; e < gt.length; ++e) t = gt[e], t.series.bars.show ? tt(t.series, t.point) : et(t.series, t.point);
                        ft.restore(), u(vt.drawOverlay, [ft])
                    }

                    function G(e, t, n) {
                        typeof e == "number" && (e = rt[e]);
                        if (typeof t == "number") {
                            var r = e.datapoints.pointsize;
                            t = e.datapoints.points.slice(r * t, r * (t + 1))
                        }
                        var i = Z(e, t);
                        i == -1 ? (gt.push({
                            series: e,
                            point: t,
                            auto: n
                        }), K()) : n || (gt[i].auto = !1)
                    }

                    function Y(e, t) {
                        if (e == null && t == null) {
                            gt = [], K();
                            return
                        }
                        typeof e == "number" && (e = rt[e]);
                        if (typeof t == "number") {
                            var n = e.datapoints.pointsize;
                            t = e.datapoints.points.slice(n * t, n * (t + 1))
                        }
                        var r = Z(e, t);
                        r != -1 && (gt.splice(r, 1), K())
                    }

                    function Z(e, t) {
                        for (var n = 0; n < gt.length; ++n) {
                            var r = gt[n];
                            if (r.series == e && r.point[0] == t[0] && r.point[1] == t[1]) return n
                        }
                        return -1
                    }

                    function et(t, n) {
                        var r = n[0],
                            i = n[1],
                            s = t.xaxis,
                            o = t.yaxis,
                            u = typeof t.highlightColor == "string" ? t.highlightColor : e.color.parse(t.color).scale("a", .5).toString();
                        if (r < s.min || r > s.max || i < o.min || i > o.max) return;
                        var a = t.points.radius + t.points.lineWidth / 2;
                        ft.lineWidth = a, ft.strokeStyle = u;
                        var f = 1.5 * a;
                        r = s.p2c(r), i = o.p2c(i), ft.beginPath(), t.points.symbol == "circle" ? ft.arc(r, i, f, 0, 2 * Math.PI, !1) : t.points.symbol(ft, r, i, f, !1), ft.closePath(), ft.stroke()
                    }

                    function tt(t, n) {
                        var r = typeof t.highlightColor == "string" ? t.highlightColor : e.color.parse(t.color).scale("a", .5).toString(),
                            i = r,
                            s = t.bars.align == "left" ? 0 : -t.bars.barWidth / 2;
                        ft.lineWidth = t.bars.lineWidth, ft.strokeStyle = r, q(n[0], n[1], n[2] || 0, s, s + t.bars.barWidth, 0, function() {
                            return i
                        }, t.xaxis, t.yaxis, ft, t.bars.horizontal, t.bars.lineWidth)
                    }

                    function nt(t, n, r, i) {
                        if (typeof t == "string") return t;
                        var s = at.createLinearGradient(0, r, 0, n);
                        for (var o = 0, u = t.colors.length; o < u; ++o) {
                            var a = t.colors[o];
                            if (typeof a != "string") {
                                var f = e.color.parse(i);
                                a.brightness != null && (f = f.scale("rgb", a.brightness)), a.opacity != null && (f.a *= a.opacity), a = f.toString()
                            }
                            s.addColorStop(o / (u - 1), a)
                        }
                        return s
                    }
                    var rt = [],
                        it = {
                            colors: ["#edc240", "#afd8f8", "#cb4b4b", "#4da74d", "#9440ed"],
                            legend: {
                                show: !0,
                                noColumns: 1,
                                labelFormatter: null,
                                labelBoxBorderColor: "#ccc",
                                container: null,
                                position: "ne",
                                margin: 5,
                                backgroundColor: null,
                                backgroundOpacity: .85,
                                sorted: null
                            },
                            xaxis: {
                                show: null,
                                position: "bottom",
                                mode: null,
                                font: null,
                                color: null,
                                tickColor: null,
                                transform: null,
                                inverseTransform: null,
                                min: null,
                                max: null,
                                autoscaleMargin: null,
                                ticks: null,
                                tickFormatter: null,
                                labelWidth: null,
                                labelHeight: null,
                                reserveSpace: null,
                                tickLength: null,
                                alignTicksWithAxis: null,
                                tickDecimals: null,
                                tickSize: null,
                                minTickSize: null
                            },
                            yaxis: {
                                autoscaleMargin: .02,
                                position: "left"
                            },
                            xaxes: [],
                            yaxes: [],
                            series: {
                                points: {
                                    show: !1,
                                    radius: 3,
                                    lineWidth: 2,
                                    fill: !0,
                                    fillColor: "#ffffff",
                                    symbol: "circle"
                                },
                                lines: {
                                    lineWidth: 2,
                                    fill: !1,
                                    fillColor: null,
                                    steps: !1
                                },
                                bars: {
                                    show: !1,
                                    lineWidth: 2,
                                    barWidth: 1,
                                    fill: !0,
                                    fillColor: null,
                                    align: "left",
                                    horizontal: !1,
                                    zero: !0
                                },
                                shadowSize: 3,
                                highlightColor: null
                            },
                            grid: {
                                show: !0,
                                aboveData: !1,
                                color: "#545454",
                                backgroundColor: null,
                                borderColor: null,
                                tickColor: null,
                                margin: 0,
                                labelMargin: 5,
                                axisMargin: 8,
                                borderWidth: 2,
                                minBorderMargin: null,
                                markings: null,
                                markingsColor: "#f4f4f4",
                                markingsLineWidth: 2,
                                clickable: !1,
                                hoverable: !1,
                                autoHighlight: !0,
                                mouseActiveRadius: 10
                            },
                            interaction: {
                                redrawOverlayInterval: 1e3 / 60
                            },
                            hooks: {}
                        },
                        st = null,
                        ot = null,
                        ut = null,
                        at = null,
                        ft = null,
                        lt = [],
                        ct = [],
                        ht = {
                            left: 0,
                            right: 0,
                            top: 0,
                            bottom: 0
                        },
                        pt = 0,
                        dt = 0,
                        vt = {
                            processOptions: [],
                            processRawData: [],
                            processDatapoints: [],
                            processOffset: [],
                            drawBackground: [],
                            drawSeries: [],
                            draw: [],
                            bindEvents: [],
                            drawOverlay: [],
                            shutdown: []
                        },
                        mt = this;
                    mt.setData = l, mt.setupGrid = k, mt.draw = _, mt.getPlaceholder = function() {
                        return n
                    }, mt.getCanvas = function() {
                        return st.element
                    }, mt.getPlotOffset = function() {
                        return ht
                    }, mt.width = function() {
                        return pt
                    }, mt.height = function() {
                        return dt
                    }, mt.offset = function() {
                        var e = ut.offset();
                        return e.left += ht.left, e.top += ht.top, e
                    }, mt.getData = function() {
                        return rt
                    }, mt.getAxes = function() {
                        var t = {},
                            n;
                        return e.each(lt.concat(ct), function(e, n) {
                            n && (t[n.direction + (n.n != 1 ? n.n : "") + "axis"] = n)
                        }), t
                    }, mt.getXAxes = function() {
                        return lt
                    }, mt.getYAxes = function() {
                        return ct
                    }, mt.c2p = d, mt.p2c = v, mt.getOptions = function() {
                        return it
                    }, mt.highlight = G, mt.unhighlight = Y, mt.triggerRedrawOverlay = K, mt.pointOffset = function(e) {
                        return {
                            left: parseInt(lt[h(e, "x") - 1].p2c(+e.x) + ht.left, 10),
                            top: parseInt(ct[h(e, "y") - 1].p2c(+e.y) + ht.top, 10)
                        }
                    }, mt.shutdown = E, mt.resize = function() {
                        var e = n.width(),
                            t = n.height();
                        st.resize(e, t), ot.resize(e, t)
                    }, mt.hooks = vt, a(mt), f(s), b(), l(i), k(), _(), w();
                    var gt = [],
                        yt = null
                }

                function r(e, t) {
                    return t * Math.floor(e / t)
                }
                var i = Object.prototype.hasOwnProperty;
                t.prototype.resize = function(e, t) {
                    if (e <= 0 || t <= 0) throw new Error("Invalid dimensions for plot, width = " + e + ", height = " + t);
                    var n = this.element,
                        r = this.context,
                        i = this.pixelRatio;
                    this.width != e && (n.width = e * i, n.style.width = e + "px", this.width = e), this.height != t && (n.height = t * i, n.style.height = t + "px", this.height = t), r.restore(), r.save(), r.scale(i, i)
                }, t.prototype.clear = function() {
                    this.context.clearRect(0, 0, this.width, this.height)
                }, t.prototype.render = function() {
                    var e = this._textCache;
                    for (var t in e)
                        if (i.call(e, t)) {
                            var n = this.getTextLayer(t),
                                r = e[t];
                            n.hide();
                            for (var s in r)
                                if (i.call(r, s)) {
                                    var o = r[s];
                                    for (var u in o)
                                        if (i.call(o, u)) {
                                            var a = o[u].positions;
                                            for (var f = 0, l; l = a[f]; f++) l.active ? l.rendered || (n.append(l.element), l.rendered = !0) : (a.splice(f--, 1), l.rendered && l.element.detach());
                                            a.length == 0 && delete o[u]
                                        }
                                }
                            n.show()
                        }
                }, t.prototype.getTextLayer = function(t) {
                    var n = this.text[t];
                    return n == null && (this.textContainer == null && (this.textContainer = e("<div class='flot-text'></div>").css({
                        position: "absolute",
                        top: 0,
                        left: 0,
                        bottom: 0,
                        right: 0,
                        "font-size": "smaller",
                        color: "#545454"
                    }).insertAfter(this.element)), n = this.text[t] = e("<div></div>").addClass(t).css({
                        position: "absolute",
                        top: 0,
                        left: 0,
                        bottom: 0,
                        right: 0
                    }).appendTo(this.textContainer)), n
                }, t.prototype.getTextInfo = function(t, n, r, i, s) {
                    var o, u, a, f;
                    n = "" + n, typeof r == "object" ? o = r.style + " " + r.variant + " " + r.weight + " " + r.size + "px/" + r.lineHeight + "px " + r.family : o = r, u = this._textCache[t], u == null && (u = this._textCache[t] = {}), a = u[o], a == null && (a = u[o] = {}), f = a[n];
                    if (f == null) {
                        var l = e("<div></div>").html(n).css({
                            position: "absolute",
                            "max-width": s,
                            top: -9999
                        }).appendTo(this.getTextLayer(t));
                        typeof r == "object" ? l.css({
                            font: o,
                            color: r.color
                        }) : typeof r == "string" && l.addClass(r), f = a[n] = {
                            width: l.outerWidth(!0),
                            height: l.outerHeight(!0),
                            element: l,
                            positions: []
                        }, l.detach()
                    }
                    return f
                }, t.prototype.addText = function(e, t, n, r, i, s, o, u, a) {
                    var f = this.getTextInfo(e, r, i, s, o),
                        l = f.positions;
                    u == "center" ? t -= f.width / 2 : u == "right" && (t -= f.width), a == "middle" ? n -= f.height / 2 : a == "bottom" && (n -= f.height);
                    for (var c = 0, h; h = l[c]; c++)
                        if (h.x == t && h.y == n) {
                            h.active = !0;
                            return
                        }
                    h = {
                        active: !0,
                        rendered: !1,
                        element: l.length ? f.element.clone() : f.element,
                        x: t,
                        y: n
                    }, l.push(h), h.element.css({
                        top: Math.round(n),
                        left: Math.round(t),
                        "text-align": u
                    })
                }, t.prototype.removeText = function(e, t, n, r, s, o) {
                    if (r == null) {
                        var u = this._textCache[e];
                        if (u != null)
                            for (var a in u)
                                if (i.call(u, a)) {
                                    var f = u[a];
                                    for (var l in f)
                                        if (i.call(f, l)) {
                                            var c = f[l].positions;
                                            for (var h = 0, p; p = c[h]; h++) p.active = !1
                                        }
                                }
                    } else {
                        var c = this.getTextInfo(e, r, s, o).positions;
                        for (var h = 0, p; p = c[h]; h++) p.x == t && p.y == n && (p.active = !1)
                    }
                }, e.plot = function(t, r, i) {
                    var s = new n(e(t), r, i, e.plot.plugins);
                    return s
                }, e.plot.version = "0.8.1", e.plot.plugins = [], e.fn.plot = function(t, n) {
                    return this.each(function() {
                        e.plot(this, t, n)
                    })
                }
            }(jQuery);
            (function(e) {
                function t(t) {
                    function s(t, n, r) {
                        x || (x = !0, y = t.getCanvas(), b = e(y).parent(), i = t.getOptions(), t.setData(o(t.getData())))
                    }

                    function o(t) {
                        var n = 0,
                            r = 0,
                            s = 0,
                            o = i.series.pie.combine.color,
                            u = [];
                        for (var a = 0; a < t.length; ++a) {
                            var f = t[a].data;
                            e.isArray(f) && f.length == 1 && (f = f[0]), e.isArray(f) ? !isNaN(parseFloat(f[1])) && isFinite(f[1]) ? f[1] = +f[1] : f[1] = 0 : !isNaN(parseFloat(f)) && isFinite(f) ? f = [1, +f] : f = [1, 0], t[a].data = [f]
                        }
                        for (var a = 0; a < t.length; ++a) n += t[a].data[0][1];
                        for (var a = 0; a < t.length; ++a) {
                            var f = t[a].data[0][1];
                            f / n <= i.series.pie.combine.threshold && (r += f, s++, o || (o = t[a].color))
                        }
                        for (var a = 0; a < t.length; ++a) {
                            var f = t[a].data[0][1];
                            (s < 2 || f / n > i.series.pie.combine.threshold) && u.push({
                                data: [
                                    [1, f]
                                ],
                                color: t[a].color,
                                label: t[a].label,
                                angle: f * Math.PI * 2 / n,
                                percent: f / (n / 100)
                            })
                        }
                        return s > 1 && u.push({
                            data: [
                                [1, r]
                            ],
                            color: o,
                            label: i.series.pie.combine.label,
                            angle: r * Math.PI * 2 / n,
                            percent: r / (n / 100)
                        }), u
                    }

                    function u(t, s) {
                        function o() {
                            T.clearRect(0, 0, l, c), b.children().filter(".pieLabel, .pieLabelBackground").remove()
                        }

                        function u() {
                            var e = i.series.pie.shadow.left,
                                t = i.series.pie.shadow.top,
                                n = 10,
                                r = i.series.pie.shadow.alpha,
                                s = i.series.pie.radius > 1 ? i.series.pie.radius : w * i.series.pie.radius;
                            if (s >= l / 2 - e || s * i.series.pie.tilt >= c / 2 - t || s <= n) return;
                            T.save(), T.translate(e, t), T.globalAlpha = r, T.fillStyle = "#000", T.translate(E, S), T.scale(1, i.series.pie.tilt);
                            for (var o = 1; o <= n; o++) T.beginPath(), T.arc(0, 0, s, 0, Math.PI * 2, !1), T.fill(), s -= o;
                            T.restore()
                        }

                        function f() {
                            function t(e, t, n) {
                                if (e <= 0 || isNaN(e)) return;
                                n ? T.fillStyle = t : (T.strokeStyle = t, T.lineJoin = "round"), T.beginPath(), Math.abs(e - Math.PI * 2) > 1e-9 && T.moveTo(0, 0), T.arc(0, 0, s, o, o + e / 2, !1), T.arc(0, 0, s, o + e / 2, o + e, !1), T.closePath(), o += e, n ? T.fill() : T.stroke()
                            }

                            function n() {
                                function t(t, n, r) {
                                    if (t.data[0][1] == 0) return !0;
                                    var o = i.legend.labelFormatter,
                                        u, a = i.series.pie.label.formatter;
                                    o ? u = o(t.label, t) : u = t.label, a && (u = a(u, t));
                                    var f = (n + t.angle + n) / 2,
                                        h = E + Math.round(Math.cos(f) * s),
                                        p = S + Math.round(Math.sin(f) * s) * i.series.pie.tilt,
                                        d = "<span class='pieLabel' id='pieLabel" + r + "' style='position:absolute;top:" + p + "px;left:" + h + "px;'>" + u + "</span>";
                                    b.append(d);
                                    var v = b.children("#pieLabel" + r),
                                        m = p - v.height() / 2,
                                        g = h - v.width() / 2;
                                    v.css("top", m), v.css("left", g);
                                    if (0 - m > 0 || 0 - g > 0 || c - (m + v.height()) < 0 || l - (g + v.width()) < 0) return !1;
                                    if (i.series.pie.label.background.opacity != 0) {
                                        var y = i.series.pie.label.background.color;
                                        y == null && (y = t.color);
                                        var w = "top:" + m + "px;left:" + g + "px;";
                                        e("<div class='pieLabelBackground' style='position:absolute;width:" + v.width() + "px;height:" + v.height() + "px;" + w + "background-color:" + y + ";'></div>").css("opacity", i.series.pie.label.background.opacity).insertBefore(v)
                                    }
                                    return !0
                                }
                                var n = r,
                                    s = i.series.pie.label.radius > 1 ? i.series.pie.label.radius : w * i.series.pie.label.radius;
                                for (var o = 0; o < p.length; ++o) {
                                    if (p[o].percent >= i.series.pie.label.threshold * 100 && !t(p[o], n, o)) return !1;
                                    n += p[o].angle
                                }
                                return !0
                            }
                            var r = Math.PI * i.series.pie.startAngle,
                                s = i.series.pie.radius > 1 ? i.series.pie.radius : w * i.series.pie.radius;
                            T.save(), T.translate(E, S), T.scale(1, i.series.pie.tilt), T.save();
                            var o = r;
                            for (var u = 0; u < p.length; ++u) p[u].startAngle = o, t(p[u].angle, p[u].color, !0);
                            T.restore();
                            if (i.series.pie.stroke.width > 0) {
                                T.save(), T.lineWidth = i.series.pie.stroke.width, o = r;
                                for (var u = 0; u < p.length; ++u) t(p[u].angle, i.series.pie.stroke.color, !1);
                                T.restore()
                            }
                            return a(T), T.restore(), i.series.pie.label.show ? n() : !0
                        }
                        if (!b) return;
                        var l = t.getPlaceholder().width(),
                            c = t.getPlaceholder().height(),
                            h = b.children().filter(".legend").children().width() || 0;
                        T = s, x = !1, w = Math.min(l, c / i.series.pie.tilt) / 2, S = c / 2 + i.series.pie.offset.top, E = l / 2, i.series.pie.offset.left == "auto" ? i.legend.position.match("w") ? E += h / 2 : E -= h / 2 : E += i.series.pie.offset.left, E < w ? E = w : E > l - w && (E = l - w);
                        var p = t.getData(),
                            d = 0;
                        do d > 0 && (w *= r), d += 1, o(), i.series.pie.tilt <= .8 && u();
                        while (!f() && d < n);
                        d >= n && (o(), b.prepend("<div class='error'>Could not draw pie with labels contained inside canvas</div>")), t.setSeries && t.insertLegend && (t.setSeries(p), t.insertLegend())
                    }

                    function a(e) {
                        if (i.series.pie.innerRadius > 0) {
                            e.save();
                            var t = i.series.pie.innerRadius > 1 ? i.series.pie.innerRadius : w * i.series.pie.innerRadius;
                            e.globalCompositeOperation = "destination-out", e.beginPath(), e.fillStyle = i.series.pie.stroke.color, e.arc(0, 0, t, 0, Math.PI * 2, !1), e.fill(), e.closePath(), e.restore(), e.save(), e.beginPath(), e.strokeStyle = i.series.pie.stroke.color, e.arc(0, 0, t, 0, Math.PI * 2, !1), e.stroke(), e.closePath(), e.restore()
                        }
                    }

                    function f(e, t) {
                        for (var n = !1, r = -1, i = e.length, s = i - 1; ++r < i; s = r)(e[r][1] <= t[1] && t[1] < e[s][1] || e[s][1] <= t[1] && t[1] < e[r][1]) && t[0] < (e[s][0] - e[r][0]) * (t[1] - e[r][1]) / (e[s][1] - e[r][1]) + e[r][0] && (n = !n);
                        return n
                    }

                    function l(e, n) {
                        var r = t.getData(),
                            i = t.getOptions(),
                            s = i.series.pie.radius > 1 ? i.series.pie.radius : w * i.series.pie.radius,
                            o, u;
                        for (var a = 0; a < r.length; ++a) {
                            var l = r[a];
                            if (l.pie.show) {
                                T.save(), T.beginPath(), T.moveTo(0, 0), T.arc(0, 0, s, l.startAngle, l.startAngle + l.angle / 2, !1), T.arc(0, 0, s, l.startAngle + l.angle / 2, l.startAngle + l.angle, !1), T.closePath(), o = e - E, u = n - S;
                                if (T.isPointInPath) {
                                    if (T.isPointInPath(e - E, n - S)) return T.restore(), {
                                        datapoint: [l.percent, l.data],
                                        dataIndex: 0,
                                        series: l,
                                        seriesIndex: a
                                    }
                                } else {
                                    var c = s * Math.cos(l.startAngle),
                                        h = s * Math.sin(l.startAngle),
                                        p = s * Math.cos(l.startAngle + l.angle / 4),
                                        d = s * Math.sin(l.startAngle + l.angle / 4),
                                        v = s * Math.cos(l.startAngle + l.angle / 2),
                                        m = s * Math.sin(l.startAngle + l.angle / 2),
                                        g = s * Math.cos(l.startAngle + l.angle / 1.5),
                                        y = s * Math.sin(l.startAngle + l.angle / 1.5),
                                        b = s * Math.cos(l.startAngle + l.angle),
                                        x = s * Math.sin(l.startAngle + l.angle),
                                        N = [
                                            [0, 0],
                                            [c, h],
                                            [p, d],
                                            [v, m],
                                            [g, y],
                                            [b, x]
                                        ],
                                        C = [o, u];
                                    if (f(N, C)) return T.restore(), {
                                        datapoint: [l.percent, l.data],
                                        dataIndex: 0,
                                        series: l,
                                        seriesIndex: a
                                    }
                                }
                                T.restore()
                            }
                        }
                        return null
                    }

                    function c(e) {
                        p("plothover", e)
                    }

                    function h(e) {
                        p("plotclick", e)
                    }

                    function p(e, n) {
                        var r = t.offset(),
                            s = parseInt(n.pageX - r.left),
                            o = parseInt(n.pageY - r.top),
                            u = l(s, o);
                        if (i.grid.autoHighlight)
                            for (var a = 0; a < N.length; ++a) {
                                var f = N[a];
                                f.auto == e && (!u || f.series != u.series) && v(f.series)
                            }
                        u && d(u.series, e);
                        var c = {
                            pageX: n.pageX,
                            pageY: n.pageY
                        };
                        b.trigger(e, [c, u])
                    }

                    function d(e, n) {
                        var r = m(e);
                        r == -1 ? (N.push({
                            series: e,
                            auto: n
                        }), t.triggerRedrawOverlay()) : n || (N[r].auto = !1)
                    }

                    function v(e) {
                        e == null && (N = [], t.triggerRedrawOverlay());
                        var n = m(e);
                        n != -1 && (N.splice(n, 1), t.triggerRedrawOverlay())
                    }

                    function m(e) {
                        for (var t = 0; t < N.length; ++t) {
                            var n = N[t];
                            if (n.series == e) return t
                        }
                        return -1
                    }

                    function g(e, t) {
                        function n(e) {
                            if (e.angle <= 0 || isNaN(e.angle)) return;
                            t.fillStyle = "rgba(255, 255, 255, " + r.series.pie.highlight.opacity + ")", t.beginPath(), Math.abs(e.angle - Math.PI * 2) > 1e-9 && t.moveTo(0, 0), t.arc(0, 0, i, e.startAngle, e.startAngle + e.angle / 2, !1), t.arc(0, 0, i, e.startAngle + e.angle / 2, e.startAngle + e.angle, !1), t.closePath(), t.fill()
                        }
                        var r = e.getOptions(),
                            i = r.series.pie.radius > 1 ? r.series.pie.radius : w * r.series.pie.radius;
                        t.save(), t.translate(E, S), t.scale(1, r.series.pie.tilt);
                        for (var s = 0; s < N.length; ++s) n(N[s].series);
                        a(t), t.restore()
                    }
                    var y = null,
                        b = null,
                        w = null,
                        E = null,
                        S = null,
                        x = !1,
                        T = null,
                        N = [];
                    t.hooks.processOptions.push(function(e, t) {
                        t.series.pie.show && (t.grid.show = !1, t.series.pie.label.show == "auto" && (t.legend.show ? t.series.pie.label.show = !1 : t.series.pie.label.show = !0), t.series.pie.radius == "auto" && (t.series.pie.label.show ? t.series.pie.radius = .75 : t.series.pie.radius = 1), t.series.pie.tilt > 1 ? t.series.pie.tilt = 1 : t.series.pie.tilt < 0 && (t.series.pie.tilt = 0))
                    }), t.hooks.bindEvents.push(function(e, t) {
                        var n = e.getOptions();
                        n.series.pie.show && (n.grid.hoverable && t.unbind("mousemove").mousemove(c), n.grid.clickable && t.unbind("click").click(h))
                    }), t.hooks.processDatapoints.push(function(e, t, n, r) {
                        var i = e.getOptions();
                        i.series.pie.show && s(e, t, n, r)
                    }), t.hooks.drawOverlay.push(function(e, t) {
                        var n = e.getOptions();
                        n.series.pie.show && g(e, t)
                    }), t.hooks.draw.push(function(e, t) {
                        var n = e.getOptions();
                        n.series.pie.show && u(e, t)
                    })
                }
                var n = 10,
                    r = .95,
                    i = {
                        series: {
                            pie: {
                                show: !1,
                                radius: "auto",
                                innerRadius: 0,
                                startAngle: 1.5,
                                tilt: 1,
                                shadow: {
                                    left: 5,
                                    top: 15,
                                    alpha: .02
                                },
                                offset: {
                                    top: 0,
                                    left: "auto"
                                },
                                stroke: {
                                    color: "#fff",
                                    width: 1
                                },
                                label: {
                                    show: "auto",
                                    formatter: function(e, t) {
                                        return "<div style='font-size:x-small;text-align:center;padding:2px;color:" + t.color + ";'>" + e + "<br/>" + Math.round(t.percent) + "%</div>"
                                    },
                                    radius: 1,
                                    background: {
                                        color: null,
                                        opacity: 0
                                    },
                                    threshold: 0
                                },
                                combine: {
                                    threshold: -1,
                                    color: null,
                                    label: "Other"
                                },
                                highlight: {
                                    opacity: .5
                                }
                            }
                        }
                    };
                e.plot.plugins.push({
                    init: t,
                    options: i,
                    name: "pie",
                    version: "1.1"
                })
            })(jQuery);
            (function(e, t, n) {
                function r() {
                    o = t[u](function() {
                        i.each(function() {
                            var t = e(this),
                                n = t.width(),
                                r = t.height(),
                                i = e.data(this, f);
                            (n !== i.w || r !== i.h) && t.trigger(a, [i.w = n, i.h = r])
                        }), r()
                    }, s[l])
                }
                var i = e([]),
                    s = e.resize = e.extend(e.resize, {}),
                    o, u = "setTimeout",
                    a = "resize",
                    f = a + "-special-event",
                    l = "delay",
                    c = "throttleWindow";
                s[l] = 250, s[c] = !0, e.event.special[a] = {
                    setup: function() {
                        if (!s[c] && this[u]) return !1;
                        var t = e(this);
                        i = i.add(t), e.data(this, f, {
                            w: t.width(),
                            h: t.height()
                        }), i.length === 1 && r()
                    },
                    teardown: function() {
                        if (!s[c] && this[u]) return !1;
                        var t = e(this);
                        i = i.not(t), t.removeData(f), i.length || clearTimeout(o)
                    },
                    add: function(t) {
                        function r(t, r, s) {
                            var o = e(this),
                                u = e.data(this, f);
                            u.w = r !== n ? r : o.width(), u.h = s !== n ? s : o.height(), i.apply(this, arguments)
                        }
                        if (!s[c] && this[u]) return !1;
                        var i;
                        if (e.isFunction(t)) return i = t, r;
                        i = t.handler, t.handler = r
                    }
                }
            })(jQuery, this),
            function(e) {
                function t(e) {
                    function t() {
                        var t = e.getPlaceholder();
                        if (t.width() == 0 || t.height() == 0) return;
                        e.resize(), e.setupGrid(), e.draw()
                    }

                    function n(e, n) {
                        e.getPlaceholder().resize(t)
                    }

                    function r(e, n) {
                        e.getPlaceholder().unbind("resize", t)
                    }
                    e.hooks.bindEvents.push(n), e.hooks.shutdown.push(r)
                }
                var n = {};
                e.plot.plugins.push({
                    init: t,
                    options: n,
                    name: "resize",
                    version: "1.0"
                })
            }(jQuery);
            (function(e) {
                function t(e) {
                    function t(e, t) {
                        var n = null;
                        for (var r = 0; r < t.length; ++r) {
                            if (e == t[r]) break;
                            t[r].stack == e.stack && (n = t[r])
                        }
                        return n
                    }

                    function n(e, n, r) {
                        if (n.stack == null || n.stack === !1) return;
                        var i = t(n, e.getData());
                        if (!i) return;
                        var s = r.pointsize,
                            o = r.points,
                            u = i.datapoints.pointsize,
                            a = i.datapoints.points,
                            f = [],
                            l, c, h, p, d, v, m = n.lines.show,
                            g = n.bars.horizontal,
                            y = s > 2 && (g ? r.format[2].x : r.format[2].y),
                            b = m && n.lines.steps,
                            w = !0,
                            E = g ? 1 : 0,
                            S = g ? 0 : 1,
                            x = 0,
                            T = 0,
                            N, C;
                        for (;;) {
                            if (x >= o.length) break;
                            N = f.length;
                            if (o[x] == null) {
                                for (C = 0; C < s; ++C) f.push(o[x + C]);
                                x += s
                            } else if (T >= a.length) {
                                if (!m)
                                    for (C = 0; C < s; ++C) f.push(o[x + C]);
                                x += s
                            } else if (a[T] == null) {
                                for (C = 0; C < s; ++C) f.push(null);
                                w = !0, T += u
                            } else {
                                l = o[x + E], c = o[x + S], p = a[T + E], d = a[T + S], v = 0;
                                if (l == p) {
                                    for (C = 0; C < s; ++C) f.push(o[x + C]);
                                    f[N + S] += d, v = d, x += s, T += u
                                } else if (l > p) {
                                    if (m && x > 0 && o[x - s] != null) {
                                        h = c + (o[x - s + S] - c) * (p - l) / (o[x - s + E] - l), f.push(p), f.push(h + d);
                                        for (C = 2; C < s; ++C) f.push(o[x + C]);
                                        v = d
                                    }
                                    T += u
                                } else {
                                    if (w && m) {
                                        x += s;
                                        continue
                                    }
                                    for (C = 0; C < s; ++C) f.push(o[x + C]);
                                    m && T > 0 && a[T - u] != null && (v = d + (a[T - u + S] - d) * (l - p) / (a[T - u + E] - p)), f[N + S] += v, x += s
                                }
                                w = !1, N != f.length && y && (f[N + 2] += v)
                            }
                            if (b && N != f.length && N > 0 && f[N] != null && f[N] != f[N - s] && f[N + 1] != f[N - s + 1]) {
                                for (C = 0; C < s; ++C) f[N + s + C] = f[N + C];
                                f[N + 1] = f[N - s + 1]
                            }
                        }
                        r.points = f
                    }
                    e.hooks.processDatapoints.push(n)
                }
                var n = {
                    series: {
                        stack: null
                    }
                };
                e.plot.plugins.push({
                    init: t,
                    options: n,
                    name: "stack",
                    version: "1.2"
                })
            })(jQuery);
            (function(e) {
                jQuery.fn.extend({
                    elastic: function() {
                        var t = ["paddingTop", "paddingRight", "paddingBottom", "paddingLeft", "fontSize", "lineHeight", "fontFamily", "width", "fontWeight", "border-top-width", "border-right-width", "border-bottom-width", "border-left-width", "borderTopStyle", "borderTopColor", "borderRightStyle", "borderRightColor", "borderBottomStyle", "borderBottomColor", "borderLeftStyle", "borderLeftColor"];
                        return this.each(function() {
                            function n() {
                                var e = Math.floor(parseInt(s.width(), 10));
                                if (o.width() !== e) {
                                    o.css({
                                        width: e + "px"
                                    });
                                    i(true)
                                }
                            }

                            function r(e, t) {
                                var n = Math.floor(parseInt(e, 10));
                                if (s.height() !== n) {
                                    s.css({
                                        height: n + "px",
                                        overflow: t
                                    })
                                }
                            }

                            function i(e) {
                                var t = s.val().replace(/&/g, "&").replace(/ {2}/g, " ").replace(/<|>/g, ">").replace(/\n/g, "<br />");
                                var n = o.html().replace(/<br>/ig, "<br />");
                                if (e || t + " " !== n) {
                                    o.html(t + " ");
                                    if (Math.abs(o.height() + u - s.height()) > 3) {
                                        var i = o.height() + u;
                                        if (i >= f) {
                                            r(f, "auto")
                                        } else if (i <= a) {
                                            r(a, "hidden")
                                        } else {
                                            r(i, "hidden")
                                        }
                                    }
                                }
                            }
                            if (this.type !== "textarea") {
                                return false
                            }
                            var s = jQuery(this),
                                o = jQuery("<div />").css({
                                    position: "absolute",
                                    display: "none",
                                    "word-wrap": "break-word",
                                    "white-space": "pre-wrap"
                                }),
                                u = parseInt(s.css("line-height"), 10) || parseInt(s.css("font-size"), "10"),
                                a = parseInt(s.css("height"), 10) || u * 3,
                                f = parseInt(s.css("max-height"), 10) || Number.MAX_VALUE,
                                l = 0;
                            if (f < 0) {
                                f = Number.MAX_VALUE
                            }
                            o.appendTo(s.parent());
                            var c = t.length;
                            while (c--) {
                                o.css(t[c].toString(), s.css(t[c].toString()))
                            }
                            s.css({
                                overflow: "hidden"
                            });
                            s.bind("keyup change cut paste", function() {
                                i()
                            });
                            e(window).bind("resize", n);
                            s.bind("resize", n);
                            s.bind("update", i);
                            s.bind("blur", function() {
                                if (o.height() < f) {
                                    if (o.height() > a) {
                                        s.height(o.height())
                                    } else {
                                        s.height(a)
                                    }
                                }
                            });
                            s.bind("input paste", function(e) {
                                setTimeout(i, 250)
                            });
                            i()
                        })
                    }
                })
            })(jQuery);
            var wysihtml5 = {
                version: "0.3.0_rc2",
                commands: {},
                dom: {},
                quirks: {},
                toolbar: {},
                lang: {},
                selection: {},
                views: {},
                INVISIBLE_SPACE: "",
                EMPTY_FUNCTION: function() {},
                ELEMENT_NODE: 1,
                TEXT_NODE: 3,
                BACKSPACE_KEY: 8,
                ENTER_KEY: 13,
                ESCAPE_KEY: 27,
                SPACE_KEY: 32,
                DELETE_KEY: 46
            }; window.rangy = function() {
                function e(e, t) {
                    var n = typeof e[t];
                    return n == f || !!(n == a && e[t]) || "unknown" == n
                }

                function t(e, t) {
                    return !!(typeof e[t] == a && e[t])
                }

                function n(e, t) {
                    return typeof e[t] != l
                }

                function r(e) {
                    return function(t, n) {
                        for (var r = n.length; r--;)
                            if (!e(t, n[r])) return !1;
                        return !0
                    }
                }

                function i(e) {
                    return e && v(e, d) && g(e, p)
                }

                function s(e) {
                    window.alert("Rangy not supported in your browser. Reason: " + e);
                    y.initialized = !0;
                    y.supported = !1
                }

                function o() {
                    if (!y.initialized) {
                        var n, r = !1,
                            o = !1;
                        e(document, "createRange") && (n = document.createRange(), v(n, h) && g(n, c) && (r = !0), n.detach());
                        if ((n = t(document, "body") ? document.body : document.getElementsByTagName("body")[0]) && e(n, "createTextRange")) n = n.createTextRange(), i(n) && (o = !0);
                        !r && !o && s("Neither Range nor TextRange are implemented");
                        y.initialized = !0;
                        y.features = {
                            implementsDomRange: r,
                            implementsTextRange: o
                        };
                        r = w.concat(b);
                        o = 0;
                        for (n = r.length; o < n; ++o) try {
                            r[o](y)
                        } catch (u) {
                            t(window, "console") && e(window.console, "log") && window.console.log("Init listener threw an exception. Continuing.", u)
                        }
                    }
                }

                function u(e) {
                    this.name = e;
                    this.supported = this.initialized = !1
                }
                var a = "object",
                    f = "function",
                    l = "undefined",
                    c = "startContainer,startOffset,endContainer,endOffset,collapsed,commonAncestorContainer,START_TO_START,START_TO_END,END_TO_START,END_TO_END".split(","),
                    h = "setStart,setStartBefore,setStartAfter,setEnd,setEndBefore,setEndAfter,collapse,selectNode,selectNodeContents,compareBoundaryPoints,deleteContents,extractContents,cloneContents,insertNode,surroundContents,cloneRange,toString,detach".split(","),
                    p = "boundingHeight,boundingLeft,boundingTop,boundingWidth,htmlText,text".split(","),
                    d = "collapse,compareEndPoints,duplicate,getBookmark,moveToBookmark,moveToElementText,parentElement,pasteHTML,select,setEndPoint,getBoundingClientRect".split(","),
                    v = r(e),
                    m = r(t),
                    g = r(n),
                    y = {
                        version: "1.2.2",
                        initialized: !1,
                        supported: !0,
                        util: {
                            isHostMethod: e,
                            isHostObject: t,
                            isHostProperty: n,
                            areHostMethods: v,
                            areHostObjects: m,
                            areHostProperties: g,
                            isTextRange: i
                        },
                        features: {},
                        modules: {},
                        config: {
                            alertOnWarn: !1,
                            preferTextRange: !1
                        }
                    };
                y.fail = s;
                y.warn = function(e) {
                    e = "Rangy warning: " + e;
                    y.config.alertOnWarn ? window.alert(e) : typeof window.console != l && typeof window.console.log != l && window.console.log(e)
                };
                (({})).hasOwnProperty ? y.util.extend = function(e, t) {
                    for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n])
                } : s("hasOwnProperty not supported");
                var b = [],
                    w = [];
                y.init = o;
                y.addInitListener = function(e) {
                    y.initialized ? e(y) : b.push(e)
                };
                var E = [];
                y.addCreateMissingNativeApiListener = function(e) {
                    E.push(e)
                };
                y.createMissingNativeApi = function(e) {
                    e = e || window;
                    o();
                    for (var t = 0, n = E.length; t < n; ++t) E[t](e)
                };
                u.prototype.fail = function(e) {
                    this.initialized = !0;
                    this.supported = !1;
                    throw Error("Module '" + this.name + "' failed to load: " + e)
                };
                u.prototype.warn = function(e) {
                    y.warn("Module " + this.name + ": " + e)
                };
                u.prototype.createError = function(e) {
                    return Error("Error in Rangy " + this.name + " module: " + e)
                };
                y.createModule = function(e, t) {
                    var n = new u(e);
                    y.modules[e] = n;
                    w.push(function(e) {
                        t(e, n);
                        n.initialized = !0;
                        n.supported = !0
                    })
                };
                y.requireModules = function(e) {
                    for (var t = 0, n = e.length, r, i; t < n; ++t) {
                        i = e[t];
                        r = y.modules[i];
                        if (!r || !(r instanceof u)) throw Error("Module '" + i + "' not found");
                        if (!r.supported) throw Error("Module '" + i + "' not supported")
                    }
                };
                var S = !1,
                    m = function() {
                        S || (S = !0, y.initialized || o())
                    };
                if (typeof window == l) s("No window found");
                else if (typeof document == l) s("No document found");
                else return e(document, "addEventListener") && document.addEventListener("DOMContentLoaded", m, !1), e(window, "addEventListener") ? window.addEventListener("load", m, !1) : e(window, "attachEvent") ? window.attachEvent("onload", m) : s("Window does not have required addEventListener or attachEvent method"), y
            }(); rangy.createModule("DomUtil", function(e, t) {
                function n(e) {
                    for (var t = 0; e = e.previousSibling;) t++;
                    return t
                }

                function r(e, t) {
                    var n = [],
                        r;
                    for (r = e; r; r = r.parentNode) n.push(r);
                    for (r = t; r; r = r.parentNode)
                        if (v(n, r)) return r;
                    return null
                }

                function i(e, t, n) {
                    for (n = n ? e : e.parentNode; n;) {
                        e = n.parentNode;
                        if (e === t) return n;
                        n = e
                    }
                    return null
                }

                function s(e) {
                    e = e.nodeType;
                    return 3 == e || 4 == e || 8 == e
                }

                function o(e, t) {
                    var n = t.nextSibling,
                        r = t.parentNode;
                    n ? r.insertBefore(e, n) : r.appendChild(e);
                    return e
                }

                function u(e) {
                    if (9 == e.nodeType) return e;
                    if (typeof e.ownerDocument != h) return e.ownerDocument;
                    if (typeof e.document != h) return e.document;
                    if (e.parentNode) return u(e.parentNode);
                    throw Error("getDocument: no document found for node")
                }

                function a(e) {
                    return !e ? "[No node]" : s(e) ? '"' + e.data + '"' : 1 == e.nodeType ? "<" + e.nodeName + (e.id ? ' id="' + e.id + '"' : "") + ">[" + e.childNodes.length + "]" : e.nodeName
                }

                function f(e) {
                    this._next = this.root = e
                }

                function l(e, t) {
                    this.node = e;
                    this.offset = t
                }

                function c(e) {
                    this.code = this[e];
                    this.codeName = e;
                    this.message = "DOMException: " + this.codeName
                }
                var h = "undefined",
                    p = e.util;
                p.areHostMethods(document, ["createDocumentFragment", "createElement", "createTextNode"]) || t.fail("document missing a Node creation method");
                p.isHostMethod(document, "getElementsByTagName") || t.fail("document missing getElementsByTagName method");
                var d = document.createElement("div");
                p.areHostMethods(d, ["insertBefore", "appendChild", "cloneNode"]) || t.fail("Incomplete Element implementation");
                p.isHostProperty(d, "innerHTML") || t.fail("Element is missing innerHTML property");
                d = document.createTextNode("test");
                p.areHostMethods(d, ["splitText", "deleteData", "insertData", "appendData", "cloneNode"]) || t.fail("Incomplete Text Node implementation");
                var v = function(e, t) {
                    for (var n = e.length; n--;)
                        if (e[n] === t) return !0;
                    return !1
                };
                f.prototype = {
                    _current: null,
                    hasNext: function() {
                        return !!this._next
                    },
                    next: function() {
                        var e = this._current = this._next,
                            t;
                        if (this._current) {
                            t = e.firstChild;
                            if (!t)
                                for (t = null; e !== this.root && !(t = e.nextSibling);) e = e.parentNode;
                            this._next = t
                        }
                        return this._current
                    },
                    detach: function() {
                        this._current = this._next = this.root = null
                    }
                };
                l.prototype = {
                    equals: function(e) {
                        return this.node === e.node & this.offset == e.offset
                    },
                    inspect: function() {
                        return "[DomPosition(" + a(this.node) + ":" + this.offset + ")]"
                    }
                };
                c.prototype = {
                    INDEX_SIZE_ERR: 1,
                    HIERARCHY_REQUEST_ERR: 3,
                    WRONG_DOCUMENT_ERR: 4,
                    NO_MODIFICATION_ALLOWED_ERR: 7,
                    NOT_FOUND_ERR: 8,
                    NOT_SUPPORTED_ERR: 9,
                    INVALID_STATE_ERR: 11
                };
                c.prototype.toString = function() {
                    return this.message
                };
                e.dom = {
                    arrayContains: v,
                    isHtmlNamespace: function(e) {
                        var t;
                        return typeof e.namespaceURI == h || null === (t = e.namespaceURI) || "http://www.w3.org/1999/xhtml" == t
                    },
                    parentElement: function(e) {
                        e = e.parentNode;
                        return 1 == e.nodeType ? e : null
                    },
                    getNodeIndex: n,
                    getNodeLength: function(e) {
                        var t;
                        return s(e) ? e.length : (t = e.childNodes) ? t.length : 0
                    },
                    getCommonAncestor: r,
                    isAncestorOf: function(e, t, n) {
                        for (t = n ? t : t.parentNode; t;) {
                            if (t === e) return !0;
                            t = t.parentNode
                        }
                        return !1
                    },
                    getClosestAncestorIn: i,
                    isCharacterDataNode: s,
                    insertAfter: o,
                    splitDataNode: function(e, t) {
                        var n = e.cloneNode(!1);
                        n.deleteData(0, t);
                        e.deleteData(t, e.length - t);
                        o(n, e);
                        return n
                    },
                    getDocument: u,
                    getWindow: function(e) {
                        e = u(e);
                        if (typeof e.defaultView != h) return e.defaultView;
                        if (typeof e.parentWindow != h) return e.parentWindow;
                        throw Error("Cannot get a window object for node")
                    },
                    getIframeWindow: function(e) {
                        if (typeof e.contentWindow != h) return e.contentWindow;
                        if (typeof e.contentDocument != h) return e.contentDocument.defaultView;
                        throw Error("getIframeWindow: No Window object found for iframe element")
                    },
                    getIframeDocument: function(e) {
                        if (typeof e.contentDocument != h) return e.contentDocument;
                        if (typeof e.contentWindow != h) return e.contentWindow.document;
                        throw Error("getIframeWindow: No Document object found for iframe element")
                    },
                    getBody: function(e) {
                        return p.isHostObject(e, "body") ? e.body : e.getElementsByTagName("body")[0]
                    },
                    getRootContainer: function(e) {
                        for (var t; t = e.parentNode;) e = t;
                        return e
                    },
                    comparePoints: function(e, t, s, o) {
                        var u;
                        if (e == s) return t === o ? 0 : t < o ? -1 : 1;
                        if (u = i(s, e, !0)) return t <= n(u) ? -1 : 1;
                        if (u = i(e, s, !0)) return n(u) < o ? -1 : 1;
                        t = r(e, s);
                        e = e === t ? t : i(e, t, !0);
                        s = s === t ? t : i(s, t, !0);
                        if (e === s) throw Error("comparePoints got to case 4 and childA and childB are the same!");
                        for (t = t.firstChild; t;) {
                            if (t === e) return -1;
                            if (t === s) return 1;
                            t = t.nextSibling
                        }
                        throw Error("Should not be here!")
                    },
                    inspectNode: a,
                    fragmentFromNodeChildren: function(e) {
                        for (var t = u(e).createDocumentFragment(), n; n = e.firstChild;) t.appendChild(n);
                        return t
                    },
                    createIterator: function(e) {
                        return new f(e)
                    },
                    DomPosition: l
                };
                e.DOMException = c
            }); rangy.createModule("DomRange", function(e) {
                function t(e, t) {
                    return 3 != e.nodeType && (D.isAncestorOf(e, t.startContainer, !0) || D.isAncestorOf(e, t.endContainer, !0))
                }

                function n(e) {
                    return D.getDocument(e.startContainer)
                }

                function r(e, t, n) {
                    if (t = e._listeners[t])
                        for (var r = 0, i = t.length; r < i; ++r) t[r].call(e, {
                            target: e,
                            args: n
                        })
                }

                function i(e) {
                    return new P(e.parentNode, D.getNodeIndex(e))
                }

                function s(e) {
                    return new P(e.parentNode, D.getNodeIndex(e) + 1)
                }

                function o(e, t, n) {
                    var r = 11 == e.nodeType ? e.firstChild : e;
                    D.isCharacterDataNode(t) ? n == t.length ? D.insertAfter(e, t) : t.parentNode.insertBefore(e, 0 == n ? t : D.splitDataNode(t, n)) : n >= t.childNodes.length ? t.appendChild(e) : t.insertBefore(e, t.childNodes[n]);
                    return r
                }

                function u(e) {
                    for (var t, r, i = n(e.range).createDocumentFragment(); r = e.next();) {
                        t = e.isPartiallySelectedSubtree();
                        r = r.cloneNode(!t);
                        t && (t = e.getSubtreeIterator(), r.appendChild(u(t)), t.detach(!0));
                        if (10 == r.nodeType) throw new H("HIERARCHY_REQUEST_ERR");
                        i.appendChild(r)
                    }
                    return i
                }

                function a(e, t, n) {
                    for (var r, i, n = n || {
                            stop: !1
                        }; r = e.next();)
                        if (e.isPartiallySelectedSubtree())
                            if (!1 === t(r)) {
                                n.stop = !0;
                                break
                            } else {
                                if (r = e.getSubtreeIterator(), a(r, t, n), r.detach(!0), n.stop) break
                            } else
                        for (r = D.createIterator(r); i = r.next();)
                            if (!1 === t(i)) {
                                n.stop = !0;
                                return
                            }
                }

                function f(e) {
                    for (var t; e.next();) e.isPartiallySelectedSubtree() ? (t = e.getSubtreeIterator(), f(t), t.detach(!0)) : e.remove()
                }

                function l(e) {
                    for (var t, r = n(e.range).createDocumentFragment(), i; t = e.next();) {
                        e.isPartiallySelectedSubtree() ? (t = t.cloneNode(!1), i = e.getSubtreeIterator(), t.appendChild(l(i)), i.detach(!0)) : e.remove();
                        if (10 == t.nodeType) throw new H("HIERARCHY_REQUEST_ERR");
                        r.appendChild(t)
                    }
                    return r
                }

                function c(e, t, n) {
                    var r = !(!t || !t.length),
                        i, s = !!n;
                    r && (i = RegExp("^(" + t.join("|") + ")$"));
                    var o = [];
                    a(new p(e, !1), function(e) {
                        (!r || i.test(e.nodeType)) && (!s || n(e)) && o.push(e)
                    });
                    return o
                }

                function h(e) {
                    return "[" + ("undefined" == typeof e.getName ? "Range" : e.getName()) + "(" + D.inspectNode(e.startContainer) + ":" + e.startOffset + ", " + D.inspectNode(e.endContainer) + ":" + e.endOffset + ")]"
                }

                function p(e, t) {
                    this.range = e;
                    this.clonePartiallySelectedTextNodes = t;
                    if (!e.collapsed) {
                        this.sc = e.startContainer;
                        this.so = e.startOffset;
                        this.ec = e.endContainer;
                        this.eo = e.endOffset;
                        var n = e.commonAncestorContainer;
                        this.sc === this.ec && D.isCharacterDataNode(this.sc) ? (this.isSingleCharacterDataNode = !0, this._first = this._last = this._next = this.sc) : (this._first = this._next = this.sc === n && !D.isCharacterDataNode(this.sc) ? this.sc.childNodes[this.so] : D.getClosestAncestorIn(this.sc, n, !0), this._last = this.ec === n && !D.isCharacterDataNode(this.ec) ? this.ec.childNodes[this.eo - 1] : D.getClosestAncestorIn(this.ec, n, !0))
                    }
                }

                function d(e) {
                    this.code = this[e];
                    this.codeName = e;
                    this.message = "RangeException: " + this.codeName
                }

                function v(e, t, n) {
                    this.nodes = c(e, t, n);
                    this._next = this.nodes[0];
                    this._position = 0
                }

                function m(e) {
                    return function(t, n) {
                        for (var r, i = n ? t : t.parentNode; i;) {
                            r = i.nodeType;
                            if (D.arrayContains(e, r)) return i;
                            i = i.parentNode
                        }
                        return null
                    }
                }

                function g(e, t) {
                    if (z(e, t)) throw new d("INVALID_NODE_TYPE_ERR")
                }

                function y(e) {
                    if (!e.startContainer) throw new H("INVALID_STATE_ERR")
                }

                function b(e, t) {
                    if (!D.arrayContains(t, e.nodeType)) throw new d("INVALID_NODE_TYPE_ERR")
                }

                function w(e, t) {
                    if (0 > t || t > (D.isCharacterDataNode(e) ? e.length : e.childNodes.length)) throw new H("INDEX_SIZE_ERR")
                }

                function E(e, t) {
                    if (R(e, !0) !== R(t, !0)) throw new H("WRONG_DOCUMENT_ERR")
                }

                function S(e) {
                    if (U(e, !0)) throw new H("NO_MODIFICATION_ALLOWED_ERR")
                }

                function x(e, t) {
                    if (!e) throw new H(t)
                }

                function T(e) {
                    y(e);
                    if (!D.arrayContains(j, e.startContainer.nodeType) && !R(e.startContainer, !0) || !D.arrayContains(j, e.endContainer.nodeType) && !R(e.endContainer, !0) || !(e.startOffset <= (D.isCharacterDataNode(e.startContainer) ? e.startContainer.length : e.startContainer.childNodes.length)) || !(e.endOffset <= (D.isCharacterDataNode(e.endContainer) ? e.endContainer.length : e.endContainer.childNodes.length))) throw Error("Range error: Range is no longer valid after DOM mutation (" + e.inspect() + ")")
                }

                function N() {}

                function C(e) {
                    e.START_TO_START = J;
                    e.START_TO_END = K;
                    e.END_TO_END = Q;
                    e.END_TO_START = G;
                    e.NODE_BEFORE = Y;
                    e.NODE_AFTER = Z;
                    e.NODE_BEFORE_AND_AFTER = et;
                    e.NODE_INSIDE = tt
                }

                function k(e) {
                    C(e);
                    C(e.prototype)
                }

                function L(e, t) {
                    return function() {
                        T(this);
                        var n = this.startContainer,
                            r = this.startOffset,
                            i = this.commonAncestorContainer,
                            o = new p(this, !0);
                        n !== i && (n = D.getClosestAncestorIn(n, i, !0), r = s(n), n = r.node, r = r.offset);
                        a(o, S);
                        o.reset();
                        i = e(o);
                        o.detach();
                        t(this, n, r, n, r);
                        return i
                    }
                }

                function A(n, r, o) {
                    function u(e, t) {
                        return function(n) {
                            y(this);
                            b(n, B);
                            b(q(n), j);
                            n = (e ? i : s)(n);
                            (t ? a : c)(this, n.node, n.offset)
                        }
                    }

                    function a(e, t, n) {
                        var i = e.endContainer,
                            s = e.endOffset;
                        if (t !== e.startContainer || n !== e.startOffset) {
                            if (q(t) != q(i) || 1 == D.comparePoints(t, n, i, s)) i = t, s = n;
                            r(e, t, n, i, s)
                        }
                    }

                    function c(e, t, n) {
                        var i = e.startContainer,
                            s = e.startOffset;
                        if (t !== e.endContainer || n !== e.endOffset) {
                            if (q(t) != q(i) || -1 == D.comparePoints(t, n, i, s)) i = t, s = n;
                            r(e, i, s, t, n)
                        }
                    }
                    n.prototype = new N;
                    e.util.extend(n.prototype, {
                        setStart: function(e, t) {
                            y(this);
                            g(e, !0);
                            w(e, t);
                            a(this, e, t)
                        },
                        setEnd: function(e, t) {
                            y(this);
                            g(e, !0);
                            w(e, t);
                            c(this, e, t)
                        },
                        setStartBefore: u(!0, !0),
                        setStartAfter: u(!1, !0),
                        setEndBefore: u(!0, !1),
                        setEndAfter: u(!1, !1),
                        collapse: function(e) {
                            T(this);
                            e ? r(this, this.startContainer, this.startOffset, this.startContainer, this.startOffset) : r(this, this.endContainer, this.endOffset, this.endContainer, this.endOffset)
                        },
                        selectNodeContents: function(e) {
                            y(this);
                            g(e, !0);
                            r(this, e, 0, e, D.getNodeLength(e))
                        },
                        selectNode: function(e) {
                            y(this);
                            g(e, !1);
                            b(e, B);
                            var t = i(e),
                                e = s(e);
                            r(this, t.node, t.offset, e.node, e.offset)
                        },
                        extractContents: L(l, r),
                        deleteContents: L(f, r),
                        canSurroundContents: function() {
                            T(this);
                            S(this.startContainer);
                            S(this.endContainer);
                            var e = new p(this, !0),
                                n = e._first && t(e._first, this) || e._last && t(e._last, this);
                            e.detach();
                            return !n
                        },
                        detach: function() {
                            o(this)
                        },
                        splitBoundaries: function() {
                            T(this);
                            var e = this.startContainer,
                                t = this.startOffset,
                                n = this.endContainer,
                                i = this.endOffset,
                                s = e === n;
                            D.isCharacterDataNode(n) && 0 < i && i < n.length && D.splitDataNode(n, i);
                            D.isCharacterDataNode(e) && 0 < t && t < e.length && (e = D.splitDataNode(e, t), s ? (i -= t, n = e) : n == e.parentNode && i >= D.getNodeIndex(e) && i++, t = 0);
                            r(this, e, t, n, i)
                        },
                        normalizeBoundaries: function() {
                            T(this);
                            var e = this.startContainer,
                                t = this.startOffset,
                                n = this.endContainer,
                                i = this.endOffset,
                                s = function(e) {
                                    var t = e.nextSibling;
                                    t && t.nodeType == e.nodeType && (n = e, i = e.length, e.appendData(t.data), t.parentNode.removeChild(t))
                                },
                                o = function(r) {
                                    var s = r.previousSibling;
                                    if (s && s.nodeType == r.nodeType) {
                                        e = r;
                                        var o = r.length;
                                        t = s.length;
                                        r.insertData(0, s.data);
                                        s.parentNode.removeChild(s);
                                        e == n ? (i += t, n = e) : n == r.parentNode && (s = D.getNodeIndex(r), i == s ? (n = r, i = o) : i > s && i--)
                                    }
                                },
                                u = !0;
                            D.isCharacterDataNode(n) ? n.length == i && s(n) : (0 < i && (u = n.childNodes[i - 1]) && D.isCharacterDataNode(u) && s(u), u = !this.collapsed);
                            u ? D.isCharacterDataNode(e) ? 0 == t && o(e) : t < e.childNodes.length && (s = e.childNodes[t]) && D.isCharacterDataNode(s) && o(s) : (e = n, t = i);
                            r(this, e, t, n, i)
                        },
                        collapseToPoint: function(e, t) {
                            y(this);
                            g(e, !0);
                            w(e, t);
                            (e !== this.startContainer || t !== this.startOffset || e !== this.endContainer || t !== this.endOffset) && r(this, e, t, e, t)
                        }
                    });
                    k(n)
                }

                function O(e) {
                    e.collapsed = e.startContainer === e.endContainer && e.startOffset === e.endOffset;
                    e.commonAncestorContainer = e.collapsed ? e.startContainer : D.getCommonAncestor(e.startContainer, e.endContainer)
                }

                function M(e, t, n, i, s) {
                    var o = e.startContainer !== t || e.startOffset !== n,
                        u = e.endContainer !== i || e.endOffset !== s;
                    e.startContainer = t;
                    e.startOffset = n;
                    e.endContainer = i;
                    e.endOffset = s;
                    O(e);
                    r(e, "boundarychange", {
                        startMoved: o,
                        endMoved: u
                    })
                }

                function _(e) {
                    this.startContainer = e;
                    this.startOffset = 0;
                    this.endContainer = e;
                    this.endOffset = 0;
                    this._listeners = {
                        boundarychange: [],
                        detach: []
                    };
                    O(this)
                }
                e.requireModules(["DomUtil"]);
                var D = e.dom,
                    P = D.DomPosition,
                    H = e.DOMException;
                p.prototype = {
                    _current: null,
                    _next: null,
                    _first: null,
                    _last: null,
                    isSingleCharacterDataNode: !1,
                    reset: function() {
                        this._current = null;
                        this._next = this._first
                    },
                    hasNext: function() {
                        return !!this._next
                    },
                    next: function() {
                        var e = this._current = this._next;
                        e && (this._next = e !== this._last ? e.nextSibling : null, D.isCharacterDataNode(e) && this.clonePartiallySelectedTextNodes && (e === this.ec && (e = e.cloneNode(!0)).deleteData(this.eo, e.length - this.eo), this._current === this.sc && (e = e.cloneNode(!0)).deleteData(0, this.so)));
                        return e
                    },
                    remove: function() {
                        var e = this._current,
                            t, n;
                        D.isCharacterDataNode(e) && (e === this.sc || e === this.ec) ? (t = e === this.sc ? this.so : 0, n = e === this.ec ? this.eo : e.length, t != n && e.deleteData(t, n - t)) : e.parentNode && e.parentNode.removeChild(e)
                    },
                    isPartiallySelectedSubtree: function() {
                        return t(this._current, this.range)
                    },
                    getSubtreeIterator: function() {
                        var e;
                        if (this.isSingleCharacterDataNode) e = this.range.cloneRange(), e.collapse();
                        else {
                            e = new _(n(this.range));
                            var t = this._current,
                                r = t,
                                i = 0,
                                s = t,
                                o = D.getNodeLength(t);
                            D.isAncestorOf(t, this.sc, !0) && (r = this.sc, i = this.so);
                            D.isAncestorOf(t, this.ec, !0) && (s = this.ec, o = this.eo);
                            M(e, r, i, s, o)
                        }
                        return new p(e, this.clonePartiallySelectedTextNodes)
                    },
                    detach: function(e) {
                        e && this.range.detach();
                        this.range = this._current = this._next = this._first = this._last = this.sc = this.so = this.ec = this.eo = null
                    }
                };
                d.prototype = {
                    BAD_BOUNDARYPOINTS_ERR: 1,
                    INVALID_NODE_TYPE_ERR: 2
                };
                d.prototype.toString = function() {
                    return this.message
                };
                v.prototype = {
                    _current: null,
                    hasNext: function() {
                        return !!this._next
                    },
                    next: function() {
                        this._current = this._next;
                        this._next = this.nodes[++this._position];
                        return this._current
                    },
                    detach: function() {
                        this._current = this._next = this.nodes = null
                    }
                };
                var B = [1, 3, 4, 5, 7, 8, 10],
                    j = [2, 9, 11],
                    F = [1, 3, 4, 5, 7, 8, 10, 11],
                    I = [1, 3, 4, 5, 7, 8],
                    q = D.getRootContainer,
                    R = m([9, 11]),
                    U = m([5, 6, 10, 12]),
                    z = m([6, 10, 12]),
                    W = document.createElement("style"),
                    X = !1;
                try {
                    W.innerHTML = "<b>x</b>", X = 3 == W.firstChild.nodeType
                } catch (V) {}
                e.features.htmlParsingConforms = X;
                var $ = "startContainer,startOffset,endContainer,endOffset,collapsed,commonAncestorContainer".split(","),
                    J = 0,
                    K = 1,
                    Q = 2,
                    G = 3,
                    Y = 0,
                    Z = 1,
                    et = 2,
                    tt = 3;
                N.prototype = {
                    attachListener: function(e, t) {
                        this._listeners[e].push(t)
                    },
                    compareBoundaryPoints: function(e, t) {
                        T(this);
                        E(this.startContainer, t.startContainer);
                        var n = e == G || e == J ? "start" : "end",
                            r = e == K || e == J ? "start" : "end";
                        return D.comparePoints(this[n + "Container"], this[n + "Offset"], t[r + "Container"], t[r + "Offset"])
                    },
                    insertNode: function(e) {
                        T(this);
                        b(e, F);
                        S(this.startContainer);
                        if (D.isAncestorOf(e, this.startContainer, !0)) throw new H("HIERARCHY_REQUEST_ERR");
                        this.setStartBefore(o(e, this.startContainer, this.startOffset))
                    },
                    cloneContents: function() {
                        T(this);
                        var e, t;
                        if (this.collapsed) return n(this).createDocumentFragment();
                        if (this.startContainer === this.endContainer && D.isCharacterDataNode(this.startContainer)) return e = this.startContainer.cloneNode(!0), e.data = e.data.slice(this.startOffset, this.endOffset), t = n(this).createDocumentFragment(), t.appendChild(e), t;
                        t = new p(this, !0);
                        e = u(t);
                        t.detach();
                        return e
                    },
                    canSurroundContents: function() {
                        T(this);
                        S(this.startContainer);
                        S(this.endContainer);
                        var e = new p(this, !0),
                            n = e._first && t(e._first, this) || e._last && t(e._last, this);
                        e.detach();
                        return !n
                    },
                    surroundContents: function(e) {
                        b(e, I);
                        if (!this.canSurroundContents()) throw new d("BAD_BOUNDARYPOINTS_ERR");
                        var t = this.extractContents();
                        if (e.hasChildNodes())
                            for (; e.lastChild;) e.removeChild(e.lastChild);
                        o(e, this.startContainer, this.startOffset);
                        e.appendChild(t);
                        this.selectNode(e)
                    },
                    cloneRange: function() {
                        T(this);
                        for (var e = new _(n(this)), t = $.length, r; t--;) r = $[t], e[r] = this[r];
                        return e
                    },
                    toString: function() {
                        T(this);
                        var e = this.startContainer;
                        if (e === this.endContainer && D.isCharacterDataNode(e)) return 3 == e.nodeType || 4 == e.nodeType ? e.data.slice(this.startOffset, this.endOffset) : "";
                        var t = [],
                            e = new p(this, !0);
                        a(e, function(e) {
                            (3 == e.nodeType || 4 == e.nodeType) && t.push(e.data)
                        });
                        e.detach();
                        return t.join("")
                    },
                    compareNode: function(e) {
                        T(this);
                        var t = e.parentNode,
                            n = D.getNodeIndex(e);
                        if (!t) throw new H("NOT_FOUND_ERR");
                        e = this.comparePoint(t, n);
                        t = this.comparePoint(t, n + 1);
                        return 0 > e ? 0 < t ? et : Y : 0 < t ? Z : tt
                    },
                    comparePoint: function(e, t) {
                        T(this);
                        x(e, "HIERARCHY_REQUEST_ERR");
                        E(e, this.startContainer);
                        return 0 > D.comparePoints(e, t, this.startContainer, this.startOffset) ? -1 : 0 < D.comparePoints(e, t, this.endContainer, this.endOffset) ? 1 : 0
                    },
                    createContextualFragment: X ? function(e) {
                        var t = this.startContainer,
                            n = D.getDocument(t);
                        if (!t) throw new H("INVALID_STATE_ERR");
                        var r = null;
                        1 == t.nodeType ? r = t : D.isCharacterDataNode(t) && (r = D.parentElement(t));
                        r = null === r || "HTML" == r.nodeName && D.isHtmlNamespace(D.getDocument(r).documentElement) && D.isHtmlNamespace(r) ? n.createElement("body") : r.cloneNode(!1);
                        r.innerHTML = e;
                        return D.fragmentFromNodeChildren(r)
                    } : function(e) {
                        y(this);
                        var t = n(this).createElement("body");
                        t.innerHTML = e;
                        return D.fragmentFromNodeChildren(t)
                    },
                    toHtml: function() {
                        T(this);
                        var e = n(this).createElement("div");
                        e.appendChild(this.cloneContents());
                        return e.innerHTML
                    },
                    intersectsNode: function(e, t) {
                        T(this);
                        x(e, "NOT_FOUND_ERR");
                        if (D.getDocument(e) !== n(this)) return !1;
                        var r = e.parentNode,
                            i = D.getNodeIndex(e);
                        x(r, "NOT_FOUND_ERR");
                        var s = D.comparePoints(r, i, this.endContainer, this.endOffset),
                            r = D.comparePoints(r, i + 1, this.startContainer, this.startOffset);
                        return t ? 0 >= s && 0 <= r : 0 > s && 0 < r
                    },
                    isPointInRange: function(e, t) {
                        T(this);
                        x(e, "HIERARCHY_REQUEST_ERR");
                        E(e, this.startContainer);
                        return 0 <= D.comparePoints(e, t, this.startContainer, this.startOffset) && 0 >= D.comparePoints(e, t, this.endContainer, this.endOffset)
                    },
                    intersectsRange: function(e, t) {
                        T(this);
                        if (n(e) != n(this)) throw new H("WRONG_DOCUMENT_ERR");
                        var r = D.comparePoints(this.startContainer, this.startOffset, e.endContainer, e.endOffset),
                            i = D.comparePoints(this.endContainer, this.endOffset, e.startContainer, e.startOffset);
                        return t ? 0 >= r && 0 <= i : 0 > r && 0 < i
                    },
                    intersection: function(e) {
                        if (this.intersectsRange(e)) {
                            var t = D.comparePoints(this.startContainer, this.startOffset, e.startContainer, e.startOffset),
                                n = D.comparePoints(this.endContainer, this.endOffset, e.endContainer, e.endOffset),
                                r = this.cloneRange(); - 1 == t && r.setStart(e.startContainer, e.startOffset);
                            1 == n && r.setEnd(e.endContainer, e.endOffset);
                            return r
                        }
                        return null
                    },
                    union: function(e) {
                        if (this.intersectsRange(e, !0)) {
                            var t = this.cloneRange(); - 1 == D.comparePoints(e.startContainer, e.startOffset, this.startContainer, this.startOffset) && t.setStart(e.startContainer, e.startOffset);
                            1 == D.comparePoints(e.endContainer, e.endOffset, this.endContainer, this.endOffset) && t.setEnd(e.endContainer, e.endOffset);
                            return t
                        }
                        throw new d("Ranges do not intersect")
                    },
                    containsNode: function(e, t) {
                        return t ? this.intersectsNode(e, !1) : this.compareNode(e) == tt
                    },
                    containsNodeContents: function(e) {
                        return 0 <= this.comparePoint(e, 0) && 0 >= this.comparePoint(e, D.getNodeLength(e))
                    },
                    containsRange: function(e) {
                        return this.intersection(e).equals(e)
                    },
                    containsNodeText: function(e) {
                        var t = this.cloneRange();
                        t.selectNode(e);
                        var n = t.getNodes([3]);
                        return 0 < n.length ? (t.setStart(n[0], 0), e = n.pop(), t.setEnd(e, e.length), e = this.containsRange(t), t.detach(), e) : this.containsNodeContents(e)
                    },
                    createNodeIterator: function(e, t) {
                        T(this);
                        return new v(this, e, t)
                    },
                    getNodes: function(e, t) {
                        T(this);
                        return c(this, e, t)
                    },
                    getDocument: function() {
                        return n(this)
                    },
                    collapseBefore: function(e) {
                        y(this);
                        this.setEndBefore(e);
                        this.collapse(!1)
                    },
                    collapseAfter: function(e) {
                        y(this);
                        this.setStartAfter(e);
                        this.collapse(!0)
                    },
                    getName: function() {
                        return "DomRange"
                    },
                    equals: function(e) {
                        return _.rangesEqual(this, e)
                    },
                    inspect: function() {
                        return h(this)
                    }
                };
                A(_, M, function(e) {
                    y(e);
                    e.startContainer = e.startOffset = e.endContainer = e.endOffset = null;
                    e.collapsed = e.commonAncestorContainer = null;
                    r(e, "detach", null);
                    e._listeners = null
                });
                e.rangePrototype = N.prototype;
                _.rangeProperties = $;
                _.RangeIterator = p;
                _.copyComparisonConstants = k;
                _.createPrototypeRange = A;
                _.inspect = h;
                _.getRangeDocument = n;
                _.rangesEqual = function(e, t) {
                    return e.startContainer === t.startContainer && e.startOffset === t.startOffset && e.endContainer === t.endContainer && e.endOffset === t.endOffset
                };
                e.DomRange = _;
                e.RangeException = d
            }); rangy.createModule("WrappedRange", function(e) {
                function t(e, t, n, r) {
                    var o = e.duplicate();
                    o.collapse(n);
                    var u = o.parentElement();
                    i.isAncestorOf(t, u, !0) || (u = t);
                    if (!u.canHaveHTML) return new s(u.parentNode, i.getNodeIndex(u));
                    var t = i.getDocument(u).createElement("span"),
                        a, l = n ? "StartToStart" : "StartToEnd";
                    do u.insertBefore(t, t.previousSibling), o.moveToElementText(t);
                    while (0 < (a = o.compareEndPoints(l, e)) && t.previousSibling);
                    l = t.nextSibling;
                    if (-1 == a && l && i.isCharacterDataNode(l)) {
                        o.setEndPoint(n ? "EndToStart" : "EndToEnd", e);
                        if (/[\r\n]/.test(l.data)) {
                            u = o.duplicate();
                            n = u.text.replace(/\r\n/g, "\r").length;
                            for (n = u.moveStart("character", n); - 1 == u.compareEndPoints("StartToEnd", u);) n++, u.moveStart("character", 1)
                        } else n = o.text.length;
                        u = new s(l, n)
                    } else l = (r || !n) && t.previousSibling, u = (n = (r || n) && t.nextSibling) && i.isCharacterDataNode(n) ? new s(n, 0) : l && i.isCharacterDataNode(l) ? new s(l, l.length) : new s(u, i.getNodeIndex(t));
                    t.parentNode.removeChild(t);
                    return u
                }

                function n(e, t) {
                    var n, r, s = e.offset,
                        o = i.getDocument(e.node),
                        u = o.body.createTextRange(),
                        a = i.isCharacterDataNode(e.node);
                    a ? (n = e.node, r = n.parentNode) : (n = e.node.childNodes, n = s < n.length ? n[s] : null, r = e.node);
                    o = o.createElement("span");
                    o.innerHTML = "&#feff;";
                    n ? r.insertBefore(o, n) : r.appendChild(o);
                    u.moveToElementText(o);
                    u.collapse(!t);
                    r.removeChild(o);
                    if (a) u[t ? "moveStart" : "moveEnd"]("character", s);
                    return u
                }
                e.requireModules(["DomUtil", "DomRange"]);
                var r, i = e.dom,
                    s = i.DomPosition,
                    o = e.DomRange;
                if (e.features.implementsDomRange && (!e.features.implementsTextRange || !e.config.preferTextRange))(function() {
                    function t(e) {
                        for (var t = s.length, n; t--;) n = s[t], e[n] = e.nativeRange[n]
                    }
                    var n, s = o.rangeProperties,
                        u;
                    r = function(e) {
                        if (!e) throw Error("Range must be specified");
                        this.nativeRange = e;
                        t(this)
                    };
                    o.createPrototypeRange(r, function(e, t, n, r, i) {
                        var s = e.endContainer !== r || e.endOffset != i;
                        if (e.startContainer !== t || e.startOffset != n || s) e.setEnd(r, i), e.setStart(t, n)
                    }, function(e) {
                        e.nativeRange.detach();
                        e.detached = !0;
                        for (var t = s.length, n; t--;) n = s[t], e[n] = null
                    });
                    n = r.prototype;
                    n.selectNode = function(e) {
                        this.nativeRange.selectNode(e);
                        t(this)
                    };
                    n.deleteContents = function() {
                        this.nativeRange.deleteContents();
                        t(this)
                    };
                    n.extractContents = function() {
                        var e = this.nativeRange.extractContents();
                        t(this);
                        return e
                    };
                    n.cloneContents = function() {
                        return this.nativeRange.cloneContents()
                    };
                    n.surroundContents = function(e) {
                        this.nativeRange.surroundContents(e);
                        t(this)
                    };
                    n.collapse = function(e) {
                        this.nativeRange.collapse(e);
                        t(this)
                    };
                    n.cloneRange = function() {
                        return new r(this.nativeRange.cloneRange())
                    };
                    n.refresh = function() {
                        t(this)
                    };
                    n.toString = function() {
                        return this.nativeRange.toString()
                    };
                    var a = document.createTextNode("test");
                    i.getBody(document).appendChild(a);
                    var f = document.createRange();
                    f.setStart(a, 0);
                    f.setEnd(a, 0);
                    try {
                        f.setStart(a, 1), n.setStart = function(e, n) {
                            this.nativeRange.setStart(e, n);
                            t(this)
                        }, n.setEnd = function(e, n) {
                            this.nativeRange.setEnd(e, n);
                            t(this)
                        }, u = function(e) {
                            return function(n) {
                                this.nativeRange[e](n);
                                t(this)
                            }
                        }
                    } catch (l) {
                        n.setStart = function(e, n) {
                            try {
                                this.nativeRange.setStart(e, n)
                            } catch (r) {
                                this.nativeRange.setEnd(e, n), this.nativeRange.setStart(e, n)
                            }
                            t(this)
                        }, n.setEnd = function(e, n) {
                            try {
                                this.nativeRange.setEnd(e, n)
                            } catch (r) {
                                this.nativeRange.setStart(e, n), this.nativeRange.setEnd(e, n)
                            }
                            t(this)
                        }, u = function(e, n) {
                            return function(r) {
                                try {
                                    this.nativeRange[e](r)
                                } catch (i) {
                                    this.nativeRange[n](r), this.nativeRange[e](r)
                                }
                                t(this)
                            }
                        }
                    }
                    n.setStartBefore = u("setStartBefore", "setEndBefore");
                    n.setStartAfter = u("setStartAfter", "setEndAfter");
                    n.setEndBefore = u("setEndBefore", "setStartBefore");
                    n.setEndAfter = u("setEndAfter", "setStartAfter");
                    f.selectNodeContents(a);
                    n.selectNodeContents = f.startContainer == a && f.endContainer == a && 0 == f.startOffset && f.endOffset == a.length ? function(e) {
                        this.nativeRange.selectNodeContents(e);
                        t(this)
                    } : function(e) {
                        this.setStart(e, 0);
                        this.setEnd(e, o.getEndOffset(e))
                    };
                    f.selectNodeContents(a);
                    f.setEnd(a, 3);
                    u = document.createRange();
                    u.selectNodeContents(a);
                    u.setEnd(a, 4);
                    u.setStart(a, 2);
                    n.compareBoundaryPoints = -1 == f.compareBoundaryPoints(f.START_TO_END, u) & 1 == f.compareBoundaryPoints(f.END_TO_START, u) ? function(e, t) {
                        t = t.nativeRange || t;
                        e == t.START_TO_END ? e = t.END_TO_START : e == t.END_TO_START && (e = t.START_TO_END);
                        return this.nativeRange.compareBoundaryPoints(e, t)
                    } : function(e, t) {
                        return this.nativeRange.compareBoundaryPoints(e, t.nativeRange || t)
                    };
                    e.util.isHostMethod(f, "createContextualFragment") && (n.createContextualFragment = function(e) {
                        return this.nativeRange.createContextualFragment(e)
                    });
                    i.getBody(document).removeChild(a);
                    f.detach();
                    u.detach()
                })(), e.createNativeRange = function(e) {
                    return (e || document).createRange()
                };
                else if (e.features.implementsTextRange) {
                    r = function(e) {
                        this.textRange = e;
                        this.refresh()
                    };
                    r.prototype = new o(document);
                    r.prototype.refresh = function() {
                        var e, n, r = this.textRange;
                        e = r.parentElement();
                        var s = r.duplicate();
                        s.collapse(!0);
                        n = s.parentElement();
                        s = r.duplicate();
                        s.collapse(!1);
                        r = s.parentElement();
                        n = n == r ? n : i.getCommonAncestor(n, r);
                        n = n == e ? n : i.getCommonAncestor(e, n);
                        0 == this.textRange.compareEndPoints("StartToEnd", this.textRange) ? n = e = t(this.textRange, n, !0, !0) : (e = t(this.textRange, n, !0, !1), n = t(this.textRange, n, !1, !1));
                        this.setStart(e.node, e.offset);
                        this.setEnd(n.node, n.offset)
                    };
                    o.copyComparisonConstants(r);
                    var u = function() {
                        return this
                    }();
                    "undefined" == typeof u.Range && (u.Range = r);
                    e.createNativeRange = function(e) {
                        return (e || document).body.createTextRange()
                    }
                }
                e.features.implementsTextRange && (r.rangeToTextRange = function(e) {
                    if (e.collapsed) return n(new s(e.startContainer, e.startOffset), !0);
                    var t = n(new s(e.startContainer, e.startOffset), !0),
                        r = n(new s(e.endContainer, e.endOffset), !1),
                        e = i.getDocument(e.startContainer).body.createTextRange();
                    e.setEndPoint("StartToStart", t);
                    e.setEndPoint("EndToEnd", r);
                    return e
                });
                r.prototype.getName = function() {
                    return "WrappedRange"
                };
                e.WrappedRange = r;
                e.createRange = function(t) {
                    return new r(e.createNativeRange(t || document))
                };
                e.createRangyRange = function(e) {
                    return new o(e || document)
                };
                e.createIframeRange = function(t) {
                    return e.createRange(i.getIframeDocument(t))
                };
                e.createIframeRangyRange = function(t) {
                    return e.createRangyRange(i.getIframeDocument(t))
                };
                e.addCreateMissingNativeApiListener(function(t) {
                    t = t.document;
                    if (typeof t.createRange == "undefined") t.createRange = function() {
                        return e.createRange(this)
                    };
                    t = t = null
                })
            }); rangy.createModule("WrappedSelection", function(e, t) {
                function n(e) {
                    return (e || window).getSelection()
                }

                function r(e) {
                    return (e || window).document.selection
                }

                function i(e, t, n) {
                    var r = n ? "end" : "start",
                        n = n ? "start" : "end";
                    e.anchorNode = t[r + "Container"];
                    e.anchorOffset = t[r + "Offset"];
                    e.focusNode = t[n + "Container"];
                    e.focusOffset = t[n + "Offset"]
                }

                function s(e) {
                    e.anchorNode = e.focusNode = null;
                    e.anchorOffset = e.focusOffset = 0;
                    e.rangeCount = 0;
                    e.isCollapsed = !0;
                    e._ranges.length = 0
                }

                function o(t) {
                    var n;
                    t instanceof g ? (n = t._selectionNativeRange, n || (n = e.createNativeRange(v.getDocument(t.startContainer)), n.setEnd(t.endContainer, t.endOffset), n.setStart(t.startContainer, t.startOffset), t._selectionNativeRange = n, t.attachListener("detach", function() {
                        this._selectionNativeRange = null
                    }))) : t instanceof y ? n = t.nativeRange : e.features.implementsDomRange && t instanceof v.getWindow(t.startContainer).Range && (n = t);
                    return n
                }

                function u(e) {
                    var t = e.getNodes(),
                        n;
                    e: if (!t.length || 1 != t[0].nodeType) n = !1;
                        else {
                            n = 1;
                            for (var r = t.length; n < r; ++n)
                                if (!v.isAncestorOf(t[0], t[n])) {
                                    n = !1;
                                    break e
                                }
                            n = !0
                        }
                    if (!n) throw Error("getSingleElementFromRange: range " + e.inspect() + " did not consist of a single element");
                    return t[0]
                }

                function a(e, t) {
                    var n = new y(t);
                    e._ranges = [n];
                    i(e, n, !1);
                    e.rangeCount = 1;
                    e.isCollapsed = n.collapsed
                }

                function f(t) {
                    t._ranges.length = 0;
                    if ("None" == t.docSelection.type) s(t);
                    else {
                        var n = t.docSelection.createRange();
                        if (n && "undefined" != typeof n.text) a(t, n);
                        else {
                            t.rangeCount = n.length;
                            for (var r, o = v.getDocument(n.item(0)), u = 0; u < t.rangeCount; ++u) r = e.createRange(o), r.selectNode(n.item(u)), t._ranges.push(r);
                            t.isCollapsed = 1 == t.rangeCount && t._ranges[0].collapsed;
                            i(t, t._ranges[t.rangeCount - 1], !1)
                        }
                    }
                }

                function l(e, t) {
                    for (var n = e.docSelection.createRange(), r = u(t), i = v.getDocument(n.item(0)), i = v.getBody(i).createControlRange(), s = 0, o = n.length; s < o; ++s) i.add(n.item(s));
                    try {
                        i.add(r)
                    } catch (a) {
                        throw Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")
                    }
                    i.select();
                    f(e)
                }

                function c(e, t, n) {
                    this.nativeSelection = e;
                    this.docSelection = t;
                    this._ranges = [];
                    this.win = n;
                    this.refresh()
                }

                function h(e, t) {
                    for (var n = v.getDocument(t[0].startContainer), n = v.getBody(n).createControlRange(), r = 0, i; r < rangeCount; ++r) {
                        i = u(t[r]);
                        try {
                            n.add(i)
                        } catch (s) {
                            throw Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)")
                        }
                    }
                    n.select();
                    f(e)
                }

                function p(e, t) {
                    if (e.anchorNode && v.getDocument(e.anchorNode) !== v.getDocument(t)) throw new b("WRONG_DOCUMENT_ERR")
                }

                function d(e) {
                    var t = [],
                        n = new w(e.anchorNode, e.anchorOffset),
                        r = new w(e.focusNode, e.focusOffset),
                        i = "function" == typeof e.getName ? e.getName() : "Selection";
                    if ("undefined" != typeof e.rangeCount)
                        for (var s = 0, o = e.rangeCount; s < o; ++s) t[s] = g.inspect(e.getRangeAt(s));
                    return "[" + i + "(Ranges: " + t.join(", ") + ")(anchor: " + n.inspect() + ", focus: " + r.inspect() + "]"
                }
                e.requireModules(["DomUtil", "DomRange", "WrappedRange"]);
                e.config.checkSelectionRanges = !0;
                var v = e.dom,
                    m = e.util,
                    g = e.DomRange,
                    y = e.WrappedRange,
                    b = e.DOMException,
                    w = v.DomPosition,
                    E, S, x = e.util.isHostMethod(window, "getSelection"),
                    T = e.util.isHostObject(document, "selection"),
                    N = T && (!x || e.config.preferTextRange);
                N ? (E = r, e.isSelectionValid = function(e) {
                    var e = (e || window).document,
                        t = e.selection;
                    return "None" != t.type || v.getDocument(t.createRange().parentElement()) == e
                }) : x ? (E = n, e.isSelectionValid = function() {
                    return !0
                }) : t.fail("Neither document.selection or window.getSelection() detected.");
                e.getNativeSelection = E;
                var x = E(),
                    C = e.createNativeRange(document),
                    k = v.getBody(document),
                    L = m.areHostObjects(x, m.areHostProperties(x, ["anchorOffset", "focusOffset"]));
                e.features.selectionHasAnchorAndFocus = L;
                var A = m.isHostMethod(x, "extend");
                e.features.selectionHasExtend = A;
                var O = "number" == typeof x.rangeCount;
                e.features.selectionHasRangeCount = O;
                var M = !1,
                    _ = !0;
                m.areHostMethods(x, ["addRange", "getRangeAt", "removeAllRanges"]) && "number" == typeof x.rangeCount && e.features.implementsDomRange && function() {
                    var e = document.createElement("iframe");
                    k.appendChild(e);
                    var t = v.getIframeDocument(e);
                    t.open();
                    t.write("<html><head></head><body>12</body></html>");
                    t.close();
                    var n = v.getIframeWindow(e).getSelection(),
                        r = t.documentElement.lastChild.firstChild,
                        t = t.createRange();
                    t.setStart(r, 1);
                    t.collapse(true);
                    n.addRange(t);
                    _ = n.rangeCount == 1;
                    n.removeAllRanges();
                    var i = t.cloneRange();
                    t.setStart(r, 0);
                    i.setEnd(r, 2);
                    n.addRange(t);
                    n.addRange(i);
                    M = n.rangeCount == 2;
                    t.detach();
                    i.detach();
                    k.removeChild(e)
                }();
                e.features.selectionSupportsMultipleRanges = M;
                e.features.collapsedNonEditableSelectionsSupported = _;
                var D = !1,
                    P;
                k && m.isHostMethod(k, "createControlRange") && (P = k.createControlRange(), m.areHostProperties(P, ["item", "add"]) && (D = !0));
                e.features.implementsControlRange = D;
                S = L ? function(e) {
                    return e.anchorNode === e.focusNode && e.anchorOffset === e.focusOffset
                } : function(e) {
                    return e.rangeCount ? e.getRangeAt(e.rangeCount - 1).collapsed : false
                };
                var H;
                m.isHostMethod(x, "getRangeAt") ? H = function(e, t) {
                    try {
                        return e.getRangeAt(t)
                    } catch (n) {
                        return null
                    }
                } : L && (H = function(t) {
                    var n = v.getDocument(t.anchorNode),
                        n = e.createRange(n);
                    n.setStart(t.anchorNode, t.anchorOffset);
                    n.setEnd(t.focusNode, t.focusOffset);
                    if (n.collapsed !== this.isCollapsed) {
                        n.setStart(t.focusNode, t.focusOffset);
                        n.setEnd(t.anchorNode, t.anchorOffset)
                    }
                    return n
                });
                e.getSelection = function(e) {
                    var e = e || window,
                        t = e._rangySelection,
                        n = E(e),
                        i = T ? r(e) : null;
                    if (t) {
                        t.nativeSelection = n;
                        t.docSelection = i;
                        t.refresh(e)
                    } else {
                        t = new c(n, i, e);
                        e._rangySelection = t
                    }
                    return t
                };
                e.getIframeSelection = function(t) {
                    return e.getSelection(v.getIframeWindow(t))
                };
                P = c.prototype;
                if (!N && L && m.areHostMethods(x, ["removeAllRanges", "addRange"])) {
                    P.removeAllRanges = function() {
                        this.nativeSelection.removeAllRanges();
                        s(this)
                    };
                    var B = function(t, n) {
                        var r = g.getRangeDocument(n),
                            r = e.createRange(r);
                        r.collapseToPoint(n.endContainer, n.endOffset);
                        t.nativeSelection.addRange(o(r));
                        t.nativeSelection.extend(n.startContainer, n.startOffset);
                        t.refresh()
                    };
                    P.addRange = O ? function(t, n) {
                        if (D && T && this.docSelection.type == "Control") l(this, t);
                        else if (n && A) B(this, t);
                        else {
                            var r;
                            if (M) r = this.rangeCount;
                            else {
                                this.removeAllRanges();
                                r = 0
                            }
                            this.nativeSelection.addRange(o(t));
                            this.rangeCount = this.nativeSelection.rangeCount;
                            if (this.rangeCount == r + 1) {
                                if (e.config.checkSelectionRanges)(r = H(this.nativeSelection, this.rangeCount - 1)) && !g.rangesEqual(r, t) && (t = new y(r));
                                this._ranges[this.rangeCount - 1] = t;
                                i(this, t, I(this.nativeSelection));
                                this.isCollapsed = S(this)
                            } else this.refresh()
                        }
                    } : function(e, t) {
                        if (t && A) B(this, e);
                        else {
                            this.nativeSelection.addRange(o(e));
                            this.refresh()
                        }
                    };
                    P.setRanges = function(e) {
                        if (D && e.length > 1) h(this, e);
                        else {
                            this.removeAllRanges();
                            for (var t = 0, n = e.length; t < n; ++t) this.addRange(e[t])
                        }
                    }
                } else if (m.isHostMethod(x, "empty") && m.isHostMethod(C, "select") && D && N) P.removeAllRanges = function() {
                    try {
                        this.docSelection.empty();
                        if (this.docSelection.type != "None") {
                            var e;
                            if (this.anchorNode) e = v.getDocument(this.anchorNode);
                            else if (this.docSelection.type == "Control") {
                                var t = this.docSelection.createRange();
                                t.length && (e = v.getDocument(t.item(0)).body.createTextRange())
                            }
                            if (e) {
                                e.body.createTextRange().select();
                                this.docSelection.empty()
                            }
                        }
                    } catch (n) {}
                    s(this)
                }, P.addRange = function(e) {
                    if (this.docSelection.type == "Control") l(this, e);
                    else {
                        y.rangeToTextRange(e).select();
                        this._ranges[0] = e;
                        this.rangeCount = 1;
                        this.isCollapsed = this._ranges[0].collapsed;
                        i(this, e, false)
                    }
                }, P.setRanges = function(e) {
                    this.removeAllRanges();
                    var t = e.length;
                    t > 1 ? h(this, e) : t && this.addRange(e[0])
                };
                else return t.fail("No means of selecting a Range or TextRange was found"), !1;
                P.getRangeAt = function(e) {
                    if (e < 0 || e >= this.rangeCount) throw new b("INDEX_SIZE_ERR");
                    return this._ranges[e]
                };
                var j;
                if (N) j = function(t) {
                    var n;
                    if (e.isSelectionValid(t.win)) n = t.docSelection.createRange();
                    else {
                        n = v.getBody(t.win.document).createTextRange();
                        n.collapse(true)
                    }
                    t.docSelection.type == "Control" ? f(t) : n && typeof n.text != "undefined" ? a(t, n) : s(t)
                };
                else if (m.isHostMethod(x, "getRangeAt") && "number" == typeof x.rangeCount) j = function(t) {
                    if (D && T && t.docSelection.type == "Control") f(t);
                    else {
                        t._ranges.length = t.rangeCount = t.nativeSelection.rangeCount;
                        if (t.rangeCount) {
                            for (var n = 0, r = t.rangeCount; n < r; ++n) t._ranges[n] = new e.WrappedRange(t.nativeSelection.getRangeAt(n));
                            i(t, t._ranges[t.rangeCount - 1], I(t.nativeSelection));
                            t.isCollapsed = S(t)
                        } else s(t)
                    }
                };
                else if (L && "boolean" == typeof x.isCollapsed && "boolean" == typeof C.collapsed && e.features.implementsDomRange) j = function(e) {
                    var t;
                    t = e.nativeSelection;
                    if (t.anchorNode) {
                        t = H(t, 0);
                        e._ranges = [t];
                        e.rangeCount = 1;
                        t = e.nativeSelection;
                        e.anchorNode = t.anchorNode;
                        e.anchorOffset = t.anchorOffset;
                        e.focusNode = t.focusNode;
                        e.focusOffset = t.focusOffset;
                        e.isCollapsed = S(e)
                    } else s(e)
                };
                else return t.fail("No means of obtaining a Range or TextRange from the user's selection was found"), !1;
                P.refresh = function(e) {
                    var t = e ? this._ranges.slice(0) : null;
                    j(this);
                    if (e) {
                        e = t.length;
                        if (e != this._ranges.length) return false;
                        for (; e--;)
                            if (!g.rangesEqual(t[e], this._ranges[e])) return false;
                        return true
                    }
                };
                var F = function(e, t) {
                    var n = e.getAllRanges(),
                        r = false;
                    e.removeAllRanges();
                    for (var i = 0, o = n.length; i < o; ++i) r || t !== n[i] ? e.addRange(n[i]) : r = true;
                    e.rangeCount || s(e)
                };
                P.removeRange = D ? function(e) {
                    if (this.docSelection.type == "Control") {
                        for (var t = this.docSelection.createRange(), e = u(e), n = v.getDocument(t.item(0)), n = v.getBody(n).createControlRange(), r, i = false, s = 0, o = t.length; s < o; ++s) {
                            r = t.item(s);
                            r !== e || i ? n.add(t.item(s)) : i = true
                        }
                        n.select();
                        f(this)
                    } else F(this, e)
                } : function(e) {
                    F(this, e)
                };
                var I;
                !N && L && e.features.implementsDomRange ? (I = function(e) {
                    var t = false;
                    e.anchorNode && (t = v.comparePoints(e.anchorNode, e.anchorOffset, e.focusNode, e.focusOffset) == 1);
                    return t
                }, P.isBackwards = function() {
                    return I(this)
                }) : I = P.isBackwards = function() {
                    return false
                };
                P.toString = function() {
                    for (var e = [], t = 0, n = this.rangeCount; t < n; ++t) e[t] = "" + this._ranges[t];
                    return e.join("")
                };
                P.collapse = function(t, n) {
                    p(this, t);
                    var r = e.createRange(v.getDocument(t));
                    r.collapseToPoint(t, n);
                    this.removeAllRanges();
                    this.addRange(r);
                    this.isCollapsed = true
                };
                P.collapseToStart = function() {
                    if (this.rangeCount) {
                        var e = this._ranges[0];
                        this.collapse(e.startContainer, e.startOffset)
                    } else throw new b("INVALID_STATE_ERR")
                };
                P.collapseToEnd = function() {
                    if (this.rangeCount) {
                        var e = this._ranges[this.rangeCount - 1];
                        this.collapse(e.endContainer, e.endOffset)
                    } else throw new b("INVALID_STATE_ERR")
                };
                P.selectAllChildren = function(t) {
                    p(this, t);
                    var n = e.createRange(v.getDocument(t));
                    n.selectNodeContents(t);
                    this.removeAllRanges();
                    this.addRange(n)
                };
                P.deleteFromDocument = function() {
                    if (D && T && this.docSelection.type == "Control") {
                        for (var e = this.docSelection.createRange(), t; e.length;) {
                            t = e.item(0);
                            e.remove(t);
                            t.parentNode.removeChild(t)
                        }
                        this.refresh()
                    } else if (this.rangeCount) {
                        e = this.getAllRanges();
                        this.removeAllRanges();
                        t = 0;
                        for (var n = e.length; t < n; ++t) e[t].deleteContents();
                        this.addRange(e[n - 1])
                    }
                };
                P.getAllRanges = function() {
                    return this._ranges.slice(0)
                };
                P.setSingleRange = function(e) {
                    this.setRanges([e])
                };
                P.containsNode = function(e, t) {
                    for (var n = 0, r = this._ranges.length; n < r; ++n)
                        if (this._ranges[n].containsNode(e, t)) return true;
                    return false
                };
                P.toHtml = function() {
                    var e = "";
                    if (this.rangeCount) {
                        for (var e = g.getRangeDocument(this._ranges[0]).createElement("div"), t = 0, n = this._ranges.length; t < n; ++t) e.appendChild(this._ranges[t].cloneContents());
                        e = e.innerHTML
                    }
                    return e
                };
                P.getName = function() {
                    return "WrappedSelection"
                };
                P.inspect = function() {
                    return d(this)
                };
                P.detach = function() {
                    this.win = this.anchorNode = this.focusNode = this.win._rangySelection = null
                };
                c.inspect = d;
                e.Selection = c;
                e.selectionPrototype = P;
                e.addCreateMissingNativeApiListener(function(t) {
                    if (typeof t.getSelection == "undefined") t.getSelection = function() {
                        return e.getSelection(this)
                    };
                    t = null
                })
            });
            var Base = function() {}; Base.extend = function(e, t) {
                var n = Base.prototype.extend;
                Base._prototyping = !0;
                var r = new this;
                n.call(r, e);
                r.base = function() {};
                delete Base._prototyping;
                var i = r.constructor,
                    s = r.constructor = function() {
                        if (!Base._prototyping)
                            if (this._constructing || this.constructor == s) this._constructing = !0, i.apply(this, arguments), delete this._constructing;
                            else if (null != arguments[0]) return (arguments[0].extend || n).call(arguments[0], r)
                    };
                s.ancestor = this;
                s.extend = this.extend;
                s.forEach = this.forEach;
                s.implement = this.implement;
                s.prototype = r;
                s.toString = this.toString;
                s.valueOf = function(e) {
                    return "object" == e ? s : i.valueOf()
                };
                n.call(s, t);
                "function" == typeof s.init && s.init();
                return s
            }; Base.prototype = {
                extend: function(e, t) {
                    if (1 < arguments.length) {
                        var n = this[e];
                        if (n && "function" == typeof t && (!n.valueOf || n.valueOf() != t.valueOf()) && /\bbase\b/.test(t)) {
                            var r = t.valueOf(),
                                t = function() {
                                    var e = this.base || Base.prototype.base;
                                    this.base = n;
                                    var t = r.apply(this, arguments);
                                    this.base = e;
                                    return t
                                };
                            t.valueOf = function(e) {
                                return "object" == e ? t : r
                            };
                            t.toString = Base.toString
                        }
                        this[e] = t
                    } else if (e) {
                        var i = Base.prototype.extend;
                        !Base._prototyping && "function" != typeof this && (i = this.extend || i);
                        for (var s = {
                                toSource: null
                            }, o = ["constructor", "toString", "valueOf"], u = Base._prototyping ? 0 : 1; a = o[u++];) e[a] != s[a] && i.call(this, a, e[a]);
                        for (var a in e) s[a] || i.call(this, a, e[a])
                    }
                    return this
                }
            }; Base = Base.extend({
                constructor: function(e) {
                    this.extend(e)
                }
            }, {
                ancestor: Object,
                version: "1.1",
                forEach: function(e, t, n) {
                    for (var r in e) void 0 === this.prototype[r] && t.call(n, e[r], r, e)
                },
                implement: function() {
                    for (var e = 0; e < arguments.length; e++)
                        if ("function" == typeof arguments[e]) arguments[e](this.prototype);
                        else this.prototype.extend(arguments[e]);
                    return this
                },
                toString: function() {
                    return "" + this.valueOf()
                }
            }); wysihtml5.browser = function() {
                var e = navigator.userAgent,
                    t = document.createElement("div"),
                    n = -1 !== e.indexOf("MSIE") && -1 === e.indexOf("Opera"),
                    r = -1 !== e.indexOf("Gecko") && -1 === e.indexOf("KHTML"),
                    i = -1 !== e.indexOf("AppleWebKit/"),
                    s = -1 !== e.indexOf("Chrome/"),
                    o = -1 !== e.indexOf("Opera/");
                return {
                    USER_AGENT: e,
                    supported: function() {
                        var e = this.USER_AGENT.toLowerCase(),
                            n = "contentEditable" in t,
                            r = document.execCommand && document.queryCommandSupported && document.queryCommandState,
                            i = document.querySelector && document.querySelectorAll,
                            e = this.isIos() && 5 > (/ipad|iphone|ipod/.test(e) && e.match(/ os (\d+).+? like mac os x/) || [, 0])[1] || -1 !== e.indexOf("opera mobi") || -1 !== e.indexOf("hpwos/");
                        return n && r && i && !e
                    },
                    isTouchDevice: function() {
                        return this.supportsEvent("touchmove")
                    },
                    isIos: function() {
                        var e = this.USER_AGENT.toLowerCase();
                        return -1 !== e.indexOf("webkit") && -1 !== e.indexOf("mobile")
                    },
                    supportsSandboxedIframes: function() {
                        return n
                    },
                    throwsMixedContentWarningWhenIframeSrcIsEmpty: function() {
                        return !("querySelector" in document)
                    },
                    displaysCaretInEmptyContentEditableCorrectly: function() {
                        return !r
                    },
                    hasCurrentStyleProperty: function() {
                        return "currentStyle" in t
                    },
                    insertsLineBreaksOnReturn: function() {
                        return r
                    },
                    supportsPlaceholderAttributeOn: function(e) {
                        return "placeholder" in e
                    },
                    supportsEvent: function(e) {
                        var n;
                        if (!(n = "on" + e in t)) t.setAttribute("on" + e, "return;"), n = "function" === typeof t["on" + e];
                        return n
                    },
                    supportsEventsInIframeCorrectly: function() {
                        return !o
                    },
                    firesOnDropOnlyWhenOnDragOverIsCancelled: function() {
                        return i || r
                    },
                    supportsDataTransfer: function() {
                        try {
                            return i && (window.Clipboard || window.DataTransfer).prototype.getData
                        } catch (e) {
                            return !1
                        }
                    },
                    supportsHTML5Tags: function(e) {
                        e = e.createElement("div");
                        e.innerHTML = "<article>foo</article>";
                        return "<article>foo</article>" === e.innerHTML.toLowerCase()
                    },
                    supportsCommand: function() {
                        var e = {
                                formatBlock: n,
                                insertUnorderedList: n || o,
                                insertOrderedList: n || o
                            },
                            t = {
                                insertHTML: r
                            };
                        return function(n, r) {
                            if (!e[r]) {
                                try {
                                    return n.queryCommandSupported(r)
                                } catch (i) {}
                                try {
                                    return n.queryCommandEnabled(r)
                                } catch (s) {
                                    return !!t[r]
                                }
                            }
                            return !1
                        }
                    }(),
                    doesAutoLinkingInContentEditable: function() {
                        return n
                    },
                    canDisableAutoLinking: function() {
                        return this.supportsCommand(document, "AutoUrlDetect")
                    },
                    clearsContentEditableCorrectly: function() {
                        return r || o || i
                    },
                    supportsGetAttributeCorrectly: function() {
                        return "1" != document.createElement("td").getAttribute("rowspan")
                    },
                    canSelectImagesInContentEditable: function() {
                        return r || n || o
                    },
                    clearsListsInContentEditableCorrectly: function() {
                        return r || n || i
                    },
                    autoScrollsToCaret: function() {
                        return !i
                    },
                    autoClosesUnclosedTags: function() {
                        var e = t.cloneNode(!1),
                            n;
                        e.innerHTML = "<p><div></div>";
                        e = e.innerHTML.toLowerCase();
                        n = "<p></p><div></div>" === e || "<p><div></div></p>" === e;
                        this.autoClosesUnclosedTags = function() {
                            return n
                        };
                        return n
                    },
                    supportsNativeGetElementsByClassName: function() {
                        return -1 !== ("" + document.getElementsByClassName).indexOf("[native code]")
                    },
                    supportsSelectionModify: function() {
                        return "getSelection" in window && "modify" in window.getSelection()
                    },
                    supportsClassList: function() {
                        return "classList" in t
                    },
                    needsSpaceAfterLineBreak: function() {
                        return o
                    },
                    supportsSpeechApiOn: function(t) {
                        return 11 <= (e.match(/Chrome\/(\d+)/) || [, 0])[1] && ("onwebkitspeechchange" in t || "speech" in t)
                    },
                    crashesWhenDefineProperty: function(e) {
                        return n && ("XMLHttpRequest" === e || "XDomainRequest" === e)
                    },
                    doesAsyncFocus: function() {
                        return n
                    },
                    hasProblemsSettingCaretAfterImg: function() {
                        return n
                    },
                    hasUndoInContextMenu: function() {
                        return r || s || o
                    }
                }
            }(); wysihtml5.lang.array = function(e) {
                return {
                    contains: function(t) {
                        if (e.indexOf) return -1 !== e.indexOf(t);
                        for (var n = 0, r = e.length; n < r; n++)
                            if (e[n] === t) return !0;
                        return !1
                    },
                    without: function(t) {
                        for (var t = wysihtml5.lang.array(t), n = [], r = 0, i = e.length; r < i; r++) t.contains(e[r]) || n.push(e[r]);
                        return n
                    },
                    get: function() {
                        for (var t = 0, n = e.length, r = []; t < n; t++) r.push(e[t]);
                        return r
                    }
                }
            }; wysihtml5.lang.Dispatcher = Base.extend({
                observe: function(e, t) {
                    this.events = this.events || {};
                    this.events[e] = this.events[e] || [];
                    this.events[e].push(t);
                    return this
                },
                on: function() {
                    return this.observe.apply(this, wysihtml5.lang.array(arguments).get())
                },
                fire: function(e, t) {
                    this.events = this.events || {};
                    for (var n = this.events[e] || [], r = 0; r < n.length; r++) n[r].call(this, t);
                    return this
                },
                stopObserving: function(e, t) {
                    this.events = this.events || {};
                    var n = 0,
                        r, i;
                    if (e) {
                        r = this.events[e] || [];
                        for (i = []; n < r.length; n++) r[n] !== t && t && i.push(r[n]);
                        this.events[e] = i
                    } else this.events = {};
                    return this
                }
            }); wysihtml5.lang.object = function(e) {
                return {
                    merge: function(t) {
                        for (var n in t) e[n] = t[n];
                        return this
                    },
                    get: function() {
                        return e
                    },
                    clone: function() {
                        var t = {},
                            n;
                        for (n in e) t[n] = e[n];
                        return t
                    },
                    isArray: function() {
                        return "[object Array]" === Object.prototype.toString.call(e)
                    }
                }
            };
            (function() {
                var e = /^\s+/,
                    t = /\s+$/;
                wysihtml5.lang.string = function(n) {
                    n = "" + n;
                    return {
                        trim: function() {
                            return n.replace(e, "").replace(t, "")
                        },
                        interpolate: function(e) {
                            for (var t in e) n = this.replace("#{" + t + "}").by(e[t]);
                            return n
                        },
                        replace: function(e) {
                            return {
                                by: function(t) {
                                    return n.split(e).join(t)
                                }
                            }
                        }
                    }
                }
            })();
            (function(e) {
                function t(e) {
                    return e.replace(i, function(e, t) {
                        var n = (t.match(s) || [])[1] || "",
                            r = u[n],
                            t = t.replace(s, "");
                        t.split(r).length > t.split(n).length && (t += n, n = "");
                        var i = r = t;
                        t.length > o && (i = i.substr(0, o) + "...");
                        "www." === r.substr(0, 4) && (r = "http://" + r);
                        return '<a href="' + r + '">' + i + "</a>" + n
                    })
                }

                function n(s) {
                    if (!r.contains(s.nodeName))
                        if (s.nodeType === e.TEXT_NODE && s.data.match(i)) {
                            var o = s.parentNode,
                                u;
                            u = o.ownerDocument;
                            var f = u._wysihtml5_tempElement;
                            f || (f = u._wysihtml5_tempElement = u.createElement("div"));
                            u = f;
                            u.innerHTML = "<span></span>" + t(s.data);
                            for (u.removeChild(u.firstChild); u.firstChild;) o.insertBefore(u.firstChild, s);
                            o.removeChild(s)
                        } else {
                            o = e.lang.array(s.childNodes).get();
                            u = o.length;
                            for (f = 0; f < u; f++) n(o[f]);
                            return s
                        }
                }
                var r = e.lang.array("CODE,PRE,A,SCRIPT,HEAD,TITLE,STYLE".split(",")),
                    i = /((https?:\/\/|www\.)[^\s<]{3,})/gi,
                    s = /([^\w\/\-](,?))$/i,
                    o = 100,
                    u = {
                        ")": "(",
                        "]": "[",
                        "}": "{"
                    };
                e.dom.autoLink = function(e) {
                    var t;
                    e: {
                        t = e;
                        for (var i; t.parentNode;) {
                            t = t.parentNode;
                            i = t.nodeName;
                            if (r.contains(i)) {
                                t = !0;
                                break e
                            }
                            if ("body" === i) break
                        }
                        t = !1
                    }
                    if (t) return e;
                    e === e.ownerDocument.documentElement && (e = e.ownerDocument.body);
                    return n(e)
                };
                e.dom.autoLink.URL_REG_EXP = i
            })(wysihtml5);
            (function(e) {
                var t = e.browser.supportsClassList(),
                    n = e.dom;
                n.addClass = function(e, r) {
                    if (t) return e.classList.add(r);
                    n.hasClass(e, r) || (e.className += " " + r)
                };
                n.removeClass = function(e, n) {
                    if (t) return e.classList.remove(n);
                    e.className = e.className.replace(RegExp("(^|\\s+)" + n + "(\\s+|$)"), " ")
                };
                n.hasClass = function(e, n) {
                    if (t) return e.classList.contains(n);
                    var r = e.className;
                    return 0 < r.length && (r == n || RegExp("(^|\\s)" + n + "(\\s|$)").test(r))
                }
            })(wysihtml5); wysihtml5.dom.contains = function() {
                var e = document.documentElement;
                if (e.contains) return function(e, t) {
                    t.nodeType !== wysihtml5.ELEMENT_NODE && (t = t.parentNode);
                    return e !== t && e.contains(t)
                };
                if (e.compareDocumentPosition) return function(e, t) {
                    return !!(e.compareDocumentPosition(t) & 16)
                }
            }(); wysihtml5.dom.convertToList = function() {
                function e(e, t) {
                    var n = e.createElement("li");
                    t.appendChild(n);
                    return n
                }
                return function(t, n) {
                    if ("UL" === t.nodeName || "OL" === t.nodeName || "MENU" === t.nodeName) return t;
                    for (var r = t.ownerDocument, i = r.createElement(n), s = wysihtml5.lang.array(t.childNodes).get(), o = s.length, u, a, f, l, c = 0; c < o; c++) l = l || e(r, i), u = s[c], a = "block" === wysihtml5.dom.getStyle("display").from(u), f = "BR" === u.nodeName, a ? (l = l.firstChild ? e(r, i) : l, l.appendChild(u), l = null) : f ? l = l.firstChild ? null : l : l.appendChild(u);
                    t.parentNode.replaceChild(i, t);
                    return i
                }
            }(); wysihtml5.dom.copyAttributes = function(e) {
                return {
                    from: function(t) {
                        return {
                            to: function(n) {
                                for (var r, i = 0, s = e.length; i < s; i++) r = e[i], t[r] && (n[r] = t[r]);
                                return {
                                    andTo: arguments.callee
                                }
                            }
                        }
                    }
                }
            };
            (function(e) {
                var t = ["-webkit-box-sizing", "-moz-box-sizing", "-ms-box-sizing", "box-sizing"],
                    n = function(n) {
                        var r;
                        e: for (var i = 0, s = t.length; i < s; i++)
                            if ("border-box" === e.getStyle(t[i]).from(n)) {
                                r = t[i];
                                break e
                            }
                        return r ? parseInt(e.getStyle("width").from(n), 10) < n.offsetWidth : !1
                    };
                e.copyStyles = function(r) {
                    return {
                        from: function(i) {
                            n(i) && (r = wysihtml5.lang.array(r).without(t));
                            for (var s = "", o = r.length, u = 0, f; u < o; u++) f = r[u], s += f + ":" + e.getStyle(f).from(i) + ";";
                            return {
                                to: function(t) {
                                    e.setStyles(s).on(t);
                                    return {
                                        andTo: arguments.callee
                                    }
                                }
                            }
                        }
                    }
                }
            })(wysihtml5.dom);
            (function(e) {
                e.dom.delegate = function(t, n, r, i) {
                    return e.dom.observe(t, r, function(r) {
                        for (var s = r.target, o = e.lang.array(t.querySelectorAll(n)); s && s !== t;) {
                            if (o.contains(s)) {
                                i.call(s, r);
                                break
                            }
                            s = s.parentNode
                        }
                    })
                }
            })(wysihtml5); wysihtml5.dom.getAsDom = function() {
                var e = "abbr,article,aside,audio,bdi,canvas,command,datalist,details,figcaption,figure,footer,header,hgroup,keygen,mark,meter,nav,output,progress,rp,rt,ruby,svg,section,source,summary,time,track,video,wbr".split(",");
                return function(t, n) {
                    var n = n || document,
                        r;
                    if ("object" === typeof t && t.nodeType) r = n.createElement("div"), r.appendChild(t);
                    else if (wysihtml5.browser.supportsHTML5Tags(n)) r = n.createElement("div"), r.innerHTML = t;
                    else {
                        r = n;
                        if (!r._wysihtml5_supportsHTML5Tags) {
                            for (var i = 0, s = e.length; i < s; i++) r.createElement(e[i]);
                            r._wysihtml5_supportsHTML5Tags = !0
                        }
                        r = n;
                        i = r.createElement("div");
                        i.style.display = "none";
                        r.body.appendChild(i);
                        try {
                            i.innerHTML = t
                        } catch (o) {}
                        r.body.removeChild(i);
                        r = i
                    }
                    return r
                }
            }(); wysihtml5.dom.getParentElement = function() {
                function e(e, t) {
                    return !t || !t.length ? !0 : "string" === typeof t ? e === t : wysihtml5.lang.array(t).contains(e)
                }
                return function(t, n, r) {
                    r = r || 50;
                    if (n.className || n.classRegExp) {
                        e: {
                            for (var i = n.nodeName, s = n.className, n = n.classRegExp; r-- && t && "BODY" !== t.nodeName;) {
                                var o;
                                if (o = t.nodeType === wysihtml5.ELEMENT_NODE)
                                    if (o = e(t.nodeName, i)) {
                                        o = s;
                                        var u = (t.className || "").match(n) || [];
                                        o = !o ? !!u.length : u[u.length - 1] === o
                                    }
                                if (o) break e;
                                t = t.parentNode
                            }
                            t = null
                        }
                        return t
                    }
                    e: {
                        i = n.nodeName;
                        for (s = r; s-- && t && "BODY" !== t.nodeName;) {
                            if (e(t.nodeName, i)) break e;
                            t = t.parentNode
                        }
                        t = null
                    }
                    return t
                }
            }(); wysihtml5.dom.getStyle = function() {
                function e(e) {
                    return e.replace(n, function(e) {
                        return e.charAt(1).toUpperCase()
                    })
                }
                var t = {
                        "float": "styleFloat" in document.createElement("div").style ? "styleFloat" : "cssFloat"
                    },
                    n = /\-[a-z]/g;
                return function(n) {
                    return {
                        from: function(r) {
                            if (r.nodeType === wysihtml5.ELEMENT_NODE) {
                                var i = r.ownerDocument,
                                    s = t[n] || e(n),
                                    o = r.style,
                                    u = r.currentStyle,
                                    f = o[s];
                                if (f) return f;
                                if (u) try {
                                    return u[s]
                                } catch (l) {}
                                var s = i.defaultView || i.parentWindow,
                                    i = ("height" === n || "width" === n) && "TEXTAREA" === r.nodeName,
                                    h;
                                if (s.getComputedStyle) return i && (h = o.overflow, o.overflow = "hidden"), r = s.getComputedStyle(r, null).getPropertyValue(n), i && (o.overflow = h || ""), r
                            }
                        }
                    }
                }
            }(); wysihtml5.dom.hasElementWithTagName = function() {
                var e = {},
                    t = 1;
                return function(n, r) {
                    var i = (n._wysihtml5_identifier || (n._wysihtml5_identifier = t++)) + ":" + r,
                        s = e[i];
                    s || (s = e[i] = n.getElementsByTagName(r));
                    return 0 < s.length
                }
            }();
            (function(e) {
                var t = {},
                    n = 1;
                e.dom.hasElementWithClassName = function(r, i) {
                    if (!e.browser.supportsNativeGetElementsByClassName()) return !!r.querySelector("." + i);
                    var s = (r._wysihtml5_identifier || (r._wysihtml5_identifier = n++)) + ":" + i,
                        o = t[s];
                    o || (o = t[s] = r.getElementsByClassName(i));
                    return 0 < o.length
                }
            })(wysihtml5); wysihtml5.dom.insert = function(e) {
                return {
                    after: function(t) {
                        t.parentNode.insertBefore(e, t.nextSibling)
                    },
                    before: function(t) {
                        t.parentNode.insertBefore(e, t)
                    },
                    into: function(t) {
                        t.appendChild(e)
                    }
                }
            }; wysihtml5.dom.insertCSS = function(e) {
                e = e.join("\n");
                return {
                    into: function(t) {
                        var n = t.head || t.getElementsByTagName("head")[0],
                            r = t.createElement("style");
                        r.type = "text/css";
                        r.styleSheet ? r.styleSheet.cssText = e : r.appendChild(t.createTextNode(e));
                        n && n.appendChild(r)
                    }
                }
            }; wysihtml5.dom.observe = function(e, t, n) {
                for (var t = "string" === typeof t ? [t] : t, r, i, s = 0, o = t.length; s < o; s++) i = t[s], e.addEventListener ? e.addEventListener(i, n, !1) : (r = function(t) {
                    "target" in t || (t.target = t.srcElement);
                    t.preventDefault = t.preventDefault || function() {
                        this.returnValue = false
                    };
                    t.stopPropagation = t.stopPropagation || function() {
                        this.cancelBubble = true
                    };
                    n.call(e, t)
                }, e.attachEvent("on" + i, r));
                return {
                    stop: function() {
                        for (var i, s = 0, o = t.length; s < o; s++) i = t[s], e.removeEventListener ? e.removeEventListener(i, n, !1) : e.detachEvent("on" + i, r)
                    }
                }
            }; wysihtml5.dom.parse = function() {
                function e(t, i) {
                    var s = t.childNodes,
                        o = s.length,
                        u;
                    u = n[t.nodeType];
                    var a = 0;
                    u = u && u(t);
                    if (!u) return null;
                    for (a = 0; a < o; a++)(newChild = e(s[a], i)) && u.appendChild(newChild);
                    return i && 1 >= u.childNodes.length && u.nodeName.toLowerCase() === r && !u.attributes.length ? u.firstChild : u
                }

                function t(e, t) {
                    var t = t.toLowerCase(),
                        n;
                    if (n = "IMG" == e.nodeName)
                        if (n = "src" == t) {
                            var r;
                            try {
                                r = e.complete && !e.mozMatchesSelector(":-moz-broken")
                            } catch (i) {
                                e.complete && "complete" === e.readyState && (r = !0)
                            }
                            n = !0 === r
                        }
                    return n ? e.src : u && "outerHTML" in e ? -1 != e.outerHTML.toLowerCase().indexOf(" " + t + "=") ? e.getAttribute(t) : null : e.getAttribute(t)
                }
                var n = {
                        1: function(e) {
                            var n, s, u = o.tags;
                            s = e.nodeName.toLowerCase();
                            n = e.scopeName;
                            if (e._wysihtml5) return null;
                            e._wysihtml5 = 1;
                            if ("wysihtml5-temp" === e.className) return null;
                            n && "HTML" != n && (s = n + ":" + s);
                            "outerHTML" in e && !wysihtml5.browser.autoClosesUnclosedTags() && "P" === e.nodeName && "</p>" !== e.outerHTML.slice(-4).toLowerCase() && (s = "div");
                            if (s in u) {
                                n = u[s];
                                if (!n || n.remove) return null;
                                n = "string" === typeof n ? {
                                    rename_tag: n
                                } : n
                            } else if (e.firstChild) n = {
                                rename_tag: r
                            };
                            else return null;
                            s = e.ownerDocument.createElement(n.rename_tag || s);
                            var u = {},
                                l = n.set_class,
                                p = n.add_class,
                                v = n.set_attributes,
                                m = n.check_attributes,
                                y = o.classes,
                                b = 0,
                                w = [];
                            n = [];
                            var E = [],
                                S = [],
                                x;
                            v && (u = wysihtml5.lang.object(v).clone());
                            if (m)
                                for (x in m)
                                    if (v = a[m[x]]) v = v(t(e, x)), "string" === typeof v && (u[x] = v);
                            l && w.push(l);
                            if (p)
                                for (x in p)
                                    if (v = f[p[x]]) l = v(t(e, x)), "string" === typeof l && w.push(l);
                            y["_wysihtml5-temp-placeholder"] = 1;
                            (S = e.getAttribute("class")) && (w = w.concat(S.split(i)));
                            for (p = w.length; b < p; b++) e = w[b], y[e] && n.push(e);
                            for (y = n.length; y--;) e = n[y], wysihtml5.lang.array(E).contains(e) || E.unshift(e);
                            E.length && (u["class"] = E.join(" "));
                            for (x in u) try {
                                s.setAttribute(x, u[x])
                            } catch (T) {}
                            u.src && ("undefined" !== typeof u.width && s.setAttribute("width", u.width), "undefined" !== typeof u.height && s.setAttribute("height", u.height));
                            return s
                        },
                        3: function(e) {
                            return e.ownerDocument.createTextNode(e.data)
                        }
                    },
                    r = "span",
                    i = /\s+/,
                    s = {
                        tags: {},
                        classes: {}
                    },
                    o = {},
                    u = !wysihtml5.browser.supportsGetAttributeCorrectly(),
                    a = {
                        url: function() {
                            var e = /^https?:\/\//i;
                            return function(t) {
                                return !t || !t.match(e) ? null : t.replace(e, function(e) {
                                    return e.toLowerCase()
                                })
                            }
                        }(),
                        alt: function() {
                            var e = /[^ a-z0-9_\-]/gi;
                            return function(t) {
                                return !t ? "" : t.replace(e, "")
                            }
                        }(),
                        numbers: function() {
                            var e = /\D/g;
                            return function(t) {
                                return (t = (t || "").replace(e, "")) || null
                            }
                        }()
                    },
                    f = {
                        align_img: function() {
                            var e = {
                                left: "wysiwyg-float-left",
                                right: "wysiwyg-float-right"
                            };
                            return function(t) {
                                return e[("" + t).toLowerCase()]
                            }
                        }(),
                        align_text: function() {
                            var e = {
                                left: "wysiwyg-text-align-left",
                                right: "wysiwyg-text-align-right",
                                center: "wysiwyg-text-align-center",
                                justify: "wysiwyg-text-align-justify"
                            };
                            return function(t) {
                                return e[("" + t).toLowerCase()]
                            }
                        }(),
                        clear_br: function() {
                            var e = {
                                left: "wysiwyg-clear-left",
                                right: "wysiwyg-clear-right",
                                both: "wysiwyg-clear-both",
                                all: "wysiwyg-clear-both"
                            };
                            return function(t) {
                                return e[("" + t).toLowerCase()]
                            }
                        }(),
                        size_font: function() {
                            var e = {
                                1: "wysiwyg-font-size-xx-small",
                                2: "wysiwyg-font-size-small",
                                3: "wysiwyg-font-size-medium",
                                4: "wysiwyg-font-size-large",
                                5: "wysiwyg-font-size-x-large",
                                6: "wysiwyg-font-size-xx-large",
                                7: "wysiwyg-font-size-xx-large",
                                "-": "wysiwyg-font-size-smaller",
                                "+": "wysiwyg-font-size-larger"
                            };
                            return function(t) {
                                return e[("" + t).charAt(0)]
                            }
                        }()
                    };
                return function(t, n, r, i) {
                    wysihtml5.lang.object(o).merge(s).merge(n).get();
                    for (var r = r || t.ownerDocument || document, n = r.createDocumentFragment(), u = "string" === typeof t, t = u ? wysihtml5.dom.getAsDom(t, r) : t; t.firstChild;) r = t.firstChild, t.removeChild(r), (r = e(r, i)) && n.appendChild(r);
                    t.innerHTML = "";
                    t.appendChild(n);
                    return u ? wysihtml5.quirks.getCorrectInnerHTML(t) : t
                }
            }(); wysihtml5.dom.removeEmptyTextNodes = function(e) {
                for (var t = wysihtml5.lang.array(e.childNodes).get(), n = t.length, r = 0; r < n; r++) e = t[r], e.nodeType === wysihtml5.TEXT_NODE && "" === e.data && e.parentNode.removeChild(e)
            }; wysihtml5.dom.renameElement = function(e, t) {
                for (var n = e.ownerDocument.createElement(t), r; r = e.firstChild;) n.appendChild(r);
                wysihtml5.dom.copyAttributes(["align", "className"]).from(e).to(n);
                e.parentNode.replaceChild(n, e);
                return n
            }; wysihtml5.dom.replaceWithChildNodes = function(e) {
                if (e.parentNode)
                    if (e.firstChild) {
                        for (var t = e.ownerDocument.createDocumentFragment(); e.firstChild;) t.appendChild(e.firstChild);
                        e.parentNode.replaceChild(t, e)
                    } else e.parentNode.removeChild(e)
            };
            (function(e) {
                function t(e) {
                    var t = e.ownerDocument.createElement("br");
                    e.appendChild(t)
                }
                e.resolveList = function(n) {
                    if (!("MENU" !== n.nodeName && "UL" !== n.nodeName && "OL" !== n.nodeName)) {
                        var r = n.ownerDocument.createDocumentFragment(),
                            i = n.previousSibling,
                            s, o, u;
                        for (i && "block" !== e.getStyle("display").from(i) && t(r); u = n.firstChild;) {
                            for (s = u.lastChild; i = u.firstChild;) o = (o = i === s) && "block" !== e.getStyle("display").from(i) && "BR" !== i.nodeName, r.appendChild(i), o && t(r);
                            u.parentNode.removeChild(u)
                        }
                        n.parentNode.replaceChild(r, n)
                    }
                }
            })(wysihtml5.dom);
            (function(e) {
                var t = document,
                    n = "parent,top,opener,frameElement,frames,localStorage,globalStorage,sessionStorage,indexedDB".split(","),
                    r = "open,close,openDialog,showModalDialog,alert,confirm,prompt,openDatabase,postMessage,XMLHttpRequest,XDomainRequest".split(","),
                    i = ["referrer", "write", "open", "close"];
                e.dom.Sandbox = Base.extend({
                    constructor: function(t, n) {
                        this.callback = t || e.EMPTY_FUNCTION;
                        this.config = e.lang.object({}).merge(n).get();
                        this.iframe = this._createIframe()
                    },
                    insertInto: function(e) {
                        "string" === typeof e && (e = t.getElementById(e));
                        e.appendChild(this.iframe)
                    },
                    getIframe: function() {
                        return this.iframe
                    },
                    getWindow: function() {
                        this._readyError()
                    },
                    getDocument: function() {
                        this._readyError()
                    },
                    destroy: function() {
                        var e = this.getIframe();
                        e.parentNode.removeChild(e)
                    },
                    _readyError: function() {
                        throw Error("wysihtml5.Sandbox: Sandbox iframe isn't loaded yet")
                    },
                    _createIframe: function() {
                        var n = this,
                            r = t.createElement("iframe");
                        r.className = "wysihtml5-sandbox";
                        e.dom.setAttributes({
                            security: "restricted",
                            allowtransparency: "true",
                            frameborder: 0,
                            width: 0,
                            height: 0,
                            marginwidth: 0,
                            marginheight: 0
                        }).on(r);
                        e.browser.throwsMixedContentWarningWhenIframeSrcIsEmpty() && (r.src = "javascript:'<html></html>'");
                        r.onload = function() {
                            r.onreadystatechange = r.onload = null;
                            n._onLoadIframe(r)
                        };
                        r.onreadystatechange = function() {
                            if (/loaded|complete/.test(r.readyState)) {
                                r.onreadystatechange = r.onload = null;
                                n._onLoadIframe(r)
                            }
                        };
                        return r
                    },
                    _onLoadIframe: function(s) {
                        if (e.dom.contains(t.documentElement, s)) {
                            var o = this,
                                u = s.contentWindow,
                                f = s.contentWindow.document,
                                l = this._getHtml({
                                    charset: t.characterSet || t.charset || "utf-8",
                                    stylesheets: this.config.stylesheets
                                });
                            f.open("text/html", "replace");
                            f.write(l);
                            f.close();
                            this.getWindow = function() {
                                return s.contentWindow
                            };
                            this.getDocument = function() {
                                return s.contentWindow.document
                            };
                            u.onerror = function(e, t, n) {
                                throw Error("wysihtml5.Sandbox: " + e, t, n)
                            };
                            if (!e.browser.supportsSandboxedIframes()) {
                                var h, l = 0;
                                for (h = n.length; l < h; l++) this._unset(u, n[l]);
                                l = 0;
                                for (h = r.length; l < h; l++) this._unset(u, r[l], e.EMPTY_FUNCTION);
                                l = 0;
                                for (h = i.length; l < h; l++) this._unset(f, i[l]);
                                this._unset(f, "cookie", "", !0)
                            }
                            this.loaded = !0;
                            setTimeout(function() {
                                o.callback(o)
                            }, 0)
                        }
                    },
                    _getHtml: function(t) {
                        var n = t.stylesheets,
                            r = "",
                            i = 0,
                            s;
                        if (n = "string" === typeof n ? [n] : n)
                            for (s = n.length; i < s; i++) r += '<link rel="stylesheet" href="' + n[i] + '">';
                        t.stylesheets = r;
                        return e.lang.string('<!DOCTYPE html><html><head><meta charset="#{charset}">#{stylesheets}</head><body></body></html>').interpolate(t)
                    },
                    _unset: function(t, n, r, i) {
                        try {
                            t[n] = r
                        } catch (s) {}
                        try {
                            t.__defineGetter__(n, function() {
                                return r
                            })
                        } catch (o) {}
                        if (i) try {
                            t.__defineSetter__(n, function() {})
                        } catch (u) {}
                        if (!e.browser.crashesWhenDefineProperty(n)) try {
                            var a = {
                                get: function() {
                                    return r
                                }
                            };
                            i && (a.set = function() {});
                            Object.defineProperty(t, n, a)
                        } catch (f) {}
                    }
                })
            })(wysihtml5);
            (function() {
                var e = {
                    className: "class"
                };
                wysihtml5.dom.setAttributes = function(t) {
                    return {
                        on: function(n) {
                            for (var r in t) n.setAttribute(e[r] || r, t[r])
                        }
                    }
                }
            })(); wysihtml5.dom.setStyles = function(e) {
                return {
                    on: function(t) {
                        t = t.style;
                        if ("string" === typeof e) t.cssText += ";" + e;
                        else
                            for (var n in e) "float" === n ? (t.cssFloat = e[n], t.styleFloat = e[n]) : t[n] = e[n]
                    }
                }
            };
            (function(e) {
                e.simulatePlaceholder = function(t, n, r) {
                    var i = function() {
                            n.hasPlaceholderSet() && n.clear();
                            e.removeClass(n.element, "placeholder")
                        },
                        s = function() {
                            n.isEmpty() && (n.setValue(r), e.addClass(n.element, "placeholder"))
                        };
                    t.observe("set_placeholder", s).observe("unset_placeholder", i).observe("focus:composer", i).observe("paste:composer", i).observe("blur:composer", s);
                    s()
                }
            })(wysihtml5.dom);
            (function(e) {
                var t = document.documentElement;
                "textContent" in t ? (e.setTextContent = function(e, t) {
                    e.textContent = t
                }, e.getTextContent = function(e) {
                    return e.textContent
                }) : "innerText" in t ? (e.setTextContent = function(e, t) {
                    e.innerText = t
                }, e.getTextContent = function(e) {
                    return e.innerText
                }) : (e.setTextContent = function(e, t) {
                    e.nodeValue = t
                }, e.getTextContent = function(e) {
                    return e.nodeValue
                })
            })(wysihtml5.dom); wysihtml5.quirks.cleanPastedHTML = function() {
                var e = {
                    "a u": wysihtml5.dom.replaceWithChildNodes
                };
                return function(t, n, r) {
                    var n = n || e,
                        r = r || t.ownerDocument || document,
                        i = "string" === typeof t,
                        s, o, u, a = 0,
                        t = i ? wysihtml5.dom.getAsDom(t, r) : t;
                    for (u in n) {
                        s = t.querySelectorAll(u);
                        r = n[u];
                        for (o = s.length; a < o; a++) r(s[a])
                    }
                    return i ? t.innerHTML : t
                }
            }();
            (function(e) {
                var t = e.dom;
                e.quirks.ensureProperClearing = function() {
                    var e = function() {
                        var e = this;
                        setTimeout(function() {
                            var t = e.innerHTML.toLowerCase();
                            if ("<p> </p>" == t || "<p> </p><p> </p>" == t) e.innerHTML = ""
                        }, 0)
                    };
                    return function(n) {
                        t.observe(n.element, ["cut", "keydown"], e)
                    }
                }();
                e.quirks.ensureProperClearingOfLists = function() {
                    var n = ["OL", "UL", "MENU"];
                    return function(r) {
                        t.observe(r.element, "keydown", function(i) {
                            if (i.keyCode === e.BACKSPACE_KEY) {
                                var s = r.selection.getSelectedNode(),
                                    i = r.element;
                                i.firstChild && e.lang.array(n).contains(i.firstChild.nodeName) && (s = t.getParentElement(s, {
                                    nodeName: n
                                })) && s == i.firstChild && 1 >= s.childNodes.length && (s.firstChild ? "" === s.firstChild.innerHTML : 1) && s.parentNode.removeChild(s)
                            }
                        })
                    }
                }()
            })(wysihtml5);
            (function(e) {
                e.quirks.getCorrectInnerHTML = function(t) {
                    var n = t.innerHTML;
                    if (-1 === n.indexOf("%7E")) return n;
                    var t = t.querySelectorAll("[href*='~'], [src*='~']"),
                        r, i, s, o;
                    o = 0;
                    for (s = t.length; o < s; o++) r = t[o].href || t[o].src, i = e.lang.string(r).replace("~").by("%7E"), n = e.lang.string(n).replace(i).by(r);
                    return n
                }
            })(wysihtml5);
            (function(e) {
                var t = e.dom,
                    n = "LI,P,H1,H2,H3,H4,H5,H6".split(","),
                    r = ["UL", "OL", "MENU"];
                e.quirks.insertLineBreakOnReturn = function(i) {
                    function s(n) {
                        if (n = t.getParentElement(n, {
                                nodeName: ["P", "DIV"]
                            }, 2)) {
                            var r = document.createTextNode(e.INVISIBLE_SPACE);
                            t.insert(r).before(n);
                            t.replaceWithChildNodes(n);
                            i.selection.selectNode(r)
                        }
                    }
                    t.observe(i.element.ownerDocument, "keydown", function(o) {
                        var u = o.keyCode;
                        if (!(o.shiftKey || u !== e.ENTER_KEY && u !== e.BACKSPACE_KEY)) {
                            var l = i.selection.getSelectedNode();
                            (l = t.getParentElement(l, {
                                nodeName: n
                            }, 4)) ? "LI" === l.nodeName && (u === e.ENTER_KEY || u === e.BACKSPACE_KEY) ? setTimeout(function() {
                                var e = i.selection.getSelectedNode(),
                                    n;
                                e && ((n = t.getParentElement(e, {
                                    nodeName: r
                                }, 2)) || s(e))
                            }, 0) : l.nodeName.match(/H[1-6]/) && u === e.ENTER_KEY && setTimeout(function() {
                                s(i.selection.getSelectedNode())
                            }, 0): u === e.ENTER_KEY && !e.browser.insertsLineBreaksOnReturn() && (i.commands.exec("insertLineBreak"), o.preventDefault())
                        }
                    })
                }
            })(wysihtml5);
            (function(e) {
                e.quirks.redraw = function(t) {
                    e.dom.addClass(t, "wysihtml5-quirks-redraw");
                    e.dom.removeClass(t, "wysihtml5-quirks-redraw");
                    try {
                        var n = t.ownerDocument;
                        n.execCommand("italic", !1, null);
                        n.execCommand("italic", !1, null)
                    } catch (r) {}
                }
            })(wysihtml5);
            (function(e) {
                var t = e.dom;
                e.Selection = Base.extend({
                    constructor: function(e) {
                        window.rangy.init();
                        this.editor = e;
                        this.composer = e.composer;
                        this.doc = this.composer.doc
                    },
                    getBookmark: function() {
                        var e = this.getRange();
                        return e && e.cloneRange()
                    },
                    setBookmark: function(e) {
                        e && this.setSelection(e)
                    },
                    setBefore: function(e) {
                        var t = rangy.createRange(this.doc);
                        t.setStartBefore(e);
                        t.setEndBefore(e);
                        return this.setSelection(t)
                    },
                    setAfter: function(e) {
                        var t = rangy.createRange(this.doc);
                        t.setStartAfter(e);
                        t.setEndAfter(e);
                        return this.setSelection(t)
                    },
                    selectNode: function(n) {
                        var r = rangy.createRange(this.doc),
                            i = n.nodeType === e.ELEMENT_NODE,
                            s = "canHaveHTML" in n ? n.canHaveHTML : "IMG" !== n.nodeName,
                            o = i ? n.innerHTML : n.data,
                            o = "" === o || o === e.INVISIBLE_SPACE,
                            u = t.getStyle("display").from(n),
                            u = "block" === u || "list-item" === u;
                        if (o && i && s) try {
                            n.innerHTML = e.INVISIBLE_SPACE
                        } catch (a) {}
                        s ? r.selectNodeContents(n) : r.selectNode(n);
                        s && o && i ? r.collapse(u) : s && o && (r.setStartAfter(n), r.setEndAfter(n));
                        this.setSelection(r)
                    },
                    getSelectedNode: function(e) {
                        if (e && this.doc.selection && "Control" === this.doc.selection.type && (e = this.doc.selection.createRange()) && e.length) return e.item(0);
                        e = this.getSelection(this.doc);
                        return e.focusNode === e.anchorNode ? e.focusNode : (e = this.getRange(this.doc)) ? e.commonAncestorContainer : this.doc.body
                    },
                    executeAndRestore: function(t, n) {
                        var r = this.doc.body,
                            i = n && r.scrollTop,
                            s = n && r.scrollLeft,
                            o = '<span class="_wysihtml5-temp-placeholder">' + e.INVISIBLE_SPACE + "</span>",
                            u = this.getRange(this.doc);
                        if (u) {
                            o = u.createContextualFragment(o);
                            u.insertNode(o);
                            try {
                                t(u.startContainer, u.endContainer)
                            } catch (a) {
                                setTimeout(function() {
                                    throw a
                                }, 0)
                            }(caretPlaceholder = this.doc.querySelector("._wysihtml5-temp-placeholder")) ? (u = rangy.createRange(this.doc), u.selectNode(caretPlaceholder), u.deleteContents(), this.setSelection(u)) : r.focus();
                            n && (r.scrollTop = i, r.scrollLeft = s);
                            try {
                                caretPlaceholder.parentNode.removeChild(caretPlaceholder)
                            } catch (f) {}
                        } else t(r, r)
                    },
                    executeAndRestoreSimple: function(e) {
                        var t, n, r = this.getRange(),
                            i = this.doc.body,
                            s;
                        if (r) {
                            t = r.getNodes([3]);
                            i = t[0] || r.startContainer;
                            s = t[t.length - 1] || r.endContainer;
                            t = i === r.startContainer ? r.startOffset : 0;
                            n = s === r.endContainer ? r.endOffset : s.length;
                            try {
                                e(r.startContainer, r.endContainer)
                            } catch (o) {
                                setTimeout(function() {
                                    throw o
                                }, 0)
                            }
                            e = rangy.createRange(this.doc);
                            try {
                                e.setStart(i, t)
                            } catch (u) {}
                            try {
                                e.setEnd(s, n)
                            } catch (a) {}
                            try {
                                this.setSelection(e)
                            } catch (f) {}
                        } else e(i, i)
                    },
                    insertHTML: function(e) {
                        var e = rangy.createRange(this.doc).createContextualFragment(e),
                            t = e.lastChild;
                        this.insertNode(e);
                        t && this.setAfter(t)
                    },
                    insertNode: function(e) {
                        var t = this.getRange();
                        t && t.insertNode(e)
                    },
                    surround: function(e) {
                        var t = this.getRange();
                        if (t) try {
                            t.surroundContents(e), this.selectNode(e)
                        } catch (n) {
                            e.appendChild(t.extractContents()), t.insertNode(e)
                        }
                    },
                    scrollIntoView: function() {
                        var t = this.doc,
                            n = t.documentElement.scrollHeight > t.documentElement.offsetHeight,
                            r;
                        if (!(r = t._wysihtml5ScrollIntoViewElement)) r = t.createElement("span"), r.innerHTML = e.INVISIBLE_SPACE;
                        r = t._wysihtml5ScrollIntoViewElement = r;
                        if (n) {
                            this.insertNode(r);
                            var n = r,
                                i = 0;
                            if (n.parentNode) {
                                do i += n.offsetTop || 0, n = n.offsetParent;
                                while (n)
                            }
                            n = i;
                            r.parentNode.removeChild(r);
                            n > t.body.scrollTop && (t.body.scrollTop = n)
                        }
                    },
                    selectLine: function() {
                        e.browser.supportsSelectionModify() ? this._selectLine_W3C() : this.doc.selection && this._selectLine_MSIE()
                    },
                    _selectLine_W3C: function() {
                        var e = this.doc.defaultView.getSelection();
                        e.modify("extend", "left", "lineboundary");
                        e.modify("extend", "right", "lineboundary")
                    },
                    _selectLine_MSIE: function() {
                        var e = this.doc.selection.createRange(),
                            t = e.boundingTop,
                            n = this.doc.body.scrollWidth,
                            r;
                        if (e.moveToPoint) {
                            0 === t && (r = this.doc.createElement("span"), this.insertNode(r), t = r.offsetTop, r.parentNode.removeChild(r));
                            t += 1;
                            for (r = -10; r < n; r += 2) try {
                                e.moveToPoint(r, t);
                                break
                            } catch (i) {}
                            for (r = this.doc.selection.createRange(); 0 <= n; n--) try {
                                r.moveToPoint(n, t);
                                break
                            } catch (s) {}
                            e.setEndPoint("EndToEnd", r);
                            e.select()
                        }
                    },
                    getText: function() {
                        var e = this.getSelection();
                        return e ? e.toString() : ""
                    },
                    getNodes: function(e, t) {
                        var n = this.getRange();
                        return n ? n.getNodes([e], t) : []
                    },
                    getRange: function() {
                        var e = this.getSelection();
                        return e && e.rangeCount && e.getRangeAt(0)
                    },
                    getSelection: function() {
                        return rangy.getSelection(this.doc.defaultView || this.doc.parentWindow)
                    },
                    setSelection: function(e) {
                        return rangy.getSelection(this.doc.defaultView || this.doc.parentWindow).setSingleRange(e)
                    }
                })
            })(wysihtml5);
            (function(e, t) {
                function n(e, n) {
                    return t.dom.isCharacterDataNode(e) ? 0 == n ? !!e.previousSibling : n == e.length ? !!e.nextSibling : !0 : 0 < n && n < e.childNodes.length
                }

                function r(e, n, i) {
                    var s;
                    t.dom.isCharacterDataNode(n) && (0 == i ? (i = t.dom.getNodeIndex(n), n = n.parentNode) : i == n.length ? (i = t.dom.getNodeIndex(n) + 1, n = n.parentNode) : s = t.dom.splitDataNode(n, i));
                    if (!s) {
                        s = n.cloneNode(!1);
                        s.id && s.removeAttribute("id");
                        for (var o; o = n.childNodes[i];) s.appendChild(o);
                        t.dom.insertAfter(s, n)
                    }
                    return n == e ? s : r(e, s.parentNode, t.dom.getNodeIndex(s))
                }

                function i(t) {
                    this.firstTextNode = (this.isElementMerge = t.nodeType == e.ELEMENT_NODE) ? t.lastChild : t;
                    this.textNodes = [this.firstTextNode]
                }

                function s(e, t, n, r) {
                    this.tagNames = e || [o];
                    this.cssClass = t || "";
                    this.similarClassRegExp = n;
                    this.normalize = r;
                    this.applyToAnyTagName = !1
                }
                var o = "span",
                    u = /\s+/g;
                i.prototype = {
                    doMerge: function() {
                        for (var e = [], t, n, r = 0, i = this.textNodes.length; r < i; ++r) t = this.textNodes[r], n = t.parentNode, e[r] = t.data, r && (n.removeChild(t), n.hasChildNodes() || n.parentNode.removeChild(n));
                        return this.firstTextNode.data = e = e.join("")
                    },
                    getLength: function() {
                        for (var e = this.textNodes.length, t = 0; e--;) t += this.textNodes[e].length;
                        return t
                    },
                    toString: function() {
                        for (var e = [], t = 0, n = this.textNodes.length; t < n; ++t) e[t] = "'" + this.textNodes[t].data + "'";
                        return "[Merge(" + e.join(",") + ")]"
                    }
                };
                s.prototype = {
                    getAncestorWithClass: function(n) {
                        for (var r; n;) {
                            if (this.cssClass)
                                if (r = this.cssClass, n.className) {
                                    var i = n.className.match(this.similarClassRegExp) || [];
                                    r = i[i.length - 1] === r
                                } else r = !1;
                            else r = !0;
                            if (n.nodeType == e.ELEMENT_NODE && t.dom.arrayContains(this.tagNames, n.tagName.toLowerCase()) && r) return n;
                            n = n.parentNode
                        }
                        return !1
                    },
                    postApply: function(e, t) {
                        for (var n = e[0], r = e[e.length - 1], s = [], o, u = n, a = r, f = 0, l = r.length, c, h, p = 0, d = e.length; p < d; ++p)
                            if (c = e[p], h = this.getAdjacentMergeableTextNode(c.parentNode, !1)) {
                                if (o || (o = new i(h), s.push(o)), o.textNodes.push(c), c === n && (u = o.firstTextNode, f = u.length), c === r) a = o.firstTextNode, l = o.getLength()
                            } else o = null;
                        if (n = this.getAdjacentMergeableTextNode(r.parentNode, !0)) o || (o = new i(r), s.push(o)), o.textNodes.push(n);
                        if (s.length) {
                            p = 0;
                            for (d = s.length; p < d; ++p) s[p].doMerge();
                            t.setStart(u, f);
                            t.setEnd(a, l)
                        }
                    },
                    getAdjacentMergeableTextNode: function(t, n) {
                        var r = t.nodeType == e.TEXT_NODE,
                            i = r ? t.parentNode : t,
                            s = n ? "nextSibling" : "previousSibling";
                        if (r) {
                            if ((r = t[s]) && r.nodeType == e.TEXT_NODE) return r
                        } else if ((r = i[s]) && this.areElementsMergeable(t, r)) return r[n ? "firstChild" : "lastChild"];
                        return null
                    },
                    areElementsMergeable: function(e, n) {
                        var r;
                        if (r = t.dom.arrayContains(this.tagNames, (e.tagName || "").toLowerCase()))
                            if (r = t.dom.arrayContains(this.tagNames, (n.tagName || "").toLowerCase()))
                                if (r = e.className.replace(u, " ") == n.className.replace(u, " ")) e: if (e.attributes.length != n.attributes.length) r = !1;
                                    else {
                                        r = 0;
                                        for (var i = e.attributes.length, s, o; r < i; ++r)
                                            if (s = e.attributes[r], o = s.name, "class" != o && (o = n.attributes.getNamedItem(o), s.specified != o.specified || s.specified && s.nodeValue !== o.nodeValue)) {
                                                r = !1;
                                                break e
                                            }
                                        r = !0
                                    }
                        return r
                    },
                    createContainer: function(e) {
                        e = e.createElement(this.tagNames[0]);
                        this.cssClass && (e.className = this.cssClass);
                        return e
                    },
                    applyToTextNode: function(e) {
                        var n = e.parentNode;
                        1 == n.childNodes.length && t.dom.arrayContains(this.tagNames, n.tagName.toLowerCase()) ? this.cssClass && (e = this.cssClass, n.className ? (n.className && (n.className = n.className.replace(this.similarClassRegExp, "")), n.className += " " + e) : n.className = e) : (n = this.createContainer(t.dom.getDocument(e)), e.parentNode.insertBefore(n, e), n.appendChild(e))
                    },
                    isRemovable: function(n) {
                        return t.dom.arrayContains(this.tagNames, n.tagName.toLowerCase()) && e.lang.string(n.className).trim() == this.cssClass
                    },
                    undoToTextNode: function(e, t, i) {
                        t.containsNode(i) || (e = t.cloneRange(), e.selectNode(i), e.isPointInRange(t.endContainer, t.endOffset) && n(t.endContainer, t.endOffset) && (r(i, t.endContainer, t.endOffset), t.setEndAfter(i)), e.isPointInRange(t.startContainer, t.startOffset) && n(t.startContainer, t.startOffset) && (i = r(i, t.startContainer, t.startOffset)));
                        this.similarClassRegExp && i.className && (i.className = i.className.replace(this.similarClassRegExp, ""));
                        if (this.isRemovable(i)) {
                            t = i;
                            for (i = t.parentNode; t.firstChild;) i.insertBefore(t.firstChild, t);
                            i.removeChild(t)
                        }
                    },
                    applyToRange: function(t) {
                        var n = t.getNodes([e.TEXT_NODE]);
                        if (!n.length) try {
                            var r = this.createContainer(t.endContainer.ownerDocument);
                            t.surroundContents(r);
                            this.selectNode(t, r);
                            return
                        } catch (i) {}
                        t.splitBoundaries();
                        n = t.getNodes([e.TEXT_NODE]);
                        if (n.length) {
                            for (var s = 0, o = n.length; s < o; ++s) r = n[s], this.getAncestorWithClass(r) || this.applyToTextNode(r);
                            t.setStart(n[0], 0);
                            r = n[n.length - 1];
                            t.setEnd(r, r.length);
                            this.normalize && this.postApply(n, t)
                        }
                    },
                    undoToRange: function(t) {
                        var n = t.getNodes([e.TEXT_NODE]),
                            r, i;
                        n.length ? (t.splitBoundaries(), n = t.getNodes([e.TEXT_NODE])) : (n = t.endContainer.ownerDocument.createTextNode(e.INVISIBLE_SPACE), t.insertNode(n), t.selectNode(n), n = [n]);
                        for (var s = 0, o = n.length; s < o; ++s) r = n[s], (i = this.getAncestorWithClass(r)) && this.undoToTextNode(r, t, i);
                        1 == o ? this.selectNode(t, n[0]) : (t.setStart(n[0], 0), r = n[n.length - 1], t.setEnd(r, r.length), this.normalize && this.postApply(n, t))
                    },
                    selectNode: function(t, n) {
                        var r = n.nodeType === e.ELEMENT_NODE,
                            i = "canHaveHTML" in n ? n.canHaveHTML : !0,
                            s = r ? n.innerHTML : n.data;
                        if ((s = "" === s || s === e.INVISIBLE_SPACE) && r && i) try {
                            n.innerHTML = e.INVISIBLE_SPACE
                        } catch (o) {}
                        t.selectNodeContents(n);
                        s && r ? t.collapse(!1) : s && (t.setStartAfter(n), t.setEndAfter(n))
                    },
                    getTextSelectedByRange: function(e, t) {
                        var n = t.cloneRange();
                        n.selectNodeContents(e);
                        var r = n.intersection(t),
                            r = r ? r.toString() : "";
                        n.detach();
                        return r
                    },
                    isAppliedToRange: function(t) {
                        var n = [],
                            r, i = t.getNodes([e.TEXT_NODE]);
                        if (!i.length) return (r = this.getAncestorWithClass(t.startContainer)) ? [r] : !1;
                        for (var s = 0, o = i.length, u; s < o; ++s) {
                            u = this.getTextSelectedByRange(i[s], t);
                            r = this.getAncestorWithClass(i[s]);
                            if ("" != u && !r) return !1;
                            n.push(r)
                        }
                        return n
                    },
                    toggleRange: function(e) {
                        this.isAppliedToRange(e) ? this.undoToRange(e) : this.applyToRange(e)
                    }
                };
                e.selection.HTMLApplier = s
            })(wysihtml5, rangy); wysihtml5.Commands = Base.extend({
                constructor: function(e) {
                    this.editor = e;
                    this.composer = e.composer;
                    this.doc = this.composer.doc
                },
                support: function(e) {
                    return wysihtml5.browser.supportsCommand(this.doc, e)
                },
                exec: function(e, t) {
                    var n = wysihtml5.commands[e],
                        r = n && n.exec;
                    this.editor.fire("beforecommand:composer");
                    if (r) return r.call(n, this.composer, e, t);
                    try {
                        return this.doc.execCommand(e, !1, t)
                    } catch (i) {}
                    this.editor.fire("aftercommand:composer")
                },
                state: function(e, t) {
                    var n = wysihtml5.commands[e],
                        r = n && n.state;
                    if (r) return r.call(n, this.composer, e, t);
                    try {
                        return this.doc.queryCommandState(e)
                    } catch (i) {
                        return !1
                    }
                },
                value: function(e) {
                    var t = wysihtml5.commands[e],
                        n = t && t.value;
                    if (n) return n.call(t, this.composer, e);
                    try {
                        return this.doc.queryCommandValue(e)
                    } catch (r) {
                        return null
                    }
                }
            });
            (function(e) {
                e.commands.bold = {
                    exec: function(t, n) {
                        return e.commands.formatInline.exec(t, n, "b")
                    },
                    state: function(t, n) {
                        return e.commands.formatInline.state(t, n, "b")
                    },
                    value: function() {}
                }
            })(wysihtml5);
            (function(e) {
                function t(t, s) {
                    var o = t.doc,
                        u = "_wysihtml5-temp-" + +(new Date),
                        f = 0,
                        l, c, h;
                    e.commands.formatInline.exec(t, n, r, u, /non-matching-class/g);
                    l = o.querySelectorAll(r + "." + u);
                    for (u = l.length; f < u; f++)
                        for (h in c = l[f], c.removeAttribute("class"), s) c.setAttribute(h, s[h]);
                    f = c;
                    1 === u && (h = i.getTextContent(c), u = !!c.querySelector("*"), h = "" === h || h === e.INVISIBLE_SPACE, !u && h && (i.setTextContent(c, c.href), o = o.createTextNode(" "), t.selection.setAfter(c), t.selection.insertNode(o), f = o));
                    t.selection.setAfter(f)
                }
                var n, r = "A",
                    i = e.dom;
                e.commands.createLink = {
                    exec: function(e, n, r) {
                        var s = this.state(e, n);
                        s ? e.selection.executeAndRestore(function() {
                            for (var e = s.length, t = 0, n, r, o; t < e; t++) n = s[t], r = i.getParentElement(n, {
                                nodeName: "code"
                            }), o = i.getTextContent(n), o.match(i.autoLink.URL_REG_EXP) && !r ? i.renameElement(n, "code") : i.replaceWithChildNodes(n)
                        }) : (r = "object" === typeof r ? r : {
                            href: r
                        }, t(e, r))
                    },
                    state: function(t, n) {
                        return e.commands.formatInline.state(t, n, "A")
                    },
                    value: function() {
                        return n
                    }
                }
            })(wysihtml5);
            (function(e) {
                var t = /wysiwyg-font-size-[a-z]+/g;
                e.commands.fontSize = {
                    exec: function(n, r, i) {
                        return e.commands.formatInline.exec(n, r, "span", "wysiwyg-font-size-" + i, t)
                    },
                    state: function(n, r, i) {
                        return e.commands.formatInline.state(n, r, "span", "wysiwyg-font-size-" + i, t)
                    },
                    value: function() {}
                }
            })(wysihtml5);
            (function(e) {
                var t = /wysiwyg-color-[a-z]+/g;
                e.commands.foreColor = {
                    exec: function(n, r, i) {
                        return e.commands.formatInline.exec(n, r, "span", "wysiwyg-color-" + i, t)
                    },
                    state: function(n, r, i) {
                        return e.commands.formatInline.state(n, r, "span", "wysiwyg-color-" + i, t)
                    },
                    value: function() {}
                }
            })(wysihtml5);
            (function(e) {
                function t(t) {
                    for (t = t.previousSibling; t && t.nodeType === e.TEXT_NODE && !e.lang.string(t.data).trim();) t = t.previousSibling;
                    return t
                }

                function n(t) {
                    for (t = t.nextSibling; t && t.nodeType === e.TEXT_NODE && !e.lang.string(t.data).trim();) t = t.nextSibling;
                    return t
                }

                function r(e) {
                    return "BR" === e.nodeName || "block" === o.getStyle("display").from(e) ? !0 : !1
                }

                function i(t, n, r, i) {
                    if (i) var s = o.observe(t, "DOMNodeInserted", function(t) {
                        var t = t.target,
                            n;
                        t.nodeType === e.ELEMENT_NODE && (n = o.getStyle("display").from(t), "inline" !== n.substr(0, 6) && (t.className += " " + i))
                    });
                    t.execCommand(n, !1, r);
                    s && s.stop()
                }

                function s(e, r) {
                    e.selection.selectLine();
                    e.selection.surround(r);
                    var i = n(r),
                        s = t(r);
                    i && "BR" === i.nodeName && i.parentNode.removeChild(i);
                    s && "BR" === s.nodeName && s.parentNode.removeChild(s);
                    (i = r.lastChild) && "BR" === i.nodeName && i.parentNode.removeChild(i);
                    e.selection.selectNode(r)
                }
                var o = e.dom,
                    u = "H1,H2,H3,H4,H5,H6,P,BLOCKQUOTE,DIV".split(",");
                e.commands.formatBlock = {
                    exec: function(l, p, v, m, g) {
                        var y = l.doc,
                            w = this.state(l, p, v, m, g),
                            E, v = "string" === typeof v ? v.toUpperCase() : v;
                        if (w) l.selection.executeAndRestoreSimple(function() {
                            g && (w.className = w.className.replace(g, ""));
                            var i = !!e.lang.string(w.className).trim();
                            if (!i && w.nodeName === (v || "DIV")) {
                                var i = w,
                                    s = i.ownerDocument,
                                    u = n(i),
                                    f = t(i);
                                u && !r(u) && i.parentNode.insertBefore(s.createElement("br"), u);
                                f && !r(f) && i.parentNode.insertBefore(s.createElement("br"), i);
                                o.replaceWithChildNodes(w)
                            } else i && o.renameElement(w, "DIV")
                        });
                        else {
                            if (null === v || e.lang.array(u).contains(v))
                                if (E = l.selection.getSelectedNode(), w = o.getParentElement(E, {
                                        nodeName: u
                                    })) {
                                    l.selection.executeAndRestoreSimple(function() {
                                        v && (w = o.renameElement(w, v));
                                        if (m) {
                                            var e = w;
                                            e.className ? (e.className = e.className.replace(g, ""), e.className += " " + m) : e.className = m
                                        }
                                    });
                                    return
                                }
                            l.commands.support(p) ? i(y, p, v || "DIV", m) : (w = y.createElement(v || "DIV"), m && (w.className = m), s(l, w))
                        }
                    },
                    state: function(e, t, n, r, i) {
                        n = "string" === typeof n ? n.toUpperCase() : n;
                        e = e.selection.getSelectedNode();
                        return o.getParentElement(e, {
                            nodeName: n,
                            className: r,
                            classRegExp: i
                        })
                    },
                    value: function() {}
                }
            })(wysihtml5);
            (function(e) {
                function t(t, i, s) {
                    var o = t + ":" + i;
                    if (!r[o]) {
                        var u = r,
                            f = e.selection.HTMLApplier,
                            l = n[t],
                            t = l ? [t.toLowerCase(), l.toLowerCase()] : [t.toLowerCase()];
                        u[o] = new f(t, i, s, !0)
                    }
                    return r[o]
                }
                var n = {
                        strong: "b",
                        em: "i",
                        b: "strong",
                        i: "em"
                    },
                    r = {};
                e.commands.formatInline = {
                    exec: function(e, n, r, i, s) {
                        n = e.selection.getRange();
                        if (!n) return !1;
                        t(r, i, s).toggleRange(n);
                        e.selection.setSelection(n)
                    },
                    state: function(r, i, s, o, u) {
                        var i = r.doc,
                            f = n[s] || s;
                        if (!e.dom.hasElementWithTagName(i, s) && !e.dom.hasElementWithTagName(i, f) || o && !e.dom.hasElementWithClassName(i, o)) return !1;
                        r = r.selection.getRange();
                        return !r ? !1 : t(s, o, u).isAppliedToRange(r)
                    },
                    value: function() {}
                }
            })(wysihtml5);
            (function(e) {
                e.commands.insertHTML = {
                    exec: function(e, t, n) {
                        e.commands.support(t) ? e.doc.execCommand(t, !1, n) : e.selection.insertHTML(n)
                    },
                    state: function() {
                        return !1
                    },
                    value: function() {}
                }
            })(wysihtml5);
            (function(e) {
                e.commands.insertImage = {
                    exec: function(t, n, r) {
                        var r = "object" === typeof r ? r : {
                                src: r
                            },
                            i = t.doc,
                            n = this.state(t),
                            s;
                        if (n) t.selection.setBefore(n), r = n.parentNode, r.removeChild(n), e.dom.removeEmptyTextNodes(r), "A" === r.nodeName && !r.firstChild && (t.selection.setAfter(r), r.parentNode.removeChild(r)), e.quirks.redraw(t.element);
                        else {
                            n = i.createElement("IMG");
                            for (s in r) n[s] = r[s];
                            t.selection.insertNode(n);
                            e.browser.hasProblemsSettingCaretAfterImg() ? (r = i.createTextNode(e.INVISIBLE_SPACE), t.selection.insertNode(r), t.selection.setAfter(r)) : t.selection.setAfter(n)
                        }
                    },
                    state: function(t) {
                        var n;
                        if (!e.dom.hasElementWithTagName(t.doc, "IMG")) return !1;
                        n = t.selection.getSelectedNode();
                        if (!n) return !1;
                        if ("IMG" === n.nodeName) return n;
                        if (n.nodeType !== e.ELEMENT_NODE) return !1;
                        n = t.selection.getText();
                        if (n = e.lang.string(n).trim()) return !1;
                        t = t.selection.getNodes(e.ELEMENT_NODE, function(e) {
                            return "IMG" === e.nodeName
                        });
                        return 1 !== t.length ? !1 : t[0]
                    },
                    value: function(e) {
                        return (e = this.state(e)) && e.src
                    }
                }
            })(wysihtml5);
            (function(e) {
                var t = "<br>" + (e.browser.needsSpaceAfterLineBreak() ? " " : "");
                e.commands.insertLineBreak = {
                    exec: function(n, r) {
                        n.commands.support(r) ? (n.doc.execCommand(r, !1, null), e.browser.autoScrollsToCaret() || n.selection.scrollIntoView()) : n.commands.exec("insertHTML", t)
                    },
                    state: function() {
                        return !1
                    },
                    value: function() {}
                }
            })(wysihtml5);
            (function(e) {
                e.commands.insertOrderedList = {
                    exec: function(t, n) {
                        var r = t.doc,
                            i, s, o;
                        t.commands.support(n) ? r.execCommand(n, !1, null) : (i = t.selection.getSelectedNode(), (o = e.dom.getParentElement(i, {
                            nodeName: ["UL", "OL"]
                        }, 4)) ? t.selection.executeAndRestoreSimple(function() {
                            "OL" === o.nodeName ? e.dom.resolveList(o) : ("UL" === o.nodeName || "MENU" === o.nodeName) && e.dom.renameElement(o, "ol")
                        }) : (s = r.createElement("span"), t.selection.surround(s), r = "" === s.innerHTML || s.innerHTML === e.INVISIBLE_SPACE, t.selection.executeAndRestoreSimple(function() {
                            o = e.dom.convertToList(s, "ol")
                        }), r && t.selection.selectNode(o.querySelector("li"))))
                    },
                    state: function(e, t) {
                        try {
                            return e.doc.queryCommandState(t)
                        } catch (n) {
                            return !1
                        }
                    },
                    value: function() {}
                }
            })(wysihtml5);
            (function(e) {
                e.commands.insertUnorderedList = {
                    exec: function(t, n) {
                        var r = t.doc,
                            i, s, o;
                        t.commands.support(n) ? r.execCommand(n, !1, null) : (i = t.selection.getSelectedNode(), (o = e.dom.getParentElement(i, {
                            nodeName: ["UL", "OL"]
                        })) ? t.selection.executeAndRestoreSimple(function() {
                            "UL" === o.nodeName ? e.dom.resolveList(o) : ("OL" === o.nodeName || "MENU" === o.nodeName) && e.dom.renameElement(o, "ul")
                        }) : (s = r.createElement("span"), t.selection.surround(s), r = "" === s.innerHTML || s.innerHTML === e.INVISIBLE_SPACE, t.selection.executeAndRestoreSimple(function() {
                            o = e.dom.convertToList(s, "ul")
                        }), r && t.selection.selectNode(o.querySelector("li"))))
                    },
                    state: function(e, t) {
                        try {
                            return e.doc.queryCommandState(t)
                        } catch (n) {
                            return !1
                        }
                    },
                    value: function() {}
                }
            })(wysihtml5);
            (function(e) {
                e.commands.italic = {
                    exec: function(t, n) {
                        return e.commands.formatInline.exec(t, n, "i")
                    },
                    state: function(t, n) {
                        return e.commands.formatInline.state(t, n, "i")
                    },
                    value: function() {}
                }
            })(wysihtml5);
            (function(e) {
                var t = /wysiwyg-text-align-[a-z]+/g;
                e.commands.justifyCenter = {
                    exec: function(n) {
                        return e.commands.formatBlock.exec(n, "formatBlock", null, "wysiwyg-text-align-center", t)
                    },
                    state: function(n) {
                        return e.commands.formatBlock.state(n, "formatBlock", null, "wysiwyg-text-align-center", t)
                    },
                    value: function() {}
                }
            })(wysihtml5);
            (function(e) {
                var t = /wysiwyg-text-align-[a-z]+/g;
                e.commands.justifyLeft = {
                    exec: function(n) {
                        return e.commands.formatBlock.exec(n, "formatBlock", null, "wysiwyg-text-align-left", t)
                    },
                    state: function(n) {
                        return e.commands.formatBlock.state(n, "formatBlock", null, "wysiwyg-text-align-left", t)
                    },
                    value: function() {}
                }
            })(wysihtml5);
            (function(e) {
                var t = /wysiwyg-text-align-[a-z]+/g;
                e.commands.justifyRight = {
                    exec: function(n) {
                        return e.commands.formatBlock.exec(n, "formatBlock", null, "wysiwyg-text-align-right", t)
                    },
                    state: function(n) {
                        return e.commands.formatBlock.state(n, "formatBlock", null, "wysiwyg-text-align-right", t)
                    },
                    value: function() {}
                }
            })(wysihtml5);
            (function(e) {
                var t = /wysiwyg-text-decoration-underline/g;
                e.commands.underline = {
                    exec: function(n, r) {
                        return e.commands.formatInline.exec(n, r, "span", "wysiwyg-text-decoration-underline", t)
                    },
                    state: function(n, r) {
                        return e.commands.formatInline.state(n, r, "span", "wysiwyg-text-decoration-underline", t)
                    },
                    value: function() {}
                }
            })(wysihtml5);
            (function(e) {
                var t = '<span id="_wysihtml5-undo" class="_wysihtml5-temp">' + e.INVISIBLE_SPACE + "</span>",
                    n = '<span id="_wysihtml5-redo" class="_wysihtml5-temp">' + e.INVISIBLE_SPACE + "</span>",
                    r = e.dom;
                e.UndoManager = e.lang.Dispatcher.extend({
                    constructor: function(e) {
                        this.editor = e;
                        this.composer = e.composer;
                        this.element = this.composer.element;
                        this.history = [this.composer.getValue()];
                        this.position = 1;
                        this.composer.commands.support("insertHTML") && this._observe()
                    },
                    _observe: function() {
                        var i = this,
                            s = this.composer.sandbox.getDocument(),
                            o;
                        r.observe(this.element, "keydown", function(e) {
                            if (!(e.altKey || !e.ctrlKey && !e.metaKey)) {
                                var t = e.keyCode,
                                    n = 90 === t && e.shiftKey || 89 === t;
                                90 === t && !e.shiftKey ? (i.undo(), e.preventDefault()) : n && (i.redo(), e.preventDefault())
                            }
                        });
                        r.observe(this.element, "keydown", function(e) {
                            e = e.keyCode;
                            e !== o && (o = e, (8 === e || 46 === e) && i.transact())
                        });
                        if (e.browser.hasUndoInContextMenu()) {
                            var u, f, l = function() {
                                for (var e; e = s.querySelector("._wysihtml5-temp");) e.parentNode.removeChild(e);
                                clearInterval(u)
                            };
                            r.observe(this.element, "contextmenu", function() {
                                l();
                                i.composer.selection.executeAndRestoreSimple(function() {
                                    i.element.lastChild && i.composer.selection.setAfter(i.element.lastChild);
                                    s.execCommand("insertHTML", !1, t);
                                    s.execCommand("insertHTML", !1, n);
                                    s.execCommand("undo", !1, null)
                                });
                                u = setInterval(function() {
                                    s.getElementById("_wysihtml5-redo") ? (l(), i.redo()) : s.getElementById("_wysihtml5-undo") || (l(), i.undo())
                                }, 400);
                                f || (f = !0, r.observe(document, "mousedown", l), r.observe(s, ["mousedown", "paste", "cut", "copy"], l))
                            })
                        }
                        this.editor.observe("newword:composer", function() {
                            i.transact()
                        }).observe("beforecommand:composer", function() {
                            i.transact()
                        })
                    },
                    transact: function() {
                        var e = this.history[this.position - 1],
                            t = this.composer.getValue();
                        if (t != e) {
                            if (40 < (this.history.length = this.position)) this.history.shift(), this.position--;
                            this.position++;
                            this.history.push(t)
                        }
                    },
                    undo: function() {
                        this.transact();
                        1 >= this.position || (this.set(this.history[--this.position - 1]), this.editor.fire("undo:composer"))
                    },
                    redo: function() {
                        this.position >= this.history.length || (this.set(this.history[++this.position - 1]), this.editor.fire("redo:composer"))
                    },
                    set: function(e) {
                        this.composer.setValue(e);
                        this.editor.focus(!0)
                    }
                })
            })(wysihtml5); wysihtml5.views.View = Base.extend({
                constructor: function(e, t, n) {
                    this.parent = e;
                    this.element = t;
                    this.config = n;
                    this._observeViewChange()
                },
                _observeViewChange: function() {
                    var e = this;
                    this.parent.observe("beforeload", function() {
                        e.parent.observe("change_view", function(t) {
                            t === e.name ? (e.parent.currentView = e, e.show(), setTimeout(function() {
                                e.focus()
                            }, 0)) : e.hide()
                        })
                    })
                },
                focus: function() {
                    if (this.element.ownerDocument.querySelector(":focus") !== this.element) try {
                        this.element.focus()
                    } catch (e) {}
                },
                hide: function() {
                    this.element.style.display = "none"
                },
                show: function() {
                    this.element.style.display = ""
                },
                disable: function() {
                    this.element.setAttribute("disabled", "disabled")
                },
                enable: function() {
                    this.element.removeAttribute("disabled")
                }
            });
            (function(e) {
                var t = e.dom,
                    n = e.browser;
                e.views.Composer = e.views.View.extend({
                    name: "composer",
                    CARET_HACK: "<br>",
                    constructor: function(e, t, n) {
                        this.base(e, t, n);
                        this.textarea = this.parent.textarea;
                        this._initSandbox()
                    },
                    clear: function() {
                        this.element.innerHTML = n.displaysCaretInEmptyContentEditableCorrectly() ? "" : this.CARET_HACK
                    },
                    getValue: function(t) {
                        var n = this.isEmpty() ? "" : e.quirks.getCorrectInnerHTML(this.element);
                        t && (n = this.parent.parse(n));
                        return n = e.lang.string(n).replace(e.INVISIBLE_SPACE).by("")
                    },
                    setValue: function(e, t) {
                        t && (e = this.parent.parse(e));
                        this.element.innerHTML = e
                    },
                    show: function() {
                        this.iframe.style.display = this._displayStyle || "";
                        this.disable();
                        this.enable()
                    },
                    hide: function() {
                        this._displayStyle = t.getStyle("display").from(this.iframe);
                        "none" === this._displayStyle && (this._displayStyle = null);
                        this.iframe.style.display = "none"
                    },
                    disable: function() {
                        this.element.removeAttribute("contentEditable");
                        this.base()
                    },
                    enable: function() {
                        this.element.setAttribute("contentEditable", "true");
                        this.base()
                    },
                    focus: function(t) {
                        e.browser.doesAsyncFocus() && this.hasPlaceholderSet() && this.clear();
                        this.base();
                        var n = this.element.lastChild;
                        t && n && ("BR" === n.nodeName ? this.selection.setBefore(this.element.lastChild) : this.selection.setAfter(this.element.lastChild))
                    },
                    getTextContent: function() {
                        return t.getTextContent(this.element)
                    },
                    hasPlaceholderSet: function() {
                        return this.getTextContent() == this.textarea.element.getAttribute("placeholder")
                    },
                    isEmpty: function() {
                        var e = this.element.innerHTML;
                        return "" === e || e === this.CARET_HACK || this.hasPlaceholderSet() || "" === this.getTextContent() && !this.element.querySelector("blockquote, ul, ol, img, embed, object, table, iframe, svg, video, audio, button, input, select, textarea")
                    },
                    _initSandbox: function() {
                        var e = this;
                        this.sandbox = new t.Sandbox(function() {
                            e._create()
                        }, {
                            stylesheets: this.config.stylesheets
                        });
                        this.iframe = this.sandbox.getIframe();
                        var n = document.createElement("input");
                        n.type = "hidden";
                        n.name = "_wysihtml5_mode";
                        n.value = 1;
                        var r = this.textarea.element;
                        t.insert(this.iframe).after(r);
                        t.insert(n).after(r)
                    },
                    _create: function() {
                        var r = this;
                        this.doc = this.sandbox.getDocument();
                        this.element = this.doc.body;
                        this.textarea = this.parent.textarea;
                        this.element.innerHTML = this.textarea.getValue(!0);
                        this.enable();
                        this.selection = new e.Selection(this.parent);
                        this.commands = new e.Commands(this.parent);
                        t.copyAttributes("className,spellcheck,title,lang,dir,accessKey".split(",")).from(this.textarea.element).to(this.element);
                        t.addClass(this.element, this.config.composerClassName);
                        this.config.style && this.style();
                        this.observe();
                        var i = this.config.name;
                        i && (t.addClass(this.element, i), t.addClass(this.iframe, i));
                        (i = "string" === typeof this.config.placeholder ? this.config.placeholder : this.textarea.element.getAttribute("placeholder")) && t.simulatePlaceholder(this.parent, this, i);
                        this.commands.exec("styleWithCSS", !1);
                        this._initAutoLinking();
                        this._initObjectResizing();
                        this._initUndoManager();
                        (this.textarea.element.hasAttribute("autofocus") || document.querySelector(":focus") == this.textarea.element) && setTimeout(function() {
                            r.focus()
                        }, 100);
                        e.quirks.insertLineBreakOnReturn(this);
                        n.clearsContentEditableCorrectly() || e.quirks.ensureProperClearing(this);
                        n.clearsListsInContentEditableCorrectly() || e.quirks.ensureProperClearingOfLists(this);
                        this.initSync && this.config.sync && this.initSync();
                        this.textarea.hide();
                        this.parent.fire("beforeload").fire("load")
                    },
                    _initAutoLinking: function() {
                        var r = this,
                            i = n.canDisableAutoLinking(),
                            s = n.doesAutoLinkingInContentEditable();
                        i && this.commands.exec("autoUrlDetect", !1);
                        if (this.config.autoLink) {
                            (!s || s && i) && this.parent.observe("newword:composer", function() {
                                r.selection.executeAndRestore(function(e, n) {
                                    t.autoLink(n.parentNode)
                                })
                            });
                            var o = this.sandbox.getDocument().getElementsByTagName("a"),
                                u = t.autoLink.URL_REG_EXP,
                                f = function(n) {
                                    n = e.lang.string(t.getTextContent(n)).trim();
                                    "www." === n.substr(0, 4) && (n = "http://" + n);
                                    return n
                                };
                            t.observe(this.element, "keydown", function(e) {
                                if (o.length) {
                                    var e = r.selection.getSelectedNode(e.target.ownerDocument),
                                        n = t.getParentElement(e, {
                                            nodeName: "A"
                                        }, 4),
                                        i;
                                    n && (i = f(n), setTimeout(function() {
                                        var e = f(n);
                                        e !== i && e.match(u) && n.setAttribute("href", e)
                                    }, 0))
                                }
                            })
                        }
                    },
                    _initObjectResizing: function() {
                        var r = ["width", "height"],
                            i = r.length,
                            s = this.element;
                        this.commands.exec("enableObjectResizing", this.config.allowObjectResizing);
                        this.config.allowObjectResizing ? n.supportsEvent("resizeend") && t.observe(s, "resizeend", function(t) {
                            for (var t = t.target || t.srcElement, n = t.style, o = 0, u; o < i; o++) u = r[o], n[u] && (t.setAttribute(u, parseInt(n[u], 10)), n[u] = "");
                            e.quirks.redraw(s)
                        }) : n.supportsEvent("resizestart") && t.observe(s, "resizestart", function(e) {
                            e.preventDefault()
                        })
                    },
                    _initUndoManager: function() {
                        new e.UndoManager(this.parent)
                    }
                })
            })(wysihtml5);
            (function(e) {
                var t = e.dom,
                    n = document,
                    r = window,
                    i = n.createElement("div"),
                    s = "background-color,color,cursor,font-family,font-size,font-style,font-variant,font-weight,line-height,letter-spacing,text-align,text-decoration,text-indent,text-rendering,word-break,word-wrap,word-spacing".split(","),
                    o = "background-color,border-collapse,border-bottom-color,border-bottom-style,border-bottom-width,border-left-color,border-left-style,border-left-width,border-right-color,border-right-style,border-right-width,border-top-color,border-top-style,border-top-width,clear,display,float,margin-bottom,margin-left,margin-right,margin-top,outline-color,outline-offset,outline-width,outline-style,padding-left,padding-right,padding-top,padding-bottom,position,top,left,right,bottom,z-index,vertical-align,text-align,-webkit-box-sizing,-moz-box-sizing,-ms-box-sizing,box-sizing,-webkit-box-shadow,-moz-box-shadow,-ms-box-shadow,box-shadow,-webkit-border-top-right-radius,-moz-border-radius-topright,border-top-right-radius,-webkit-border-bottom-right-radius,-moz-border-radius-bottomright,border-bottom-right-radius,-webkit-border-bottom-left-radius,-moz-border-radius-bottomleft,border-bottom-left-radius,-webkit-border-top-left-radius,-moz-border-radius-topleft,border-top-left-radius,width,height".split(","),
                    u = "width,height,top,left,right,bottom".split(","),
                    a = ["html             { height: 100%; }", "body             { min-height: 100%; padding: 0; margin: 0; margin-top: -1px; padding-top: 1px; }", "._wysihtml5-temp { display: none; }", e.browser.isGecko ? "body.placeholder { color: graytext !important; }" : "body.placeholder { color: #a9a9a9 !important; }", "body[disabled]   { background-color: #eee !important; color: #999 !important; cursor: default !important; }", "img:-moz-broken  { -moz-force-broken-image-icon: 1; height: 24px; width: 24px; }"],
                    f = function(e) {
                        if (e.setActive) try {
                            e.setActive()
                        } catch (i) {} else {
                            var s = e.style,
                                o = n.documentElement.scrollTop || n.body.scrollTop,
                                u = n.documentElement.scrollLeft || n.body.scrollLeft,
                                s = {
                                    position: s.position,
                                    top: s.top,
                                    left: s.left,
                                    WebkitUserSelect: s.WebkitUserSelect
                                };
                            t.setStyles({
                                position: "absolute",
                                top: "-99999px",
                                left: "-99999px",
                                WebkitUserSelect: "none"
                            }).on(e);
                            e.focus();
                            t.setStyles(s).on(e);
                            r.scrollTo && r.scrollTo(u, o)
                        }
                    };
                e.views.Composer.prototype.style = function() {
                    var l = this,
                        p = n.querySelector(":focus"),
                        v = this.textarea.element,
                        m = v.hasAttribute("placeholder"),
                        y = m && v.getAttribute("placeholder");
                    this.focusStylesHost = this.focusStylesHost || i.cloneNode(!1);
                    this.blurStylesHost = this.blurStylesHost || i.cloneNode(!1);
                    m && v.removeAttribute("placeholder");
                    v === p && v.blur();
                    t.copyStyles(o).from(v).to(this.iframe).andTo(this.blurStylesHost);
                    t.copyStyles(s).from(v).to(this.element).andTo(this.blurStylesHost);
                    t.insertCSS(a).into(this.element.ownerDocument);
                    f(v);
                    t.copyStyles(o).from(v).to(this.focusStylesHost);
                    t.copyStyles(s).from(v).to(this.focusStylesHost);
                    var w = e.lang.array(o).without(["display"]);
                    p ? p.focus() : v.blur();
                    m && v.setAttribute("placeholder", y);
                    e.browser.hasCurrentStyleProperty() || t.observe(r, "resize", function() {
                        var e = t.getStyle("display").from(v);
                        v.style.display = "";
                        t.copyStyles(u).from(v).to(l.iframe).andTo(l.focusStylesHost).andTo(l.blurStylesHost);
                        v.style.display = e
                    });
                    this.parent.observe("focus:composer", function() {
                        t.copyStyles(w).from(l.focusStylesHost).to(l.iframe);
                        t.copyStyles(s).from(l.focusStylesHost).to(l.element)
                    });
                    this.parent.observe("blur:composer", function() {
                        t.copyStyles(w).from(l.blurStylesHost).to(l.iframe);
                        t.copyStyles(s).from(l.blurStylesHost).to(l.element)
                    });
                    return this
                }
            })(wysihtml5);
            (function(e) {
                var t = e.dom,
                    n = e.browser,
                    r = {
                        66: "bold",
                        73: "italic",
                        85: "underline"
                    };
                e.views.Composer.prototype.observe = function() {
                    var i = this,
                        s = this.getValue(),
                        o = this.sandbox.getIframe(),
                        u = this.element,
                        f = n.supportsEventsInIframeCorrectly() ? u : this.sandbox.getWindow(),
                        l = n.supportsEvent("drop") ? ["drop", "paste"] : ["dragdrop", "paste"];
                    t.observe(o, "DOMNodeRemoved", function() {
                        clearInterval(h);
                        i.parent.fire("destroy:composer")
                    });
                    var h = setInterval(function() {
                        t.contains(document.documentElement, o) || (clearInterval(h), i.parent.fire("destroy:composer"))
                    }, 250);
                    t.observe(f, "focus", function() {
                        i.parent.fire("focus").fire("focus:composer");
                        setTimeout(function() {
                            s = i.getValue()
                        }, 0)
                    });
                    t.observe(f, "blur", function() {
                        s !== i.getValue() && i.parent.fire("change").fire("change:composer");
                        i.parent.fire("blur").fire("blur:composer")
                    });
                    e.browser.isIos() && t.observe(u, "blur", function() {
                        var e = u.ownerDocument.createElement("input"),
                            t = document.documentElement.scrollTop || document.body.scrollTop,
                            n = document.documentElement.scrollLeft || document.body.scrollLeft;
                        try {
                            i.selection.insertNode(e)
                        } catch (r) {
                            u.appendChild(e)
                        }
                        e.focus();
                        e.parentNode.removeChild(e);
                        window.scrollTo(n, t)
                    });
                    t.observe(u, "dragenter", function() {
                        i.parent.fire("unset_placeholder")
                    });
                    n.firesOnDropOnlyWhenOnDragOverIsCancelled() && t.observe(u, ["dragover", "dragenter"], function(e) {
                        e.preventDefault()
                    });
                    t.observe(u, l, function(e) {
                        var t = e.dataTransfer,
                            r;
                        t && n.supportsDataTransfer() && (r = t.getData("text/html") || t.getData("text/plain"));
                        r ? (u.focus(), i.commands.exec("insertHTML", r), i.parent.fire("paste").fire("paste:composer"), e.stopPropagation(), e.preventDefault()) : setTimeout(function() {
                            i.parent.fire("paste").fire("paste:composer")
                        }, 0)
                    });
                    t.observe(u, "keyup", function(t) {
                        t = t.keyCode;
                        (t === e.SPACE_KEY || t === e.ENTER_KEY) && i.parent.fire("newword:composer")
                    });
                    this.parent.observe("paste:composer", function() {
                        setTimeout(function() {
                            i.parent.fire("newword:composer")
                        }, 0)
                    });
                    n.canSelectImagesInContentEditable() || t.observe(u, "mousedown", function(e) {
                        var t = e.target;
                        "IMG" === t.nodeName && (i.selection.selectNode(t), e.preventDefault())
                    });
                    t.observe(u, "keydown", function(e) {
                        var t = r[e.keyCode];
                        if ((e.ctrlKey || e.metaKey) && t) i.commands.exec(t), e.preventDefault()
                    });
                    t.observe(u, "keydown", function(t) {
                        var n = i.selection.getSelectedNode(!0),
                            r = t.keyCode;
                        if (n && "IMG" === n.nodeName && (r === e.BACKSPACE_KEY || r === e.DELETE_KEY)) r = n.parentNode, r.removeChild(n), "A" === r.nodeName && !r.firstChild && r.parentNode.removeChild(r), setTimeout(function() {
                            e.quirks.redraw(u)
                        }, 0), t.preventDefault()
                    });
                    var p = {
                        IMG: "Image: ",
                        A: "Link: "
                    };
                    t.observe(u, "mouseover", function(e) {
                        var e = e.target,
                            t = e.nodeName;
                        "A" !== t && "IMG" !== t || (t = p[t] + (e.getAttribute("href") || e.getAttribute("src")), e.setAttribute("title", t))
                    })
                }
            })(wysihtml5);
            (function(e) {
                e.views.Synchronizer = Base.extend({
                    constructor: function(e, t, n) {
                        this.editor = e;
                        this.textarea = t;
                        this.composer = n;
                        this._observe()
                    },
                    fromComposerToTextarea: function(t) {
                        this.textarea.setValue(e.lang.string(this.composer.getValue()).trim(), t)
                    },
                    fromTextareaToComposer: function(e) {
                        var t = this.textarea.getValue();
                        t ? this.composer.setValue(t, e) : (this.composer.clear(), this.editor.fire("set_placeholder"))
                    },
                    sync: function(e) {
                        "textarea" === this.editor.currentView.name ? this.fromTextareaToComposer(e) : this.fromComposerToTextarea(e)
                    },
                    _observe: function() {
                        var t, n = this,
                            r = this.textarea.element.form,
                            i = function() {
                                t = setInterval(function() {
                                    n.fromComposerToTextarea()
                                }, 400)
                            },
                            s = function() {
                                clearInterval(t);
                                t = null
                            };
                        i();
                        r && (e.dom.observe(r, "submit", function() {
                            n.sync(!0)
                        }), e.dom.observe(r, "reset", function() {
                            setTimeout(function() {
                                n.fromTextareaToComposer()
                            }, 0)
                        }));
                        this.editor.observe("change_view", function(e) {
                            if (e === "composer" && !t) {
                                n.fromTextareaToComposer(true);
                                i()
                            } else if (e === "textarea") {
                                n.fromComposerToTextarea(true);
                                s()
                            }
                        });
                        this.editor.observe("destroy:composer", s)
                    }
                })
            })(wysihtml5); wysihtml5.views.Textarea = wysihtml5.views.View.extend({
                name: "textarea",
                constructor: function(e, t, n) {
                    this.base(e, t, n);
                    this._observe()
                },
                clear: function() {
                    this.element.value = ""
                },
                getValue: function(e) {
                    var t = this.isEmpty() ? "" : this.element.value;
                    e && (t = this.parent.parse(t));
                    return t
                },
                setValue: function(e, t) {
                    t && (e = this.parent.parse(e));
                    this.element.value = e
                },
                hasPlaceholderSet: function() {
                    var e = wysihtml5.browser.supportsPlaceholderAttributeOn(this.element),
                        t = this.element.getAttribute("placeholder") || null,
                        n = this.element.value;
                    return e && !n || n === t
                },
                isEmpty: function() {
                    return !wysihtml5.lang.string(this.element.value).trim() || this.hasPlaceholderSet()
                },
                _observe: function() {
                    var e = this.element,
                        t = this.parent,
                        n = {
                            focusin: "focus",
                            focusout: "blur"
                        },
                        r = wysihtml5.browser.supportsEvent("focusin") ? ["focusin", "focusout", "change"] : ["focus", "blur", "change"];
                    t.observe("beforeload", function() {
                        wysihtml5.dom.observe(e, r, function(e) {
                            e = n[e.type] || e.type;
                            t.fire(e).fire(e + ":textarea")
                        });
                        wysihtml5.dom.observe(e, ["paste", "drop"], function() {
                            setTimeout(function() {
                                t.fire("paste").fire("paste:textarea")
                            }, 0)
                        })
                    })
                }
            });
            (function(e) {
                var t = e.dom;
                e.toolbar.Dialog = e.lang.Dispatcher.extend({
                    constructor: function(e, t) {
                        this.link = e;
                        this.container = t
                    },
                    _observe: function() {
                        if (!this._observed) {
                            var n = this,
                                r = function(e) {
                                    var t = n._serialize();
                                    t == n.elementToChange ? n.fire("edit", t) : n.fire("save", t);
                                    n.hide();
                                    e.preventDefault();
                                    e.stopPropagation()
                                };
                            t.observe(n.link, "click", function() {
                                t.hasClass(n.link, "wysihtml5-command-dialog-opened") && setTimeout(function() {
                                    n.hide()
                                }, 0)
                            });
                            t.observe(this.container, "keydown", function(t) {
                                var i = t.keyCode;
                                i === e.ENTER_KEY && r(t);
                                i === e.ESCAPE_KEY && n.hide()
                            });
                            t.delegate(this.container, "[data-wysihtml5-dialog-action=save]", "click", r);
                            t.delegate(this.container, "[data-wysihtml5-dialog-action=cancel]", "click", function(e) {
                                n.fire("cancel");
                                n.hide();
                                e.preventDefault();
                                e.stopPropagation()
                            });
                            for (var i = this.container.querySelectorAll("input, select, textarea"), s = 0, o = i.length, u = function() {
                                    clearInterval(n.interval)
                                }; s < o; s++) t.observe(i[s], "change", u);
                            this._observed = !0
                        }
                    },
                    _serialize: function() {
                        for (var e = this.elementToChange || {}, t = this.container.querySelectorAll("[data-wysihtml5-dialog-field]"), n = t.length, r = 0; r < n; r++) e[t[r].getAttribute("data-wysihtml5-dialog-field")] = t[r].value;
                        return e
                    },
                    _interpolate: function(e) {
                        for (var t, n, r = document.querySelector(":focus"), i = this.container.querySelectorAll("[data-wysihtml5-dialog-field]"), s = i.length, o = 0; o < s; o++) t = i[o], t !== r && !(e && "hidden" === t.type) && (n = t.getAttribute("data-wysihtml5-dialog-field"), n = this.elementToChange ? this.elementToChange[n] || "" : t.defaultValue, t.value = n)
                    },
                    show: function(e) {
                        var n = this,
                            r = this.container.querySelector("input, select, textarea");
                        this.elementToChange = e;
                        this._observe();
                        this._interpolate();
                        e && (this.interval = setInterval(function() {
                            n._interpolate(!0)
                        }, 500));
                        t.addClass(this.link, "wysihtml5-command-dialog-opened");
                        this.container.style.display = "";
                        this.fire("show");
                        if (r && !e) try {
                            r.focus()
                        } catch (i) {}
                    },
                    hide: function() {
                        clearInterval(this.interval);
                        this.elementToChange = null;
                        t.removeClass(this.link, "wysihtml5-command-dialog-opened");
                        this.container.style.display = "none";
                        this.fire("hide")
                    }
                })
            })(wysihtml5);
            (function(e) {
                var t = e.dom,
                    n = {
                        position: "relative"
                    },
                    r = {
                        left: 0,
                        margin: 0,
                        opacity: 0,
                        overflow: "hidden",
                        padding: 0,
                        position: "absolute",
                        top: 0,
                        zIndex: 1
                    },
                    i = {
                        cursor: "inherit",
                        fontSize: "50px",
                        height: "50px",
                        marginTop: "-25px",
                        outline: 0,
                        padding: 0,
                        position: "absolute",
                        right: "-4px",
                        top: "50%"
                    },
                    s = {
                        "x-webkit-speech": "",
                        speech: ""
                    };
                e.toolbar.Speech = function(o, u) {
                    var l = document.createElement("input");
                    if (e.browser.supportsSpeechApiOn(l)) {
                        var h = document.createElement("div");
                        e.lang.object(r).merge({
                            width: u.offsetWidth + "px",
                            height: u.offsetHeight + "px"
                        });
                        t.insert(l).into(h);
                        t.insert(h).into(u);
                        t.setStyles(i).on(l);
                        t.setAttributes(s).on(l);
                        t.setStyles(r).on(h);
                        t.setStyles(n).on(u);
                        t.observe(l, "onwebkitspeechchange" in l ? "webkitspeechchange" : "speechchange", function() {
                            o.execCommand("insertText", l.value);
                            l.value = ""
                        });
                        t.observe(l, "click", function(e) {
                            t.hasClass(u, "wysihtml5-command-disabled") && e.preventDefault();
                            e.stopPropagation()
                        })
                    } else u.style.display = "none"
                }
            })(wysihtml5);
            (function(e) {
                var t = e.dom;
                e.toolbar.Toolbar = Base.extend({
                    constructor: function(t, n) {
                        this.editor = t;
                        this.container = "string" === typeof n ? document.getElementById(n) : n;
                        this.composer = t.composer;
                        this._getLinks("command");
                        this._getLinks("action");
                        this._observe();
                        this.show();
                        for (var r = this.container.querySelectorAll("[data-wysihtml5-command=insertSpeech]"), i = r.length, s = 0; s < i; s++) new e.toolbar.Speech(this, r[s])
                    },
                    _getLinks: function(t) {
                        for (var n = this[t + "Links"] = e.lang.array(this.container.querySelectorAll("a[data-wysihtml5-" + t + "]")).get(), r = n.length, i = 0, s = this[t + "Mapping"] = {}, o, u, a, f; i < r; i++) o = n[i], u = o.getAttribute("data-wysihtml5-" + t), a = o.getAttribute("data-wysihtml5-" + t + "-value"), f = this._getDialog(o, u), s[u + ":" + a] = {
                            link: o,
                            name: u,
                            value: a,
                            dialog: f,
                            state: !1
                        }
                    },
                    _getDialog: function(t, n) {
                        var r = this,
                            i = this.container.querySelector("[data-wysihtml5-dialog='" + n + "']"),
                            s, o;
                        i && (s = new e.toolbar.Dialog(t, i), s.observe("show", function() {
                            o = r.composer.selection.getBookmark();
                            r.editor.fire("show:dialog", {
                                command: n,
                                dialogContainer: i,
                                commandLink: t
                            })
                        }), s.observe("save", function(e) {
                            o && r.composer.selection.setBookmark(o);
                            r._execCommand(n, e);
                            r.editor.fire("save:dialog", {
                                command: n,
                                dialogContainer: i,
                                commandLink: t
                            })
                        }), s.observe("cancel", function() {
                            r.editor.focus(!1);
                            r.editor.fire("cancel:dialog", {
                                command: n,
                                dialogContainer: i,
                                commandLink: t
                            })
                        }));
                        return s
                    },
                    execCommand: function(e, t) {
                        if (!this.commandsDisabled) {
                            var n = this.commandMapping[e + ":" + t];
                            n && n.dialog && !n.state ? n.dialog.show() : this._execCommand(e, t)
                        }
                    },
                    _execCommand: function(e, t) {
                        this.editor.focus(!1);
                        this.composer.commands.exec(e, t);
                        this._updateLinkStates()
                    },
                    execAction: function(e) {
                        var t = this.editor;
                        switch (e) {
                            case "change_view":
                                t.currentView === t.textarea ? t.fire("change_view", "composer") : t.fire("change_view", "textarea")
                        }
                    },
                    _observe: function() {
                        for (var e = this, n = this.editor, r = this.container, i = this.commandLinks.concat(this.actionLinks), s = i.length, o = 0; o < s; o++) t.setAttributes({
                            href: "javascript:;",
                            unselectable: "on"
                        }).on(i[o]);
                        t.delegate(r, "[data-wysihtml5-command]", "mousedown", function(e) {
                            e.preventDefault()
                        });
                        t.delegate(r, "[data-wysihtml5-command]", "click", function(t) {
                            var n = this.getAttribute("data-wysihtml5-command"),
                                r = this.getAttribute("data-wysihtml5-command-value");
                            e.execCommand(n, r);
                            t.preventDefault()
                        });
                        t.delegate(r, "[data-wysihtml5-action]", "click", function(t) {
                            var n = this.getAttribute("data-wysihtml5-action");
                            e.execAction(n);
                            t.preventDefault()
                        });
                        n.observe("focus:composer", function() {
                            e.bookmark = null;
                            clearInterval(e.interval);
                            e.interval = setInterval(function() {
                                e._updateLinkStates()
                            }, 500)
                        });
                        n.observe("blur:composer", function() {
                            clearInterval(e.interval)
                        });
                        n.observe("destroy:composer", function() {
                            clearInterval(e.interval)
                        });
                        n.observe("change_view", function(n) {
                            setTimeout(function() {
                                e.commandsDisabled = "composer" !== n;
                                e._updateLinkStates();
                                e.commandsDisabled ? t.addClass(r, "wysihtml5-commands-disabled") : t.removeClass(r, "wysihtml5-commands-disabled")
                            }, 0)
                        })
                    },
                    _updateLinkStates: function() {
                        var n = this.commandMapping,
                            r, i, s;
                        for (r in n)
                            if (s = n[r], this.commandsDisabled ? (i = !1, t.removeClass(s.link, "wysihtml5-command-active"), s.dialog && s.dialog.hide()) : (i = this.composer.commands.state(s.name, s.value), e.lang.object(i).isArray() && (i = 1 === i.length ? i[0] : !0), t.removeClass(s.link, "wysihtml5-command-disabled")), s.state !== i)(s.state = i) ? (t.addClass(s.link, "wysihtml5-command-active"), s.dialog && ("object" === typeof i ? s.dialog.show(i) : s.dialog.hide())) : (t.removeClass(s.link, "wysihtml5-command-active"), s.dialog && s.dialog.hide())
                    },
                    show: function() {
                        this.container.style.display = ""
                    },
                    hide: function() {
                        this.container.style.display = "none"
                    }
                })
            })(wysihtml5);
            (function(e) {
                var t = {
                    name: void 0,
                    style: !0,
                    toolbar: void 0,
                    autoLink: !0,
                    parserRules: {
                        tags: {
                            br: {},
                            span: {},
                            div: {},
                            p: {}
                        },
                        classes: {}
                    },
                    parser: e.dom.parse,
                    composerClassName: "wysihtml5-editor",
                    bodyClassName: "wysihtml5-supported",
                    stylesheets: [],
                    placeholderText: void 0,
                    allowObjectResizing: !0,
                    supportTouchDevices: !0
                };
                e.Editor = e.lang.Dispatcher.extend({
                    constructor: function(n, r) {
                        this.textareaElement = "string" === typeof n ? document.getElementById(n) : n;
                        this.config = e.lang.object({}).merge(t).merge(r).get();
                        this.currentView = this.textarea = new e.views.Textarea(this, this.textareaElement, this.config);
                        this._isCompatible = e.browser.supported();
                        if (!this._isCompatible || !this.config.supportTouchDevices && e.browser.isTouchDevice()) {
                            var i = this;
                            setTimeout(function() {
                                i.fire("beforeload").fire("load")
                            }, 0)
                        } else {
                            e.dom.addClass(document.body, this.config.bodyClassName);
                            this.currentView = this.composer = new e.views.Composer(this, this.textareaElement, this.config);
                            "function" === typeof this.config.parser && this._initParser();
                            this.observe("beforeload", function() {
                                this.synchronizer = new e.views.Synchronizer(this, this.textarea, this.composer);
                                this.config.toolbar && (this.toolbar = new e.toolbar.Toolbar(this, this.config.toolbar))
                            });
                            try {
                                console.log("Heya! This page is using wysihtml5 for rich text editing. Check out https://github.com/xing/wysihtml5")
                            } catch (s) {}
                        }
                    },
                    isCompatible: function() {
                        return this._isCompatible
                    },
                    clear: function() {
                        this.currentView.clear();
                        return this
                    },
                    getValue: function(e) {
                        return this.currentView.getValue(e)
                    },
                    setValue: function(e, t) {
                        if (!e) return this.clear();
                        this.currentView.setValue(e, t);
                        return this
                    },
                    focus: function(e) {
                        this.currentView.focus(e);
                        return this
                    },
                    disable: function() {
                        this.currentView.disable();
                        return this
                    },
                    enable: function() {
                        this.currentView.enable();
                        return this
                    },
                    isEmpty: function() {
                        return this.currentView.isEmpty()
                    },
                    hasPlaceholderSet: function() {
                        return this.currentView.hasPlaceholderSet()
                    },
                    parse: function(t) {
                        var n = this.config.parser(t, this.config.parserRules, this.composer.sandbox.getDocument(), !0);
                        "object" === typeof t && e.quirks.redraw(t);
                        return n
                    },
                    _initParser: function() {
                        this.observe("paste:composer", function() {
                            var t = this;
                            t.composer.selection.executeAndRestore(function() {
                                e.quirks.cleanPastedHTML(t.composer.element);
                                t.parse(t.composer.element)
                            }, !0)
                        });
                        this.observe("paste:textarea", function() {
                            this.textarea.setValue(this.parse(this.textarea.getValue()))
                        })
                    }
                })
            })(wysihtml5); ! function(e, t) {
                "use strict";
                var n = {
                        "font-styles": "<li class='dropdown'><a class='btn dropdown-toggle' data-toggle='dropdown' href='#'><i class='icon-font'></i> <span class='current-font'>Normal text</span> <b class='caret'></b></a><ul class='dropdown-menu'><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='div'>Normal text</a></li><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h1'>Heading 1</a></li><li><a data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='h2'>Heading 2</a></li></ul></li>",
                        emphasis: "<li><div class='btn-group'><a class='btn' data-wysihtml5-command='bold' title='CTRL+B'>Bold</a><a class='btn' data-wysihtml5-command='italic' title='CTRL+I'>Italic</a></div></li>",
                        lists: "<li><div class='btn-group'><a class='btn' data-wysihtml5-command='insertUnorderedList' title='Unordered List'><i class='icon-list'></i></a><a class='btn' data-wysihtml5-command='insertOrderedList' title='Ordered List'><i class='icon-th-list'></i></a><a class='btn' data-wysihtml5-command='Outdent' title='Outdent'><i class='icon-indent-right'></i></a><a class='btn' data-wysihtml5-command='Indent' title='Indent'><i class='icon-indent-left'></i></a></div></li>",
                        link: "<li><div class='bootstrap-wysihtml5-insert-link-modal modal hide fade'><div class='modal-header'><a class='close' data-dismiss='modal'></a><h3>Insert Link</h3></div><div class='modal-body'><input value='http://' class='bootstrap-wysihtml5-insert-link-url input-xlarge'></div><div class='modal-footer'><a href='#' class='btn' data-dismiss='modal'>Cancel</a><a href='#' class='btn btn-primary' data-dismiss='modal'>Insert link</a></div></div><a class='btn' data-wysihtml5-command='createLink' title='Link'><i class='icon-share'></i></a></li>",
                        image: "<li><div class='bootstrap-wysihtml5-insert-image-modal modal hide fade'><div class='modal-header'><a class='close' data-dismiss='modal'></a><h3>Insert Image</h3></div><div class='modal-body'><input value='http://' class='bootstrap-wysihtml5-insert-image-url input-xlarge'></div><div class='modal-footer'><a href='#' class='btn' data-dismiss='modal'>Cancel</a><a href='#' class='btn btn-primary' data-dismiss='modal'>Insert image</a></div></div><a class='btn' data-wysihtml5-command='insertImage' title='Insert image'><i class='icon-picture'></i></a></li>",
                        html: "<li><div class='btn-group'><a class='btn' data-wysihtml5-action='change_view' title='Edit HTML'><i class='icon-pencil'></i></a></div></li>"
                    },
                    r = {
                        "font-styles": !0,
                        emphasis: !0,
                        lists: !0,
                        html: !1,
                        link: !0,
                        image: !0,
                        events: {},
                        parserRules: {
                            tags: {
                                b: {},
                                i: {},
                                br: {},
                                ol: {},
                                ul: {},
                                li: {},
                                h1: {},
                                h2: {},
                                u: 1,
                                img: {
                                    check_attributes: {
                                        width: "numbers",
                                        alt: "alt",
                                        src: "url",
                                        height: "numbers"
                                    }
                                },
                                a: {
                                    set_attributes: {
                                        target: "_blank",
                                        rel: "nofollow"
                                    },
                                    check_attributes: {
                                        href: "url"
                                    }
                                }
                            }
                        }
                    },
                    i = function(t, n) {
                        this.el = t, this.toolbar = this.createToolbar(t, n || r), this.editor = this.createEditor(n), window.editor = this.editor, e("iframe.wysihtml5-sandbox").each(function(t, n) {
                            e(n.contentWindow).off("focus.wysihtml5").on({
                                "focus.wysihtml5": function() {
                                    e("li.dropdown").removeClass("open")
                                }
                            })
                        })
                    };
                i.prototype = {
                    constructor: i,
                    createEditor: function(e) {
                        var n = r.parserRules;
                        e && e.parserRules && (n = e.parserRules);
                        var i = new t.Editor(this.el.attr("id"), {
                            toolbar: this.toolbar.attr("id"),
                            parserRules: n
                        });
                        if (e && e.events)
                            for (var s in e.events) i.on(s, e.events[s]);
                        return i
                    },
                    createToolbar: function(t, i) {
                        var s = this,
                            o = e("<ul/>", {
                                id: t.attr("id") + "-wysihtml5-toolbar",
                                "class": "wysihtml5-toolbar",
                                style: "display:none"
                            });
                        for (var u in r) {
                            var f = !1;
                            i[u] != undefined ? i[u] == 1 && (f = !0) : f = r[u], f == 1 && (o.append(n[u]), u == "html" && this.initHtml(o), u == "link" && this.initInsertLink(o), u == "image" && this.initInsertImage(o))
                        }
                        var s = this;
                        return o.find("a[data-wysihtml5-command='formatBlock']").click(function(t) {
                            var n = e(t.srcElement);
                            s.toolbar.find(".current-font").text(n.html())
                        }), this.el.before(o), o
                    },
                    initHtml: function(e) {
                        var t = "a[data-wysihtml5-action='change_view']";
                        e.find(t).click(function(n) {
                            e.find("a.btn").not(t).toggleClass("disabled")
                        })
                    },
                    initInsertImage: function(e) {
                        var t = this,
                            n = e.find(".bootstrap-wysihtml5-insert-image-modal"),
                            r = n.find(".bootstrap-wysihtml5-insert-image-url"),
                            i = n.find("a.btn-primary"),
                            s = r.val(),
                            o = function() {
                                var e = r.val();
                                r.val(s), t.editor.composer.commands.exec("insertImage", e)
                            };
                        r.keypress(function(e) {
                            e.which == 13 && (o(), n.modal("hide"))
                        }), i.click(o), n.on("shown", function() {
                            r.focus()
                        }), n.on("hide", function() {
                            t.editor.currentView.element.focus()
                        }), e.find("a[data-wysihtml5-command=insertImage]").click(function() {
                            n.modal("show")
                        })
                    },
                    initInsertLink: function(e) {
                        var t = this,
                            n = e.find(".bootstrap-wysihtml5-insert-link-modal"),
                            r = n.find(".bootstrap-wysihtml5-insert-link-url"),
                            i = n.find("a.btn-primary"),
                            s = r.val(),
                            o = function() {
                                var e = r.val();
                                r.val(s), t.editor.composer.commands.exec("createLink", {
                                    href: e,
                                    target: "_blank",
                                    rel: "nofollow"
                                })
                            },
                            u = !1;
                        r.keypress(function(e) {
                            e.which == 13 && (o(), n.modal("hide"))
                        }), i.click(o), n.on("shown", function() {
                            r.focus()
                        }), n.on("hide", function() {
                            t.editor.currentView.element.focus()
                        }), e.find("a[data-wysihtml5-command=createLink]").click(function() {
                            n.modal("show")
                        })
                    }
                }, e.fn.wysihtml5 = function(t) {
                    return this.each(function() {
                        var n = e(this);
                        n.data("wysihtml5", new i(n, t))
                    })
                }, e.fn.wysihtml5.Constructor = i
            }(window.jQuery, window.wysihtml5); Date.CultureInfo = {
                name: "en-US",
                englishName: "English (United States)",
                nativeName: "English (United States)",
                dayNames: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
                abbreviatedDayNames: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
                shortestDayNames: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"],
                firstLetterDayNames: ["S", "M", "T", "W", "T", "F", "S"],
                monthNames: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
                abbreviatedMonthNames: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
                amDesignator: "AM",
                pmDesignator: "PM",
                firstDayOfWeek: 0,
                twoDigitYearMax: 2029,
                dateElementOrder: "mdy",
                formatPatterns: {
                    shortDate: "M/d/yyyy",
                    longDate: "dddd, MMMM dd, yyyy",
                    shortTime: "h:mm tt",
                    longTime: "h:mm:ss tt",
                    fullDateTime: "dddd, MMMM dd, yyyy h:mm:ss tt",
                    sortableDateTime: "yyyy-MM-ddTHH:mm:ss",
                    universalSortableDateTime: "yyyy-MM-dd HH:mm:ssZ",
                    rfc1123: "ddd, dd MMM yyyy HH:mm:ss GMT",
                    monthDay: "MMMM dd",
                    yearMonth: "MMMM, yyyy"
                },
                regexPatterns: {
                    jan: /^jan(uary)?/i,
                    feb: /^feb(ruary)?/i,
                    mar: /^mar(ch)?/i,
                    apr: /^apr(il)?/i,
                    may: /^may/i,
                    jun: /^jun(e)?/i,
                    jul: /^jul(y)?/i,
                    aug: /^aug(ust)?/i,
                    sep: /^sep(t(ember)?)?/i,
                    oct: /^oct(ober)?/i,
                    nov: /^nov(ember)?/i,
                    dec: /^dec(ember)?/i,
                    sun: /^su(n(day)?)?/i,
                    mon: /^mo(n(day)?)?/i,
                    tue: /^tu(e(s(day)?)?)?/i,
                    wed: /^we(d(nesday)?)?/i,
                    thu: /^th(u(r(s(day)?)?)?)?/i,
                    fri: /^fr(i(day)?)?/i,
                    sat: /^sa(t(urday)?)?/i,
                    future: /^next/i,
                    past: /^last|past|prev(ious)?/i,
                    add: /^(\+|aft(er)?|from|hence)/i,
                    subtract: /^(\-|bef(ore)?|ago)/i,
                    yesterday: /^yes(terday)?/i,
                    today: /^t(od(ay)?)?/i,
                    tomorrow: /^tom(orrow)?/i,
                    now: /^n(ow)?/i,
                    millisecond: /^ms|milli(second)?s?/i,
                    second: /^sec(ond)?s?/i,
                    minute: /^mn|min(ute)?s?/i,
                    hour: /^h(our)?s?/i,
                    week: /^w(eek)?s?/i,
                    month: /^m(onth)?s?/i,
                    day: /^d(ay)?s?/i,
                    year: /^y(ear)?s?/i,
                    shortMeridian: /^(a|p)/i,
                    longMeridian: /^(a\.?m?\.?|p\.?m?\.?)/i,
                    timezone: /^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,
                    ordinalSuffix: /^\s*(st|nd|rd|th)/i,
                    timeContext: /^\s*(\:|a(?!u|p)|p)/i
                },
                timezones: [{
                    name: "UTC",
                    offset: "-000"
                }, {
                    name: "GMT",
                    offset: "-000"
                }, {
                    name: "EST",
                    offset: "-0500"
                }, {
                    name: "EDT",
                    offset: "-0400"
                }, {
                    name: "CST",
                    offset: "-0600"
                }, {
                    name: "CDT",
                    offset: "-0500"
                }, {
                    name: "MST",
                    offset: "-0700"
                }, {
                    name: "MDT",
                    offset: "-0600"
                }, {
                    name: "PST",
                    offset: "-0800"
                }, {
                    name: "PDT",
                    offset: "-0700"
                }]
            };
            (function() {
                var e = Date,
                    t = e.prototype,
                    n = e.CultureInfo,
                    r = function(e, t) {
                        if (!t) {
                            t = 2
                        }
                        return ("000" + e).slice(t * -1)
                    };
                t.clearTime = function() {
                    this.setHours(0);
                    this.setMinutes(0);
                    this.setSeconds(0);
                    this.setMilliseconds(0);
                    return this
                };
                t.setTimeToNow = function() {
                    var e = new Date;
                    this.setHours(e.getHours());
                    this.setMinutes(e.getMinutes());
                    this.setSeconds(e.getSeconds());
                    this.setMilliseconds(e.getMilliseconds());
                    return this
                };
                e.today = function() {
                    return (new Date).clearTime()
                };
                e.compare = function(e, t) {
                    if (isNaN(e) || isNaN(t)) {
                        throw new Error(e + " - " + t)
                    } else if (e instanceof Date && t instanceof Date) {
                        return e < t ? -1 : e > t ? 1 : 0
                    } else {
                        throw new TypeError(e + " - " + t)
                    }
                };
                e.equals = function(e, t) {
                    return e.compareTo(t) === 0
                };
                e.getDayNumberFromName = function(e) {
                    var t = n.dayNames,
                        r = n.abbreviatedDayNames,
                        i = n.shortestDayNames,
                        s = e.toLowerCase();
                    for (var o = 0; o < t.length; o++) {
                        if (t[o].toLowerCase() == s || r[o].toLowerCase() == s || i[o].toLowerCase() == s) {
                            return o
                        }
                    }
                    return -1
                };
                e.getMonthNumberFromName = function(e) {
                    var t = n.monthNames,
                        r = n.abbreviatedMonthNames,
                        i = e.toLowerCase();
                    for (var s = 0; s < t.length; s++) {
                        if (t[s].toLowerCase() == i || r[s].toLowerCase() == i) {
                            return s
                        }
                    }
                    return -1
                };
                e.isLeapYear = function(e) {
                    return e % 4 === 0 && e % 100 !== 0 || e % 400 === 0
                };
                e.getDaysInMonth = function(t, n) {
                    return [31, e.isLeapYear(t) ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][n]
                };
                e.getTimezoneAbbreviation = function(e) {
                    var t = n.timezones,
                        r;
                    for (var i = 0; i < t.length; i++) {
                        if (t[i].offset === e) {
                            return t[i].name
                        }
                    }
                    return null
                };
                e.getTimezoneOffset = function(e) {
                    var t = n.timezones,
                        r;
                    for (var i = 0; i < t.length; i++) {
                        if (t[i].name === e.toUpperCase()) {
                            return t[i].offset
                        }
                    }
                    return null
                };
                t.clone = function() {
                    return new Date(this.getTime())
                };
                t.compareTo = function(e) {
                    return Date.compare(this, e)
                };
                t.equals = function(e) {
                    return Date.equals(this, e || new Date)
                };
                t.between = function(e, t) {
                    return this.getTime() >= e.getTime() && this.getTime() <= t.getTime()
                };
                t.isAfter = function(e) {
                    return this.compareTo(e || new Date) === 1
                };
                t.isBefore = function(e) {
                    return this.compareTo(e || new Date) === -1
                };
                t.isToday = function() {
                    return this.isSameDay(new Date)
                };
                t.isSameDay = function(e) {
                    return this.clone().clearTime().equals(e.clone().clearTime())
                };
                t.addMilliseconds = function(e) {
                    this.setMilliseconds(this.getMilliseconds() + e);
                    return this
                };
                t.addSeconds = function(e) {
                    return this.addMilliseconds(e * 1e3)
                };
                t.addMinutes = function(e) {
                    return this.addMilliseconds(e * 6e4)
                };
                t.addHours = function(e) {
                    return this.addMilliseconds(e * 36e5)
                };
                t.addDays = function(e) {
                    this.setDate(this.getDate() + e);
                    return this
                };
                t.addWeeks = function(e) {
                    return this.addDays(e * 7)
                };
                t.addMonths = function(t) {
                    var n = this.getDate();
                    this.setDate(1);
                    this.setMonth(this.getMonth() + t);
                    this.setDate(Math.min(n, e.getDaysInMonth(this.getFullYear(), this.getMonth())));
                    return this
                };
                t.addYears = function(e) {
                    return this.addMonths(e * 12)
                };
                t.add = function(e) {
                    if (typeof e == "number") {
                        this._orient = e;
                        return this
                    }
                    var t = e;
                    if (t.milliseconds) {
                        this.addMilliseconds(t.milliseconds)
                    }
                    if (t.seconds) {
                        this.addSeconds(t.seconds)
                    }
                    if (t.minutes) {
                        this.addMinutes(t.minutes)
                    }
                    if (t.hours) {
                        this.addHours(t.hours)
                    }
                    if (t.weeks) {
                        this.addWeeks(t.weeks)
                    }
                    if (t.months) {
                        this.addMonths(t.months)
                    }
                    if (t.years) {
                        this.addYears(t.years)
                    }
                    if (t.days) {
                        this.addDays(t.days)
                    }
                    return this
                };
                var i, s, o;
                t.getWeek = function() {
                    var e, t, n, r, u, a, f, l, c, h;
                    i = !i ? this.getFullYear() : i;
                    s = !s ? this.getMonth() + 1 : s;
                    o = !o ? this.getDate() : o;
                    if (s <= 2) {
                        e = i - 1;
                        t = (e / 4 | 0) - (e / 100 | 0) + (e / 400 | 0);
                        n = ((e - 1) / 4 | 0) - ((e - 1) / 100 | 0) + ((e - 1) / 400 | 0);
                        c = t - n;
                        u = 0;
                        a = o - 1 + 31 * (s - 1)
                    } else {
                        e = i;
                        t = (e / 4 | 0) - (e / 100 | 0) + (e / 400 | 0);
                        n = ((e - 1) / 4 | 0) - ((e - 1) / 100 | 0) + ((e - 1) / 400 | 0);
                        c = t - n;
                        u = c + 1;
                        a = o + (153 * (s - 3) + 2) / 5 + 58 + c
                    }
                    f = (e + t) % 7;
                    r = (a + f - u) % 7;
                    l = a + 3 - r | 0;
                    if (l < 0) {
                        h = 53 - ((f - c) / 5 | 0)
                    } else if (l > 364 + c) {
                        h = 1
                    } else {
                        h = (l / 7 | 0) + 1
                    }
                    i = s = o = null;
                    return h
                };
                t.getISOWeek = function() {
                    i = this.getUTCFullYear();
                    s = this.getUTCMonth() + 1;
                    o = this.getUTCDate();
                    return r(this.getWeek())
                };
                t.setWeek = function(e) {
                    return this.moveToDayOfWeek(1).addWeeks(e - this.getWeek())
                };
                e._validate = function(e, t, n, r) {
                    if (typeof e == "undefined") {
                        return false
                    } else if (typeof e != "number") {
                        throw new TypeError(e + " is not a Number.")
                    } else if (e < t || e > n) {
                        throw new RangeError(e + " is not a valid value for " + r + ".")
                    }
                    return true
                };
                e.validateMillisecond = function(t) {
                    return e._validate(t, 0, 999, "millisecond")
                };
                e.validateSecond = function(t) {
                    return e._validate(t, 0, 59, "second")
                };
                e.validateMinute = function(t) {
                    return e._validate(t, 0, 59, "minute")
                };
                e.validateHour = function(t) {
                    return e._validate(t, 0, 23, "hour")
                };
                e.validateDay = function(t, n, r) {
                    return e._validate(t, 1, e.getDaysInMonth(n, r), "day")
                };
                e.validateMonth = function(t) {
                    return e._validate(t, 0, 11, "month")
                };
                e.validateYear = function(t) {
                    return e._validate(t, 0, 9999, "year")
                };
                t.set = function(t) {
                    if (e.validateMillisecond(t.millisecond)) {
                        this.addMilliseconds(t.millisecond - this.getMilliseconds())
                    }
                    if (e.validateSecond(t.second)) {
                        this.addSeconds(t.second - this.getSeconds())
                    }
                    if (e.validateMinute(t.minute)) {
                        this.addMinutes(t.minute - this.getMinutes())
                    }
                    if (e.validateHour(t.hour)) {
                        this.addHours(t.hour - this.getHours())
                    }
                    if (e.validateMonth(t.month)) {
                        this.addMonths(t.month - this.getMonth())
                    }
                    if (e.validateYear(t.year)) {
                        this.addYears(t.year - this.getFullYear())
                    }
                    if (e.validateDay(t.day, this.getFullYear(), this.getMonth())) {
                        this.addDays(t.day - this.getDate())
                    }
                    if (t.timezone) {
                        this.setTimezone(t.timezone)
                    }
                    if (t.timezoneOffset) {
                        this.setTimezoneOffset(t.timezoneOffset)
                    }
                    if (t.week && e._validate(t.week, 0, 53, "week")) {
                        this.setWeek(t.week)
                    }
                    return this
                };
                t.moveToFirstDayOfMonth = function() {
                    return this.set({
                        day: 1
                    })
                };
                t.moveToLastDayOfMonth = function() {
                    return this.set({
                        day: e.getDaysInMonth(this.getFullYear(), this.getMonth())
                    })
                };
                t.moveToNthOccurrence = function(e, t) {
                    var n = 0;
                    if (t > 0) {
                        n = t - 1
                    } else if (t === -1) {
                        this.moveToLastDayOfMonth();
                        if (this.getDay() !== e) {
                            this.moveToDayOfWeek(e, -1)
                        }
                        return this
                    }
                    return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(e, +1).addWeeks(n)
                };
                t.moveToDayOfWeek = function(e, t) {
                    var n = (e - this.getDay() + 7 * (t || +1)) % 7;
                    return this.addDays(n === 0 ? n += 7 * (t || +1) : n)
                };
                t.moveToMonth = function(e, t) {
                    var n = (e - this.getMonth() + 12 * (t || +1)) % 12;
                    return this.addMonths(n === 0 ? n += 12 * (t || +1) : n)
                };
                t.getOrdinalNumber = function() {
                    return Math.ceil((this.clone().clearTime() - new Date(this.getFullYear(), 0, 1)) / 864e5) + 1
                };
                t.getTimezone = function() {
                    return e.getTimezoneAbbreviation(this.getUTCOffset())
                };
                t.setTimezoneOffset = function(e) {
                    var t = this.getTimezoneOffset(),
                        n = Number(e) * -6 / 10;
                    return this.addMinutes(n - t)
                };
                t.setTimezone = function(t) {
                    return this.setTimezoneOffset(e.getTimezoneOffset(t))
                };
                t.hasDaylightSavingTime = function() {
                    return Date.today().set({
                        month: 0,
                        day: 1
                    }).getTimezoneOffset() !== Date.today().set({
                        month: 6,
                        day: 1
                    }).getTimezoneOffset()
                };
                t.isDaylightSavingTime = function() {
                    return this.hasDaylightSavingTime() && (new Date).getTimezoneOffset() === Date.today().set({
                        month: 6,
                        day: 1
                    }).getTimezoneOffset()
                };
                t.getUTCOffset = function() {
                    var e = this.getTimezoneOffset() * -10 / 6,
                        t;
                    if (e < 0) {
                        t = (e - 1e4).toString();
                        return t.charAt(0) + t.substr(2)
                    } else {
                        t = (e + 1e4).toString();
                        return "+" + t.substr(1)
                    }
                };
                t.getElapsed = function(e) {
                    return (e || new Date) - this
                };
                if (!t.toISOString) {
                    t.toISOString = function() {
                        function e(e) {
                            return e < 10 ? "0" + e : e
                        }
                        return '"' + this.getUTCFullYear() + "-" + e(this.getUTCMonth() + 1) + "-" + e(this.getUTCDate()) + "T" + e(this.getUTCHours()) + ":" + e(this.getUTCMinutes()) + ":" + e(this.getUTCSeconds()) + 'Z"'
                    }
                }
                t._toString = t.toString;
                t.toString = function(e) {
                    var t = this;
                    if (e && e.length == 1) {
                        var i = n.formatPatterns;
                        t.t = t.toString;
                        switch (e) {
                            case "d":
                                return t.t(i.shortDate);
                            case "D":
                                return t.t(i.longDate);
                            case "F":
                                return t.t(i.fullDateTime);
                            case "m":
                                return t.t(i.monthDay);
                            case "r":
                                return t.t(i.rfc1123);
                            case "s":
                                return t.t(i.sortableDateTime);
                            case "t":
                                return t.t(i.shortTime);
                            case "T":
                                return t.t(i.longTime);
                            case "u":
                                return t.t(i.universalSortableDateTime);
                            case "y":
                                return t.t(i.yearMonth)
                        }
                    }
                    var s = function(e) {
                        switch (e * 1) {
                            case 1:
                            case 21:
                            case 31:
                                return "st";
                            case 2:
                            case 22:
                                return "nd";
                            case 3:
                            case 23:
                                return "rd";
                            default:
                                return "th"
                        }
                    };
                    return e ? e.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g, function(e) {
                        if (e.charAt(0) === "\\") {
                            return e.replace("\\", "")
                        }
                        t.h = t.getHours;
                        switch (e) {
                            case "hh":
                                return r(t.h() < 13 ? t.h() === 0 ? 12 : t.h() : t.h() - 12);
                            case "h":
                                return t.h() < 13 ? t.h() === 0 ? 12 : t.h() : t.h() - 12;
                            case "HH":
                                return r(t.h());
                            case "H":
                                return t.h();
                            case "mm":
                                return r(t.getMinutes());
                            case "m":
                                return t.getMinutes();
                            case "ss":
                                return r(t.getSeconds());
                            case "s":
                                return t.getSeconds();
                            case "yyyy":
                                return r(t.getFullYear(), 4);
                            case "yy":
                                return r(t.getFullYear());
                            case "dddd":
                                return n.dayNames[t.getDay()];
                            case "ddd":
                                return n.abbreviatedDayNames[t.getDay()];
                            case "dd":
                                return r(t.getDate());
                            case "d":
                                return t.getDate();
                            case "MMMM":
                                return n.monthNames[t.getMonth()];
                            case "MMM":
                                return n.abbreviatedMonthNames[t.getMonth()];
                            case "MM":
                                return r(t.getMonth() + 1);
                            case "M":
                                return t.getMonth() + 1;
                            case "t":
                                return t.h() < 12 ? n.amDesignator.substring(0, 1) : n.pmDesignator.substring(0, 1);
                            case "tt":
                                return t.h() < 12 ? n.amDesignator : n.pmDesignator;
                            case "S":
                                return s(t.getDate());
                            default:
                                return e
                        }
                    }) : this._toString()
                }
            })();
            (function() {
                var e = Date,
                    t = e.prototype,
                    n = e.CultureInfo,
                    r = Number.prototype;
                t._orient = +1;
                t._nth = null;
                t._is = false;
                t._same = false;
                t._isSecond = false;
                r._dateElement = "day";
                t.next = function() {
                    this._orient = +1;
                    return this
                };
                e.next = function() {
                    return e.today().next()
                };
                t.last = t.prev = t.previous = function() {
                    this._orient = -1;
                    return this
                };
                e.last = e.prev = e.previous = function() {
                    return e.today().last()
                };
                t.is = function() {
                    this._is = true;
                    return this
                };
                t.same = function() {
                    this._same = true;
                    this._isSecond = false;
                    return this
                };
                t.today = function() {
                    return this.same().day()
                };
                t.weekday = function() {
                    if (this._is) {
                        this._is = false;
                        return !this.is().sat() && !this.is().sun()
                    }
                    return false
                };
                t.at = function(t) {
                    return typeof t === "string" ? e.parse(this.toString("d") + " " + t) : this.set(t)
                };
                r.fromNow = r.after = function(e) {
                    var t = {};
                    t[this._dateElement] = this;
                    return (!e ? new Date : e.clone()).add(t)
                };
                r.ago = r.before = function(e) {
                    var t = {};
                    t[this._dateElement] = this * -1;
                    return (!e ? new Date : e.clone()).add(t)
                };
                var i = "sunday monday tuesday wednesday thursday friday saturday".split(/\s/),
                    s = "january february march april may june july august september october november december".split(/\s/),
                    o = "Millisecond Second Minute Hour Day Week Month Year".split(/\s/),
                    u = "Milliseconds Seconds Minutes Hours Date Week Month FullYear".split(/\s/),
                    a = "final first second third fourth fifth".split(/\s/),
                    f;
                t.toObject = function() {
                    var e = {};
                    for (var t = 0; t < o.length; t++) {
                        e[o[t].toLowerCase()] = this["get" + u[t]]()
                    }
                    return e
                };
                e.fromObject = function(e) {
                    e.week = null;
                    return Date.today().set(e)
                };
                var l = function(t) {
                    return function() {
                        if (this._is) {
                            this._is = false;
                            return this.getDay() == t
                        }
                        if (this._nth !== null) {
                            if (this._isSecond) {
                                this.addSeconds(this._orient * -1)
                            }
                            this._isSecond = false;
                            var n = this._nth;
                            this._nth = null;
                            var r = this.clone().moveToLastDayOfMonth();
                            this.moveToNthOccurrence(t, n);
                            if (this > r) {
                                throw new RangeError(e.getDayName(t) + " does not occur " + n + " times in the month of " + e.getMonthName(r.getMonth()) + " " + r.getFullYear() + ".")
                            }
                            return this
                        }
                        return this.moveToDayOfWeek(t, this._orient)
                    }
                };
                var c = function(t) {
                    return function() {
                        var r = e.today(),
                            i = t - r.getDay();
                        if (t === 0 && n.firstDayOfWeek === 1 && r.getDay() !== 0) {
                            i = i + 7
                        }
                        return r.addDays(i)
                    }
                };
                for (var h = 0; h < i.length; h++) {
                    e[i[h].toUpperCase()] = e[i[h].toUpperCase().substring(0, 3)] = h;
                    e[i[h]] = e[i[h].substring(0, 3)] = c(h);
                    t[i[h]] = t[i[h].substring(0, 3)] = l(h)
                }
                var p = function(e) {
                    return function() {
                        if (this._is) {
                            this._is = false;
                            return this.getMonth() === e
                        }
                        return this.moveToMonth(e, this._orient)
                    }
                };
                var d = function(t) {
                    return function() {
                        return e.today().set({
                            month: t,
                            day: 1
                        })
                    }
                };
                for (var v = 0; v < s.length; v++) {
                    e[s[v].toUpperCase()] = e[s[v].toUpperCase().substring(0, 3)] = v;
                    e[s[v]] = e[s[v].substring(0, 3)] = d(v);
                    t[s[v]] = t[s[v].substring(0, 3)] = p(v)
                }
                var m = function(e) {
                    return function() {
                        if (this._isSecond) {
                            this._isSecond = false;
                            return this
                        }
                        if (this._same) {
                            this._same = this._is = false;
                            var t = this.toObject(),
                                n = (arguments[0] || new Date).toObject(),
                                r = "",
                                i = e.toLowerCase();
                            for (var s = o.length - 1; s > -1; s--) {
                                r = o[s].toLowerCase();
                                if (t[r] != n[r]) {
                                    return false
                                }
                                if (i == r) {
                                    break
                                }
                            }
                            return true
                        }
                        if (e.substring(e.length - 1) != "s") {
                            e += "s"
                        }
                        return this["add" + e](this._orient)
                    }
                };
                var g = function(e) {
                    return function() {
                        this._dateElement = e;
                        return this
                    }
                };
                for (var y = 0; y < o.length; y++) {
                    f = o[y].toLowerCase();
                    t[f] = t[f + "s"] = m(o[y]);
                    r[f] = r[f + "s"] = g(f)
                }
                t._ss = m("Second");
                var b = function(e) {
                    return function(t) {
                        if (this._same) {
                            return this._ss(arguments[0])
                        }
                        if (t || t === 0) {
                            return this.moveToNthOccurrence(t, e)
                        }
                        this._nth = e;
                        if (e === 2 && (t === undefined || t === null)) {
                            this._isSecond = true;
                            return this.addSeconds(this._orient)
                        }
                        return this
                    }
                };
                for (var w = 0; w < a.length; w++) {
                    t[a[w]] = w === 0 ? b(-1) : b(w)
                }
            })();
            (function() {
                Date.Parsing = {
                    Exception: function(e) {
                        this.message = "Parse error at '" + e.substring(0, 10) + " ...'"
                    }
                };
                var e = Date.Parsing;
                var t = e.Operators = {
                    rtoken: function(t) {
                        return function(n) {
                            var r = n.match(t);
                            if (r) {
                                return [r[0], n.substring(r[0].length)]
                            } else {
                                throw new e.Exception(n)
                            }
                        }
                    },
                    token: function(e) {
                        return function(e) {
                            return t.rtoken(new RegExp("^s*" + e + "s*"))(e)
                        }
                    },
                    stoken: function(e) {
                        return t.rtoken(new RegExp("^" + e))
                    },
                    until: function(e) {
                        return function(t) {
                            var n = [],
                                r = null;
                            while (t.length) {
                                try {
                                    r = e.call(this, t)
                                } catch (i) {
                                    n.push(r[0]);
                                    t = r[1];
                                    continue
                                }
                                break
                            }
                            return [n, t]
                        }
                    },
                    many: function(e) {
                        return function(t) {
                            var n = [],
                                r = null;
                            while (t.length) {
                                try {
                                    r = e.call(this, t)
                                } catch (i) {
                                    return [n, t]
                                }
                                n.push(r[0]);
                                t = r[1]
                            }
                            return [n, t]
                        }
                    },
                    optional: function(e) {
                        return function(t) {
                            var n = null;
                            try {
                                n = e.call(this, t)
                            } catch (r) {
                                return [null, t]
                            }
                            return [n[0], n[1]]
                        }
                    },
                    not: function(t) {
                        return function(n) {
                            try {
                                t.call(this, n)
                            } catch (r) {
                                return [null, n]
                            }
                            throw new e.Exception(n)
                        }
                    },
                    ignore: function(e) {
                        return e ? function(t) {
                            var n = null;
                            n = e.call(this, t);
                            return [null, n[1]]
                        } : null
                    },
                    product: function() {
                        var e = arguments[0],
                            n = Array.prototype.slice.call(arguments, 1),
                            r = [];
                        for (var i = 0; i < e.length; i++) {
                            r.push(t.each(e[i], n))
                        }
                        return r
                    },
                    cache: function(t) {
                        var n = {},
                            r = null;
                        return function(i) {
                            try {
                                r = n[i] = n[i] || t.call(this, i)
                            } catch (s) {
                                r = n[i] = s
                            }
                            if (r instanceof e.Exception) {
                                throw r
                            } else {
                                return r
                            }
                        }
                    },
                    any: function() {
                        var t = arguments;
                        return function(n) {
                            var r = null;
                            for (var i = 0; i < t.length; i++) {
                                if (t[i] == null) {
                                    continue
                                }
                                try {
                                    r = t[i].call(this, n)
                                } catch (s) {
                                    r = null
                                }
                                if (r) {
                                    return r
                                }
                            }
                            throw new e.Exception(n)
                        }
                    },
                    each: function() {
                        var t = arguments;
                        return function(n) {
                            var r = [],
                                i = null;
                            for (var s = 0; s < t.length; s++) {
                                if (t[s] == null) {
                                    continue
                                }
                                try {
                                    i = t[s].call(this, n)
                                } catch (o) {
                                    throw new e.Exception(n)
                                }
                                r.push(i[0]);
                                n = i[1]
                            }
                            return [r, n]
                        }
                    },
                    all: function() {
                        var e = arguments,
                            t = t;
                        return t.each(t.optional(e))
                    },
                    sequence: function(n, r, i) {
                        r = r || t.rtoken(/^\s*/);
                        i = i || null;
                        if (n.length == 1) {
                            return n[0]
                        }
                        return function(t) {
                            var s = null,
                                o = null;
                            var u = [];
                            for (var a = 0; a < n.length; a++) {
                                try {
                                    s = n[a].call(this, t)
                                } catch (f) {
                                    break
                                }
                                u.push(s[0]);
                                try {
                                    o = r.call(this, s[1])
                                } catch (l) {
                                    o = null;
                                    break
                                }
                                t = o[1]
                            }
                            if (!s) {
                                throw new e.Exception(t)
                            }
                            if (o) {
                                throw new e.Exception(o[1])
                            }
                            if (i) {
                                try {
                                    s = i.call(this, s[1])
                                } catch (c) {
                                    throw new e.Exception(s[1])
                                }
                            }
                            return [u, s ? s[1] : t]
                        }
                    },
                    between: function(e, n, i) {
                        i = i || e;
                        var s = t.each(t.ignore(e), n, t.ignore(i));
                        return function(e) {
                            var t = s.call(this, e);
                            return [
                                [t[0][0], r[0][2]], t[1]
                            ]
                        }
                    },
                    list: function(e, n, r) {
                        n = n || t.rtoken(/^\s*/);
                        r = r || null;
                        return e instanceof Array ? t.each(t.product(e.slice(0, -1), t.ignore(n)), e.slice(-1), t.ignore(r)) : t.each(t.many(t.each(e, t.ignore(n))), px, t.ignore(r))
                    },
                    set: function(n, r, i) {
                        r = r || t.rtoken(/^\s*/);
                        i = i || null;
                        return function(s) {
                            var o = null,
                                u = null,
                                a = null,
                                f = null,
                                l = [
                                    [], s
                                ],
                                c = false;
                            for (var h = 0; h < n.length; h++) {
                                a = null;
                                u = null;
                                o = null;
                                c = n.length == 1;
                                try {
                                    o = n[h].call(this, s)
                                } catch (p) {
                                    continue
                                }
                                f = [
                                    [o[0]], o[1]
                                ];
                                if (o[1].length > 0 && !c) {
                                    try {
                                        a = r.call(this, o[1])
                                    } catch (d) {
                                        c = true
                                    }
                                } else {
                                    c = true
                                }
                                if (!c && a[1].length === 0) {
                                    c = true
                                }
                                if (!c) {
                                    var v = [];
                                    for (var m = 0; m < n.length; m++) {
                                        if (h != m) {
                                            v.push(n[m])
                                        }
                                    }
                                    u = t.set(v, r).call(this, a[1]);
                                    if (u[0].length > 0) {
                                        f[0] = f[0].concat(u[0]);
                                        f[1] = u[1]
                                    }
                                }
                                if (f[1].length < l[1].length) {
                                    l = f
                                }
                                if (l[1].length === 0) {
                                    break
                                }
                            }
                            if (l[0].length === 0) {
                                return l
                            }
                            if (i) {
                                try {
                                    a = i.call(this, l[1])
                                } catch (g) {
                                    throw new e.Exception(l[1])
                                }
                                l[1] = a[1]
                            }
                            return l
                        }
                    },
                    forward: function(e, t) {
                        return function(n) {
                            return e[t].call(this, n)
                        }
                    },
                    replace: function(e, t) {
                        return function(n) {
                            var r = e.call(this, n);
                            return [t, r[1]]
                        }
                    },
                    process: function(e, t) {
                        return function(n) {
                            var r = e.call(this, n);
                            return [t.call(this, r[0]), r[1]]
                        }
                    },
                    min: function(t, n) {
                        return function(r) {
                            var i = n.call(this, r);
                            if (i[0].length < t) {
                                throw new e.Exception(r)
                            }
                            return i
                        }
                    }
                };
                var n = function(e) {
                    return function() {
                        var t = null,
                            n = [];
                        if (arguments.length > 1) {
                            t = Array.prototype.slice.call(arguments)
                        } else if (arguments[0] instanceof Array) {
                            t = arguments[0]
                        }
                        if (t) {
                            for (var r = 0, i = t.shift(); r < i.length; r++) {
                                t.unshift(i[r]);
                                n.push(e.apply(null, t));
                                t.shift();
                                return n
                            }
                        } else {
                            return e.apply(null, arguments)
                        }
                    }
                };
                var i = "optional not ignore cache".split(/\s/);
                for (var s = 0; s < i.length; s++) {
                    t[i[s]] = n(t[i[s]])
                }
                var o = function(e) {
                    return function() {
                        if (arguments[0] instanceof Array) {
                            return e.apply(null, arguments[0])
                        } else {
                            return e.apply(null, arguments)
                        }
                    }
                };
                var u = "each any all".split(/\s/);
                for (var a = 0; a < u.length; a++) {
                    t[u[a]] = o(t[u[a]])
                }
            })();
            (function() {
                var e = Date,
                    t = e.prototype,
                    n = e.CultureInfo;
                var r = function(e) {
                    var t = [];
                    for (var n = 0; n < e.length; n++) {
                        if (e[n] instanceof Array) {
                            t = t.concat(r(e[n]))
                        } else {
                            if (e[n]) {
                                t.push(e[n])
                            }
                        }
                    }
                    return t
                };
                e.Grammar = {};
                e.Translator = {
                    hour: function(e) {
                        return function() {
                            this.hour = Number(e)
                        }
                    },
                    minute: function(e) {
                        return function() {
                            this.minute = Number(e)
                        }
                    },
                    second: function(e) {
                        return function() {
                            this.second = Number(e)
                        }
                    },
                    meridian: function(e) {
                        return function() {
                            this.meridian = e.slice(0, 1).toLowerCase()
                        }
                    },
                    timezone: function(e) {
                        return function() {
                            var t = e.replace(/[^\d\+\-]/g, "");
                            if (t.length) {
                                this.timezoneOffset = Number(t)
                            } else {
                                this.timezone = e.toLowerCase()
                            }
                        }
                    },
                    day: function(e) {
                        var t = e[0];
                        return function() {
                            this.day = Number(t.match(/\d+/)[0])
                        }
                    },
                    month: function(e) {
                        return function() {
                            this.month = e.length == 3 ? "jan feb mar apr may jun jul aug sep oct nov dec".indexOf(e) / 4 : Number(e) - 1
                        }
                    },
                    year: function(e) {
                        return function() {
                            var t = Number(e);
                            this.year = e.length > 2 ? t : t + (t + 2e3 < n.twoDigitYearMax ? 2e3 : 1900)
                        }
                    },
                    rday: function(e) {
                        return function() {
                            switch (e) {
                                case "yesterday":
                                    this.days = -1;
                                    break;
                                case "tomorrow":
                                    this.days = 1;
                                    break;
                                case "today":
                                    this.days = 0;
                                    break;
                                case "now":
                                    this.days = 0;
                                    this.now = true;
                                    break
                            }
                        }
                    },
                    finishExact: function(t) {
                        t = t instanceof Array ? t : [t];
                        for (var n = 0; n < t.length; n++) {
                            if (t[n]) {
                                t[n].call(this)
                            }
                        }
                        var r = new Date;
                        if ((this.hour || this.minute) && !this.month && !this.year && !this.day) {
                            this.day = r.getDate()
                        }
                        if (!this.year) {
                            this.year = r.getFullYear()
                        }
                        if (!this.month && this.month !== 0) {
                            this.month = r.getMonth()
                        }
                        if (!this.day) {
                            this.day = 1
                        }
                        if (!this.hour) {
                            this.hour = 0
                        }
                        if (!this.minute) {
                            this.minute = 0
                        }
                        if (!this.second) {
                            this.second = 0
                        }
                        if (this.meridian && this.hour) {
                            if (this.meridian == "p" && this.hour < 12) {
                                this.hour = this.hour + 12
                            } else if (this.meridian == "a" && this.hour == 12) {
                                this.hour = 0
                            }
                        }
                        if (this.day > e.getDaysInMonth(this.year, this.month)) {
                            throw new RangeError(this.day + " is not a valid value for days.")
                        }
                        var i = new Date(this.year, this.month, this.day, this.hour, this.minute, this.second);
                        if (this.timezone) {
                            i.set({
                                timezone: this.timezone
                            })
                        } else if (this.timezoneOffset) {
                            i.set({
                                timezoneOffset: this.timezoneOffset
                            })
                        }
                        return i
                    },
                    finish: function(t) {
                        t = t instanceof Array ? r(t) : [t];
                        if (t.length === 0) {
                            return null
                        }
                        for (var n = 0; n < t.length; n++) {
                            if (typeof t[n] == "function") {
                                t[n].call(this)
                            }
                        }
                        var i = e.today();
                        if (this.now && !this.unit && !this.operator) {
                            return new Date
                        } else if (this.now) {
                            i = new Date
                        }
                        var s = !!(this.days && this.days !== null || this.orient || this.operator);
                        var o, u, a;
                        a = this.orient == "past" || this.operator == "subtract" ? -1 : 1;
                        if (!this.now && "hour minute second".indexOf(this.unit) != -1) {
                            i.setTimeToNow()
                        }
                        if (this.month || this.month === 0) {
                            if ("year day hour minute second".indexOf(this.unit) != -1) {
                                this.value = this.month + 1;
                                this.month = null;
                                s = true
                            }
                        }
                        if (!s && this.weekday && !this.day && !this.days) {
                            var f = Date[this.weekday]();
                            this.day = f.getDate();
                            if (!this.month) {
                                this.month = f.getMonth()
                            }
                            this.year = f.getFullYear()
                        }
                        if (s && this.weekday && this.unit != "month") {
                            this.unit = "day";
                            o = e.getDayNumberFromName(this.weekday) - i.getDay();
                            u = 7;
                            this.days = o ? (o + a * u) % u : a * u
                        }
                        if (this.month && this.unit == "day" && this.operator) {
                            this.value = this.month + 1;
                            this.month = null
                        }
                        if (this.value != null && this.month != null && this.year != null) {
                            this.day = this.value * 1
                        }
                        if (this.month && !this.day && this.value) {
                            i.set({
                                day: this.value * 1
                            });
                            if (!s) {
                                this.day = this.value * 1
                            }
                        }
                        if (!this.month && this.value && this.unit == "month" && !this.now) {
                            this.month = this.value;
                            s = true
                        }
                        if (s && (this.month || this.month === 0) && this.unit != "year") {
                            this.unit = "month";
                            o = this.month - i.getMonth();
                            u = 12;
                            this.months = o ? (o + a * u) % u : a * u;
                            this.month = null
                        }
                        if (!this.unit) {
                            this.unit = "day"
                        }
                        if (!this.value && this.operator && this.operator !== null && this[this.unit + "s"] && this[this.unit + "s"] !== null) {
                            this[this.unit + "s"] = this[this.unit + "s"] + (this.operator == "add" ? 1 : -1) + (this.value || 0) * a
                        } else if (this[this.unit + "s"] == null || this.operator != null) {
                            if (!this.value) {
                                this.value = 1
                            }
                            this[this.unit + "s"] = this.value * a
                        }
                        if (this.meridian && this.hour) {
                            if (this.meridian == "p" && this.hour < 12) {
                                this.hour = this.hour + 12
                            } else if (this.meridian == "a" && this.hour == 12) {
                                this.hour = 0
                            }
                        }
                        if (this.weekday && !this.day && !this.days) {
                            var f = Date[this.weekday]();
                            this.day = f.getDate();
                            if (f.getMonth() !== i.getMonth()) {
                                this.month = f.getMonth()
                            }
                        }
                        if ((this.month || this.month === 0) && !this.day) {
                            this.day = 1
                        }
                        if (!this.orient && !this.operator && this.unit == "week" && this.value && !this.day && !this.month) {
                            return Date.today().setWeek(this.value)
                        }
                        if (s && this.timezone && this.day && this.days) {
                            this.day = this.days
                        }
                        return s ? i.add(this) : i.set(this)
                    }
                };
                var i = e.Parsing.Operators,
                    s = e.Grammar,
                    o = e.Translator,
                    u;
                s.datePartDelimiter = i.rtoken(/^([\s\-\.\,\/\x27]+)/);
                s.timePartDelimiter = i.stoken(":");
                s.whiteSpace = i.rtoken(/^\s*/);
                s.generalDelimiter = i.rtoken(/^(([\s\,]|at|@|on)+)/);
                var a = {};
                s.ctoken = function(e) {
                    var t = a[e];
                    if (!t) {
                        var r = n.regexPatterns;
                        var s = e.split(/\s+/),
                            o = [];
                        for (var u = 0; u < s.length; u++) {
                            o.push(i.replace(i.rtoken(r[s[u]]), s[u]))
                        }
                        t = a[e] = i.any.apply(null, o)
                    }
                    return t
                };
                s.ctoken2 = function(e) {
                    return i.rtoken(n.regexPatterns[e])
                };
                s.h = i.cache(i.process(i.rtoken(/^(0[0-9]|1[0-2]|[1-9])/), o.hour));
                s.hh = i.cache(i.process(i.rtoken(/^(0[0-9]|1[0-2])/), o.hour));
                s.H = i.cache(i.process(i.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/), o.hour));
                s.HH = i.cache(i.process(i.rtoken(/^([0-1][0-9]|2[0-3])/), o.hour));
                s.m = i.cache(i.process(i.rtoken(/^([0-5][0-9]|[0-9])/), o.minute));
                s.mm = i.cache(i.process(i.rtoken(/^[0-5][0-9]/), o.minute));
                s.s = i.cache(i.process(i.rtoken(/^([0-5][0-9]|[0-9])/), o.second));
                s.ss = i.cache(i.process(i.rtoken(/^[0-5][0-9]/), o.second));
                s.hms = i.cache(i.sequence([s.H, s.m, s.s], s.timePartDelimiter));
                s.t = i.cache(i.process(s.ctoken2("shortMeridian"), o.meridian));
                s.tt = i.cache(i.process(s.ctoken2("longMeridian"), o.meridian));
                s.z = i.cache(i.process(i.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/), o.timezone));
                s.zz = i.cache(i.process(i.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/), o.timezone));
                s.zzz = i.cache(i.process(s.ctoken2("timezone"), o.timezone));
                s.timeSuffix = i.each(i.ignore(s.whiteSpace), i.set([s.tt, s.zzz]));
                s.time = i.each(i.optional(i.ignore(i.stoken("T"))), s.hms, s.timeSuffix);
                s.d = i.cache(i.process(i.each(i.rtoken(/^([0-2]\d|3[0-1]|\d)/), i.optional(s.ctoken2("ordinalSuffix"))), o.day));
                s.dd = i.cache(i.process(i.each(i.rtoken(/^([0-2]\d|3[0-1])/), i.optional(s.ctoken2("ordinalSuffix"))), o.day));
                s.ddd = s.dddd = i.cache(i.process(s.ctoken("sun mon tue wed thu fri sat"), function(e) {
                    return function() {
                        this.weekday = e
                    }
                }));
                s.M = i.cache(i.process(i.rtoken(/^(1[0-2]|0\d|\d)/), o.month));
                s.MM = i.cache(i.process(i.rtoken(/^(1[0-2]|0\d)/), o.month));
                s.MMM = s.MMMM = i.cache(i.process(s.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"), o.month));
                s.y = i.cache(i.process(i.rtoken(/^(\d\d?)/), o.year));
                s.yy = i.cache(i.process(i.rtoken(/^(\d\d)/), o.year));
                s.yyy = i.cache(i.process(i.rtoken(/^(\d\d?\d?\d?)/), o.year));
                s.yyyy = i.cache(i.process(i.rtoken(/^(\d\d\d\d)/), o.year));
                u = function() {
                    return i.each(i.any.apply(null, arguments), i.not(s.ctoken2("timeContext")))
                };
                s.day = u(s.d, s.dd);
                s.month = u(s.M, s.MMM);
                s.year = u(s.yyyy, s.yy);
                s.orientation = i.process(s.ctoken("past future"), function(e) {
                    return function() {
                        this.orient = e
                    }
                });
                s.operator = i.process(s.ctoken("add subtract"), function(e) {
                    return function() {
                        this.operator = e
                    }
                });
                s.rday = i.process(s.ctoken("yesterday tomorrow today now"), o.rday);
                s.unit = i.process(s.ctoken("second minute hour day week month year"), function(e) {
                    return function() {
                        this.unit = e
                    }
                });
                s.value = i.process(i.rtoken(/^\d\d?(st|nd|rd|th)?/), function(e) {
                    return function() {
                        this.value = e.replace(/\D/g, "")
                    }
                });
                s.expression = i.set([s.rday, s.operator, s.value, s.unit, s.orientation, s.ddd, s.MMM]);
                u = function() {
                    return i.set(arguments, s.datePartDelimiter)
                };
                s.mdy = u(s.ddd, s.month, s.day, s.year);
                s.ymd = u(s.ddd, s.year, s.month, s.day);
                s.dmy = u(s.ddd, s.day, s.month, s.year);
                s.date = function(e) {
                    return (s[n.dateElementOrder] || s.mdy).call(this, e)
                };
                s.format = i.process(i.many(i.any(i.process(i.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/), function(t) {
                    if (s[t]) {
                        return s[t]
                    } else {
                        throw e.Parsing.Exception(t)
                    }
                }), i.process(i.rtoken(/^[^dMyhHmstz]+/), function(e) {
                    return i.ignore(i.stoken(e))
                }))), function(e) {
                    return i.process(i.each.apply(null, e), o.finishExact)
                });
                var f = {};
                var l = function(e) {
                    return f[e] = f[e] || s.format(e)[0]
                };
                s.formats = function(e) {
                    if (e instanceof Array) {
                        var t = [];
                        for (var n = 0; n < e.length; n++) {
                            t.push(l(e[n]))
                        }
                        return i.any.apply(null, t)
                    } else {
                        return l(e)
                    }
                };
                s._formats = s.formats(['"yyyy-MM-ddTHH:mm:ssZ"', "yyyy-MM-ddTHH:mm:ssZ", "yyyy-MM-ddTHH:mm:ssz", "yyyy-MM-ddTHH:mm:ss", "yyyy-MM-ddTHH:mmZ", "yyyy-MM-ddTHH:mmz", "yyyy-MM-ddTHH:mm", "ddd, MMM dd, yyyy H:mm:ss tt", "ddd MMM d yyyy HH:mm:ss zzz", "MMddyyyy", "ddMMyyyy", "Mddyyyy", "ddMyyyy", "Mdyyyy", "dMyyyy", "yyyy", "Mdyy", "dMyy", "d"]);
                s._start = i.process(i.set([s.date, s.time, s.expression], s.generalDelimiter, s.whiteSpace), o.finish);
                s.start = function(e) {
                    try {
                        var t = s._formats.call({}, e);
                        if (t[1].length === 0) {
                            return t
                        }
                    } catch (n) {}
                    return s._start.call({}, e)
                };
                e._parse = e.parse;
                e.parse = function(t) {
                    var n = null;
                    if (!t) {
                        return null
                    }
                    if (t instanceof Date) {
                        return t
                    }
                    try {
                        n = e.Grammar.start.call({}, t.replace(/^\s*(\S*(\s+\S+)*)\s*$/, "$1"))
                    } catch (r) {
                        return null
                    }
                    return n[1].length === 0 ? n[0] : null
                };
                e.getParseFunction = function(t) {
                    var n = e.Grammar.formats(t);
                    return function(e) {
                        var t = null;
                        try {
                            t = n.call({}, e)
                        } catch (r) {
                            return null
                        }
                        return t[1].length === 0 ? t[0] : null
                    }
                };
                e.parseExact = function(t, n) {
                    return e.getParseFunction(n)(t)
                }
            })(); ! function(e) {
                var t = function(t, n, r) {
                    var i = typeof n == "object";
                    var s;
                    this.startDate = Date.today();
                    this.endDate = Date.today();
                    this.minDate = false;
                    this.maxDate = false;
                    this.changed = false;
                    this.cleared = false;
                    this.showDropdowns = false;
                    this.ranges = {};
                    this.dateLimit = false;
                    this.opens = "right";
                    this.cb = function() {};
                    this.format = "MM/dd/yyyy";
                    this.separator = " - ";
                    this.showWeekNumbers = false;
                    this.buttonClasses = ["btn-success"];
                    this.applyClass = "btn btn-small btn-success";
                    this.clearClass = "btn btn-small";
                    this.locale = {
                        applyLabel: "Apply",
                        clearLabel: "Clear",
                        fromLabel: "From",
                        toLabel: "To",
                        weekLabel: "W",
                        customRangeLabel: "Custom Range",
                        daysOfWeek: Date.CultureInfo.shortestDayNames,
                        monthNames: Date.CultureInfo.monthNames,
                        firstDay: 0
                    };
                    s = this.locale;
                    this.leftCalendar = {
                        month: Date.today().set({
                            day: 1,
                            month: this.startDate.getMonth(),
                            year: this.startDate.getFullYear()
                        }),
                        calendar: Array()
                    };
                    this.rightCalendar = {
                        month: Date.today().set({
                            day: 1,
                            month: this.endDate.getMonth(),
                            year: this.endDate.getFullYear()
                        }),
                        calendar: Array()
                    };
                    this.element = e(t);
                    if (this.element.hasClass("pull-right")) this.opens = "left";
                    if (this.element.is("input")) {
                        this.element.on({
                            click: e.proxy(this.show, this),
                            focus: e.proxy(this.show, this)
                        })
                    } else {
                        this.element.on("click", e.proxy(this.show, this))
                    }
                    if (i) {
                        if (typeof n.locale == "object") {
                            e.each(s, function(e, t) {
                                s[e] = n.locale[e] || t
                            })
                        }
                        if (n.applyClass) {
                            this.applyClass = n.applyClass
                        }
                        if (n.clearClass) {
                            this.clearClass = n.clearClass
                        }
                    }
                    var o = '<div class="daterangepicker dropdown-menu">' + '<div class="calendar left"></div>' + '<div class="calendar right"></div>' + '<div class="ranges">' + '<div class="range_inputs">' + '<div class="daterangepicker_start_input" style="float: left">' + '<label for="daterangepicker_start">' + this.locale.fromLabel + "</label>" + '<input class="input-mini" type="text" name="daterangepicker_start" value="" disabled="disabled" />' + "</div>" + '<div class="daterangepicker_end_input" style="float: left; padding-left: 11px">' + '<label for="daterangepicker_end">' + this.locale.toLabel + "</label>" + '<input class="input-mini" type="text" name="daterangepicker_end" value="" disabled="disabled" />' + "</div>" + '<button class="' + this.applyClass + ' applyBtn" disabled="disabled">' + this.locale.applyLabel + "</button> " + '<button class="' + this.clearClass + ' clearBtn">' + this.locale.clearLabel + "</button>" + "</div>" + "</div>" + "</div>";
                    this.container = e(o).appendTo("body");
                    if (i) {
                        if (typeof n.format == "string") this.format = n.format;
                        if (typeof n.separator == "string") this.separator = n.separator;
                        if (typeof n.startDate == "string") this.startDate = Date.parseExact(n.startDate, this.format);
                        if (typeof n.endDate == "string") this.endDate = Date.parseExact(n.endDate, this.format);
                        if (typeof n.minDate == "string") this.minDate = Date.parseExact(n.minDate, this.format);
                        if (typeof n.maxDate == "string") this.maxDate = Date.parseExact(n.maxDate, this.format);
                        if (typeof n.startDate == "object") this.startDate = n.startDate;
                        if (typeof n.endDate == "object") this.endDate = n.endDate;
                        if (typeof n.minDate == "object") this.minDate = n.minDate;
                        if (typeof n.maxDate == "object") this.maxDate = n.maxDate;
                        if (typeof n.ranges == "object") {
                            for (var u in n.ranges) {
                                var a = n.ranges[u][0];
                                var f = n.ranges[u][1];
                                if (typeof a == "string") a = Date.parse(a);
                                if (typeof f == "string") f = Date.parse(f);
                                if (this.minDate && a < this.minDate) a = this.minDate;
                                if (this.maxDate && f > this.maxDate) f = this.maxDate;
                                if (this.minDate && f < this.minDate || this.maxDate && a > this.maxDate) {
                                    continue
                                }
                                this.ranges[u] = [a, f]
                            }
                            var l = "<ul>";
                            for (var u in this.ranges) {
                                l += "<li>" + u + "</li>"
                            }
                            l += "<li>" + this.locale.customRangeLabel + "</li>";
                            l += "</ul>";
                            this.container.find(".ranges").prepend(l)
                        }
                        if (typeof n.dateLimit == "object") this.dateLimit = n.dateLimit;
                        if (typeof n.locale == "object") {
                            if (typeof n.locale.firstDay == "number") {
                                this.locale.firstDay = n.locale.firstDay;
                                var c = n.locale.firstDay;
                                while (c > 0) {
                                    this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift());
                                    c--
                                }
                            }
                        }
                        if (typeof n.opens == "string") this.opens = n.opens;
                        if (typeof n.showWeekNumbers == "boolean") {
                            this.showWeekNumbers = n.showWeekNumbers
                        }
                        if (typeof n.buttonClasses == "string") {
                            this.buttonClasses = [n.buttonClasses]
                        }
                        if (typeof n.buttonClasses == "object") {
                            this.buttonClasses = n.buttonClasses
                        }
                        if (typeof n.showDropdowns == "boolean") {
                            this.showDropdowns = n.showDropdowns
                        }
                    }
                    var h = this.container;
                    e.each(this.buttonClasses, function(e, t) {
                        h.find("button").addClass(t)
                    });
                    if (this.opens == "right") {
                        var p = this.container.find(".calendar.left");
                        var d = this.container.find(".calendar.right");
                        p.removeClass("left").addClass("right");
                        d.removeClass("right").addClass("left")
                    }
                    if (typeof n == "undefined" || typeof n.ranges == "undefined") this.container.find(".calendar").show();
                    if (typeof r == "function") this.cb = r;
                    this.container.addClass("opens" + this.opens);
                    if (!i || typeof n.startDate == "undefined" && typeof n.endDate == "undefined") {
                        if (e(this.element).is("input[type=text]")) {
                            var v = e(this.element).val();
                            var m = v.split(this.separator);
                            if (m.length == 2) {
                                this.startDate = Date.parseExact(m[0], this.format);
                                this.endDate = Date.parseExact(m[1], this.format)
                            }
                        }
                    }
                    this.container.on("mousedown", e.proxy(this.mousedown, this));
                    this.container.find(".calendar").on("click", ".prev", e.proxy(this.clickPrev, this));
                    this.container.find(".calendar").on("click", ".next", e.proxy(this.clickNext, this));
                    this.container.find(".ranges").on("click", "button.applyBtn", e.proxy(this.clickApply, this));
                    this.container.find(".ranges").on("click", "button.clearBtn", e.proxy(this.clickClear, this));
                    this.container.find(".calendar").on("click", "td.available", e.proxy(this.clickDate, this));
                    this.container.find(".calendar").on("mouseenter", "td.available", e.proxy(this.enterDate, this));
                    this.container.find(".calendar").on("mouseleave", "td.available", e.proxy(this.updateView, this));
                    this.container.find(".ranges").on("click", "li", e.proxy(this.clickRange, this));
                    this.container.find(".ranges").on("mouseenter", "li", e.proxy(this.enterRange, this));
                    this.container.find(".ranges").on("mouseleave", "li", e.proxy(this.updateView, this));
                    this.container.find(".calendar").on("change", "select.yearselect", e.proxy(this.updateYear, this));
                    this.container.find(".calendar").on("change", "select.monthselect", e.proxy(this.updateMonth, this));
                    this.element.on("keyup", e.proxy(this.updateFromControl, this));
                    this.updateView();
                    this.updateCalendars()
                };
                t.prototype = {
                    constructor: t,
                    mousedown: function(t) {
                        t.stopPropagation();
                        if (!this.showDropdowns || e(t.target).not("select").length) t.preventDefault()
                    },
                    updateView: function() {
                        this.leftCalendar.month.set({
                            month: this.startDate.getMonth(),
                            year: this.startDate.getFullYear()
                        });
                        this.rightCalendar.month.set({
                            month: this.endDate.getMonth(),
                            year: this.endDate.getFullYear()
                        });
                        this.container.find("input[name=daterangepicker_start]").val(this.startDate.toString(this.format));
                        this.container.find("input[name=daterangepicker_end]").val(this.endDate.toString(this.format));
                        if (this.startDate.equals(this.endDate) || this.startDate.isBefore(this.endDate)) {
                            this.container.find("button.applyBtn").removeAttr("disabled")
                        } else {
                            this.container.find("button.applyBtn").attr("disabled", "disabled")
                        }
                    },
                    updateFromControl: function() {
                        if (!this.element.is("input")) return;
                        var e = this.element.val().split(this.separator);
                        var t = Date.parseExact(e[0], this.format);
                        var n = Date.parseExact(e[1], this.format);
                        if (t == null || n == null) return;
                        if (n.isBefore(t)) return;
                        this.startDate = t;
                        this.endDate = n;
                        this.updateView();
                        this.cb(this.startDate, this.endDate);
                        this.updateCalendars()
                    },
                    notify: function() {
                        if (!this.cleared) {
                            this.updateView()
                        }
                        if (this.element.is("input")) {
                            this.element.val(this.cleared ? "" : this.startDate.toString(this.format) + this.separator + this.endDate.toString(this.format))
                        }
                        var e = this.cleared ? null : this.startDate,
                            t = this.cleared ? null : this.endDate;
                        this.cleared = false;
                        this.cb(e, t)
                    },
                    move: function() {
                        if (this.opens == "left") {
                            this.container.css({
                                top: this.element.offset().top + this.element.outerHeight(),
                                right: e(window).width() - this.element.offset().left - this.element.outerWidth(),
                                left: "auto"
                            })
                        } else {
                            this.container.css({
                                top: this.element.offset().top + this.element.outerHeight(),
                                left: this.element.offset().left,
                                right: "auto"
                            })
                        }
                    },
                    show: function(t) {
                        this.container.show();
                        this.move();
                        if (t) {
                            t.stopPropagation();
                            t.preventDefault()
                        }
                        this.changed = false;
                        this.element.trigger("shown", {
                            target: t.target,
                            picker: this
                        });
                        e(document).on("mousedown", e.proxy(this.hide, this))
                    },
                    hide: function(t) {
                        this.container.hide();
                        e(document).off("mousedown", this.hide);
                        if (this.changed) {
                            this.changed = false;
                            this.notify()
                        }
                    },
                    enterRange: function(e) {
                        var t = e.target.innerHTML;
                        if (t == this.locale.customRangeLabel) {
                            this.updateView()
                        } else {
                            var n = this.ranges[t];
                            this.container.find("input[name=daterangepicker_start]").val(n[0].toString(this.format));
                            this.container.find("input[name=daterangepicker_end]").val(n[1].toString(this.format))
                        }
                    },
                    clickRange: function(e) {
                        var t = e.target.innerHTML;
                        if (t == this.locale.customRangeLabel) {
                            this.container.find(".calendar").show()
                        } else {
                            var n = this.ranges[t];
                            this.startDate = n[0];
                            this.endDate = n[1];
                            this.leftCalendar.month.set({
                                month: this.startDate.getMonth(),
                                year: this.startDate.getFullYear()
                            });
                            this.rightCalendar.month.set({
                                month: this.endDate.getMonth(),
                                year: this.endDate.getFullYear()
                            });
                            this.updateCalendars();
                            this.changed = true;
                            this.container.find(".calendar").hide();
                            this.hide()
                        }
                    },
                    clickPrev: function(t) {
                        var n = e(t.target).parents(".calendar");
                        if (n.hasClass("left")) {
                            this.leftCalendar.month.add({
                                months: -1
                            })
                        } else {
                            this.rightCalendar.month.add({
                                months: -1
                            })
                        }
                        this.updateCalendars()
                    },
                    clickNext: function(t) {
                        var n = e(t.target).parents(".calendar");
                        if (n.hasClass("left")) {
                            this.leftCalendar.month.add({
                                months: 1
                            })
                        } else {
                            this.rightCalendar.month.add({
                                months: 1
                            })
                        }
                        this.updateCalendars()
                    },
                    enterDate: function(t) {
                        var n = e(t.target).attr("title");
                        var r = n.substr(1, 1);
                        var i = n.substr(3, 1);
                        var s = e(t.target).parents(".calendar");
                        if (s.hasClass("left")) {
                            this.container.find("input[name=daterangepicker_start]").val(this.leftCalendar.calendar[r][i].toString(this.format))
                        } else {
                            this.container.find("input[name=daterangepicker_end]").val(this.rightCalendar.calendar[r][i].toString(this.format))
                        }
                    },
                    clickDate: function(t) {
                        var n = e(t.target).attr("title");
                        var r = n.substr(1, 1);
                        var i = n.substr(3, 1);
                        var s = e(t.target).parents(".calendar");
                        if (s.hasClass("left")) {
                            startDate = this.leftCalendar.calendar[r][i];
                            endDate = this.endDate;
                            if (typeof this.dateLimit == "object") {
                                var o = (new Date(startDate)).add(this.dateLimit);
                                if (endDate.isAfter(o)) {
                                    endDate = o
                                }
                            }
                            this.element.trigger("clicked", {
                                dir: "left",
                                picker: this
                            })
                        } else {
                            startDate = this.startDate;
                            endDate = this.rightCalendar.calendar[r][i];
                            if (typeof this.dateLimit == "object") {
                                var u = {
                                    days: 0 - this.dateLimit.days,
                                    months: 0 - this.dateLimit.months,
                                    years: 0 - this.dateLimit.years
                                };
                                var a = (new Date(endDate)).add(u);
                                if (startDate.isBefore(a)) {
                                    startDate = a
                                }
                            }
                            this.element.trigger("clicked", {
                                dir: "right",
                                picker: this
                            })
                        }
                        s.find("td").removeClass("active");
                        if (startDate.equals(endDate) || startDate.isBefore(endDate)) {
                            e(t.target).addClass("active");
                            if (!startDate.equals(this.startDate) || !endDate.equals(this.endDate)) this.changed = true;
                            this.startDate = startDate;
                            this.endDate = endDate
                        } else if (startDate.isAfter(endDate)) {
                            e(t.target).addClass("active");
                            this.changed = true;
                            this.startDate = startDate;
                            this.endDate = startDate.clone().add(1).days()
                        }
                        this.leftCalendar.month.set({
                            month: this.startDate.getMonth(),
                            year: this.startDate.getFullYear()
                        });
                        this.rightCalendar.month.set({
                            month: this.endDate.getMonth(),
                            year: this.endDate.getFullYear()
                        });
                        this.updateCalendars()
                    },
                    clickApply: function(e) {
                        this.hide()
                    },
                    clickClear: function(e) {
                        this.changed = true;
                        this.cleared = true;
                        this.hide()
                    },
                    updateYear: function(t) {
                        var n = parseInt(e(t.target).val());
                        var r = e(t.target).closest(".calendar").hasClass("left");
                        if (r) {
                            this.leftCalendar.month.set({
                                month: this.startDate.getMonth(),
                                year: n
                            })
                        } else {
                            this.rightCalendar.month.set({
                                month: this.endDate.getMonth(),
                                year: n
                            })
                        }
                        this.updateCalendars()
                    },
                    updateMonth: function(t) {
                        var n = parseInt(e(t.target).val());
                        var r = e(t.target).closest(".calendar").hasClass("left");
                        if (r) {
                            this.leftCalendar.month.set({
                                month: n,
                                year: this.startDate.getFullYear()
                            })
                        } else {
                            this.rightCalendar.month.set({
                                month: n,
                                year: this.endDate.getFullYear()
                            })
                        }
                        this.updateCalendars()
                    },
                    updateCalendars: function() {
                        this.leftCalendar.calendar = this.buildCalendar(this.leftCalendar.month.getMonth(), this.leftCalendar.month.getFullYear());
                        this.rightCalendar.calendar = this.buildCalendar(this.rightCalendar.month.getMonth(), this.rightCalendar.month.getFullYear());
                        this.container.find(".calendar.left").html(this.renderCalendar(this.leftCalendar.calendar, this.startDate, this.minDate, this.maxDate));
                        this.container.find(".calendar.right").html(this.renderCalendar(this.rightCalendar.calendar, this.endDate, this.startDate, this.maxDate));
                        this.container.find(".ranges li").removeClass("active");
                        var e = true;
                        var t = 0;
                        for (var n in this.ranges) {
                            if (this.startDate.equals(this.ranges[n][0]) && this.endDate.equals(this.ranges[n][1])) {
                                e = false;
                                this.container.find(".ranges li:eq(" + t + ")").addClass("active")
                            }
                            t++
                        }
                        if (e) this.container.find(".ranges li:last").addClass("active");
                        this.element.trigger("updated", this)
                    },
                    buildCalendar: function(e, t) {
                        var n = Date.today().set({
                            day: 1,
                            month: e,
                            year: t
                        });
                        var r = n.clone().add(-1).day().getMonth();
                        var i = n.clone().add(-1).day().getFullYear();
                        var s = Date.getDaysInMonth(t, e);
                        var o = Date.getDaysInMonth(i, r);
                        var u = n.getDay();
                        var a = Array();
                        for (var f = 0; f < 6; f++) {
                            a[f] = Array()
                        }
                        var l = o - u + this.locale.firstDay + 1;
                        if (l > o) l -= 7;
                        if (u == this.locale.firstDay) l = o - 6;
                        var c = Date.today().set({
                            day: l,
                            month: r,
                            year: i
                        });
                        for (var f = 0, h = 0, p = 0; f < 42; f++, h++, c = c.clone().add(1).day()) {
                            if (f > 0 && h % 7 == 0) {
                                h = 0;
                                p++
                            }
                            a[p][h] = c
                        }
                        return a
                    },
                    renderDropdowns: function(e, t, n) {
                        var r = e.getMonth();
                        var i = '<select class="monthselect">';
                        var s = false;
                        var o = false;
                        for (var u = 0; u < 12; u++) {
                            if ((!s || u >= t.getMonth()) && (!o || u <= n.getMonth())) {
                                i += "<option value='" + u + "'" + (u === r ? " selected='selected'" : "") + ">" + this.locale.monthNames[u] + "</option>"
                            }
                        }
                        i += "</select>";
                        var a = e.getFullYear();
                        var f = n && n.getFullYear() || a + 5;
                        var l = t && t.getFullYear() || a - 50;
                        var c = '<select class="yearselect">';
                        for (var h = l; h <= f; h++) {
                            c += '<option value="' + h + '"' + (h === a ? ' selected="selected"' : "") + ">" + h + "</option>"
                        }
                        c += "</select>";
                        return i + c
                    },
                    renderCalendar: function(t, n, r, i) {
                        var s = '<table class="table-condensed">';
                        s += "<thead>";
                        s += "<tr>";
                        if (this.showWeekNumbers) s += "<th></th>";
                        if (!r || r < t[1][1]) {
                            s += '<th class="prev available"><i class="icon-arrow-left"></i></th>'
                        } else {
                            s += "<th></th>"
                        }
                        var o = this.locale.monthNames[t[1][1].getMonth()] + t[1][1].toString(" yyyy");
                        if (this.showDropdowns) {
                            o = this.renderDropdowns(t[1][1], r, i)
                        }
                        s += '<th colspan="5" style="width: auto">' + o + "</th>";
                        if (!i || i > t[1][1]) {
                            s += '<th class="next available"><i class="icon-arrow-right"></i></th>'
                        } else {
                            s += "<th></th>"
                        }
                        s += "</tr>";
                        s += "<tr>";
                        if (this.showWeekNumbers) s += '<th class="week">' + this.locale.weekLabel + "</th>";
                        e.each(this.locale.daysOfWeek, function(e, t) {
                            s += "<th>" + t + "</th>"
                        });
                        s += "</tr>";
                        s += "</thead>";
                        s += "<tbody>";
                        for (var u = 0; u < 6; u++) {
                            s += "<tr>";
                            if (this.showWeekNumbers) s += '<td class="week">' + t[u][0].getWeek() + "</td>";
                            for (var a = 0; a < 7; a++) {
                                var f = "available ";
                                f += t[u][a].getMonth() == t[1][1].getMonth() ? "" : "off";
                                n.setHours(0, 0, 0, 0);
                                if (r && t[u][a] < r || i && t[u][a] > i) {
                                    f = " off disabled "
                                } else if (t[u][a].equals(n)) {
                                    f += " active ";
                                    if (t[u][a].equals(this.startDate)) {
                                        f += " start-date "
                                    }
                                    if (t[u][a].equals(this.endDate)) {
                                        f += " end-date "
                                    }
                                } else if (t[u][a] >= this.startDate && t[u][a] <= this.endDate) {
                                    f += " in-range ";
                                    if (t[u][a].equals(this.startDate)) {
                                        f += " start-date "
                                    }
                                    if (t[u][a].equals(this.endDate)) {
                                        f += " end-date "
                                    }
                                }
                                var l = "r" + u + "c" + a;
                                s += '<td class="' + f.replace(/\s+/g, " ").replace(/^\s?(.*?)\s?$/, "$1") + '" title="' + l + '">' + t[u][a].getDate() + "</td>"
                            }
                            s += "</tr>"
                        }
                        s += "</tbody>";
                        s += "</table>";
                        return s
                    }
                };
                e.fn.daterangepicker = function(n, r) {
                    this.each(function() {
                        var i = e(this);
                        if (!i.data("daterangepicker")) i.data("daterangepicker", new t(i, n, r))
                    });
                    return this
                }
            }(window.jQuery); ! function(e) {
                var t = function(t, r) {
                    this.element = e(t);
                    this.format = n.parseFormat(r.format || this.element.data("date-format") || "mm/dd/yyyy");
                    this.picker = e(n.template).appendTo("body").on({
                        click: e.proxy(this.click, this)
                    });
                    this.isInput = this.element.is("input");
                    this.component = this.element.is(".date") ? this.element.find(".add-on") : false;
                    if (this.isInput) {
                        this.element.on({
                            focus: e.proxy(this.show, this),
                            keyup: e.proxy(this.update, this)
                        })
                    } else {
                        if (this.component) {
                            this.component.on("click", e.proxy(this.show, this))
                        } else {
                            this.element.on("click", e.proxy(this.show, this))
                        }
                    }
                    this.minViewMode = r.minViewMode || this.element.data("date-minviewmode") || 0;
                    if (typeof this.minViewMode === "string") {
                        switch (this.minViewMode) {
                            case "months":
                                this.minViewMode = 1;
                                break;
                            case "years":
                                this.minViewMode = 2;
                                break;
                            default:
                                this.minViewMode = 0;
                                break
                        }
                    }
                    this.viewMode = r.viewMode || this.element.data("date-viewmode") || 0;
                    if (typeof this.viewMode === "string") {
                        switch (this.viewMode) {
                            case "months":
                                this.viewMode = 1;
                                break;
                            case "years":
                                this.viewMode = 2;
                                break;
                            default:
                                this.viewMode = 0;
                                break
                        }
                    }
                    this.startViewMode = this.viewMode;
                    this.weekStart = r.weekStart || this.element.data("date-weekstart") || 0;
                    this.weekEnd = this.weekStart === 0 ? 6 : this.weekStart - 1;
                    this.onRender = r.onRender;
                    this.fillDow();
                    this.fillMonths();
                    this.update();
                    this.showMode()
                };
                t.prototype = {
                    constructor: t,
                    show: function(t) {
                        this.picker.show();
                        this.height = this.component ? this.component.outerHeight() : this.element.outerHeight();
                        this.place();
                        e(window).on("resize", e.proxy(this.place, this));
                        if (t) {
                            t.stopPropagation();
                            t.preventDefault()
                        }
                        if (!this.isInput) {}
                        var n = this;
                        e(document).on("mousedown", function(t) {
                            if (e(t.target).closest(".datepicker").length == 0) {
                                n.hide()
                            }
                        });
                        this.element.trigger({
                            type: "show",
                            date: this.date
                        })
                    },
                    hide: function() {
                        this.picker.hide();
                        e(window).off("resize", this.place);
                        this.viewMode = this.startViewMode;
                        this.showMode();
                        if (!this.isInput) {
                            e(document).off("mousedown", this.hide)
                        }
                        this.element.trigger({
                            type: "hide",
                            date: this.date
                        })
                    },
                    set: function() {
                        var e = n.formatDate(this.date, this.format);
                        if (!this.isInput) {
                            if (this.component) {
                                this.element.find("input").prop("value", e)
                            }
                            this.element.data("date", e)
                        } else {
                            this.element.prop("value", e)
                        }
                    },
                    setValue: function(e) {
                        if (typeof e === "string") {
                            this.date = n.parseDate(e, this.format)
                        } else {
                            this.date = new Date(e)
                        }
                        this.set();
                        this.viewDate = new Date(this.date.getFullYear(), this.date.getMonth(), 1, 0, 0, 0, 0);
                        this.fill()
                    },
                    place: function() {
                        var e = this.component ? this.component.offset() : this.element.offset();
                        this.picker.css({
                            top: e.top + this.height,
                            left: e.left
                        })
                    },
                    update: function(e) {
                        this.date = n.parseDate(typeof e === "string" ? e : this.isInput ? this.element.prop("value") : this.element.data("date"), this.format);
                        this.viewDate = new Date(this.date.getFullYear(), this.date.getMonth(), 1, 0, 0, 0, 0);
                        this.fill()
                    },
                    fillDow: function() {
                        var e = this.weekStart;
                        var t = "<tr>";
                        while (e < this.weekStart + 7) {
                            t += '<th class="dow">' + n.dates.daysMin[e++ % 7] + "</th>"
                        }
                        t += "</tr>";
                        this.picker.find(".datepicker-days thead").append(t)
                    },
                    fillMonths: function() {
                        var e = "";
                        var t = 0;
                        while (t < 12) {
                            e += '<span class="month">' + n.dates.monthsShort[t++] + "</span>"
                        }
                        this.picker.find(".datepicker-months td").append(e)
                    },
                    fill: function() {
                        var e = new Date(this.viewDate),
                            t = e.getFullYear(),
                            r = e.getMonth(),
                            i = this.date.valueOf();
                        this.picker.find(".datepicker-days th:eq(1)").text(n.dates.months[r] + " " + t);
                        var s = new Date(t, r - 1, 28, 0, 0, 0, 0),
                            o = n.getDaysInMonth(s.getFullYear(), s.getMonth());
                        s.setDate(o);
                        s.setDate(o - (s.getDay() - this.weekStart + 7) % 7);
                        var u = new Date(s);
                        u.setDate(u.getDate() + 42);
                        u = u.valueOf();
                        var a = [];
                        var f, l, c;
                        while (s.valueOf() < u) {
                            if (s.getDay() === this.weekStart) {
                                a.push("<tr>")
                            }
                            f = this.onRender(s);
                            l = s.getFullYear();
                            c = s.getMonth();
                            if (c < r && l === t || l < t) {
                                f += " old"
                            } else if (c > r && l === t || l > t) {
                                f += " new"
                            }
                            if (s.valueOf() === i) {
                                f += " active"
                            }
                            a.push('<td class="day ' + f + '">' + s.getDate() + "</td>");
                            if (s.getDay() === this.weekEnd) {
                                a.push("</tr>")
                            }
                            s.setDate(s.getDate() + 1)
                        }
                        this.picker.find(".datepicker-days tbody").empty().append(a.join(""));
                        var h = this.date.getFullYear();
                        var p = this.picker.find(".datepicker-months").find("th:eq(1)").text(t).end().find("span").removeClass("active");
                        if (h === t) {
                            p.eq(this.date.getMonth()).addClass("active")
                        }
                        a = "";
                        t = parseInt(t / 10, 10) * 10;
                        var d = this.picker.find(".datepicker-years").find("th:eq(1)").text(t + "-" + (t + 9)).end().find("td");
                        t -= 1;
                        for (var v = -1; v < 11; v++) {
                            a += '<span class="year' + (v === -1 || v === 10 ? " old" : "") + (h === t ? " active" : "") + '">' + t + "</span>";
                            t += 1
                        }
                        d.html(a)
                    },
                    click: function(t) {
                        t.stopPropagation();
                        t.preventDefault();
                        var r = e(t.target).closest("span, td, th");
                        if (r.length === 1) {
                            switch (r[0].nodeName.toLowerCase()) {
                                case "th":
                                    switch (r[0].className) {
                                        case "switch":
                                            this.showMode(1);
                                            break;
                                        case "prev":
                                        case "next":
                                            this.viewDate["set" + n.modes[this.viewMode].navFnc].call(this.viewDate, this.viewDate["get" + n.modes[this.viewMode].navFnc].call(this.viewDate) + n.modes[this.viewMode].navStep * (r[0].className === "prev" ? -1 : 1));
                                            this.fill();
                                            this.set();
                                            break
                                    }
                                    break;
                                case "span":
                                    if (r.is(".month")) {
                                        var i = r.parent().find("span").index(r);
                                        this.viewDate.setMonth(i)
                                    } else {
                                        var s = parseInt(r.text(), 10) || 0;
                                        this.viewDate.setFullYear(s)
                                    }
                                    if (this.viewMode !== 0) {
                                        this.date = new Date(this.viewDate);
                                        this.element.trigger({
                                            type: "changeDate",
                                            date: this.date,
                                            viewMode: n.modes[this.viewMode].clsName
                                        })
                                    }
                                    this.showMode(-1);
                                    this.fill();
                                    this.set();
                                    break;
                                case "td":
                                    if (r.is(".day") && !r.is(".disabled")) {
                                        var o = parseInt(r.text(), 10) || 1;
                                        var i = this.viewDate.getMonth();
                                        if (r.is(".old")) {
                                            i -= 1
                                        } else if (r.is(".new")) {
                                            i += 1
                                        }
                                        var s = this.viewDate.getFullYear();
                                        this.date = new Date(s, i, o, 0, 0, 0, 0);
                                        this.viewDate = new Date(s, i, Math.min(28, o), 0, 0, 0, 0);
                                        this.fill();
                                        this.set();
                                        this.element.trigger({
                                            type: "changeDate",
                                            date: this.date,
                                            viewMode: n.modes[this.viewMode].clsName
                                        })
                                    }
                                    break
                            }
                        }
                    },
                    mousedown: function(e) {
                        e.stopPropagation();
                        e.preventDefault()
                    },
                    showMode: function(e) {
                        if (e) {
                            this.viewMode = Math.max(this.minViewMode, Math.min(2, this.viewMode + e))
                        }
                        this.picker.find(">div").hide().filter(".datepicker-" + n.modes[this.viewMode].clsName).show()
                    }
                };
                e.fn.datepicker = function(n, r) {
                    return this.each(function() {
                        var i = e(this),
                            s = i.data("datepicker"),
                            o = typeof n === "object" && n;
                        if (!s) {
                            i.data("datepicker", s = new t(this, e.extend({}, e.fn.datepicker.defaults, o)))
                        }
                        if (typeof n === "string") s[n](r)
                    })
                };
                e.fn.datepicker.defaults = {
                    onRender: function(e) {
                        return ""
                    }
                };
                e.fn.datepicker.Constructor = t;
                var n = {
                    modes: [{
                        clsName: "days",
                        navFnc: "Month",
                        navStep: 1
                    }, {
                        clsName: "months",
                        navFnc: "FullYear",
                        navStep: 1
                    }, {
                        clsName: "years",
                        navFnc: "FullYear",
                        navStep: 10
                    }],
                    dates: {
                        days: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"],
                        daysShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"],
                        daysMin: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa", "Su"],
                        months: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
                        monthsShort: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]
                    },
                    isLeapYear: function(e) {
                        return e % 4 === 0 && e % 100 !== 0 || e % 400 === 0
                    },
                    getDaysInMonth: function(e, t) {
                        return [31, n.isLeapYear(e) ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][t]
                    },
                    parseFormat: function(e) {
                        var t = e.match(/[.\/\-\s].*?/),
                            n = e.split(/\W+/);
                        if (!t || !n || n.length === 0) {
                            throw new Error("Invalid date format.")
                        }
                        return {
                            separator: t,
                            parts: n
                        }
                    },
                    parseDate: function(e, t) {
                        var n = e.split(t.separator),
                            e = new Date,
                            r;
                        e.setHours(0);
                        e.setMinutes(0);
                        e.setSeconds(0);
                        e.setMilliseconds(0);
                        if (n.length === t.parts.length) {
                            var i = e.getFullYear(),
                                s = e.getDate(),
                                o = e.getMonth();
                            for (var u = 0, a = t.parts.length; u < a; u++) {
                                r = parseInt(n[u], 10) || 1;
                                switch (t.parts[u]) {
                                    case "dd":
                                    case "d":
                                        s = r;
                                        e.setDate(r);
                                        break;
                                    case "mm":
                                    case "m":
                                        o = r - 1;
                                        e.setMonth(r - 1);
                                        break;
                                    case "yy":
                                        i = 2e3 + r;
                                        e.setFullYear(2e3 + r);
                                        break;
                                    case "yyyy":
                                        i = r;
                                        e.setFullYear(r);
                                        break
                                }
                            }
                            e = new Date(i, o, s, 0, 0, 0)
                        }
                        return e
                    },
                    formatDate: function(e, t) {
                        var n = {
                            d: e.getDate(),
                            m: e.getMonth() + 1,
                            yy: e.getFullYear().toString().substring(2),
                            yyyy: e.getFullYear()
                        };
                        n.dd = (n.d < 10 ? "0" : "") + n.d;
                        n.mm = (n.m < 10 ? "0" : "") + n.m;
                        var e = [];
                        for (var r = 0, i = t.parts.length; r < i; r++) {
                            e.push(n[t.parts[r]])
                        }
                        return e.join(t.separator)
                    },
                    headTemplate: "<thead>" + "<tr>" + '<th class="prev"></th>' + '<th colspan="5" class="switch"></th>' + '<th class="next"></th>' + "</tr>" + "</thead>",
                    contTemplate: '<tbody><tr><td colspan="7"></td></tr></tbody>'
                };
                n.template = '<div class="datepicker dropdown-menu">' + '<div class="datepicker-days">' + '<table class=" table-condensed">' + n.headTemplate + "<tbody></tbody>" + "</table>" + "</div>" + '<div class="datepicker-months">' + '<table class="table-condensed">' + n.headTemplate + n.contTemplate + "</table>" + "</div>" + '<div class="datepicker-years">' + '<table class="table-condensed">' + n.headTemplate + n.contTemplate + "</table>" + "</div>" + "</div>"
            }(window.jQuery);
            (function(e, t, n, r) {
                "use strict";
                var i = function(t, n) {
                    this.widget = "", this.$element = e(t), this.defaultTime = n.defaultTime, this.disableFocus = n.disableFocus, this.isOpen = n.isOpen, this.minuteStep = n.minuteStep, this.modalBackdrop = n.modalBackdrop, this.secondStep = n.secondStep, this.showInputs = n.showInputs, this.showMeridian = n.showMeridian, this.showSeconds = n.showSeconds, this.template = n.template, this.appendWidgetTo = n.appendWidgetTo, this._init()
                };
                i.prototype = {
                    constructor: i,
                    _init: function() {
                        var t = this;
                        this.$element.parent().hasClass("input-append") || this.$element.parent().hasClass("input-prepend") ? (this.$element.parent(".input-append, .input-prepend").find(".add-on").on({
                            "click.timepicker": e.proxy(this.showWidget, this)
                        }), this.$element.on({
                            "focus.timepicker": e.proxy(this.highlightUnit, this),
                            "click.timepicker": e.proxy(this.highlightUnit, this),
                            "keydown.timepicker": e.proxy(this.elementKeydown, this),
                            "blur.timepicker": e.proxy(this.blurElement, this)
                        })) : this.template ? this.$element.on({
                            "focus.timepicker": e.proxy(this.showWidget, this),
                            "click.timepicker": e.proxy(this.showWidget, this),
                            "blur.timepicker": e.proxy(this.blurElement, this)
                        }) : this.$element.on({
                            "focus.timepicker": e.proxy(this.highlightUnit, this),
                            "click.timepicker": e.proxy(this.highlightUnit, this),
                            "keydown.timepicker": e.proxy(this.elementKeydown, this),
                            "blur.timepicker": e.proxy(this.blurElement, this)
                        }), this.$widget = this.template !== !1 ? e(this.getTemplate()).prependTo(this.$element.parents(this.appendWidgetTo)).on("click", e.proxy(this.widgetClick, this)) : !1, this.showInputs && this.$widget !== !1 && this.$widget.find("input").each(function() {
                            e(this).on({
                                "click.timepicker": function() {
                                    e(this).select()
                                },
                                "keydown.timepicker": e.proxy(t.widgetKeydown, t)
                            })
                        }), this.setDefaultTime(this.defaultTime)
                    },
                    blurElement: function() {
                        this.highlightedUnit = r, this.updateFromElementVal()
                    },
                    decrementHour: function() {
                        if (this.showMeridian)
                            if (1 === this.hour) this.hour = 12;
                            else {
                                if (12 === this.hour) return this.hour--, this.toggleMeridian();
                                if (0 === this.hour) return this.hour = 11, this.toggleMeridian();
                                this.hour--
                            } else 0 === this.hour ? this.hour = 23 : this.hour--;
                        this.update()
                    },
                    decrementMinute: function(e) {
                        var t;
                        t = e ? this.minute - e : this.minute - this.minuteStep, 0 > t ? (this.decrementHour(), this.minute = t + 60) : this.minute = t, this.update()
                    },
                    decrementSecond: function() {
                        var e = this.second - this.secondStep;
                        0 > e ? (this.decrementMinute(!0), this.second = e + 60) : this.second = e, this.update()
                    },
                    elementKeydown: function(e) {
                        switch (e.keyCode) {
                            case 9:
                                switch (this.updateFromElementVal(), this.highlightedUnit) {
                                    case "hour":
                                        e.preventDefault(), this.highlightNextUnit();
                                        break;
                                    case "minute":
                                        (this.showMeridian || this.showSeconds) && (e.preventDefault(), this.highlightNextUnit());
                                        break;
                                    case "second":
                                        this.showMeridian && (e.preventDefault(), this.highlightNextUnit())
                                }
                                break;
                            case 27:
                                this.updateFromElementVal();
                                break;
                            case 37:
                                e.preventDefault(), this.highlightPrevUnit(), this.updateFromElementVal();
                                break;
                            case 38:
                                switch (e.preventDefault(), this.highlightedUnit) {
                                    case "hour":
                                        this.incrementHour(), this.highlightHour();
                                        break;
                                    case "minute":
                                        this.incrementMinute(), this.highlightMinute();
                                        break;
                                    case "second":
                                        this.incrementSecond(), this.highlightSecond();
                                        break;
                                    case "meridian":
                                        this.toggleMeridian(), this.highlightMeridian()
                                }
                                break;
                            case 39:
                                e.preventDefault(), this.updateFromElementVal(), this.highlightNextUnit();
                                break;
                            case 40:
                                switch (e.preventDefault(), this.highlightedUnit) {
                                    case "hour":
                                        this.decrementHour(), this.highlightHour();
                                        break;
                                    case "minute":
                                        this.decrementMinute(), this.highlightMinute();
                                        break;
                                    case "second":
                                        this.decrementSecond(), this.highlightSecond();
                                        break;
                                    case "meridian":
                                        this.toggleMeridian(), this.highlightMeridian()
                                }
                        }
                    },
                    formatTime: function(e, t, n, r) {
                        return e = 10 > e ? "0" + e : e, t = 10 > t ? "0" + t : t, n = 10 > n ? "0" + n : n, e + ":" + t + (this.showSeconds ? ":" + n : "") + (this.showMeridian ? " " + r : "")
                    },
                    getCursorPosition: function() {
                        var e = this.$element.get(0);
                        if ("selectionStart" in e) return e.selectionStart;
                        if (n.selection) {
                            e.focus();
                            var t = n.selection.createRange(),
                                r = n.selection.createRange().text.length;
                            return t.moveStart("character", -e.value.length), t.text.length - r
                        }
                    },
                    getTemplate: function() {
                        var e, t, n, r, i, s;
                        switch (this.showInputs ? (t = '<input type="text" name="hour" class="bootstrap-timepicker-hour" maxlength="2"/>', n = '<input type="text" name="minute" class="bootstrap-timepicker-minute" maxlength="2"/>', r = '<input type="text" name="second" class="bootstrap-timepicker-second" maxlength="2"/>', i = '<input type="text" name="meridian" class="bootstrap-timepicker-meridian" maxlength="2"/>') : (t = '<span class="bootstrap-timepicker-hour"></span>', n = '<span class="bootstrap-timepicker-minute"></span>', r = '<span class="bootstrap-timepicker-second"></span>', i = '<span class="bootstrap-timepicker-meridian"></span>'), s = '<table><tr><td><a href="#" data-action="incrementHour"><i class="icon-chevron-up"></i></a></td><td class="separator"> </td><td><a href="#" data-action="incrementMinute"><i class="icon-chevron-up"></i></a></td>' + (this.showSeconds ? '<td class="separator"> </td><td><a href="#" data-action="incrementSecond"><i class="icon-chevron-up"></i></a></td>' : "") + (this.showMeridian ? '<td class="separator"> </td><td class="meridian-column"><a href="#" data-action="toggleMeridian"><i class="icon-chevron-up"></i></a></td>' : "") + "</tr>" + "<tr>" + "<td>" + t + "</td> " + '<td class="separator">:</td>' + "<td>" + n + "</td> " + (this.showSeconds ? '<td class="separator">:</td><td>' + r + "</td>" : "") + (this.showMeridian ? '<td class="separator"> </td><td>' + i + "</td>" : "") + "</tr>" + "<tr>" + '<td><a href="#" data-action="decrementHour"><i class="icon-chevron-down"></i></a></td>' + '<td class="separator"></td>' + '<td><a href="#" data-action="decrementMinute"><i class="icon-chevron-down"></i></a></td>' + (this.showSeconds ? '<td class="separator"> </td><td><a href="#" data-action="decrementSecond"><i class="icon-chevron-down"></i></a></td>' : "") + (this.showMeridian ? '<td class="separator"> </td><td><a href="#" data-action="toggleMeridian"><i class="icon-chevron-down"></i></a></td>' : "") + "</tr>" + "</table>", this.template) {
                            case "modal":
                                e = '<div class="bootstrap-timepicker-widget modal hide fade in" data-backdrop="' + (this.modalBackdrop ? "true" : "false") + '">' + '<div class="modal-header">' + '<a href="#" class="close" data-dismiss="modal"></a>' + "<h3>Pick a Time</h3>" + "</div>" + '<div class="modal-content">' + s + "</div>" + '<div class="modal-footer">' + '<a href="#" class="btn btn-primary" data-dismiss="modal">OK</a>' + "</div>" + "</div>";
                                break;
                            case "dropdown":
                                e = '<div class="bootstrap-timepicker-widget dropdown-menu">' + s + "</div>"
                        }
                        return e
                    },
                    getTime: function() {
                        return this.formatTime(this.hour, this.minute, this.second, this.meridian)
                    },
                    hideWidget: function() {
                        this.isOpen !== !1 && (this.showInputs && this.updateFromWidgetInputs(), this.$element.trigger({
                            type: "hide.timepicker",
                            time: {
                                value: this.getTime(),
                                hours: this.hour,
                                minutes: this.minute,
                                seconds: this.second,
                                meridian: this.meridian
                            }
                        }), "modal" === this.template && this.$widget.modal ? this.$widget.modal("hide") : this.$widget.removeClass("open"), e(n).off("mousedown.timepicker"), this.isOpen = !1)
                    },
                    highlightUnit: function() {
                        this.position = this.getCursorPosition(), this.position >= 0 && 2 >= this.position ? this.highlightHour() : this.position >= 3 && 5 >= this.position ? this.highlightMinute() : this.position >= 6 && 8 >= this.position ? this.showSeconds ? this.highlightSecond() : this.highlightMeridian() : this.position >= 9 && 11 >= this.position && this.highlightMeridian()
                    },
                    highlightNextUnit: function() {
                        switch (this.highlightedUnit) {
                            case "hour":
                                this.highlightMinute();
                                break;
                            case "minute":
                                this.showSeconds ? this.highlightSecond() : this.showMeridian ? this.highlightMeridian() : this.highlightHour();
                                break;
                            case "second":
                                this.showMeridian ? this.highlightMeridian() : this.highlightHour();
                                break;
                            case "meridian":
                                this.highlightHour()
                        }
                    },
                    highlightPrevUnit: function() {
                        switch (this.highlightedUnit) {
                            case "hour":
                                this.highlightMeridian();
                                break;
                            case "minute":
                                this.highlightHour();
                                break;
                            case "second":
                                this.highlightMinute();
                                break;
                            case "meridian":
                                this.showSeconds ? this.highlightSecond() : this.highlightMinute()
                        }
                    },
                    highlightHour: function() {
                        var e = this.$element.get(0);
                        this.highlightedUnit = "hour", e.setSelectionRange && setTimeout(function() {
                            e.setSelectionRange(0, 2)
                        }, 0)
                    },
                    highlightMinute: function() {
                        var e = this.$element.get(0);
                        this.highlightedUnit = "minute", e.setSelectionRange && setTimeout(function() {
                            e.setSelectionRange(3, 5)
                        }, 0)
                    },
                    highlightSecond: function() {
                        var e = this.$element.get(0);
                        this.highlightedUnit = "second", e.setSelectionRange && setTimeout(function() {
                            e.setSelectionRange(6, 8)
                        }, 0)
                    },
                    highlightMeridian: function() {
                        var e = this.$element.get(0);
                        this.highlightedUnit = "meridian", e.setSelectionRange && (this.showSeconds ? setTimeout(function() {
                            e.setSelectionRange(9, 11)
                        }, 0) : setTimeout(function() {
                            e.setSelectionRange(6, 8)
                        }, 0))
                    },
                    incrementHour: function() {
                        if (this.showMeridian) {
                            if (11 === this.hour) return this.hour++, this.toggleMeridian();
                            12 === this.hour && (this.hour = 0)
                        }
                        return 23 === this.hour ? (this.hour = 0, r) : (this.hour++, this.update(), r)
                    },
                    incrementMinute: function(e) {
                        var t;
                        t = e ? this.minute + e : this.minute + this.minuteStep - this.minute % this.minuteStep, t > 59 ? (this.incrementHour(), this.minute = t - 60) : this.minute = t, this.update()
                    },
                    incrementSecond: function() {
                        var e = this.second + this.secondStep - this.second % this.secondStep;
                        e > 59 ? (this.incrementMinute(!0), this.second = e - 60) : this.second = e, this.update()
                    },
                    remove: function() {
                        e("document").off(".timepicker"), this.$widget && this.$widget.remove(), delete this.$element.data().timepicker
                    },
                    setDefaultTime: function(e) {
                        if (this.$element.val()) this.updateFromElementVal();
                        else if ("current" === e) {
                            var t = new Date,
                                n = t.getHours(),
                                r = Math.floor(t.getMinutes() / this.minuteStep) * this.minuteStep,
                                i = Math.floor(t.getSeconds() / this.secondStep) * this.secondStep,
                                s = "AM";
                            this.showMeridian && (0 === n ? n = 12 : n >= 12 ? (n > 12 && (n -= 12), s = "PM") : s = "AM"), this.hour = n, this.minute = r, this.second = i, this.meridian = s, this.update()
                        } else e === !1 ? (this.hour = 0, this.minute = 0, this.second = 0, this.meridian = "AM") : this.setTime(e)
                    },
                    setTime: function(e) {
                        var t, n;
                        this.showMeridian ? (t = e.split(" "), n = t[0].split(":"), this.meridian = t[1]) : n = e.split(":"), this.hour = parseInt(n[0], 10), this.minute = parseInt(n[1], 10), this.second = parseInt(n[2], 10), isNaN(this.hour) && (this.hour = 0), isNaN(this.minute) && (this.minute = 0), this.showMeridian ? (this.hour > 12 ? this.hour = 12 : 1 > this.hour && (this.hour = 12), "am" === this.meridian || "a" === this.meridian ? this.meridian = "AM" : ("pm" === this.meridian || "p" === this.meridian) && (this.meridian = "PM"), "AM" !== this.meridian && "PM" !== this.meridian && (this.meridian = "AM")) : this.hour >= 24 ? this.hour = 23 : 0 > this.hour && (this.hour = 0), 0 > this.minute ? this.minute = 0 : this.minute >= 60 && (this.minute = 59), this.showSeconds && (isNaN(this.second) ? this.second = 0 : 0 > this.second ? this.second = 0 : this.second >= 60 && (this.second = 59)), this.update()
                    },
                    showWidget: function() {
                        if (!this.isOpen && !this.$element.is(":disabled")) {
                            var t = this;
                            e(n).on("mousedown.timepicker", function(n) {
                                0 === e(n.target).closest(".bootstrap-timepicker-widget").length && t.hideWidget()
                            }), this.$element.trigger({
                                type: "show.timepicker",
                                time: {
                                    value: this.getTime(),
                                    hours: this.hour,
                                    minutes: this.minute,
                                    seconds: this.second,
                                    meridian: this.meridian
                                }
                            }), this.disableFocus && this.$element.blur(), this.updateFromElementVal(), "modal" === this.template && this.$widget.modal ? this.$widget.modal("show").on("hidden", e.proxy(this.hideWidget, this)) : this.isOpen === !1 && this.$widget.addClass("open"), this.isOpen = !0
                        }
                    },
                    toggleMeridian: function() {
                        this.meridian = "AM" === this.meridian ? "PM" : "AM", this.update()
                    },
                    update: function() {
                        this.$element.trigger({
                            type: "changeTime.timepicker",
                            time: {
                                value: this.getTime(),
                                hours: this.hour,
                                minutes: this.minute,
                                seconds: this.second,
                                meridian: this.meridian
                            }
                        }), this.updateElement(), this.updateWidget()
                    },
                    updateElement: function() {
                        this.$element.val(this.getTime()).change()
                    },
                    updateFromElementVal: function() {
                        var e = this.$element.val();
                        e && this.setTime(e)
                    },
                    updateWidget: function() {
                        if (this.$widget !== !1) {
                            var e = 10 > this.hour ? "0" + this.hour : this.hour,
                                t = 10 > this.minute ? "0" + this.minute : this.minute,
                                n = 10 > this.second ? "0" + this.second : this.second;
                            this.showInputs ? (this.$widget.find("input.bootstrap-timepicker-hour").val(e), this.$widget.find("input.bootstrap-timepicker-minute").val(t), this.showSeconds && this.$widget.find("input.bootstrap-timepicker-second").val(n), this.showMeridian && this.$widget.find("input.bootstrap-timepicker-meridian").val(this.meridian)) : (this.$widget.find("span.bootstrap-timepicker-hour").text(e), this.$widget.find("span.bootstrap-timepicker-minute").text(t), this.showSeconds && this.$widget.find("span.bootstrap-timepicker-second").text(n), this.showMeridian && this.$widget.find("span.bootstrap-timepicker-meridian").text(this.meridian))
                        }
                    },
                    updateFromWidgetInputs: function() {
                        if (this.$widget !== !1) {
                            var t = e("input.bootstrap-timepicker-hour", this.$widget).val() + ":" + e("input.bootstrap-timepicker-minute", this.$widget).val() + (this.showSeconds ? ":" + e("input.bootstrap-timepicker-second", this.$widget).val() : "") + (this.showMeridian ? " " + e("input.bootstrap-timepicker-meridian", this.$widget).val() : "");
                            this.setTime(t)
                        }
                    },
                    widgetClick: function(t) {
                        t.stopPropagation(), t.preventDefault();
                        var n = e(t.target).closest("a").data("action");
                        n && this[n]()
                    },
                    widgetKeydown: function(t) {
                        var n = e(t.target).closest("input"),
                            r = n.attr("name");
                        switch (t.keyCode) {
                            case 9:
                                if (this.showMeridian) {
                                    if ("meridian" === r) return this.hideWidget()
                                } else if (this.showSeconds) {
                                    if ("second" === r) return this.hideWidget()
                                } else if ("minute" === r) return this.hideWidget();
                                this.updateFromWidgetInputs();
                                break;
                            case 27:
                                this.hideWidget();
                                break;
                            case 38:
                                switch (t.preventDefault(), r) {
                                    case "hour":
                                        this.incrementHour();
                                        break;
                                    case "minute":
                                        this.incrementMinute();
                                        break;
                                    case "second":
                                        this.incrementSecond();
                                        break;
                                    case "meridian":
                                        this.toggleMeridian()
                                }
                                break;
                            case 40:
                                switch (t.preventDefault(), r) {
                                    case "hour":
                                        this.decrementHour();
                                        break;
                                    case "minute":
                                        this.decrementMinute();
                                        break;
                                    case "second":
                                        this.decrementSecond();
                                        break;
                                    case "meridian":
                                        this.toggleMeridian()
                                }
                        }
                    }
                }, e.fn.timepicker = function(t) {
                    var n = Array.apply(null, arguments);
                    return n.shift(), this.each(function() {
                        var r = e(this),
                            s = r.data("timepicker"),
                            o = "object" == typeof t && t;
                        s || r.data("timepicker", s = new i(this, e.extend({}, e.fn.timepicker.defaults, o, e(this).data()))), "string" == typeof t && s[t].apply(s, n)
                    })
                }, e.fn.timepicker.defaults = {
                    defaultTime: "current",
                    disableFocus: !1,
                    isOpen: !1,
                    minuteStep: 15,
                    modalBackdrop: !1,
                    secondStep: 15,
                    showSeconds: !1,
                    showInputs: !0,
                    showMeridian: !0,
                    template: "dropdown",
                    appendWidgetTo: ".bootstrap-timepicker"
                }, e.fn.timepicker.Constructor = i
            })(jQuery, window, document); ! function(e) {
                var t = function(e) {
                    this.value = {
                        h: 1,
                        s: 1,
                        b: 1,
                        a: 1
                    };
                    this.setColor(e)
                };
                t.prototype = {
                    constructor: t,
                    setColor: function(t) {
                        t = t.toLowerCase();
                        var n = this;
                        e.each(r.stringParsers, function(e, i) {
                            var s = i.re.exec(t),
                                o = s && i.parse(s),
                                u = i.space || "rgba";
                            if (o) {
                                if (u === "hsla") {
                                    n.value = r.RGBtoHSB.apply(null, r.HSLtoRGB.apply(null, o))
                                } else {
                                    n.value = r.RGBtoHSB.apply(null, o)
                                }
                                return false
                            }
                        })
                    },
                    setHue: function(e) {
                        this.value.h = 1 - e
                    },
                    setSaturation: function(e) {
                        this.value.s = e
                    },
                    setLightness: function(e) {
                        this.value.b = 1 - e
                    },
                    setAlpha: function(e) {
                        this.value.a = parseInt((1 - e) * 100, 10) / 100
                    },
                    toRGB: function(e, t, n, r) {
                        if (!e) {
                            e = this.value.h;
                            t = this.value.s;
                            n = this.value.b
                        }
                        e *= 360;
                        var i, s, o, u, a;
                        e = e % 360 / 60;
                        a = n * t;
                        u = a * (1 - Math.abs(e % 2 - 1));
                        i = s = o = n - a;
                        e = ~~e;
                        i += [a, u, 0, 0, u, a][e];
                        s += [u, a, a, u, 0, 0][e];
                        o += [0, 0, u, a, a, u][e];
                        return {
                            r: Math.round(i * 255),
                            g: Math.round(s * 255),
                            b: Math.round(o * 255),
                            a: r || this.value.a
                        }
                    },
                    toHex: function(e, t, n, r) {
                        var i = this.toRGB(e, t, n, r);
                        return "#" + (1 << 24 | parseInt(i.r) << 16 | parseInt(i.g) << 8 | parseInt(i.b)).toString(16).substr(1)
                    },
                    toHSL: function(e, t, n, r) {
                        if (!e) {
                            e = this.value.h;
                            t = this.value.s;
                            n = this.value.b
                        }
                        var i = e,
                            s = (2 - t) * n,
                            o = t * n;
                        if (s > 0 && s <= 1) {
                            o /= s
                        } else {
                            o /= 2 - s
                        }
                        s /= 2;
                        if (o > 1) {
                            o = 1
                        }
                        return {
                            h: i,
                            s: o,
                            l: s,
                            a: r || this.value.a
                        }
                    }
                };
                var n = function(t, n) {
                    this.element = e(t);
                    var i = n.format || this.element.data("color-format") || "hex";
                    this.format = r.translateFormats[i];
                    this.isInput = this.element.is("input");
                    this.component = this.element.is(".color") ? this.element.find(".add-on") : false;
                    this.picker = e(r.template).appendTo("body").on("mousedown", e.proxy(this.mousedown, this));
                    if (this.isInput) {
                        this.element.on({
                            focus: e.proxy(this.show, this),
                            keyup: e.proxy(this.update, this)
                        })
                    } else if (this.component) {
                        this.component.on({
                            click: e.proxy(this.show, this)
                        })
                    } else {
                        this.element.on({
                            click: e.proxy(this.show, this)
                        })
                    }
                    if (i === "rgba" || i === "hsla") {
                        this.picker.addClass("alpha");
                        this.alpha = this.picker.find(".colorpicker-alpha")[0].style
                    }
                    if (this.component) {
                        this.picker.find(".colorpicker-color").hide();
                        this.preview = this.element.find("i")[0].style
                    } else {
                        this.preview = this.picker.find("div:last")[0].style
                    }
                    this.base = this.picker.find("div:first")[0].style;
                    this.update()
                };
                n.prototype = {
                    constructor: n,
                    show: function(t) {
                        this.picker.show();
                        this.height = this.component ? this.component.outerHeight() : this.element.outerHeight();
                        this.place();
                        e(window).on("resize", e.proxy(this.place, this));
                        if (!this.isInput) {
                            if (t) {
                                t.stopPropagation();
                                t.preventDefault()
                            }
                        }
                        e(document).on({
                            mousedown: e.proxy(this.hide, this)
                        });
                        this.element.trigger({
                            type: "show",
                            color: this.color
                        })
                    },
                    update: function() {
                        this.color = new t(this.isInput ? this.element.prop("value") : this.element.data("color"));
                        this.picker.find("i").eq(0).css({
                            left: this.color.value.s * 100,
                            top: 100 - this.color.value.b * 100
                        }).end().eq(1).css("top", 100 * (1 - this.color.value.h)).end().eq(2).css("top", 100 * (1 - this.color.value.a));
                        this.previewColor()
                    },
                    setValue: function(e) {
                        this.color = new t(e);
                        this.picker.find("i").eq(0).css({
                            left: this.color.value.s * 100,
                            top: 100 - this.color.value.b * 100
                        }).end().eq(1).css("top", 100 * (1 - this.color.value.h)).end().eq(2).css("top", 100 * (1 - this.color.value.a));
                        this.previewColor();
                        this.element.trigger({
                            type: "changeColor",
                            color: this.color
                        })
                    },
                    hide: function() {
                        this.picker.hide();
                        e(window).off("resize", this.place);
                        if (!this.isInput) {
                            e(document).off({
                                mousedown: this.hide
                            });
                            if (this.component) {
                                this.element.find("input").prop("value", this.format.call(this))
                            }
                            this.element.data("color", this.format.call(this))
                        } else {
                            this.element.prop("value", this.format.call(this))
                        }
                        this.element.trigger({
                            type: "hide",
                            color: this.color
                        })
                    },
                    place: function() {
                        var e = this.component ? this.component.offset() : this.element.offset();
                        this.picker.css({
                            top: e.top + this.height,
                            left: e.left
                        })
                    },
                    previewColor: function() {
                        try {
                            this.preview.backgroundColor = this.format.call(this)
                        } catch (e) {
                            this.preview.backgroundColor = this.color.toHex()
                        }
                        this.base.backgroundColor = this.color.toHex(this.color.value.h, 1, 1, 1);
                        if (this.alpha) {
                            this.alpha.backgroundColor = this.color.toHex()
                        }
                    },
                    pointer: null,
                    slider: null,
                    mousedown: function(t) {
                        t.stopPropagation();
                        t.preventDefault();
                        var n = e(t.target);
                        var i = n.closest("div");
                        if (!i.is(".colorpicker")) {
                            if (i.is(".colorpicker-saturation")) {
                                this.slider = e.extend({}, r.sliders.saturation)
                            } else if (i.is(".colorpicker-hue")) {
                                this.slider = e.extend({}, r.sliders.hue)
                            } else if (i.is(".colorpicker-alpha")) {
                                this.slider = e.extend({}, r.sliders.alpha)
                            } else {
                                return false
                            }
                            var s = i.offset();
                            this.slider.knob = i.find("i")[0].style;
                            this.slider.left = t.pageX - s.left;
                            this.slider.top = t.pageY - s.top;
                            this.pointer = {
                                left: t.pageX,
                                top: t.pageY
                            };
                            e(document).on({
                                mousemove: e.proxy(this.mousemove, this),
                                mouseup: e.proxy(this.mouseup, this)
                            }).trigger("mousemove")
                        }
                        return false
                    },
                    mousemove: function(e) {
                        e.stopPropagation();
                        e.preventDefault();
                        var t = Math.max(0, Math.min(this.slider.maxLeft, this.slider.left + ((e.pageX || this.pointer.left) - this.pointer.left)));
                        var n = Math.max(0, Math.min(this.slider.maxTop, this.slider.top + ((e.pageY || this.pointer.top) - this.pointer.top)));
                        this.slider.knob.left = t + "px";
                        this.slider.knob.top = n + "px";
                        if (this.slider.callLeft) {
                            this.color[this.slider.callLeft].call(this.color, t / 100)
                        }
                        if (this.slider.callTop) {
                            this.color[this.slider.callTop].call(this.color, n / 100)
                        }
                        this.previewColor();
                        this.element.trigger({
                            type: "changeColor",
                            color: this.color
                        });
                        return false
                    },
                    mouseup: function(t) {
                        t.stopPropagation();
                        t.preventDefault();
                        e(document).off({
                            mousemove: this.mousemove,
                            mouseup: this.mouseup
                        });
                        return false
                    }
                };
                e.fn.colorpicker = function(t) {
                    return this.each(function() {
                        var r = e(this),
                            i = r.data("colorpicker"),
                            s = typeof t === "object" && t;
                        if (!i) {
                            r.data("colorpicker", i = new n(this, e.extend({}, e.fn.colorpicker.defaults, s)))
                        }
                        if (typeof t === "string") i[t]()
                    })
                };
                e.fn.colorpicker.defaults = {};
                e.fn.colorpicker.Constructor = n;
                var r = {
                    translateFormats: {
                        rgb: function() {
                            var e = this.color.toRGB();
                            return "rgb(" + e.r + "," + e.g + "," + e.b + ")"
                        },
                        rgba: function() {
                            var e = this.color.toRGB();
                            return "rgba(" + e.r + "," + e.g + "," + e.b + "," + e.a + ")"
                        },
                        hsl: function() {
                            var e = this.color.toHSL();
                            return "hsl(" + Math.round(e.h * 360) + "," + Math.round(e.s * 100) + "%," + Math.round(e.l * 100) + "%)"
                        },
                        hsla: function() {
                            var e = this.color.toHSL();
                            return "hsla(" + Math.round(e.h * 360) + "," + Math.round(e.s * 100) + "%," + Math.round(e.l * 100) + "%," + e.a + ")"
                        },
                        hex: function() {
                            return this.color.toHex()
                        }
                    },
                    sliders: {
                        saturation: {
                            maxLeft: 100,
                            maxTop: 100,
                            callLeft: "setSaturation",
                            callTop: "setLightness"
                        },
                        hue: {
                            maxLeft: 0,
                            maxTop: 100,
                            callLeft: false,
                            callTop: "setHue"
                        },
                        alpha: {
                            maxLeft: 0,
                            maxTop: 100,
                            callLeft: false,
                            callTop: "setAlpha"
                        }
                    },
                    RGBtoHSB: function(e, t, n, r) {
                        e /= 255;
                        t /= 255;
                        n /= 255;
                        var i, s, o, u;
                        o = Math.max(e, t, n);
                        u = o - Math.min(e, t, n);
                        i = u === 0 ? null : o == e ? (t - n) / u : o == t ? (n - e) / u + 2 : (e - t) / u + 4;
                        i = (i + 360) % 6 * 60 / 360;
                        s = u === 0 ? 0 : u / o;
                        return {
                            h: i || 1,
                            s: s,
                            b: o,
                            a: r || 1
                        }
                    },
                    HueToRGB: function(e, t, n) {
                        if (n < 0) n += 1;
                        else if (n > 1) n -= 1;
                        if (n * 6 < 1) return e + (t - e) * n * 6;
                        else if (n * 2 < 1) return t;
                        else if (n * 3 < 2) return e + (t - e) * (2 / 3 - n) * 6;
                        else return e
                    },
                    HSLtoRGB: function(e, t, n, i) {
                        if (t < 0) {
                            t = 0
                        }
                        var s;
                        if (n <= .5) {
                            s = n * (1 + t)
                        } else {
                            s = n + t - n * t
                        }
                        var o = 2 * n - s;
                        var u = e + 1 / 3;
                        var a = e;
                        var f = e - 1 / 3;
                        var l = Math.round(r.HueToRGB(o, s, u) * 255);
                        var c = Math.round(r.HueToRGB(o, s, a) * 255);
                        var h = Math.round(r.HueToRGB(o, s, f) * 255);
                        return [l, c, h, i || 1]
                    },
                    stringParsers: [{
                        re: /rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,
                        parse: function(e) {
                            return [e[1], e[2], e[3], e[4]]
                        }
                    }, {
                        re: /rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,
                        parse: function(e) {
                            return [2.55 * e[1], 2.55 * e[2], 2.55 * e[3], e[4]]
                        }
                    }, {
                        re: /#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,
                        parse: function(e) {
                            return [parseInt(e[1], 16), parseInt(e[2], 16), parseInt(e[3], 16)]
                        }
                    }, {
                        re: /#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,
                        parse: function(e) {
                            return [parseInt(e[1] + e[1], 16), parseInt(e[2] + e[2], 16), parseInt(e[3] + e[3], 16)]
                        }
                    }, {
                        re: /hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,
                        space: "hsla",
                        parse: function(e) {
                            return [e[1] / 360, e[2] / 100, e[3] / 100, e[4]]
                        }
                    }],
                    template: '<div class="colorpicker dropdown-menu">' + '<div class="colorpicker-saturation"><i><b></b></i></div>' + '<div class="colorpicker-hue"><i></i></div>' + '<div class="colorpicker-alpha"><i></i></div>' + '<div class="colorpicker-color"><div /></div>' + "</div>"
                }
            }(window.jQuery); ! function(e) {
                "use strict";
                e.fn["bootstrapSwitch"] = function(t) {
                    var n = {
                        init: function() {
                            return this.each(function() {
                                var t = e(this),
                                    n, r, i, s, o = "",
                                    u = t.attr("class"),
                                    a, f, l = "ON",
                                    c = "OFF";
                                e.each(["switch-mini", "switch-small", "switch-large"], function(e, t) {
                                    if (u.indexOf(t) >= 0) o = t
                                });
                                t.addClass("has-switch");
                                if (t.data("on") !== undefined) a = "switch-" + t.data("on");
                                if (t.data("on-label") !== undefined) l = t.data("on-label");
                                if (t.data("off-label") !== undefined) c = t.data("off-label");
                                r = e("<span>").addClass("switch-left").addClass(o).addClass(a).html(l);
                                a = "";
                                if (t.data("off") !== undefined) a = "switch-" + t.data("off");
                                i = e("<span>").addClass("switch-right").addClass(o).addClass(a).html(c);
                                s = e("<label>").html(" ").addClass(o).attr("for", t.find("input").attr("id"));
                                n = t.find(":checkbox").wrap(e("<div>")).parent().data("animated", false);
                                if (t.data("animated") !== false) n.addClass("switch-animate").data("animated", true);
                                n.append(r).append(s).append(i);
                                t.find(">div").addClass(t.find("input").is(":checked") ? "switch-on" : "switch-off");
                                if (t.find("input").is(":disabled")) e(this).addClass("deactivate");
                                var h = function(e) {
                                    e.siblings("label").trigger("mousedown").trigger("mouseup").trigger("click")
                                };
                                t.on("keydown", function(t) {
                                    if (t.keyCode === 32) {
                                        t.stopImmediatePropagation();
                                        t.preventDefault();
                                        h(e(t.target).find("span:first"))
                                    }
                                });
                                r.on("click", function(t) {
                                    h(e(this))
                                });
                                i.on("click", function(t) {
                                    h(e(this))
                                });
                                t.find("input").on("change", function(t) {
                                    var n = e(this).parent();
                                    t.preventDefault();
                                    t.stopImmediatePropagation();
                                    n.css("left", "");
                                    if (e(this).is(":checked")) n.removeClass("switch-off").addClass("switch-on");
                                    else n.removeClass("switch-on").addClass("switch-off");
                                    if (n.data("animated") !== false) n.addClass("switch-animate");
                                    n.parent().trigger("switch-change", {
                                        el: e(this),
                                        value: e(this).is(":checked")
                                    })
                                });
                                t.find("label").on("mousedown touchstart", function(t) {
                                    var n = e(this);
                                    f = false;
                                    t.preventDefault();
                                    t.stopImmediatePropagation();
                                    n.closest("div").removeClass("switch-animate");
                                    if (n.closest(".switch").is(".deactivate")) n.unbind("click");
                                    else {
                                        n.on("mousemove touchmove", function(t) {
                                            var n = e(this).closest(".switch"),
                                                r = (t.pageX || t.originalEvent.targetTouches[0].pageX) - n.offset().left,
                                                i = r / n.width() * 100,
                                                s = 25,
                                                o = 75;
                                            f = true;
                                            if (i < s) i = s;
                                            else if (i > o) i = o;
                                            n.find(">div").css("left", i - o + "%")
                                        });
                                        n.on("click touchend", function(t) {
                                            var n = e(this),
                                                r = e(t.target),
                                                i = r.siblings("input");
                                            t.stopImmediatePropagation();
                                            t.preventDefault();
                                            n.unbind("mouseleave");
                                            if (f) i.prop("checked", !(parseInt(n.parent().css("left")) < -25));
                                            else i.prop("checked", !i.is(":checked"));
                                            f = false;
                                            i.trigger("change")
                                        });
                                        n.on("mouseleave", function(t) {
                                            var n = e(this),
                                                r = n.siblings("input");
                                            t.preventDefault();
                                            t.stopImmediatePropagation();
                                            n.unbind("mouseleave");
                                            n.trigger("mouseup");
                                            r.prop("checked", !(parseInt(n.parent().css("left")) < -25)).trigger("change")
                                        });
                                        n.on("mouseup", function(t) {
                                            t.stopImmediatePropagation();
                                            t.preventDefault();
                                            e(this).unbind("mousemove")
                                        })
                                    }
                                })
                            })
                        },
                        toggleActivation: function() {
                            e(this).toggleClass("deactivate")
                        },
                        isActive: function() {
                            return !e(this).hasClass("deactivate")
                        },
                        setActive: function(t) {
                            if (t) e(this).removeClass("deactivate");
                            else e(this).addClass("deactivate")
                        },
                        toggleState: function(t) {
                            var n = e(this).find("input:checkbox");
                            n.prop("checked", !n.is(":checked")).trigger("change", t)
                        },
                        setState: function(t, n) {
                            e(this).find("input:checkbox").prop("checked", t).trigger("change", n)
                        },
                        status: function() {
                            return e(this).find("input:checkbox").is(":checked")
                        },
                        destroy: function() {
                            var t = e(this).find("div"),
                                n;
                            t.find(":not(input:checkbox)").remove();
                            n = t.children();
                            n.unwrap().unwrap();
                            n.unbind("change");
                            return n
                        }
                    };
                    if (n[t]) return n[t].apply(this, Array.prototype.slice.call(arguments, 1));
                    else if (typeof t === "object" || !t) return n.init.apply(this, arguments);
                    else e.error("Method " + t + " does not exist!")
                }
            }(jQuery);
            (function() {
                function e(t, n, r) {
                    var i = e.resolve(t);
                    if (null == i) {
                        r = r || t, n = n || "root";
                        var s = Error('Failed to require "' + r + '" from "' + n + '"');
                        throw s.path = r, s.parent = n, s.require = !0, s
                    }
                    var o = e.modules[i];
                    return o.exports || (o.exports = {}, o.client = o.component = !0, o.call(this, o.exports, e.relative(i), o)), o.exports
                }
                var t = Object.prototype.hasOwnProperty;
                e.modules = {}, e.aliases = {}, e.resolve = function(n) {
                    "/" === n.charAt(0) && (n = n.slice(1));
                    for (var r = n + "/index.js", i = [n, n + ".js", n + ".json", n + "/index.js", n + "/index.json"], s = 0; i.length > s; s++) {
                        var n = i[s];
                        if (t.call(e.modules, n)) return n
                    }
                    return t.call(e.aliases, r) ? e.aliases[r] : void 0
                }, e.normalize = function(e, t) {
                    var n = [];
                    if ("." != t.charAt(0)) return t;
                    e = e.split("/"), t = t.split("/");
                    for (var r = 0; t.length > r; ++r) ".." == t[r] ? e.pop() : "." != t[r] && "" != t[r] && n.push(t[r]);
                    return e.concat(n).join("/")
                }, e.register = function(t, n) {
                    e.modules[t] = n
                }, e.alias = function(n, r) {
                    if (!t.call(e.modules, n)) throw Error('Failed to alias "' + n + '", it does not exist');
                    e.aliases[r] = n
                }, e.relative = function(n) {
                    function r(e, t) {
                        for (var n = e.length; n--;)
                            if (e[n] === t) return n;
                        return -1
                    }

                    function i(t) {
                        var r = i.resolve(t);
                        return e(r, n, t)
                    }
                    var s = e.normalize(n, "..");
                    return i.resolve = function(t) {
                        var i = t.charAt(0);
                        if ("/" == i) return t.slice(1);
                        if ("." == i) return e.normalize(s, t);
                        var o = n.split("/"),
                            u = r(o, "deps") + 1;
                        return u || (u = 0), t = o.slice(0, u + 1).join("/") + "/deps/" + t
                    }, i.exists = function(n) {
                        return t.call(e.modules, i.resolve(n))
                    }, i
                }, e.register("component-emitter/index.js", function(e, t, n) {
                    function r(e) {
                        return e ? i(e) : void 0
                    }

                    function i(e) {
                        for (var t in r.prototype) e[t] = r.prototype[t];
                        return e
                    }
                    n.exports = r, r.prototype.on = function(e, t) {
                        return this._callbacks = this._callbacks || {}, (this._callbacks[e] = this._callbacks[e] || []).push(t), this
                    }, r.prototype.once = function(e, t) {
                        function n() {
                            r.off(e, n), t.apply(this, arguments)
                        }
                        var r = this;
                        return this._callbacks = this._callbacks || {}, t._off = n, this.on(e, n), this
                    }, r.prototype.off = r.prototype.removeListener = r.prototype.removeAllListeners = function(e, t) {
                        this._callbacks = this._callbacks || {};
                        var n = this._callbacks[e];
                        if (!n) return this;
                        if (1 == arguments.length) return delete this._callbacks[e], this;
                        var r = n.indexOf(t._off || t);
                        return ~r && n.splice(r, 1), this
                    }, r.prototype.emit = function(e) {
                        this._callbacks = this._callbacks || {};
                        var t = [].slice.call(arguments, 1),
                            n = this._callbacks[e];
                        if (n) {
                            n = n.slice(0);
                            for (var r = 0, i = n.length; i > r; ++r) n[r].apply(this, t)
                        }
                        return this
                    }, r.prototype.listeners = function(e) {
                        return this._callbacks = this._callbacks || {}, this._callbacks[e] || []
                    }, r.prototype.hasListeners = function(e) {
                        return !!this.listeners(e).length
                    }
                }), e.register("dropzone/index.js", function(e, t, n) {
                    n.exports = t("./lib/dropzone.js")
                }), e.register("dropzone/lib/dropzone.js", function(e, t, n) {
                    (function() {
                        var e, r, s, o, u, a, f = {}.hasOwnProperty,
                            l = function(e, t) {
                                function n() {
                                    this.constructor = e
                                }
                                for (var r in t) f.call(t, r) && (e[r] = t[r]);
                                return n.prototype = t.prototype, e.prototype = new n, e.__super__ = t.prototype, e
                            },
                            c = [].slice,
                            h = [].indexOf || function(e) {
                                for (var t = 0, n = this.length; n > t; t++)
                                    if (t in this && this[t] === e) return t;
                                return -1
                            };
                        r = "undefined" != typeof Emitter && null !== Emitter ? Emitter : t("emitter"), u = function() {}, e = function(e) {
                            function t(e, n) {
                                var r, i, s, o;
                                if (this.element = e, this.version = t.version, this.defaultOptions.previewTemplate = this.defaultOptions.previewTemplate.replace(/\n*/g, ""), "string" == typeof this.element && (this.element = document.querySelector(this.element)), !this.element || null == this.element.nodeType) throw Error("Invalid dropzone element.");
                                if (this.element.dropzone) throw Error("Dropzone already attached.");
                                if (t.instances.push(this), e.dropzone = this, r = null != (o = t.optionsForElement(this.element)) ? o : {}, i = function() {
                                        var e, t, n, r, i, s, o;
                                        for (r = arguments[0], n = arguments.length >= 2 ? c.call(arguments, 1) : [], s = 0, o = n.length; o > s; s++) {
                                            t = n[s];
                                            for (e in t) i = t[e], r[e] = i
                                        }
                                        return r
                                    }, this.options = i({}, this.defaultOptions, r, null != n ? n : {}), null == this.options.url && (this.options.url = this.element.action), !this.options.url) throw Error("No URL provided.");
                                if (this.options.acceptParameter && this.options.acceptedMimeTypes) throw Error("You can't provide both 'acceptParameter' and 'acceptedMimeTypes'. 'acceptParameter' is deprecated.");
                                if (this.options.method = this.options.method.toUpperCase(), this.options.forceFallback || !t.isBrowserSupported()) return this.options.fallback.call(this);
                                if ((s = this.getExistingFallback()) && s.parentNode && s.parentNode.removeChild(s), this.options.previewsContainer) {
                                    if ("string" == typeof this.options.previewsContainer ? this.previewsContainer = document.querySelector(this.options.previewsContainer) : null != this.options.previewsContainer.nodeType && (this.previewsContainer = this.options.previewsContainer), null == this.previewsContainer) throw Error("Invalid `previewsContainer` option provided. Please provide a CSS selector or a plain HTML element.")
                                } else this.previewsContainer = this.element;
                                if (this.options.clickable && (this.options.clickable === !0 ? this.clickableElement = this.element : "string" == typeof this.options.clickable ? this.clickableElement = document.querySelector(this.options.clickable) : null != this.options.clickable.nodeType && (this.clickableElement = this.options.clickable), !this.clickableElement)) throw Error("Invalid `clickable` element provided. Please set it to `true`, a plain HTML element or a valid CSS selector.");
                                this.init()
                            }
                            return l(t, e), t.prototype.events = ["drop", "dragstart", "dragend", "dragenter", "dragover", "dragleave", "selectedfiles", "addedfile", "removedfile", "thumbnail", "error", "processingfile", "uploadprogress", "sending", "success", "complete", "reset"], t.prototype.defaultOptions = {
                                url: null,
                                method: "post",
                                parallelUploads: 2,
                                maxFilesize: 256,
                                paramName: "file",
                                createImageThumbnails: !0,
                                maxThumbnailFilesize: 10,
                                thumbnailWidth: 100,
                                thumbnailHeight: 100,
                                params: {},
                                clickable: !0,
                                acceptedMimeTypes: null,
                                acceptParameter: null,
                                enqueueForUpload: !0,
                                previewsContainer: null,
                                dictDefaultMessage: "Drop files here to upload",
                                dictFallbackMessage: "Your browser does not support drag'n'drop file uploads.",
                                dictFallbackText: "Please use the fallback form below to upload your files like in the olden days.",
                                dictFileTooBig: "File is too big ({{filesize}}MB). Max filesize: {{maxFilesize}}MB.",
                                dictInvalidFileType: "You can't upload files of this type.",
                                dictResponseError: "Server responded with {{statusCode}} code.",
                                accept: function(e, t) {
                                    return t()
                                },
                                init: function() {
                                    return u
                                },
                                forceFallback: !1,
                                fallback: function() {
                                    var e, n, r, i, s, o;
                                    for (this.element.className = "" + this.element.className + " dz-browser-not-supported", o = this.element.getElementsByTagName("div"), i = 0, s = o.length; s > i; i++) e = o[i], /(^| )message($| )/.test(e.className) && (n = e, e.className = "dz-message");
                                    return n || (n = t.createElement('<div class="dz-message"><span></span></div>'), this.element.appendChild(n)), r = n.getElementsByTagName("span")[0], r && (r.textContent = this.options.dictFallbackMessage), this.element.appendChild(this.getFallbackForm())
                                },
                                resize: function(e) {
                                    var t, n, r;
                                    return t = {
                                        srcX: 0,
                                        srcY: 0,
                                        srcWidth: e.width,
                                        srcHeight: e.height
                                    }, n = e.width / e.height, r = this.options.thumbnailWidth / this.options.thumbnailHeight, e.height < this.options.thumbnailHeight || e.width < this.options.thumbnailWidth ? (t.trgHeight = t.srcHeight, t.trgWidth = t.srcWidth) : n > r ? (t.srcHeight = e.height, t.srcWidth = t.srcHeight * r) : (t.srcWidth = e.width, t.srcHeight = t.srcWidth / r), t.srcX = (e.width - t.srcWidth) / 2, t.srcY = (e.height - t.srcHeight) / 2, t
                                },
                                drop: function() {
                                    return this.element.classList.remove("dz-drag-hover")
                                },
                                dragstart: u,
                                dragend: function() {
                                    return this.element.classList.remove("dz-drag-hover")
                                },
                                dragenter: function() {
                                    return this.element.classList.add("dz-drag-hover")
                                },
                                dragover: function() {
                                    return this.element.classList.add("dz-drag-hover")
                                },
                                dragleave: function() {
                                    return this.element.classList.remove("dz-drag-hover")
                                },
                                selectedfiles: function() {
                                    return this.element === this.previewsContainer ? this.element.classList.add("dz-started") : void 0
                                },
                                reset: function() {
                                    return this.element.classList.remove("dz-started")
                                },
                                addedfile: function(e) {
                                    return e.previewElement = t.createElement(this.options.previewTemplate), e.previewTemplate = e.previewElement, this.previewsContainer.appendChild(e.previewElement), e.previewElement.querySelector("[data-dz-name]").textContent = e.name, e.previewElement.querySelector("[data-dz-size]").innerHTML = this.filesize(e.size)
                                },
                                removedfile: function(e) {
                                    return e.previewElement.parentNode.removeChild(e.previewElement)
                                },
                                thumbnail: function(e, t) {
                                    var n;
                                    return e.previewElement.classList.remove("dz-file-preview"), e.previewElement.classList.add("dz-image-preview"), n = e.previewElement.querySelector("[data-dz-thumbnail]"), n.alt = e.name, n.src = t
                                },
                                error: function(e, t) {
                                    return e.previewElement.classList.add("dz-error"), e.previewElement.querySelector("[data-dz-errormessage]").textContent = t
                                },
                                processingfile: function(e) {
                                    return e.previewElement.classList.add("dz-processing")
                                },
                                uploadprogress: function(e, t) {
                                    return e.previewElement.querySelector("[data-dz-uploadprogress]").style.width = "" + t + "%"
                                },
                                sending: u,
                                success: function(e) {
                                    return e.previewElement.classList.add("dz-success")
                                },
                                complete: u,
                                previewTemplate: '<div class="dz-preview dz-file-preview">\n <div class="dz-details">\n <div class="dz-filename"><span data-dz-name></span></div>\n <div class="dz-size" data-dz-size></div>\n <img data-dz-thumbnail />\n </div>\n <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n <div class="dz-success-mark"><span></span></div>\n <div class="dz-error-mark"><span></span></div>\n <div class="dz-error-message"><span data-dz-errormessage></span></div>\n</div>'
                            }, t.prototype.init = function() {
                                var e, n, r, i, s, o, u, a = this;
                                for ("form" === this.element.tagName && this.element.setAttribute("enctype", "multipart/form-data"), this.element.classList.contains("dropzone") && !this.element.querySelector("[data-dz-message]") && this.element.appendChild(t.createElement('<div class="dz-default dz-message" data-dz-message><span>' + this.options.dictDefaultMessage + "</span></div>")), this.clickableElement && (r = function() {
                                        return a.hiddenFileInput && document.body.removeChild(a.hiddenFileInput), a.hiddenFileInput = document.createElement("input"), a.hiddenFileInput.setAttribute("type", "file"), a.hiddenFileInput.setAttribute("multiple", "multiple"), null != a.options.acceptedMimeTypes && a.hiddenFileInput.setAttribute("accept", a.options.acceptedMimeTypes), null != a.options.acceptParameter && a.hiddenFileInput.setAttribute("accept", a.options.acceptParameter), a.hiddenFileInput.style.visibility = "hidden", a.hiddenFileInput.style.position = "absolute", a.hiddenFileInput.style.top = "0", a.hiddenFileInput.style.left = "0", a.hiddenFileInput.style.height = "0", a.hiddenFileInput.style.width = "0", document.body.appendChild(a.hiddenFileInput), a.hiddenFileInput.addEventListener("change", function() {
                                            var e;
                                            return e = a.hiddenFileInput.files, e.length && (a.emit("selectedfiles", e), a.handleFiles(e)), r()
                                        })
                                    }, r()), this.files = [], this.filesQueue = [], this.filesProcessing = [], this.URL = null != (o = window.URL) ? o : window.webkitURL, u = this.events, i = 0, s = u.length; s > i; i++) e = u[i], this.on(e, this.options[e]);
                                return this.on("uploadprogress", function(e) {
                                    var t, n, r, i, s, o;
                                    for (n = 0, t = 0, o = a.files, i = 0, s = o.length; s > i; i++) e = o[i], n += e.upload.bytesSent, t += e.upload.total;
                                    return r = 100 * n / t, a.emit("totaluploadprogress", r, t, n)
                                }), n = function(e) {
                                    return e.stopPropagation(), e.preventDefault ? e.preventDefault() : e.returnValue = !1
                                }, this.listeners = [{
                                    element: this.element,
                                    events: {
                                        dragstart: function(e) {
                                            return a.emit("dragstart", e)
                                        },
                                        dragenter: function(e) {
                                            return n(e), a.emit("dragenter", e)
                                        },
                                        dragover: function(e) {
                                            return n(e), a.emit("dragover", e)
                                        },
                                        dragleave: function(e) {
                                            return a.emit("dragleave", e)
                                        },
                                        drop: function(e) {
                                            return n(e), a.drop(e), a.emit("drop", e)
                                        },
                                        dragend: function(e) {
                                            return a.emit("dragend", e)
                                        }
                                    }
                                }], this.clickableElement && this.listeners.push({
                                    element: this.clickableElement,
                                    events: {
                                        click: function(e) {
                                            return a.clickableElement !== a.element || e.target === a.element || t.elementInside(e.target, a.element.querySelector(".dz-message")) ? a.hiddenFileInput.click() : void 0
                                        }
                                    }
                                }), this.enable(), this.options.init.call(this)
                            }, t.prototype.getFallbackForm = function() {
                                var e, n, r, i;
                                return (e = this.getExistingFallback()) ? e : (r = '<div class="dz-fallback">', this.options.dictFallbackText && (r += "<p>" + this.options.dictFallbackText + "</p>"), r += '<input type="file" name="' + this.options.paramName + '" multiple="multiple" /><button type="submit">Upload!</button></div>', n = t.createElement(r), "FORM" !== this.element.tagName ? (i = t.createElement('<form action="' + this.options.url + '" enctype="multipart/form-data" method="' + this.options.method + '"></form>'), i.appendChild(n)) : (this.element.setAttribute("enctype", "multipart/form-data"), this.element.setAttribute("method", this.options.method)), null != i ? i : n)
                            }, t.prototype.getExistingFallback = function() {
                                var e, t, n, r, i, s;
                                for (t = function(e) {
                                        var t, n, r;
                                        for (n = 0, r = e.length; r > n; n++)
                                            if (t = e[n], /(^| )fallback($| )/.test(t.className)) return t
                                    }, s = ["div", "form"], r = 0, i = s.length; i > r; r++)
                                    if (n = s[r], e = t(this.element.getElementsByTagName(n))) return e
                            }, t.prototype.setupEventListeners = function() {
                                var e, t, n, r, i, s, o;
                                for (s = this.listeners, o = [], r = 0, i = s.length; i > r; r++) e = s[r], o.push(function() {
                                    var r, i;
                                    r = e.events, i = [];
                                    for (t in r) n = r[t], i.push(e.element.addEventListener(t, n, !1));
                                    return i
                                }());
                                return o
                            }, t.prototype.removeEventListeners = function() {
                                var e, t, n, r, i, s, o;
                                for (s = this.listeners, o = [], r = 0, i = s.length; i > r; r++) e = s[r], o.push(function() {
                                    var r, i;
                                    r = e.events, i = [];
                                    for (t in r) n = r[t], i.push(e.element.removeEventListener(t, n, !1));
                                    return i
                                }());
                                return o
                            }, t.prototype.disable = function() {
                                return this.clickableElement === this.element && this.element.classList.remove("dz-clickable"), this.removeEventListeners(), this.filesProcessing = [], this.filesQueue = []
                            }, t.prototype.enable = function() {
                                return this.clickableElement === this.element && this.element.classList.add("dz-clickable"), this.setupEventListeners()
                            }, t.prototype.filesize = function(e) {
                                var t;
                                return e >= 1e11 ? (e /= 1e11, t = "TB") : e >= 1e8 ? (e /= 1e8, t = "GB") : e >= 1e5 ? (e /= 1e5, t = "MB") : e >= 100 ? (e /= 100, t = "KB") : (e = 10 * e, t = "b"), "<strong>" + Math.round(e) / 10 + "</strong> " + t
                            }, t.prototype.drop = function(e) {
                                var t;
                                if (e.dataTransfer) return t = e.dataTransfer.files, this.emit("selectedfiles", t), t.length ? this.handleFiles(t) : void 0
                            }, t.prototype.handleFiles = function(e) {
                                var t, n, r, i;
                                for (i = [], n = 0, r = e.length; r > n; n++) t = e[n], i.push(this.addFile(t));
                                return i
                            }, t.prototype.accept = function(e, n) {
                                return e.size > 1024 * 1024 * this.options.maxFilesize ? n(this.options.dictFileTooBig.replace("{{filesize}}", Math.round(e.size / 1024 / 10.24) / 100).replace("{{maxFilesize}}", this.options.maxFilesize)) : t.isValidMimeType(e.type, this.options.acceptedMimeTypes) ? this.options.accept.call(this, e, n) : n(this.options.dictInvalidFileType)
                            }, t.prototype.addFile = function(e) {
                                var t = this;
                                return e.upload = {
                                    progress: 0,
                                    total: e.size,
                                    bytesSent: 0
                                }, this.files.push(e), this.emit("addedfile", e), this.options.createImageThumbnails && e.type.match(/image.*/) && e.size <= 1024 * 1024 * this.options.maxThumbnailFilesize && this.createThumbnail(e), this.accept(e, function(n) {
                                    return n ? t.errorProcessing(e, n) : t.options.enqueueForUpload ? (t.filesQueue.push(e), t.processQueue()) : void 0
                                })
                            }, t.prototype.removeFile = function(e) {
                                if (e.processing) throw Error("Can't remove file currently processing");
                                return this.files = a(this.files, e), this.filesQueue = a(this.filesQueue, e), this.emit("removedfile", e), 0 === this.files.length ? this.emit("reset") : void 0
                            }, t.prototype.removeAllFiles = function() {
                                var e, t, n, r;
                                for (r = this.files.slice(), t = 0, n = r.length; n > t; t++) e = r[t], 0 > h.call(this.filesProcessing, e) && this.removeFile(e);
                                return null
                            }, t.prototype.createThumbnail = function(e) {
                                var t, n = this;
                                return t = new FileReader, t.onload = function() {
                                    var r;
                                    return r = new Image, r.onload = function() {
                                        var t, s, o, u, a, f, l, c, h, p;
                                        return e.width = r.width, e.height = r.height, o = n.options.resize.call(n, e), null == (a = o.trgWidth) && (o.trgWidth = n.options.thumbnailWidth), null == (f = o.trgHeight) && (o.trgHeight = n.options.thumbnailHeight), t = document.createElement("canvas"), s = t.getContext("2d"), t.width = o.trgWidth, t.height = o.trgHeight, s.drawImage(r, null != (l = o.srcX) ? l : 0, null != (c = o.srcY) ? c : 0, o.srcWidth, o.srcHeight, null != (h = o.trgX) ? h : 0, null != (p = o.trgY) ? p : 0, o.trgWidth, o.trgHeight), u = t.toDataURL("image/png"), n.emit("thumbnail", e, u)
                                    }, r.src = t.result
                                }, t.readAsDataURL(e)
                            }, t.prototype.processQueue = function() {
                                var e, t, n;
                                for (t = this.options.parallelUploads, n = this.filesProcessing.length, e = n; t > e;) {
                                    if (!this.filesQueue.length) return;
                                    this.processFile(this.filesQueue.shift()), e++
                                }
                            }, t.prototype.processFile = function(e) {
                                return this.filesProcessing.push(e), e.processing = !0, this.emit("processingfile", e), this.uploadFile(e)
                            }, t.prototype.uploadFile = function(e) {
                                var t, n, r, i, s, o, u, a, f, l, c, h, p, d, v, m = this;
                                if (l = new XMLHttpRequest, l.open(this.options.method, this.options.url, !0), a = null, n = function() {
                                        return m.errorProcessing(e, a || m.options.dictResponseError.replace("{{statusCode}}", l.status), l)
                                    }, l.onload = function(t) {
                                        var r;
                                        if (a = l.responseText, l.getResponseHeader("content-type") && ~l.getResponseHeader("content-type").indexOf("application/json")) try {
                                            a = JSON.parse(a)
                                        } catch (i) {
                                            t = i, a = "Invalid JSON response from server."
                                        }
                                        return (r = l.status) >= 200 && 300 > r ? m.finished(e, a, t) : n()
                                    }, l.onerror = function() {
                                        return n()
                                    }, u = null != (p = l.upload) ? p : l, u.onprogress = function(t) {
                                        var n;
                                        return e.upload = {
                                            progress: n,
                                            total: t.total,
                                            bytesSent: t.loaded
                                        }, n = 100 * t.loaded / t.total, m.emit("uploadprogress", e, n, t.loaded)
                                    }, l.setRequestHeader("Accept", "application/json"), l.setRequestHeader("Cache-Control", "no-cache"), l.setRequestHeader("X-Requested-With", "XMLHttpRequest"), l.setRequestHeader("X-File-Name", e.name), t = new FormData, this.options.params) {
                                    d = this.options.params;
                                    for (o in d) f = d[o], t.append(o, f)
                                }
                                if ("FORM" === this.element.tagName)
                                    for (v = this.element.querySelectorAll("input, textarea, select, button"), c = 0, h = v.length; h > c; c++) r = v[c], i = r.getAttribute("name"), s = r.getAttribute("type"), (!s || "checkbox" !== s.toLowerCase() || r.checked) && t.append(i, r.value);
                                return this.emit("sending", e, l, t), t.append(this.options.paramName, e), l.send(t)
                            }, t.prototype.finished = function(e, t, n) {
                                return this.filesProcessing = a(this.filesProcessing, e), e.processing = !1, this.processQueue(), this.emit("success", e, t, n), this.emit("finished", e, t, n), this.emit("complete", e)
                            }, t.prototype.errorProcessing = function(e, t, n) {
                                return this.filesProcessing = a(this.filesProcessing, e), e.processing = !1, this.processQueue(), this.emit("error", e, t, n), this.emit("complete", e)
                            }, t
                        }(r), e.version = "3.1.0", e.options = {}, e.optionsForElement = function(t) {
                            return t.id ? e.options[s(t.id)] : void 0
                        }, e.instances = [], e.forElement = function(e) {
                            var t;
                            return "string" == typeof e && (e = document.querySelector(e)), null != (t = e.dropzone) ? t : null
                        }, e.autoDiscover = !0, e.discover = function() {
                            var t, n, r, i, s, o;
                            if (e.autoDiscover) {
                                for (document.querySelectorAll ? r = document.querySelectorAll(".dropzone") : (r = [], t = function(e) {
                                        var t, n, i, s;
                                        for (s = [], n = 0, i = e.length; i > n; n++) t = e[n], /(^| )dropzone($| )/.test(t.className) ? s.push(r.push(t)) : s.push(void 0);
                                        return s
                                    }, t(document.getElementsByTagName("div")), t(document.getElementsByTagName("form"))), o = [], i = 0, s = r.length; s > i; i++) n = r[i], e.optionsForElement(n) !== !1 ? o.push(new e(n)) : o.push(void 0);
                                return o
                            }
                        }, e.blacklistedBrowsers = [/opera.*Macintosh.*version\/12/i], e.isBrowserSupported = function() {
                            var t, n, r, i, s;
                            if (t = !0, window.File && window.FileReader && window.FileList && window.Blob && window.FormData && document.querySelector)
                                if ("classList" in document.createElement("a"))
                                    for (s = e.blacklistedBrowsers, r = 0, i = s.length; i > r; r++) n = s[r], n.test(navigator.userAgent) && (t = !1);
                                else t = !1;
                            else t = !1;
                            return t
                        }, a = function(e, t) {
                            var n, r, i, s;
                            for (s = [], r = 0, i = e.length; i > r; r++) n = e[r], n !== t && s.push(n);
                            return s
                        }, s = function(e) {
                            return e.replace(/[\-_](\w)/g, function(e) {
                                return e[1].toUpperCase()
                            })
                        }, e.createElement = function(e) {
                            var t;
                            return t = document.createElement("div"), t.innerHTML = e, t.childNodes[0]
                        }, e.elementInside = function(e, t) {
                            if (e === t) return !0;
                            for (; e = e.parentNode;)
                                if (e === t) return !0;
                            return !1
                        }, e.isValidMimeType = function(e, t) {
                            var n, r, i, s;
                            if (!t) return !0;
                            for (t = t.split(","), n = e.replace(/\/.*$/, ""), i = 0, s = t.length; s > i; i++)
                                if (r = t[i], r = r.trim(), /\/\*$/.test(r)) {
                                    if (n === r.replace(/\/.*$/, "")) return !0
                                } else if (e === r) return !0;
                            return !1
                        }, "undefined" != typeof jQuery && null !== jQuery && (jQuery.fn.dropzone = function(t) {
                            return this.each(function() {
                                return new e(this, t)
                            })
                        }), n !== void 0 && null !== n ? n.exports = e : window.Dropzone = e, o = function(e, t) {
                            var n, r, i, s, o, u, a, f, l;
                            if (i = !1, l = !0, r = e.document, f = r.documentElement, n = r.addEventListener ? "addEventListener" : "attachEvent", a = r.addEventListener ? "removeEventListener" : "detachEvent", u = r.addEventListener ? "" : "on", s = function(n) {
                                    return "readystatechange" !== n.type || "complete" === r.readyState ? (("load" === n.type ? e : r)[a](u + n.type, s, !1), !i && (i = !0) ? t.call(e, n.type || n) : void 0) : void 0
                                }, o = function() {
                                    var e;
                                    try {
                                        f.doScroll("left")
                                    } catch (t) {
                                        return e = t, setTimeout(o, 50), void 0
                                    }
                                    return s("poll")
                                }, "complete" !== r.readyState) {
                                if (r.createEventObject && f.doScroll) {
                                    try {
                                        l = !e.frameElement
                                    } catch (c) {}
                                    l && o()
                                }
                                return r[n](u + "DOMContentLoaded", s, !1), r[n](u + "readystatechange", s, !1), e[n](u + "load", s, !1)
                            }
                        }, o(window, e.discover)
                    }).call(this)
                }), e.alias("component-emitter/index.js", "dropzone/deps/emitter/index.js"), "object" == typeof exports ? module.exports = e("dropzone") : "function" == typeof define && define.amd ? define(function() {
                    return e("dropzone")
                }) : window.Dropzone = e("dropzone")
            })();
            (function() {
                var e;
                e = function() {
                    function e() {
                        this.options_index = 0;
                        this.parsed = []
                    }
                    e.prototype.add_node = function(e) {
                        if (e.nodeName.toUpperCase() === "OPTGROUP") {
                            return this.add_group(e)
                        } else {
                            return this.add_option(e)
                        }
                    };
                    e.prototype.add_group = function(e) {
                        var t, n, r, i, s, o;
                        t = this.parsed.length;
                        this.parsed.push({
                            array_index: t,
                            group: true,
                            label: e.label,
                            children: 0,
                            disabled: e.disabled
                        });
                        s = e.childNodes;
                        o = [];
                        for (r = 0, i = s.length; r < i; r++) {
                            n = s[r];
                            o.push(this.add_option(n, t, e.disabled))
                        }
                        return o
                    };
                    e.prototype.add_option = function(e, t, n) {
                        if (e.nodeName.toUpperCase() === "OPTION") {
                            if (e.text !== "") {
                                if (t != null) {
                                    this.parsed[t].children += 1
                                }
                                this.parsed.push({
                                    array_index: this.parsed.length,
                                    options_index: this.options_index,
                                    value: e.value,
                                    text: e.text,
                                    html: e.innerHTML,
                                    selected: e.selected,
                                    disabled: n === true ? n : e.disabled,
                                    group_array_index: t,
                                    classes: e.className,
                                    style: e.style.cssText
                                })
                            } else {
                                this.parsed.push({
                                    array_index: this.parsed.length,
                                    options_index: this.options_index,
                                    empty: true
                                })
                            }
                            return this.options_index += 1
                        }
                    };
                    return e
                }();
                e.select_to_array = function(t) {
                    var n, r, i, s, o;
                    r = new e;
                    o = t.childNodes;
                    for (i = 0, s = o.length; i < s; i++) {
                        n = o[i];
                        r.add_node(n)
                    }
                    return r.parsed
                };
                this.SelectParser = e
            }).call(this);
            (function() {
                var e, t;
                t = this;
                e = function() {
                    function e(e, t) {
                        this.form_field = e;
                        this.options = t != null ? t : {};
                        this.is_multiple = this.form_field.multiple;
                        this.set_default_text();
                        this.set_default_values();
                        this.setup();
                        this.set_up_html();
                        this.register_observers();
                        this.finish_setup()
                    }
                    e.prototype.set_default_values = function() {
                        var e = this;
                        this.click_test_action = function(t) {
                            return e.test_active_click(t)
                        };
                        this.activate_action = function(t) {
                            return e.activate_field(t)
                        };
                        this.active_field = false;
                        this.mouse_on_container = false;
                        this.results_showing = false;
                        this.result_highlighted = null;
                        this.result_single_selected = null;
                        this.allow_single_deselect = this.options.allow_single_deselect != null && this.form_field.options[0] != null && this.form_field.options[0].text === "" ? this.options.allow_single_deselect : false;
                        this.disable_search_threshold = this.options.disable_search_threshold || 0;
                        this.disable_search = this.options.disable_search || false;
                        this.enable_split_word_search = this.options.enable_split_word_search != null ? this.options.enable_split_word_search : true;
                        this.search_contains = this.options.search_contains || false;
                        this.choices = 0;
                        this.single_backstroke_delete = this.options.single_backstroke_delete || false;
                        this.max_selected_options = this.options.max_selected_options || Infinity;
                        return this.inherit_select_classes = this.options.inherit_select_classes || false
                    };
                    e.prototype.set_default_text = function() {
                        if (this.form_field.getAttribute("data-placeholder")) {
                            this.default_text = this.form_field.getAttribute("data-placeholder")
                        } else if (this.is_multiple) {
                            this.default_text = this.options.placeholder_text_multiple || this.options.placeholder_text || "Select Some Options"
                        } else {
                            this.default_text = this.options.placeholder_text_single || this.options.placeholder_text || "Select an Option"
                        }
                        return this.results_none_found = this.form_field.getAttribute("data-no_results_text") || this.options.no_results_text || "No results match"
                    };
                    e.prototype.mouse_enter = function() {
                        return this.mouse_on_container = true
                    };
                    e.prototype.mouse_leave = function() {
                        return this.mouse_on_container = false
                    };
                    e.prototype.input_focus = function(e) {
                        var t = this;
                        if (this.is_multiple) {
                            if (!this.active_field) {
                                return setTimeout(function() {
                                    return t.container_mousedown()
                                }, 50)
                            }
                        } else {
                            if (!this.active_field) {
                                return this.activate_field()
                            }
                        }
                    };
                    e.prototype.input_blur = function(e) {
                        var t = this;
                        if (!this.mouse_on_container) {
                            this.active_field = false;
                            return setTimeout(function() {
                                return t.blur_test()
                            }, 100)
                        }
                    };
                    e.prototype.result_add_option = function(e) {
                        var t, n;
                        if (!e.disabled) {
                            e.dom_id = this.container_id + "_o_" + e.array_index;
                            t = e.selected && this.is_multiple ? [] : ["active-result"];
                            if (e.selected) {
                                t.push("result-selected")
                            }
                            if (e.group_array_index != null) {
                                t.push("group-option")
                            }
                            if (e.classes !== "") {
                                t.push(e.classes)
                            }
                            n = e.style.cssText !== "" ? ' style="' + e.style + '"' : "";
                            return '<li id="' + e.dom_id + '" class="' + t.join(" ") + '"' + n + ">" + e.html + "</li>"
                        } else {
                            return ""
                        }
                    };
                    e.prototype.results_update_field = function() {
                        if (!this.is_multiple) {
                            this.results_reset_cleanup()
                        }
                        this.result_clear_highlight();
                        this.result_single_selected = null;
                        return this.results_build()
                    };
                    e.prototype.results_toggle = function() {
                        if (this.results_showing) {
                            return this.results_hide()
                        } else {
                            return this.results_show()
                        }
                    };
                    e.prototype.results_search = function(e) {
                        if (this.results_showing) {
                            return this.winnow_results()
                        } else {
                            return this.results_show()
                        }
                    };
                    e.prototype.keyup_checker = function(e) {
                        var t, n;
                        t = (n = e.which) != null ? n : e.keyCode;
                        this.search_field_scale();
                        switch (t) {
                            case 8:
                                if (this.is_multiple && this.backstroke_length < 1 && this.choices > 0) {
                                    return this.keydown_backstroke()
                                } else if (!this.pending_backstroke) {
                                    this.result_clear_highlight();
                                    return this.results_search()
                                }
                                break;
                            case 13:
                                e.preventDefault();
                                if (this.results_showing) {
                                    return this.result_select(e)
                                }
                                break;
                            case 27:
                                if (this.results_showing) {
                                    this.results_hide()
                                }
                                return true;
                            case 9:
                            case 38:
                            case 40:
                            case 16:
                            case 91:
                            case 17:
                                break;
                            default:
                                return this.results_search()
                        }
                    };
                    e.prototype.generate_field_id = function() {
                        var e;
                        e = this.generate_random_id();
                        this.form_field.id = e;
                        return e
                    };
                    e.prototype.generate_random_char = function() {
                        var e, t, n;
                        e = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";
                        n = Math.floor(Math.random() * e.length);
                        return t = e.substring(n, n + 1)
                    };
                    return e
                }();
                t.AbstractChosen = e
            }).call(this);
            (function() {
                var e, t, n, r, i = {}.hasOwnProperty,
                    s = function(e, t) {
                        function n() {
                            this.constructor = e
                        }
                        for (var r in t) {
                            if (i.call(t, r)) e[r] = t[r]
                        }
                        n.prototype = t.prototype;
                        e.prototype = new n;
                        e.__super__ = t.prototype;
                        return e
                    };
                r = this;
                e = jQuery;
                e.fn.extend({
                    chosen: function(n) {
                        var r, i, s;
                        s = navigator.userAgent.toLowerCase();
                        i = /(msie) ([\w.]+)/.exec(s) || [];
                        r = {
                            name: i[1] || "",
                            version: i[2] || "0"
                        };
                        if (r.name === "msie" && (r.version === "6.0" || r.version === "7.0" && document.documentMode === 7)) {
                            return this
                        }
                        return this.each(function(r) {
                            var i;
                            i = e(this);
                            if (!i.hasClass("chzn-done")) {
                                return i.data("chosen", new t(this, n))
                            }
                        })
                    }
                });
                t = function(t) {
                    function i() {
                        i.__super__.constructor.apply(this, arguments)
                    }
                    s(i, t);
                    i.prototype.setup = function() {
                        this.form_field_jq = e(this.form_field);
                        this.current_value = this.form_field_jq.val();
                        return this.is_rtl = this.form_field_jq.hasClass("chzn-rtl")
                    };
                    i.prototype.finish_setup = function() {
                        return this.form_field_jq.addClass("chzn-done")
                    };
                    i.prototype.set_up_html = function() {
                        var t, r, i, s, o, u;
                        this.container_id = this.form_field.id.length ? this.form_field.id.replace(/[^\w]/g, "_") : this.generate_field_id();
                        this.container_id += "_chzn";
                        t = ["chzn-container"];
                        t.push("chzn-container-" + (this.is_multiple ? "multi" : "single"));
                        if (this.inherit_select_classes && this.form_field.className) {
                            t.push(this.form_field.className)
                        }
                        if (this.is_rtl) {
                            t.push("chzn-rtl")
                        }
                        this.f_width = this.form_field_jq.outerWidth();
                        i = {
                            id: this.container_id,
                            "class": t.join(" "),
                            style: "width: " + this.f_width + "px;",
                            title: this.form_field.title
                        };
                        r = e("<div />", i);
                        if (this.is_multiple) {
                            r.html('<ul class="chzn-choices"><li class="search-field"><input type="text" value="' + this.default_text + '" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop" style="left:-9000px;"><ul class="chzn-results"></ul></div>')
                        } else {
                            r.html('<a href="javascript:void(0)" class="chzn-single chzn-default" tabindex="-1"><span>' + this.default_text + '</span><div><b></b></div></a><div class="chzn-drop" style="left:-9000px;"><div class="chzn-search"><input type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>')
                        }
                        this.form_field_jq.hide().after(r);
                        this.container = e("#" + this.container_id);
                        this.dropdown = this.container.find("div.chzn-drop").first();
                        s = this.container.height();
                        o = this.f_width - n(this.dropdown);
                        this.dropdown.css({
                            width: o + "px",
                            top: s + "px"
                        });
                        this.search_field = this.container.find("input").first();
                        this.search_results = this.container.find("ul.chzn-results").first();
                        this.search_field_scale();
                        this.search_no_results = this.container.find("li.no-results").first();
                        if (this.is_multiple) {
                            this.search_choices = this.container.find("ul.chzn-choices").first();
                            this.search_container = this.container.find("li.search-field").first()
                        } else {
                            this.search_container = this.container.find("div.chzn-search").first();
                            this.selected_item = this.container.find(".chzn-single").first();
                            u = o - n(this.search_container) - n(this.search_field);
                            this.search_field.css({
                                width: u + "px"
                            })
                        }
                        this.results_build();
                        this.set_tab_index();
                        return this.form_field_jq.trigger("liszt:ready", {
                            chosen: this
                        })
                    };
                    i.prototype.register_observers = function() {
                        var e = this;
                        this.container.mousedown(function(t) {
                            e.container_mousedown(t)
                        });
                        this.container.mouseup(function(t) {
                            e.container_mouseup(t)
                        });
                        this.container.mouseenter(function(t) {
                            e.mouse_enter(t)
                        });
                        this.container.mouseleave(function(t) {
                            e.mouse_leave(t)
                        });
                        this.search_results.mouseup(function(t) {
                            e.search_results_mouseup(t)
                        });
                        this.search_results.mouseover(function(t) {
                            e.search_results_mouseover(t)
                        });
                        this.search_results.mouseout(function(t) {
                            e.search_results_mouseout(t)
                        });
                        this.form_field_jq.bind("liszt:updated", function(t) {
                            e.results_update_field(t)
                        });
                        this.form_field_jq.bind("liszt:activate", function(t) {
                            e.activate_field(t)
                        });
                        this.form_field_jq.bind("liszt:open", function(t) {
                            e.container_mousedown(t)
                        });
                        this.search_field.blur(function(t) {
                            e.input_blur(t)
                        });
                        this.search_field.keyup(function(t) {
                            e.keyup_checker(t)
                        });
                        this.search_field.keydown(function(t) {
                            e.keydown_checker(t)
                        });
                        this.search_field.focus(function(t) {
                            e.input_focus(t)
                        });
                        if (this.is_multiple) {
                            return this.search_choices.click(function(t) {
                                e.choices_click(t)
                            })
                        } else {
                            return this.container.click(function(e) {
                                e.preventDefault()
                            })
                        }
                    };
                    i.prototype.search_field_disabled = function() {
                        this.is_disabled = this.form_field_jq[0].disabled;
                        if (this.is_disabled) {
                            this.container.addClass("chzn-disabled");
                            this.search_field[0].disabled = true;
                            if (!this.is_multiple) {
                                this.selected_item.unbind("focus", this.activate_action)
                            }
                            return this.close_field()
                        } else {
                            this.container.removeClass("chzn-disabled");
                            this.search_field[0].disabled = false;
                            if (!this.is_multiple) {
                                return this.selected_item.bind("focus", this.activate_action)
                            }
                        }
                    };
                    i.prototype.container_mousedown = function(t) {
                        var n;
                        if (!this.is_disabled) {
                            n = t != null ? e(t.target).hasClass("search-choice-close") : false;
                            if (t && t.type === "mousedown" && !this.results_showing) {
                                t.preventDefault()
                            }
                            if (!this.pending_destroy_click && !n) {
                                if (!this.active_field) {
                                    if (this.is_multiple) {
                                        this.search_field.val("")
                                    }
                                    e(document).click(this.click_test_action);
                                    this.results_show()
                                } else if (!this.is_multiple && t && (e(t.target)[0] === this.selected_item[0] || e(t.target).parents("a.chzn-single").length)) {
                                    t.preventDefault();
                                    this.results_toggle()
                                }
                                return this.activate_field()
                            } else {
                                return this.pending_destroy_click = false
                            }
                        }
                    };
                    i.prototype.container_mouseup = function(e) {
                        if (e.target.nodeName === "ABBR" && !this.is_disabled) {
                            return this.results_reset(e)
                        }
                    };
                    i.prototype.blur_test = function(e) {
                        if (!this.active_field && this.container.hasClass("chzn-container-active")) {
                            return this.close_field()
                        }
                    };
                    i.prototype.close_field = function() {
                        e(document).unbind("click", this.click_test_action);
                        this.active_field = false;
                        this.results_hide();
                        this.container.removeClass("chzn-container-active");
                        this.winnow_results_clear();
                        this.clear_backstroke();
                        this.show_search_field_default();
                        return this.search_field_scale()
                    };
                    i.prototype.activate_field = function() {
                        this.container.addClass("chzn-container-active");
                        this.active_field = true;
                        this.search_field.val(this.search_field.val());
                        return this.search_field.focus()
                    };
                    i.prototype.test_active_click = function(t) {
                        if (e(t.target).parents("#" + this.container_id).length) {
                            return this.active_field = true
                        } else {
                            return this.close_field()
                        }
                    };
                    i.prototype.results_build = function() {
                        var e, t, n, i, s;
                        this.parsing = true;
                        this.results_data = r.SelectParser.select_to_array(this.form_field);
                        if (this.is_multiple && this.choices > 0) {
                            this.search_choices.find("li.search-choice").remove();
                            this.choices = 0
                        } else if (!this.is_multiple) {
                            this.selected_item.addClass("chzn-default").find("span").text(this.default_text);
                            if (this.disable_search || this.form_field.options.length <= this.disable_search_threshold) {
                                this.container.addClass("chzn-container-single-nosearch")
                            } else {
                                this.container.removeClass("chzn-container-single-nosearch")
                            }
                        }
                        e = "";
                        s = this.results_data;
                        for (n = 0, i = s.length; n < i; n++) {
                            t = s[n];
                            if (t.group) {
                                e += this.result_add_group(t)
                            } else if (!t.empty) {
                                e += this.result_add_option(t);
                                if (t.selected && this.is_multiple) {
                                    this.choice_build(t)
                                } else if (t.selected && !this.is_multiple) {
                                    this.selected_item.removeClass("chzn-default").find("span").text(t.text);
                                    if (this.allow_single_deselect) {
                                        this.single_deselect_control_build()
                                    }
                                }
                            }
                        }
                        this.search_field_disabled();
                        this.show_search_field_default();
                        this.search_field_scale();
                        this.search_results.html(e);
                        return this.parsing = false
                    };
                    i.prototype.result_add_group = function(t) {
                        if (!t.disabled) {
                            t.dom_id = this.container_id + "_g_" + t.array_index;
                            return '<li id="' + t.dom_id + '" class="group-result">' + e("<div />").text(t.label).html() + "</li>"
                        } else {
                            return ""
                        }
                    };
                    i.prototype.result_do_highlight = function(e) {
                        var t, n, r, i, s;
                        if (e.length) {
                            this.result_clear_highlight();
                            this.result_highlight = e;
                            this.result_highlight.addClass("highlighted");
                            r = parseInt(this.search_results.css("maxHeight"), 10);
                            s = this.search_results.scrollTop();
                            i = r + s;
                            n = this.result_highlight.position().top + this.search_results.scrollTop();
                            t = n + this.result_highlight.outerHeight();
                            if (t >= i) {
                                return this.search_results.scrollTop(t - r > 0 ? t - r : 0)
                            } else if (n < s) {
                                return this.search_results.scrollTop(n)
                            }
                        }
                    };
                    i.prototype.result_clear_highlight = function() {
                        if (this.result_highlight) {
                            this.result_highlight.removeClass("highlighted")
                        }
                        return this.result_highlight = null
                    };
                    i.prototype.results_show = function() {
                        var e;
                        if (!this.is_multiple) {
                            this.selected_item.addClass("chzn-single-with-drop");
                            if (this.result_single_selected) {
                                this.result_do_highlight(this.result_single_selected)
                            }
                        } else if (this.max_selected_options <= this.choices) {
                            this.form_field_jq.trigger("liszt:maxselected", {
                                chosen: this
                            });
                            return false
                        }
                        e = this.is_multiple ? this.container.height() : this.container.height() - 1;
                        this.form_field_jq.trigger("liszt:showing_dropdown", {
                            chosen: this
                        });
                        this.dropdown.css({
                            top: e + "px",
                            left: 0
                        });
                        this.results_showing = true;
                        this.search_field.focus();
                        this.search_field.val(this.search_field.val());
                        return this.winnow_results()
                    };
                    i.prototype.results_hide = function() {
                        if (!this.is_multiple) {
                            this.selected_item.removeClass("chzn-single-with-drop")
                        }
                        this.result_clear_highlight();
                        this.form_field_jq.trigger("liszt:hiding_dropdown", {
                            chosen: this
                        });
                        this.dropdown.css({
                            left: "-9000px"
                        });
                        return this.results_showing = false
                    };
                    i.prototype.set_tab_index = function(e) {
                        var t;
                        if (this.form_field_jq.attr("tabindex")) {
                            t = this.form_field_jq.attr("tabindex");
                            this.form_field_jq.attr("tabindex", -1);
                            return this.search_field.attr("tabindex", t)
                        }
                    };
                    i.prototype.show_search_field_default = function() {
                        if (this.is_multiple && this.choices < 1 && !this.active_field) {
                            this.search_field.val(this.default_text);
                            return this.search_field.addClass("default")
                        } else {
                            this.search_field.val("");
                            return this.search_field.removeClass("default")
                        }
                    };
                    i.prototype.search_results_mouseup = function(t) {
                        var n;
                        n = e(t.target).hasClass("active-result") ? e(t.target) : e(t.target).parents(".active-result").first();
                        if (n.length) {
                            this.result_highlight = n;
                            this.result_select(t);
                            return this.search_field.focus()
                        }
                    };
                    i.prototype.search_results_mouseover = function(t) {
                        var n;
                        n = e(t.target).hasClass("active-result") ? e(t.target) : e(t.target).parents(".active-result").first();
                        if (n) {
                            return this.result_do_highlight(n)
                        }
                    };
                    i.prototype.search_results_mouseout = function(t) {
                        if (e(t.target).hasClass("active-result" || e(t.target).parents(".active-result").first())) {
                            return this.result_clear_highlight()
                        }
                    };
                    i.prototype.choices_click = function(t) {
                        t.preventDefault();
                        if (this.active_field && !e(t.target).hasClass("search-choice" || e(t.target).parents(".search-choice").first) && !this.results_showing) {
                            return this.results_show()
                        }
                    };
                    i.prototype.choice_build = function(t) {
                        var n, r, i, s = this;
                        if (this.is_multiple && this.max_selected_options <= this.choices) {
                            this.form_field_jq.trigger("liszt:maxselected", {
                                chosen: this
                            });
                            return false
                        }
                        n = this.container_id + "_c_" + t.array_index;
                        this.choices += 1;
                        if (t.disabled) {
                            r = '<li class="search-choice search-choice-disabled" id="' + n + '"><span>' + t.html + "</span></li>"
                        } else {
                            r = '<li class="search-choice" id="' + n + '"><span>' + t.html + '</span><a href="javascript:void(0)" class="search-choice-close" rel="' + t.array_index + '"></a></li>'
                        }
                        this.search_container.before(r);
                        i = e("#" + n).find("a").first();
                        return i.click(function(e) {
                            return s.choice_destroy_link_click(e)
                        })
                    };
                    i.prototype.choice_destroy_link_click = function(t) {
                        t.preventDefault();
                        if (!this.is_disabled) {
                            this.pending_destroy_click = true;
                            return this.choice_destroy(e(t.target))
                        } else {
                            return t.stopPropagation
                        }
                    };
                    i.prototype.choice_destroy = function(e) {
                        if (this.result_deselect(e.attr("rel"))) {
                            this.choices -= 1;
                            this.show_search_field_default();
                            if (this.is_multiple && this.choices > 0 && this.search_field.val().length < 1) {
                                this.results_hide()
                            }
                            e.parents("li").first().remove();
                            return this.search_field_scale()
                        }
                    };
                    i.prototype.results_reset = function() {
                        this.form_field.options[0].selected = true;
                        this.selected_item.find("span").text(this.default_text);
                        if (!this.is_multiple) {
                            this.selected_item.addClass("chzn-default")
                        }
                        this.show_search_field_default();
                        this.results_reset_cleanup();
                        this.form_field_jq.trigger("change");
                        if (this.active_field) {
                            return this.results_hide()
                        }
                    };
                    i.prototype.results_reset_cleanup = function() {
                        this.current_value = this.form_field_jq.val();
                        return this.selected_item.find("abbr").remove()
                    };
                    i.prototype.result_select = function(e) {
                        var t, n, r, i;
                        if (this.result_highlight) {
                            t = this.result_highlight;
                            n = t.attr("id");
                            this.result_clear_highlight();
                            if (this.is_multiple) {
                                this.result_deactivate(t)
                            } else {
                                this.search_results.find(".result-selected").removeClass("result-selected");
                                this.result_single_selected = t;
                                this.selected_item.removeClass("chzn-default")
                            }
                            t.addClass("result-selected");
                            i = n.substr(n.lastIndexOf("_") + 1);
                            r = this.results_data[i];
                            r.selected = true;
                            this.form_field.options[r.options_index].selected = true;
                            if (this.is_multiple) {
                                this.choice_build(r)
                            } else {
                                this.selected_item.find("span").first().text(r.text);
                                if (this.allow_single_deselect) {
                                    this.single_deselect_control_build()
                                }
                            }
                            if (!((e.metaKey || e.ctrlKey) && this.is_multiple)) {
                                this.results_hide()
                            }
                            this.search_field.val("");
                            if (this.is_multiple || this.form_field_jq.val() !== this.current_value) {
                                this.form_field_jq.trigger("change", {
                                    selected: this.form_field.options[r.options_index].value
                                })
                            }
                            this.current_value = this.form_field_jq.val();
                            return this.search_field_scale()
                        }
                    };
                    i.prototype.result_activate = function(e) {
                        return e.addClass("active-result")
                    };
                    i.prototype.result_deactivate = function(e) {
                        return e.removeClass("active-result")
                    };
                    i.prototype.result_deselect = function(t) {
                        var n, r;
                        r = this.results_data[t];
                        if (!this.form_field.options[r.options_index].disabled) {
                            r.selected = false;
                            this.form_field.options[r.options_index].selected = false;
                            n = e("#" + this.container_id + "_o_" + t);
                            n.removeClass("result-selected").addClass("active-result").show();
                            this.result_clear_highlight();
                            this.winnow_results();
                            this.form_field_jq.trigger("change", {
                                deselected: this.form_field.options[r.options_index].value
                            });
                            this.search_field_scale();
                            return true
                        } else {
                            return false
                        }
                    };
                    i.prototype.single_deselect_control_build = function() {
                        if (this.allow_single_deselect && this.selected_item.find("abbr").length < 1) {
                            return this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>')
                        }
                    };
                    i.prototype.winnow_results = function() {
                        var t, n, r, i, s, o, u, a, f, l, c, h, p, d, v, m, g, y;
                        this.no_results_clear();
                        f = 0;
                        l = this.search_field.val() === this.default_text ? "" : e("<div/>").text(e.trim(this.search_field.val())).html();
                        o = this.search_contains ? "" : "^";
                        s = new RegExp(o + l.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&"), "i");
                        p = new RegExp(l.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&"), "i");
                        y = this.results_data;
                        for (d = 0, m = y.length; d < m; d++) {
                            n = y[d];
                            if (!n.disabled && !n.empty) {
                                if (n.group) {
                                    e("#" + n.dom_id).css("display", "none")
                                } else if (!(this.is_multiple && n.selected)) {
                                    t = false;
                                    a = n.dom_id;
                                    u = e("#" + a);
                                    if (s.test(n.html)) {
                                        t = true;
                                        f += 1
                                    } else if (this.enable_split_word_search && (n.html.indexOf(" ") >= 0 || n.html.indexOf("[") === 0)) {
                                        i = n.html.replace(/\[|\]/g, "").split(" ");
                                        if (i.length) {
                                            for (v = 0, g = i.length; v < g; v++) {
                                                r = i[v];
                                                if (s.test(r)) {
                                                    t = true;
                                                    f += 1
                                                }
                                            }
                                        }
                                    }
                                    if (t) {
                                        if (l.length) {
                                            c = n.html.search(p);
                                            h = n.html.substr(0, c + l.length) + "</em>" + n.html.substr(c + l.length);
                                            h = h.substr(0, c) + "<em>" + h.substr(c)
                                        } else {
                                            h = n.html
                                        }
                                        u.html(h);
                                        this.result_activate(u);
                                        if (n.group_array_index != null) {
                                            e("#" + this.results_data[n.group_array_index].dom_id).css("display", "list-item")
                                        }
                                    } else {
                                        if (this.result_highlight && a === this.result_highlight.attr("id")) {
                                            this.result_clear_highlight()
                                        }
                                        this.result_deactivate(u)
                                    }
                                }
                            }
                        }
                        if (f < 1 && l.length) {
                            return this.no_results(l)
                        } else {
                            return this.winnow_results_set_highlight()
                        }
                    };
                    i.prototype.winnow_results_clear = function() {
                        var t, n, r, i, s;
                        this.search_field.val("");
                        n = this.search_results.find("li");
                        s = [];
                        for (r = 0, i = n.length; r < i; r++) {
                            t = n[r];
                            t = e(t);
                            if (t.hasClass("group-result")) {
                                s.push(t.css("display", "auto"))
                            } else if (!this.is_multiple || !t.hasClass("result-selected")) {
                                s.push(this.result_activate(t))
                            } else {
                                s.push(void 0)
                            }
                        }
                        return s
                    };
                    i.prototype.winnow_results_set_highlight = function() {
                        var e, t;
                        if (!this.result_highlight) {
                            t = !this.is_multiple ? this.search_results.find(".result-selected.active-result") : [];
                            e = t.length ? t.first() : this.search_results.find(".active-result").first();
                            if (e != null) {
                                return this.result_do_highlight(e)
                            }
                        }
                    };
                    i.prototype.no_results = function(t) {
                        var n;
                        n = e('<li class="no-results">' + this.results_none_found + ' "<span></span>"</li>');
                        n.find("span").first().html(t);
                        return this.search_results.append(n)
                    };
                    i.prototype.no_results_clear = function() {
                        return this.search_results.find(".no-results").remove()
                    };
                    i.prototype.keydown_arrow = function() {
                        var t, n;
                        if (!this.result_highlight) {
                            t = this.search_results.find("li.active-result").first();
                            if (t) {
                                this.result_do_highlight(e(t))
                            }
                        } else if (this.results_showing) {
                            n = this.result_highlight.nextAll("li.active-result").first();
                            if (n) {
                                this.result_do_highlight(n)
                            }
                        }
                        if (!this.results_showing) {
                            return this.results_show()
                        }
                    };
                    i.prototype.keyup_arrow = function() {
                        var e;
                        if (!this.results_showing && !this.is_multiple) {
                            return this.results_show()
                        } else if (this.result_highlight) {
                            e = this.result_highlight.prevAll("li.active-result");
                            if (e.length) {
                                return this.result_do_highlight(e.first())
                            } else {
                                if (this.choices > 0) {
                                    this.results_hide()
                                }
                                return this.result_clear_highlight()
                            }
                        }
                    };
                    i.prototype.keydown_backstroke = function() {
                        var e;
                        if (this.pending_backstroke) {
                            this.choice_destroy(this.pending_backstroke.find("a").first());
                            return this.clear_backstroke()
                        } else {
                            e = this.search_container.siblings("li.search-choice").last();
                            if (e.length && !e.hasClass("search-choice-disabled")) {
                                this.pending_backstroke = e;
                                if (this.single_backstroke_delete) {
                                    return this.keydown_backstroke()
                                } else {
                                    return this.pending_backstroke.addClass("search-choice-focus")
                                }
                            }
                        }
                    };
                    i.prototype.clear_backstroke = function() {
                        if (this.pending_backstroke) {
                            this.pending_backstroke.removeClass("search-choice-focus")
                        }
                        return this.pending_backstroke = null
                    };
                    i.prototype.keydown_checker = function(e) {
                        var t, n;
                        t = (n = e.which) != null ? n : e.keyCode;
                        this.search_field_scale();
                        if (t !== 8 && this.pending_backstroke) {
                            this.clear_backstroke()
                        }
                        switch (t) {
                            case 8:
                                this.backstroke_length = this.search_field.val().length;
                                break;
                            case 9:
                                if (this.results_showing && !this.is_multiple) {
                                    this.result_select(e)
                                }
                                this.mouse_on_container = false;
                                break;
                            case 13:
                                e.preventDefault();
                                break;
                            case 38:
                                e.preventDefault();
                                this.keyup_arrow();
                                break;
                            case 40:
                                this.keydown_arrow();
                                break
                        }
                    };
                    i.prototype.search_field_scale = function() {
                        var t, n, r, i, s, o, u, a, f;
                        if (this.is_multiple) {
                            r = 0;
                            u = 0;
                            s = "position:absolute; left: -1000px; top: -1000px; display:none;";
                            o = ["font-size", "font-style", "font-weight", "font-family", "line-height", "text-transform", "letter-spacing"];
                            for (a = 0, f = o.length; a < f; a++) {
                                i = o[a];
                                s += i + ":" + this.search_field.css(i) + ";"
                            }
                            n = e("<div />", {
                                style: s
                            });
                            n.text(this.search_field.val());
                            e("body").append(n);
                            u = n.width() + 25;
                            n.remove();
                            if (u > this.f_width - 10) {
                                u = this.f_width - 10
                            }
                            this.search_field.css({
                                width: u + "px"
                            });
                            t = this.container.height();
                            return this.dropdown.css({
                                top: t + "px"
                            })
                        }
                    };
                    i.prototype.generate_random_id = function() {
                        var t;
                        t = "sel" + this.generate_random_char() + this.generate_random_char() + this.generate_random_char();
                        while (e("#" + t).length > 0) {
                            t += this.generate_random_char()
                        }
                        return t
                    };
                    return i
                }(AbstractChosen);
                r.Chosen = t;
                n = function(e) {
                    var t;
                    return t = e.outerWidth() - e.width()
                };
                r.get_side_border_padding = n
            }).call(this);
            (function() {
                function e(e) {
                    this.path = e;
                    var t = this.path.split("."),
                        n = t.slice(0, t.length - 1).join("."),
                        r = t[t.length - 1];
                    this.at_2x_path = n + "@2x." + r
                }

                function t(t) {
                    this.el = t, this.path = new e(this.el.getAttribute("src"));
                    var n = this;
                    this.path.check_2x_variant(function(e) {
                        e && n.swap()
                    })
                }
                var n = typeof exports == "undefined" ? window : exports;
                n.RetinaImagePath = e, e.confirmed_paths = [], e.prototype.is_external = function() {
                    return !!this.path.match(/^https?\:/i) && !this.path.match("//" + document.domain)
                }, e.prototype.check_2x_variant = function(t) {
                    var n, r = this;
                    if (this.is_external()) return t(!1);
                    if (this.at_2x_path in e.confirmed_paths) return t(!0);
                    n = new XMLHttpRequest, n.open("HEAD", this.at_2x_path), n.onreadystatechange = function() {
                        return n.readyState != 4 ? t(!1) : n.status >= 200 && n.status <= 399 ? (e.confirmed_paths.push(r.at_2x_path), t(!0)) : t(!1)
                    }, n.send()
                }, n.RetinaImage = t, t.prototype.swap = function(e) {
                    function t() {
                        n.el.complete ? (n.el.setAttribute("width", n.el.offsetWidth), n.el.setAttribute("height", n.el.offsetHeight), n.el.setAttribute("src", e)) : setTimeout(t, 5)
                    }
                    typeof e == "undefined" && (e = this.path.at_2x_path);
                    var n = this;
                    t()
                }, n.devicePixelRatio > 1 && (window.onload = function() {
                    var e = document.getElementsByTagName("img"),
                        n = [],
                        r, i;
                    for (r = 0; r < e.length; r++) i = e[r], n.push(new t(i))
                })
            })();
            (function(e) {
                if (typeof define === "function" && define.amd) {
                    define(["jquery"], e)
                } else {
                    e(jQuery)
                }
            })(function(e) {
                function t(e) {
                    return e
                }

                function n(e) {
                    return decodeURIComponent(e.replace(i, " "))
                }

                function r(e) {
                    if (e.indexOf('"') === 0) {
                        e = e.slice(1, -1).replace(/\\"/g, '"').replace(/\\\\/g, "\\")
                    }
                    try {
                        return s.json ? JSON.parse(e) : e
                    } catch (t) {}
                }
                var i = /\+/g;
                var s = e.cookie = function(i, o, u) {
                    if (o !== undefined) {
                        u = e.extend({}, s.defaults, u);
                        if (typeof u.expires === "number") {
                            var a = u.expires,
                                f = u.expires = new Date;
                            f.setDate(f.getDate() + a)
                        }
                        o = s.json ? JSON.stringify(o) : String(o);
                        return document.cookie = [s.raw ? i : encodeURIComponent(i), "=", s.raw ? o : encodeURIComponent(o), u.expires ? "; expires=" + u.expires.toUTCString() : "", u.path ? "; path=" + u.path : "", u.domain ? "; domain=" + u.domain : "", u.secure ? "; secure" : ""].join("")
                    }
                    var l = s.raw ? t : n;
                    var c = document.cookie.split("; ");
                    var h = i ? undefined : {};
                    for (var p = 0, d = c.length; p < d; p++) {
                        var v = c[p].split("=");
                        var m = l(v.shift());
                        var g = l(v.join("="));
                        if (i && i === m) {
                            h = r(g);
                            break
                        }
                        if (!i) {
                            h[m] = r(g)
                        }
                    }
                    return h
                };
                s.defaults = {};
                e.removeCookie = function(t, n) {
                    if (e.cookie(t) !== undefined) {
                        e.cookie(t, "", e.extend(n, {
                            expires: -1
                        }));
                        return true
                    }
                    return false
                }
            });
            (function(e) {
                var t = {
                    colors: 1,
                    values: 1,
                    backgroundColor: 1,
                    scaleColors: 1,
                    normalizeFunction: 1,
                    enableZoom: 1,
                    showTooltip: 1,
                    borderColor: 1,
                    borderWidth: 1,
                    borderOpacity: 1,
                    selectedRegions: 1,
                    multiSelectRegion: 1
                };
                var n = {
                    onLabelShow: "labelShow",
                    onRegionOver: "regionMouseOver",
                    onRegionOut: "regionMouseOut",
                    onRegionClick: "regionClick",
                    onRegionSelect: "regionSelect",
                    onRegionDeselect: "regionDeselect"
                };
                e.fn.vectorMap = function(r) {
                    var s = {
                            map: "world_en",
                            backgroundColor: "#fff",
                            color: "#bbb",
                            hoverColor: "#eee",
                            selectedColor: "#db4a39",
                            scaleColors: ["#dbb4af", "#db4a39"],
                            normalizeFunction: "polynomial",
                            enableZoom: true,
                            showTooltip: true,
                            borderColor: "#f9f9f9",
                            borderWidth: 1,
                            borderOpacity: 1,
                            selectedRegions: null,
                            multiSelectRegion: false
                        },
                        o = this.data("mapObject");
                    if (r === "addMap") {
                        i.maps[arguments[1]] = arguments[2]
                    } else if (r === "set" && t[arguments[1]]) {
                        o["set" + arguments[1].charAt(0).toUpperCase() + arguments[1].substr(1)].apply(o, Array.prototype.slice.call(arguments, 2))
                    } else if (typeof r === "string" && typeof o[r] === "function") {
                        return o[r].apply(o, Array.prototype.slice.call(arguments, 1))
                    } else {
                        e.extend(s, r);
                        s.container = this;
                        this.css({
                            position: "relative",
                            overflow: "hidden"
                        });
                        o = new i(s);
                        this.data("mapObject", o);
                        for (var u in n) {
                            if (s[u]) {
                                this.bind(n[u] + ".jqvmap", s[u])
                            }
                        }
                    }
                };
                var r = function(e, t, n) {
                    this.mode = window.SVGAngle ? "svg" : "vml";
                    this.params = n;
                    if (this.mode == "svg") {
                        this.createSvgNode = function(e) {
                            return document.createElementNS(this.svgns, e)
                        }
                    } else {
                        try {
                            if (!document.namespaces.rvml) {
                                document.namespaces.add("rvml", "urn:schemas-microsoft-com:vml")
                            }
                            this.createVmlNode = function(e) {
                                return document.createElement("<rvml:" + e + ' class="rvml">')
                            }
                        } catch (r) {
                            this.createVmlNode = function(e) {
                                return document.createElement("<" + e + ' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')
                            }
                        }
                        document.createStyleSheet().addRule(".rvml", "behavior:url(#default#VML)")
                    }
                    if (this.mode == "svg") {
                        this.canvas = this.createSvgNode("svg")
                    } else {
                        this.canvas = this.createVmlNode("group");
                        this.canvas.style.position = "absolute"
                    }
                    this.setSize(e, t)
                };
                r.prototype = {
                    svgns: "http://www.w3.org/2000/svg",
                    mode: "svg",
                    width: 0,
                    height: 0,
                    canvas: null,
                    setSize: function(e, t) {
                        if (this.mode == "svg") {
                            this.canvas.setAttribute("width", e);
                            this.canvas.setAttribute("height", t)
                        } else {
                            this.canvas.style.width = e + "px";
                            this.canvas.style.height = t + "px";
                            this.canvas.coordsize = e + " " + t;
                            this.canvas.coordorigin = "0 0";
                            if (this.rootGroup) {
                                var n = this.rootGroup.getElementsByTagName("shape");
                                for (var r = 0, i = n.length; r < i; r++) {
                                    n[r].coordsize = e + " " + t;
                                    n[r].style.width = e + "px";
                                    n[r].style.height = t + "px"
                                }
                                this.rootGroup.coordsize = e + " " + t;
                                this.rootGroup.style.width = e + "px";
                                this.rootGroup.style.height = t + "px"
                            }
                        }
                        this.width = e;
                        this.height = t
                    },
                    createPath: function(e) {
                        var t;
                        if (this.mode == "svg") {
                            t = this.createSvgNode("path");
                            t.setAttribute("d", e.path);
                            if (this.params.borderColor !== null) {
                                t.setAttribute("stroke", this.params.borderColor)
                            }
                            if (this.params.borderWidth > 0) {
                                t.setAttribute("stroke-width", this.params.borderWidth);
                                t.setAttribute("stroke-linecap", "round");
                                t.setAttribute("stroke-linejoin", "round")
                            }
                            if (this.params.borderOpacity > 0) {
                                t.setAttribute("stroke-opacity", this.params.borderOpacity)
                            }
                            t.setFill = function(e) {
                                this.setAttribute("fill", e);
                                if (this.getAttribute("original") === null) {
                                    this.setAttribute("original", e)
                                }
                            };
                            t.getFill = function(e) {
                                return this.getAttribute("fill")
                            };
                            t.getOriginalFill = function() {
                                return this.getAttribute("original")
                            };
                            t.setOpacity = function(e) {
                                this.setAttribute("fill-opacity", e)
                            }
                        } else {
                            t = this.createVmlNode("shape");
                            t.coordorigin = "0 0";
                            t.coordsize = this.width + " " + this.height;
                            t.style.width = this.width + "px";
                            t.style.height = this.height + "px";
                            t.fillcolor = i.defaultFillColor;
                            t.stroked = false;
                            t.path = r.pathSvgToVml(e.path);
                            var n = this.createVmlNode("skew");
                            n.on = true;
                            n.matrix = "0.01,0,0,0.01,0,0";
                            n.offset = "0,0";
                            t.appendChild(n);
                            var s = this.createVmlNode("fill");
                            t.appendChild(s);
                            t.setFill = function(e) {
                                this.getElementsByTagName("fill")[0].color = e;
                                if (this.getAttribute("original") === null) {
                                    this.setAttribute("original", e)
                                }
                            };
                            t.getFill = function(e) {
                                return this.getElementsByTagName("fill")[0].color
                            };
                            t.getOriginalFill = function() {
                                return this.getAttribute("original")
                            };
                            t.setOpacity = function(e) {
                                this.getElementsByTagName("fill")[0].opacity = parseInt(e * 100, 10) + "%"
                            }
                        }
                        return t
                    },
                    createGroup: function(e) {
                        var t;
                        if (this.mode == "svg") {
                            t = this.createSvgNode("g")
                        } else {
                            t = this.createVmlNode("group");
                            t.style.width = this.width + "px";
                            t.style.height = this.height + "px";
                            t.style.left = "0px";
                            t.style.top = "0px";
                            t.coordorigin = "0 0";
                            t.coordsize = this.width + " " + this.height
                        }
                        if (e) {
                            this.rootGroup = t
                        }
                        return t
                    },
                    applyTransformParams: function(e, t, n) {
                        if (this.mode == "svg") {
                            this.rootGroup.setAttribute("transform", "scale(" + e + ") translate(" + t + ", " + n + ")")
                        } else {
                            this.rootGroup.coordorigin = this.width - t + "," + (this.height - n);
                            this.rootGroup.coordsize = this.width / e + "," + this.height / e
                        }
                    }
                };
                r.pathSvgToVml = function(e) {
                    var t = "";
                    var n = 0,
                        r = 0,
                        i, s;
                    return e.replace(/([MmLlHhVvCcSs])((?:-?(?:\d+)?(?:\.\d+)?,?\s?)+)/g, function(e, t, o, u) {
                        o = o.replace(/(\d)-/g, "$1,-").replace(/\s+/g, ",").split(",");
                        if (!o[0]) {
                            o.shift()
                        }
                        for (var a = 0, f = o.length; a < f; a++) {
                            o[a] = Math.round(100 * o[a])
                        }
                        switch (t) {
                            case "m":
                                n += o[0];
                                r += o[1];
                                return "t" + o.join(",");
                                break;
                            case "M":
                                n = o[0];
                                r = o[1];
                                return "m" + o.join(",");
                                break;
                            case "l":
                                n += o[0];
                                r += o[1];
                                return "r" + o.join(",");
                                break;
                            case "L":
                                n = o[0];
                                r = o[1];
                                return "l" + o.join(",");
                                break;
                            case "h":
                                n += o[0];
                                return "r" + o[0] + ",0";
                                break;
                            case "H":
                                n = o[0];
                                return "l" + n + "," + r;
                                break;
                            case "v":
                                r += o[0];
                                return "r0," + o[0];
                                break;
                            case "V":
                                r = o[0];
                                return "l" + n + "," + r;
                                break;
                            case "c":
                                i = n + o[o.length - 4];
                                s = r + o[o.length - 3];
                                n += o[o.length - 2];
                                r += o[o.length - 1];
                                return "v" + o.join(",");
                                break;
                            case "C":
                                i = o[o.length - 4];
                                s = o[o.length - 3];
                                n = o[o.length - 2];
                                r = o[o.length - 1];
                                return "c" + o.join(",");
                                break;
                            case "s":
                                o.unshift(r - s);
                                o.unshift(n - i);
                                i = n + o[o.length - 4];
                                s = r + o[o.length - 3];
                                n += o[o.length - 2];
                                r += o[o.length - 1];
                                return "v" + o.join(",");
                                break;
                            case "S":
                                o.unshift(r + r - s);
                                o.unshift(n + n - i);
                                i = o[o.length - 4];
                                s = o[o.length - 3];
                                n = o[o.length - 2];
                                r = o[o.length - 1];
                                return "c" + o.join(",");
                                break;
                            default:
                                return false;
                                break
                        }
                        return ""
                    }).replace(/z/g, "")
                };
                var i = function(t) {
                    t = t || {};
                    var n = this;
                    var o = i.maps[t.map];
                    this.selectedRegions = [];
                    this.multiSelectRegion = t.multiSelectRegion;
                    this.container = t.container;
                    this.defaultWidth = o.width;
                    this.defaultHeight = o.height;
                    this.color = t.color;
                    this.selectedColor = t.selectedColor;
                    this.hoverColor = t.hoverColor;
                    this.hoverOpacity = t.hoverOpacity;
                    this.setBackgroundColor(t.backgroundColor);
                    this.width = t.container.width();
                    this.height = t.container.height();
                    this.resize();
                    jQuery(window).resize(function() {
                        n.width = t.container.width();
                        n.height = t.container.height();
                        n.resize();
                        n.canvas.setSize(n.width, n.height);
                        n.applyTransform()
                    });
                    this.canvas = new r(this.width, this.height, t);
                    t.container.append(this.canvas.canvas);
                    this.makeDraggable();
                    this.rootGroup = this.canvas.createGroup(true);
                    this.index = i.mapIndex;
                    this.label = jQuery("<div/>").addClass("jqvmap-label").appendTo(jQuery("body")).hide();
                    if (t.enableZoom) {
                        jQuery("<div/>").addClass("jqvmap-zoomin").text("+").appendTo(t.container);
                        jQuery("<div/>").addClass("jqvmap-zoomout").html("").appendTo(t.container)
                    }
                    n.countries = [];
                    for (var u in o.pathes) {
                        var a = this.canvas.createPath({
                            path: o.pathes[u].path
                        });
                        a.setFill(this.color);
                        a.id = n.getCountryId(u);
                        n.countries[u] = a;
                        if (this.canvas.mode == "svg") {
                            a.setAttribute("class", "jvectormap-region")
                        } else {
                            jQuery(a).addClass("jvectormap-region")
                        }
                        jQuery(this.rootGroup).append(a)
                    }
                    jQuery(t.container).delegate(this.canvas.mode == "svg" ? "path" : "shape", "mouseover mouseout", function(r) {
                        var i = r.target,
                            s = r.target.id.split("_").pop(),
                            u = e.Event("labelShow.jqvmap"),
                            a = e.Event("regionMouseOver.jqvmap");
                        if (r.type == "mouseover") {
                            jQuery(t.container).trigger(a, [s, o.pathes[s].name]);
                            if (!a.isDefaultPrevented()) {
                                n.highlight(s, i)
                            }
                            if (t.showTooltip) {
                                n.label.text(o.pathes[s].name);
                                jQuery(t.container).trigger(u, [n.label, s]);
                                if (!u.isDefaultPrevented()) {
                                    n.label.show();
                                    n.labelWidth = n.label.width();
                                    n.labelHeight = n.label.height()
                                }
                            }
                        } else {
                            n.unhighlight(s, i);
                            n.label.hide();
                            jQuery(t.container).trigger("regionMouseOut.jqvmap", [s, o.pathes[s].name])
                        }
                    });
                    jQuery(t.container).delegate(this.canvas.mode == "svg" ? "path" : "shape", "click", function(e) {
                        if (!t.multiSelectRegion) {
                            for (var r in o.pathes) {
                                n.countries[r].currentFillColor = n.countries[r].getOriginalFill();
                                n.countries[r].setFill(n.countries[r].getOriginalFill())
                            }
                        }
                        var i = e.target;
                        var s = e.target.id.split("_").pop();
                        jQuery(t.container).trigger("regionClick.jqvmap", [s, o.pathes[s].name]);
                        if (n.selectedRegions.indexOf(s) !== -1) {
                            n.deselect(s, i)
                        } else {
                            n.select(s, i)
                        }
                    });
                    if (t.showTooltip) {
                        t.container.mousemove(function(e) {
                            if (n.label.is(":visible")) {
                                var t = e.pageX - 15 - n.labelWidth;
                                var r = e.pageY - 15 - n.labelHeight;
                                if (t < 0) t = e.pageX + 15;
                                if (r < 0) r = e.pageY + 15;
                                n.label.css({
                                    left: t,
                                    top: r
                                })
                            }
                        })
                    }
                    this.setColors(t.colors);
                    this.canvas.canvas.appendChild(this.rootGroup);
                    this.applyTransform();
                    this.colorScale = new s(t.scaleColors, t.normalizeFunction, t.valueMin, t.valueMax);
                    if (t.values) {
                        this.values = t.values;
                        this.setValues(t.values)
                    }
                    if (t.selectedRegions) {
                        if (t.selectedRegions instanceof Array) {
                            for (var f in t.selectedRegions) {
                                this.select(t.selectedRegions[f].toLowerCase())
                            }
                        } else {
                            this.select(t.selectedRegions.toLowerCase())
                        }
                    }
                    this.bindZoomButtons();
                    i.mapIndex++
                };
                i.prototype = {
                    transX: 0,
                    transY: 0,
                    scale: 1,
                    baseTransX: 0,
                    baseTransY: 0,
                    baseScale: 1,
                    width: 0,
                    height: 0,
                    countries: {},
                    countriesColors: {},
                    countriesData: {},
                    zoomStep: 1.4,
                    zoomMaxStep: 4,
                    zoomCurStep: 1,
                    setColors: function(e, t) {
                        if (typeof e == "string") {
                            this.countries[e].setFill(t);
                            this.countries[e].setAttribute("original", t)
                        } else {
                            var n = e;
                            for (var r in n) {
                                if (this.countries[r]) {
                                    this.countries[r].setFill(n[r]);
                                    this.countries[r].setAttribute("original", n[r])
                                }
                            }
                        }
                    },
                    setValues: function(e) {
                        var t = 0,
                            n = Number.MAX_VALUE,
                            r;
                        for (var i in e) {
                            r = parseFloat(e[i]);
                            if (r > t) {
                                t = e[i]
                            }
                            if (r && r < n) {
                                n = r
                            }
                        }
                        this.colorScale.setMin(n);
                        this.colorScale.setMax(t);
                        var s = {};
                        for (i in e) {
                            r = parseFloat(e[i]);
                            if (r) {
                                s[i] = this.colorScale.getColor(r)
                            } else {
                                s[i] = this.color
                            }
                        }
                        this.setColors(s);
                        this.values = e
                    },
                    setBackgroundColor: function(e) {
                        this.container.css("background-color", e)
                    },
                    setScaleColors: function(e) {
                        this.colorScale.setColors(e);
                        if (this.values) {
                            this.setValues(this.values)
                        }
                    },
                    setNormalizeFunction: function(e) {
                        this.colorScale.setNormalizeFunction(e);
                        if (this.values) {
                            this.setValues(this.values)
                        }
                    },
                    highlight: function(t, n) {
                        n = n || e("#" + this.getCountryId(t))[0];
                        if (this.hoverOpacity) {
                            n.setOpacity(this.hoverOpacity)
                        } else if (this.hoverColor) {
                            n.currentFillColor = n.getFill() + "";
                            n.setFill(this.hoverColor)
                        }
                    },
                    unhighlight: function(t, n) {
                        n = n || e("#" + this.getCountryId(t))[0];
                        n.setOpacity(1);
                        if (n.currentFillColor) {
                            n.setFill(n.currentFillColor)
                        }
                    },
                    select: function(t, n) {
                        n = n || e("#" + this.getCountryId(t))[0];
                        if (this.selectedRegions.indexOf(t) < 0) {
                            if (this.multiSelectRegion) {
                                this.selectedRegions.push(t)
                            } else {
                                this.selectedRegions = [t]
                            }
                            e(this.container).trigger("regionSelect.jqvmap", [t]);
                            if (this.selectedColor) {
                                n.currentFillColor = this.selectedColor;
                                n.setFill(this.selectedColor)
                            }
                        }
                    },
                    deselect: function(t, n) {
                        n = n || e("#" + this.getCountryId(t))[0];
                        if (this.selectedRegions.indexOf(t) >= 0) {
                            this.selectedRegions.splice(this.selectedRegions.indexOf(t), 1);
                            e(this.container).trigger("regionDeselect.jqvmap", [t]);
                            n.currentFillColor = n.getOriginalFill();
                            n.setFill(n.getOriginalFill())
                        }
                    },
                    isSelected: function(e) {
                        return this.selectedRegions.indexOf(e) >= 0
                    },
                    resize: function() {
                        var e = this.baseScale;
                        if (this.width / this.height > this.defaultWidth / this.defaultHeight) {
                            this.baseScale = this.height / this.defaultHeight;
                            this.baseTransX = Math.abs(this.width - this.defaultWidth * this.baseScale) / (2 * this.baseScale)
                        } else {
                            this.baseScale = this.width / this.defaultWidth;
                            this.baseTransY = Math.abs(this.height - this.defaultHeight * this.baseScale) / (2 * this.baseScale)
                        }
                        this.scale *= this.baseScale / e;
                        this.transX *= this.baseScale / e;
                        this.transY *= this.baseScale / e
                    },
                    reset: function() {
                        this.countryTitle.reset();
                        for (var e in this.countries) {
                            this.countries[e].setFill(i.defaultColor)
                        }
                        this.scale = this.baseScale;
                        this.transX = this.baseTransX;
                        this.transY = this.baseTransY;
                        this.applyTransform()
                    },
                    applyTransform: function() {
                        var e, t, n, r;
                        if (this.defaultWidth * this.scale <= this.width) {
                            e = (this.width - this.defaultWidth * this.scale) / (2 * this.scale);
                            n = (this.width - this.defaultWidth * this.scale) / (2 * this.scale)
                        } else {
                            e = 0;
                            n = (this.width - this.defaultWidth * this.scale) / this.scale
                        }
                        if (this.defaultHeight * this.scale <= this.height) {
                            t = (this.height - this.defaultHeight * this.scale) / (2 * this.scale);
                            r = (this.height - this.defaultHeight * this.scale) / (2 * this.scale)
                        } else {
                            t = 0;
                            r = (this.height - this.defaultHeight * this.scale) / this.scale
                        }
                        if (this.transY > t) {
                            this.transY = t
                        } else if (this.transY < r) {
                            this.transY = r
                        }
                        if (this.transX > e) {
                            this.transX = e
                        } else if (this.transX < n) {
                            this.transX = n
                        }
                        this.canvas.applyTransformParams(this.scale, this.transX, this.transY)
                    },
                    makeDraggable: function() {
                        var e = false;
                        var t, n;
                        var r = this;
                        r.isMoving = false;
                        r.isMovingTimeout = false;
                        this.container.mousemove(function(i) {
                            if (e) {
                                var s = r.transX;
                                var o = r.transY;
                                r.transX -= (t - i.pageX) / r.scale;
                                r.transY -= (n - i.pageY) / r.scale;
                                r.applyTransform();
                                t = i.pageX;
                                n = i.pageY;
                                r.isMoving = true;
                                if (r.isMovingTimeout) {
                                    clearTimeout(r.isMovingTimeout)
                                }
                            }
                            return false
                        }).mousedown(function(r) {
                            e = true;
                            t = r.pageX;
                            n = r.pageY;
                            return false
                        }).mouseup(function() {
                            e = false;
                            r.isMovingTimeout = setTimeout(function() {
                                r.isMoving = false
                            }, 100);
                            return false
                        })
                    },
                    bindZoomButtons: function() {
                        var e = this;
                        var t = (jQuery("#zoom").innerHeight() - 6 * 2 - 15 * 2 - 3 * 2 - 7 - 6) / (this.zoomMaxStep - this.zoomCurStep);
                        this.container.find(".jqvmap-zoomin").click(function() {
                            if (e.zoomCurStep < e.zoomMaxStep) {
                                var n = e.transX;
                                var r = e.transY;
                                var i = e.scale;
                                e.transX -= (e.width / e.scale - e.width / (e.scale * e.zoomStep)) / 2;
                                e.transY -= (e.height / e.scale - e.height / (e.scale * e.zoomStep)) / 2;
                                e.setScale(e.scale * e.zoomStep);
                                e.zoomCurStep++;
                                jQuery("#zoomSlider").css("top", parseInt(jQuery("#zoomSlider").css("top"), 10) - t)
                            }
                        });
                        this.container.find(".jqvmap-zoomout").click(function() {
                            if (e.zoomCurStep > 1) {
                                var n = e.transX;
                                var r = e.transY;
                                var i = e.scale;
                                e.transX += (e.width / (e.scale / e.zoomStep) - e.width / e.scale) / 2;
                                e.transY += (e.height / (e.scale / e.zoomStep) - e.height / e.scale) / 2;
                                e.setScale(e.scale / e.zoomStep);
                                e.zoomCurStep--;
                                jQuery("#zoomSlider").css("top", parseInt(jQuery("#zoomSlider").css("top"), 10) + t)
                            }
                        })
                    },
                    setScale: function(e) {
                        this.scale = e;
                        this.applyTransform()
                    },
                    getCountryId: function(e) {
                        return "jqvmap" + this.index + "_" + e
                    }
                };
                i.xlink = "http://www.w3.org/1999/xlink";
                i.mapIndex = 1;
                i.maps = {};
                var s = function(e, t, n, r) {
                    if (e) {
                        this.setColors(e)
                    }
                    if (t) {
                        this.setNormalizeFunction(t)
                    }
                    if (n) {
                        this.setMin(n)
                    }
                    if (n) {
                        this.setMax(r)
                    }
                };
                s.prototype = {
                    colors: [],
                    setMin: function(e) {
                        this.clearMinValue = e;
                        if (typeof this.normalize === "function") {
                            this.minValue = this.normalize(e)
                        } else {
                            this.minValue = e
                        }
                    },
                    setMax: function(e) {
                        this.clearMaxValue = e;
                        if (typeof this.normalize === "function") {
                            this.maxValue = this.normalize(e)
                        } else {
                            this.maxValue = e
                        }
                    },
                    setColors: function(e) {
                        for (var t = 0; t < e.length; t++) {
                            e[t] = s.rgbToArray(e[t])
                        }
                        this.colors = e
                    },
                    setNormalizeFunction: function(e) {
                        if (e === "polynomial") {
                            this.normalize = function(e) {
                                return Math.pow(e, .2)
                            }
                        } else if (e === "linear") {
                            delete this.normalize
                        } else {
                            this.normalize = e
                        }
                        this.setMin(this.clearMinValue);
                        this.setMax(this.clearMaxValue)
                    },
                    getColor: function(e) {
                        if (typeof this.normalize === "function") {
                            e = this.normalize(e)
                        }
                        var t = [];
                        var n = 0;
                        var r;
                        for (var i = 0; i < this.colors.length - 1; i++) {
                            r = this.vectorLength(this.vectorSubtract(this.colors[i + 1], this.colors[i]));
                            t.push(r);
                            n += r
                        }
                        var s = (this.maxValue - this.minValue) / n;
                        for (i = 0; i < t.length; i++) {
                            t[i] *= s
                        }
                        i = 0;
                        e -= this.minValue;
                        while (e - t[i] >= 0) {
                            e -= t[i];
                            i++
                        }
                        var o;
                        if (i == this.colors.length - 1) {
                            o = this.vectorToNum(this.colors[i]).toString(16)
                        } else {
                            o = this.vectorToNum(this.vectorAdd(this.colors[i], this.vectorMult(this.vectorSubtract(this.colors[i + 1], this.colors[i]), e / t[i]))).toString(16)
                        }
                        while (o.length < 6) {
                            o = "0" + o
                        }
                        return "#" + o
                    },
                    vectorToNum: function(e) {
                        var t = 0;
                        for (var n = 0; n < e.length; n++) {
                            t += Math.round(e[n]) * Math.pow(256, e.length - n - 1)
                        }
                        return t
                    },
                    vectorSubtract: function(e, t) {
                        var n = [];
                        for (var r = 0; r < e.length; r++) {
                            n[r] = e[r] - t[r]
                        }
                        return n
                    },
                    vectorAdd: function(e, t) {
                        var n = [];
                        for (var r = 0; r < e.length; r++) {
                            n[r] = e[r] + t[r]
                        }
                        return n
                    },
                    vectorMult: function(e, t) {
                        var n = [];
                        for (var r = 0; r < e.length; r++) {
                            n[r] = e[r] * t
                        }
                        return n
                    },
                    vectorLength: function(e) {
                        var t = 0;
                        for (var n = 0; n < e.length; n++) {
                            t += e[n] * e[n]
                        }
                        return Math.sqrt(t)
                    }
                };
                s.arrayToRgb = function(e) {
                    var t = "#";
                    var n;
                    for (var r = 0; r < e.length; r++) {
                        n = e[r].toString(16);
                        t += n.length == 1 ? "0" + n : n
                    }
                    return t
                };
                s.rgbToArray = function(e) {
                    e = e.substr(1);
                    return [parseInt(e.substr(0, 2), 16), parseInt(e.substr(2, 2), 16), parseInt(e.substr(4, 2), 16)]
                }
            })(jQuery);
            if (window.google == undefined && window.google.maps == undefined) {
                throw "Google Maps API is required. Please register the following JavaScript library http://maps.google.com/maps/api/js?sensor=true."
            }
            var extend_object = function(e, t) {
                var n;
                if (e === t) {
                    return e
                }
                for (n in t) {
                    e[n] = t[n]
                }
                return e
            };
            var replace_object = function(e, t) {
                var n;
                if (e === t) {
                    return e
                }
                for (n in t) {
                    if (e[n] != undefined) {
                        e[n] = t[n]
                    }
                }
                return e
            };
            var array_map = function(e, t) {
                var n = Array.prototype.slice.call(arguments, 2),
                    r = [],
                    i = e.length,
                    s;
                if (Array.prototype.map && e.map === Array.prototype.map) {
                    r = Array.prototype.map.call(e, function(e) {
                        callback_params = n;
                        callback_params.splice(0, 0, e);
                        return t.apply(this, callback_params)
                    })
                } else {
                    for (s = 0; s < i; s++) {
                        callback_params = n;
                        callback_params = callback_params.splice(0, 0, e[s]);
                        r.push(t.apply(this, callback_params))
                    }
                }
                return r
            };
            var array_flat = function(e) {
                var t = [],
                    n;
                for (n = 0; n < e.length; n++) {
                    t = t.concat(e[n])
                }
                return t
            };
            var coordsToLatLngs = function(e, t) {
                var n = e[0],
                    r = e[1];
                if (t) {
                    n = e[1];
                    r = e[0]
                }
                return new google.maps.LatLng(n, r)
            };
            var arrayToLatLng = function(e, t) {
                var n;
                for (n = 0; n < e.length; n++) {
                    if (e[n].length > 0 && typeof e[n][0] != "number") {
                        e[n] = arrayToLatLng(e[n], t)
                    } else {
                        e[n] = coordsToLatLngs(e[n], t)
                    }
                }
                return e
            };
            var getElementById = function(e, t) {
                var n, e = e.replace("#", "");
                if ("jQuery" in this && t) {
                    n = $("#" + e, t)[0]
                } else {
                    n = document.getElementById(e)
                }
                return n
            };
            var findAbsolutePosition = function(e) {
                var t = 0,
                    n = 0;
                if (e.offsetParent) {
                    do {
                        t += e.offsetLeft;
                        n += e.offsetTop
                    } while (e = e.offsetParent)
                }
                return [t, n]
            };
            var GMaps = function(e) {
                "use strict";
                var t = document;
                var n = function(e) {
                    e.zoom = e.zoom || 15;
                    e.mapType = e.mapType || "roadmap";
                    var n = this,
                        r, i = ["bounds_changed", "center_changed", "click", "dblclick", "drag", "dragend", "dragstart", "idle", "maptypeid_changed", "projection_changed", "resize", "tilesloaded", "zoom_changed"],
                        s = ["mousemove", "mouseout", "mouseover"],
                        o = ["el", "lat", "lng", "mapType", "width", "height", "markerClusterer", "enableNewStyle"],
                        u = e.el || e.div,
                        a = e.markerClusterer,
                        f = google.maps.MapTypeId[e.mapType.toUpperCase()],
                        l = new google.maps.LatLng(e.lat, e.lng),
                        c = e.zoomControl || true,
                        h = e.zoomControlOpt || {
                            style: "DEFAULT",
                            position: "TOP_LEFT"
                        },
                        p = h.style || "DEFAULT",
                        d = h.position || "TOP_LEFT",
                        v = e.panControl || true,
                        m = e.mapTypeControl || true,
                        g = e.scaleControl || true,
                        y = e.streetViewControl || true,
                        b = b || true,
                        w = {},
                        E = {
                            zoom: this.zoom,
                            center: l,
                            mapTypeId: f
                        },
                        S = {
                            panControl: v,
                            zoomControl: c,
                            zoomControlOptions: {
                                style: google.maps.ZoomControlStyle[p],
                                position: google.maps.ControlPosition[d]
                            },
                            mapTypeControl: m,
                            scaleControl: g,
                            streetViewControl: y,
                            overviewMapControl: b
                        };
                    if (typeof e.el === "string" || typeof e.div === "string") {
                        this.el = getElementById(u, e.context)
                    } else {
                        this.el = u
                    }
                    if (typeof this.el === "undefined" || this.el === null) {
                        throw "No element defined."
                    }
                    window.context_menu = window.context_menu || {};
                    window.context_menu[n.el.id] = {};
                    this.controls = [];
                    this.overlays = [];
                    this.layers = [];
                    this.singleLayers = {};
                    this.markers = [];
                    this.polylines = [];
                    this.routes = [];
                    this.polygons = [];
                    this.infoWindow = null;
                    this.overlay_el = null;
                    this.zoom = e.zoom;
                    this.registered_events = {};
                    this.el.style.width = e.width || this.el.scrollWidth || this.el.offsetWidth;
                    this.el.style.height = e.height || this.el.scrollHeight || this.el.offsetHeight;
                    google.maps.visualRefresh = e.enableNewStyle;
                    for (r = 0; r < o.length; r++) {
                        delete e[o[r]]
                    }
                    if (e.disableDefaultUI != true) {
                        E = extend_object(E, S)
                    }
                    w = extend_object(E, e);
                    for (r = 0; r < i.length; r++) {
                        delete w[i[r]]
                    }
                    for (r = 0; r < s.length; r++) {
                        delete w[s[r]]
                    }
                    this.map = new google.maps.Map(this.el, w);
                    if (a) {
                        this.markerClusterer = a.apply(this, [this.map])
                    }
                    var x = function(e, t) {
                        var r = "",
                            i = window.context_menu[n.el.id][e];
                        for (var s in i) {
                            if (i.hasOwnProperty(s)) {
                                var o = i[s];
                                r += '<li><a id="' + e + "_" + s + '" href="#">' + o.title + "</a></li>"
                            }
                        }
                        if (!getElementById("gmaps_context_menu")) return;
                        var u = getElementById("gmaps_context_menu");
                        u.innerHTML = r;
                        var a = u.getElementsByTagName("a"),
                            f = a.length;
                        s;
                        for (s = 0; s < f; s++) {
                            var l = a[s];
                            var c = function(r) {
                                r.preventDefault();
                                i[this.id.replace(e + "_", "")].action.apply(n, [t]);
                                n.hideContextMenu()
                            };
                            google.maps.event.clearListeners(l, "click");
                            google.maps.event.addDomListenerOnce(l, "click", c, false)
                        }
                        var h = findAbsolutePosition.apply(this, [n.el]),
                            p = h[0] + t.pixel.x - 15,
                            d = h[1] + t.pixel.y - 15;
                        u.style.left = p + "px";
                        u.style.top = d + "px";
                        u.style.display = "block"
                    };
                    var T = function(e, t) {
                        if (e === "marker") {
                            t.pixel = {};
                            var r = new google.maps.OverlayView;
                            r.setMap(n.map);
                            r.draw = function() {
                                var n = r.getProjection(),
                                    i = t.marker.getPosition();
                                t.pixel = n.fromLatLngToContainerPixel(i);
                                x(e, t)
                            }
                        } else {
                            x(e, t)
                        }
                    };
                    this.setContextMenu = function(e) {
                        window.context_menu[n.el.id][e.control] = {};
                        var r, i = t.createElement("ul");
                        for (r in e.options) {
                            if (e.options.hasOwnProperty(r)) {
                                var s = e.options[r];
                                window.context_menu[n.el.id][e.control][s.name] = {
                                    title: s.title,
                                    action: s.action
                                }
                            }
                        }
                        i.id = "gmaps_context_menu";
                        i.style.display = "none";
                        i.style.position = "absolute";
                        i.style.minWidth = "100px";
                        i.style.background = "white";
                        i.style.listStyle = "none";
                        i.style.padding = "8px";
                        i.style.boxShadow = "2px 2px 6px #ccc";
                        t.body.appendChild(i);
                        var o = getElementById("gmaps_context_menu");
                        google.maps.event.addDomListener(o, "mouseout", function(e) {
                            if (!e.relatedTarget || !this.contains(e.relatedTarget)) {
                                window.setTimeout(function() {
                                    o.style.display = "none"
                                }, 400)
                            }
                        }, false)
                    };
                    this.hideContextMenu = function() {
                        var e = getElementById("gmaps_context_menu");
                        if (e) {
                            e.style.display = "none"
                        }
                    };
                    var N = function(t, r) {
                        google.maps.event.addListener(t, r, function(t) {
                            if (t == undefined) {
                                t = this
                            }
                            e[r].apply(this, [t]);
                            n.hideContextMenu()
                        })
                    };
                    for (var C = 0; C < i.length; C++) {
                        var k = i[C];
                        if (k in e) {
                            N(this.map, k)
                        }
                    }
                    for (var C = 0; C < s.length; C++) {
                        var k = s[C];
                        if (k in e) {
                            N(this.map, k)
                        }
                    }
                    google.maps.event.addListener(this.map, "rightclick", function(t) {
                        if (e.rightclick) {
                            e.rightclick.apply(this, [t])
                        }
                        if (window.context_menu[n.el.id]["map"] != undefined) {
                            T("map", t)
                        }
                    });
                    this.refresh = function() {
                        google.maps.event.trigger(this.map, "resize")
                    };
                    this.fitZoom = function() {
                        var e = [],
                            t = this.markers.length,
                            n;
                        for (n = 0; n < t; n++) {
                            e.push(this.markers[n].getPosition())
                        }
                        this.fitLatLngBounds(e)
                    };
                    this.fitLatLngBounds = function(e) {
                        var t = e.length;
                        var n = new google.maps.LatLngBounds;
                        for (var r = 0; r < t; r++) {
                            n.extend(e[r])
                        }
                        this.map.fitBounds(n)
                    };
                    this.setCenter = function(e, t, n) {
                        this.map.panTo(new google.maps.LatLng(e, t));
                        if (n) {
                            n()
                        }
                    };
                    this.getElement = function() {
                        return this.el
                    };
                    this.zoomIn = function(e) {
                        e = e || 1;
                        this.zoom = this.map.getZoom() + e;
                        this.map.setZoom(this.zoom)
                    };
                    this.zoomOut = function(e) {
                        e = e || 1;
                        this.zoom = this.map.getZoom() - e;
                        this.map.setZoom(this.zoom)
                    };
                    var L = [],
                        A;
                    for (A in this.map) {
                        if (typeof this.map[A] == "function" && !this[A]) {
                            L.push(A)
                        }
                    }
                    for (r = 0; r < L.length; r++) {
                        (function(e, t, n) {
                            e[n] = function() {
                                return t[n].apply(t, arguments)
                            }
                        })(this, this.map, L[r])
                    }
                };
                return n
            }(this); GMaps.prototype.createControl = function(e) {
                var t = document.createElement("div");
                t.style.cursor = "pointer";
                t.style.fontFamily = "Arial, sans-serif";
                t.style.fontSize = "13px";
                t.style.boxShadow = "rgba(0, 0, 0, 0.398438) 0px 2px 4px";
                for (var n in e.style) {
                    t.style[n] = e.style[n]
                }
                if (e.id) {
                    t.id = e.id
                }
                if (e.classes) {
                    t.className = e.classes
                }
                if (e.content) {
                    t.innerHTML = e.content
                }
                for (var r in e.events) {
                    (function(t, n) {
                        google.maps.event.addDomListener(t, n, function() {
                            e.events[n].apply(this, [this])
                        })
                    })(t, r)
                }
                t.index = 1;
                return t
            }; GMaps.prototype.addControl = function(e) {
                var t = google.maps.ControlPosition[e.position.toUpperCase()];
                delete e.position;
                var n = this.createControl(e);
                this.controls.push(n);
                this.map.controls[t].push(n);
                return n
            }; GMaps.prototype.createMarker = function(e) {
                if (e.lat == undefined && e.lng == undefined && e.position == undefined) {
                    throw "No latitude or longitude defined."
                }
                var t = this,
                    n = e.details,
                    r = e.fences,
                    i = e.outside,
                    s = {
                        position: new google.maps.LatLng(e.lat, e.lng),
                        map: null
                    };
                delete e.lat;
                delete e.lng;
                delete e.fences;
                delete e.outside;
                var o = extend_object(s, e),
                    u = new google.maps.Marker(o);
                u.fences = r;
                if (e.infoWindow) {
                    u.infoWindow = new google.maps.InfoWindow(e.infoWindow);
                    var a = ["closeclick", "content_changed", "domready", "position_changed", "zindex_changed"];
                    for (var f = 0; f < a.length; f++) {
                        (function(t, n) {
                            if (e.infoWindow[n]) {
                                google.maps.event.addListener(t, n, function(t) {
                                    e.infoWindow[n].apply(this, [t])
                                })
                            }
                        })(u.infoWindow, a[f])
                    }
                }
                var l = ["animation_changed", "clickable_changed", "cursor_changed", "draggable_changed", "flat_changed", "icon_changed", "position_changed", "shadow_changed", "shape_changed", "title_changed", "visible_changed", "zindex_changed"];
                var c = ["dblclick", "drag", "dragend", "dragstart", "mousedown", "mouseout", "mouseover", "mouseup"];
                for (var f = 0; f < l.length; f++) {
                    (function(t, n) {
                        if (e[n]) {
                            google.maps.event.addListener(t, n, function() {
                                e[n].apply(this, [this])
                            })
                        }
                    })(u, l[f])
                }
                for (var f = 0; f < c.length; f++) {
                    (function(t, n, r) {
                        if (e[r]) {
                            google.maps.event.addListener(n, r, function(n) {
                                if (!n.pixel) {
                                    n.pixel = t.getProjection().fromLatLngToPoint(n.latLng)
                                }
                                e[r].apply(this, [n])
                            })
                        }
                    })(this.map, u, c[f])
                }
                google.maps.event.addListener(u, "click", function() {
                    this.details = n;
                    if (e.click) {
                        e.click.apply(this, [this])
                    }
                    if (u.infoWindow) {
                        t.hideInfoWindows();
                        u.infoWindow.open(t.map, u)
                    }
                });
                google.maps.event.addListener(u, "rightclick", function(n) {
                    n.marker = this;
                    if (e.rightclick) {
                        e.rightclick.apply(this, [n])
                    }
                    if (window.context_menu[t.el.id]["marker"] != undefined) {
                        buildContextMenu("marker", n)
                    }
                });
                if (u.fences) {
                    google.maps.event.addListener(u, "dragend", function() {
                        t.checkMarkerGeofence(u, function(e, t) {
                            i(e, t)
                        })
                    })
                }
                return u
            }; GMaps.prototype.addMarker = function(e) {
                var t;
                if (e.hasOwnProperty("gm_accessors_")) {
                    t = e
                } else {
                    if (e.hasOwnProperty("lat") && e.hasOwnProperty("lng") || e.position) {
                        t = this.createMarker(e)
                    } else {
                        throw "No latitude or longitude defined."
                    }
                }
                t.setMap(this.map);
                if (this.markerClusterer) {
                    this.markerClusterer.addMarker(t)
                }
                this.markers.push(t);
                GMaps.fire("marker_added", t, this);
                return t
            }; GMaps.prototype.addMarkers = function(e) {
                for (var t = 0, n; n = e[t]; t++) {
                    this.addMarker(n)
                }
                return this.markers
            }; GMaps.prototype.hideInfoWindows = function() {
                for (var e = 0, t; t = this.markers[e]; e++) {
                    if (t.infoWindow) {
                        t.infoWindow.close()
                    }
                }
            }; GMaps.prototype.removeMarker = function(e) {
                for (var t = 0; t < this.markers.length; t++) {
                    if (this.markers[t] === e) {
                        this.markers[t].setMap(null);
                        this.markers.splice(t, 1);
                        GMaps.fire("marker_removed", e, this);
                        break
                    }
                }
                return e
            }; GMaps.prototype.removeMarkers = function(e) {
                var e = e || this.markers;
                for (var t = 0; t < this.markers.length; t++) {
                    if (this.markers[t] === e[t]) {
                        this.markers[t].setMap(null)
                    }
                }
                var n = [];
                for (var t = 0; t < this.markers.length; t++) {
                    if (this.markers[t].getMap() != null) {
                        n.push(this.markers[t])
                    }
                }
                this.markers = n
            }; GMaps.prototype.drawOverlay = function(e) {
                var t = new google.maps.OverlayView,
                    n = true;
                t.setMap(this.map);
                if (e.auto_show != null) {
                    n = e.auto_show
                }
                t.onAdd = function() {
                    var n = document.createElement("div");
                    n.style.borderStyle = "none";
                    n.style.borderWidth = "0px";
                    n.style.position = "absolute";
                    n.style.zIndex = 100;
                    n.innerHTML = e.content;
                    t.el = n;
                    if (!e.layer) {
                        e.layer = "overlayLayer"
                    }
                    var r = this.getPanes(),
                        i = r[e.layer],
                        s = ["contextmenu", "DOMMouseScroll", "dblclick", "mousedown"];
                    i.appendChild(n);
                    for (var o = 0; o < s.length; o++) {
                        (function(e, t) {
                            google.maps.event.addDomListener(e, t, function(e) {
                                if (navigator.userAgent.toLowerCase().indexOf("msie") != -1 && document.all) {
                                    e.cancelBubble = true;
                                    e.returnValue = false
                                } else {
                                    e.stopPropagation()
                                }
                            })
                        })(n, s[o])
                    }
                    google.maps.event.trigger(this, "ready")
                };
                t.draw = function() {
                    var r = this.getProjection(),
                        i = r.fromLatLngToDivPixel(new google.maps.LatLng(e.lat, e.lng));
                    e.horizontalOffset = e.horizontalOffset || 0;
                    e.verticalOffset = e.verticalOffset || 0;
                    var s = t.el,
                        o = s.children[0],
                        u = o.clientHeight,
                        a = o.clientWidth;
                    switch (e.verticalAlign) {
                        case "top":
                            s.style.top = i.y - u + e.verticalOffset + "px";
                            break;
                        default:
                        case "middle":
                            s.style.top = i.y - u / 2 + e.verticalOffset + "px";
                            break;
                        case "bottom":
                            s.style.top = i.y + e.verticalOffset + "px";
                            break
                    }
                    switch (e.horizontalAlign) {
                        case "left":
                            s.style.left = i.x - a + e.horizontalOffset + "px";
                            break;
                        default:
                        case "center":
                            s.style.left = i.x - a / 2 + e.horizontalOffset + "px";
                            break;
                        case "right":
                            s.style.left = i.x + e.horizontalOffset + "px";
                            break
                    }
                    s.style.display = n ? "block" : "none";
                    if (!n) {
                        e.show.apply(this, [s])
                    }
                };
                t.onRemove = function() {
                    var n = t.el;
                    if (e.remove) {
                        e.remove.apply(this, [n])
                    } else {
                        t.el.parentNode.removeChild(t.el);
                        t.el = null
                    }
                };
                this.overlays.push(t);
                return t
            }; GMaps.prototype.removeOverlay = function(e) {
                for (var t = 0; t < this.overlays.length; t++) {
                    if (this.overlays[t] === e) {
                        this.overlays[t].setMap(null);
                        this.overlays.splice(t, 1);
                        break
                    }
                }
            }; GMaps.prototype.removeOverlays = function() {
                for (var e = 0, t; t = this.overlays[e]; e++) {
                    t.setMap(null)
                }
                this.overlays = []
            }; GMaps.prototype.drawPolyline = function(e) {
                var t = [],
                    n = e.path;
                if (n.length) {
                    if (n[0][0] === undefined) {
                        t = n
                    } else {
                        for (var r = 0, i; i = n[r]; r++) {
                            t.push(new google.maps.LatLng(i[0], i[1]))
                        }
                    }
                }
                var s = {
                    map: this.map,
                    path: t,
                    strokeColor: e.strokeColor,
                    strokeOpacity: e.strokeOpacity,
                    strokeWeight: e.strokeWeight,
                    geodesic: e.geodesic,
                    clickable: true,
                    editable: false,
                    visible: true
                };
                if (e.hasOwnProperty("clickable")) {
                    s.clickable = e.clickable
                }
                if (e.hasOwnProperty("editable")) {
                    s.editable = e.editable
                }
                if (e.hasOwnProperty("icons")) {
                    s.icons = e.icons
                }
                if (e.hasOwnProperty("zIndex")) {
                    s.zIndex = e.zIndex
                }
                var o = new google.maps.Polyline(s);
                var u = ["click", "dblclick", "mousedown", "mousemove", "mouseout", "mouseover", "mouseup", "rightclick"];
                for (var a = 0; a < u.length; a++) {
                    (function(t, n) {
                        if (e[n]) {
                            google.maps.event.addListener(t, n, function(t) {
                                e[n].apply(this, [t])
                            })
                        }
                    })(o, u[a])
                }
                this.polylines.push(o);
                GMaps.fire("polyline_added", o, this);
                return o
            }; GMaps.prototype.removePolyline = function(e) {
                for (var t = 0; t < this.polylines.length; t++) {
                    if (this.polylines[t] === e) {
                        this.polylines[t].setMap(null);
                        this.polylines.splice(t, 1);
                        GMaps.fire("polyline_removed", e, this);
                        break
                    }
                }
            }; GMaps.prototype.removePolylines = function() {
                for (var e = 0, t; t = this.polylines[e]; e++) {
                    t.setMap(null)
                }
                this.polylines = []
            }; GMaps.prototype.drawCircle = function(e) {
                e = extend_object({
                    map: this.map,
                    center: new google.maps.LatLng(e.lat, e.lng)
                }, e);
                delete e.lat;
                delete e.lng;
                var t = new google.maps.Circle(e),
                    n = ["click", "dblclick", "mousedown", "mousemove", "mouseout", "mouseover", "mouseup", "rightclick"];
                for (var r = 0; r < n.length; r++) {
                    (function(t, n) {
                        if (e[n]) {
                            google.maps.event.addListener(t, n, function(t) {
                                e[n].apply(this, [t])
                            })
                        }
                    })(t, n[r])
                }
                this.polygons.push(t);
                return t
            }; GMaps.prototype.drawRectangle = function(e) {
                e = extend_object({
                    map: this.map
                }, e);
                var t = new google.maps.LatLngBounds(new google.maps.LatLng(e.bounds[0][0], e.bounds[0][1]), new google.maps.LatLng(e.bounds[1][0], e.bounds[1][1]));
                e.bounds = t;
                var n = new google.maps.Rectangle(e),
                    r = ["click", "dblclick", "mousedown", "mousemove", "mouseout", "mouseover", "mouseup", "rightclick"];
                for (var i = 0; i < r.length; i++) {
                    (function(t, n) {
                        if (e[n]) {
                            google.maps.event.addListener(t, n, function(t) {
                                e[n].apply(this, [t])
                            })
                        }
                    })(n, r[i])
                }
                this.polygons.push(n);
                return n
            }; GMaps.prototype.drawPolygon = function(e) {
                var t = false;
                if (e.hasOwnProperty("useGeoJSON")) {
                    t = e.useGeoJSON
                }
                delete e.useGeoJSON;
                e = extend_object({
                    map: this.map
                }, e);
                if (t == false) {
                    e.paths = [e.paths.slice(0)]
                }
                if (e.paths.length > 0) {
                    if (e.paths[0].length > 0) {
                        e.paths = array_flat(array_map(e.paths, arrayToLatLng, t))
                    }
                }
                var n = new google.maps.Polygon(e),
                    r = ["click", "dblclick", "mousedown", "mousemove", "mouseout", "mouseover", "mouseup", "rightclick"];
                for (var i = 0; i < r.length; i++) {
                    (function(t, n) {
                        if (e[n]) {
                            google.maps.event.addListener(t, n, function(t) {
                                e[n].apply(this, [t])
                            })
                        }
                    })(n, r[i])
                }
                this.polygons.push(n);
                GMaps.fire("polygon_added", n, this);
                return n
            }; GMaps.prototype.removePolygon = function(e) {
                for (var t = 0; t < this.polygons.length; t++) {
                    if (this.polygons[t] === e) {
                        this.polygons[t].setMap(null);
                        this.polygons.splice(t, 1);
                        GMaps.fire("polygon_removed", e, this);
                        break
                    }
                }
            }; GMaps.prototype.removePolygons = function() {
                for (var e = 0, t; t = this.polygons[e]; e++) {
                    t.setMap(null)
                }
                this.polygons = []
            }; GMaps.prototype.getFromFusionTables = function(e) {
                var t = e.events;
                delete e.events;
                var n = e,
                    r = new google.maps.FusionTablesLayer(n);
                for (var i in t) {
                    (function(e, n) {
                        google.maps.event.addListener(e, n, function(e) {
                            t[n].apply(this, [e])
                        })
                    })(r, i)
                }
                this.layers.push(r);
                return r
            }; GMaps.prototype.loadFromFusionTables = function(e) {
                var t = this.getFromFusionTables(e);
                t.setMap(this.map);
                return t
            }; GMaps.prototype.getFromKML = function(e) {
                var t = e.url,
                    n = e.events;
                delete e.url;
                delete e.events;
                var r = e,
                    i = new google.maps.KmlLayer(t, r);
                for (var s in n) {
                    (function(e, t) {
                        google.maps.event.addListener(e, t, function(e) {
                            n[t].apply(this, [e])
                        })
                    })(i, s)
                }
                this.layers.push(i);
                return i
            }; GMaps.prototype.loadFromKML = function(e) {
                var t = this.getFromKML(e);
                t.setMap(this.map);
                return t
            }; GMaps.prototype.addLayer = function(e, t) {
                t = t || {};
                var n;
                switch (e) {
                    case "weather":
                        this.singleLayers.weather = n = new google.maps.weather.WeatherLayer;
                        break;
                    case "clouds":
                        this.singleLayers.clouds = n = new google.maps.weather.CloudLayer;
                        break;
                    case "traffic":
                        this.singleLayers.traffic = n = new google.maps.TrafficLayer;
                        break;
                    case "transit":
                        this.singleLayers.transit = n = new google.maps.TransitLayer;
                        break;
                    case "bicycling":
                        this.singleLayers.bicycling = n = new google.maps.BicyclingLayer;
                        break;
                    case "panoramio":
                        this.singleLayers.panoramio = n = new google.maps.panoramio.PanoramioLayer;
                        n.setTag(t.filter);
                        delete t.filter;
                        if (t.click) {
                            google.maps.event.addListener(n, "click", function(e) {
                                t.click(e);
                                delete t.click
                            })
                        }
                        break;
                    case "places":
                        this.singleLayers.places = n = new google.maps.places.PlacesService(this.map);
                        if (t.search || t.nearbySearch) {
                            var r = {
                                bounds: t.bounds || null,
                                keyword: t.keyword || null,
                                location: t.location || null,
                                name: t.name || null,
                                radius: t.radius || null,
                                rankBy: t.rankBy || null,
                                types: t.types || null
                            };
                            if (t.search) {
                                n.search(r, t.search)
                            }
                            if (t.nearbySearch) {
                                n.nearbySearch(r, t.nearbySearch)
                            }
                        }
                        if (t.textSearch) {
                            var i = {
                                bounds: t.bounds || null,
                                location: t.location || null,
                                query: t.query || null,
                                radius: t.radius || null
                            };
                            n.textSearch(i, t.textSearch)
                        }
                        break
                }
                if (n !== undefined) {
                    if (typeof n.setOptions == "function") {
                        n.setOptions(t)
                    }
                    if (typeof n.setMap == "function") {
                        n.setMap(this.map)
                    }
                    return n
                }
            }; GMaps.prototype.removeLayer = function(e) {
                if (typeof e == "string" && this.singleLayers[e] !== undefined) {
                    this.singleLayers[e].setMap(null);
                    delete this.singleLayers[e]
                } else {
                    for (var t = 0; t < this.layers.length; t++) {
                        if (this.layers[t] === e) {
                            this.layers[t].setMap(null);
                            this.layers.splice(t, 1);
                            break
                        }
                    }
                }
            };
            var travelMode, unitSystem; GMaps.prototype.getRoutes = function(e) {
                switch (e.travelMode) {
                    case "bicycling":
                        travelMode = google.maps.TravelMode.BICYCLING;
                        break;
                    case "transit":
                        travelMode = google.maps.TravelMode.TRANSIT;
                        break;
                    case "driving":
                        travelMode = google.maps.TravelMode.DRIVING;
                        break;
                    default:
                        travelMode = google.maps.TravelMode.WALKING;
                        break
                }
                if (e.unitSystem === "imperial") {
                    unitSystem = google.maps.UnitSystem.IMPERIAL
                } else {
                    unitSystem = google.maps.UnitSystem.METRIC
                }
                var t = {
                        avoidHighways: false,
                        avoidTolls: false,
                        optimizeWaypoints: false,
                        waypoints: []
                    },
                    n = extend_object(t, e);
                n.origin = /string/.test(typeof e.origin) ? e.origin : new google.maps.LatLng(e.origin[0], e.origin[1]);
                n.destination = /string/.test(typeof e.destination) ? e.destination : new google.maps.LatLng(e.destination[0], e.destination[1]);
                n.travelMode = travelMode;
                n.unitSystem = unitSystem;
                delete n.callback;
                var r = this,
                    i = new google.maps.DirectionsService;
                i.route(n, function(t, n) {
                    if (n === google.maps.DirectionsStatus.OK) {
                        for (var i in t.routes) {
                            if (t.routes.hasOwnProperty(i)) {
                                r.routes.push(t.routes[i])
                            }
                        }
                    }
                    if (e.callback) {
                        e.callback(r.routes)
                    }
                })
            }; GMaps.prototype.removeRoutes = function() {
                this.routes = []
            }; GMaps.prototype.getElevations = function(e) {
                e = extend_object({
                    locations: [],
                    path: false,
                    samples: 256
                }, e);
                if (e.locations.length > 0) {
                    if (e.locations[0].length > 0) {
                        e.locations = array_flat(array_map([e.locations], arrayToLatLng, false))
                    }
                }
                var t = e.callback;
                delete e.callback;
                var n = new google.maps.ElevationService;
                if (!e.path) {
                    delete e.path;
                    delete e.samples;
                    n.getElevationForLocations(e, function(e, n) {
                        if (t && typeof t === "function") {
                            t(e, n)
                        }
                    })
                } else {
                    var r = {
                        path: e.locations,
                        samples: e.samples
                    };
                    n.getElevationAlongPath(r, function(e, n) {
                        if (t && typeof t === "function") {
                            t(e, n)
                        }
                    })
                }
            }; GMaps.prototype.cleanRoute = GMaps.prototype.removePolylines; GMaps.prototype.drawRoute = function(e) {
                var t = this;
                this.getRoutes({
                    origin: e.origin,
                    destination: e.destination,
                    travelMode: e.travelMode,
                    waypoints: e.waypoints,
                    unitSystem: e.unitSystem,
                    callback: function(n) {
                        if (n.length > 0) {
                            t.drawPolyline({
                                path: n[n.length - 1].overview_path,
                                strokeColor: e.strokeColor,
                                strokeOpacity: e.strokeOpacity,
                                strokeWeight: e.strokeWeight
                            });
                            if (e.callback) {
                                e.callback(n[n.length - 1])
                            }
                        }
                    }
                })
            }; GMaps.prototype.travelRoute = function(e) {
                if (e.origin && e.destination) {
                    this.getRoutes({
                        origin: e.origin,
                        destination: e.destination,
                        travelMode: e.travelMode,
                        waypoints: e.waypoints,
                        callback: function(t) {
                            if (t.length > 0 && e.start) {
                                e.start(t[t.length - 1])
                            }
                            if (t.length > 0 && e.step) {
                                var n = t[t.length - 1];
                                if (n.legs.length > 0) {
                                    var r = n.legs[0].steps;
                                    for (var i = 0, s; s = r[i]; i++) {
                                        s.step_number = i;
                                        e.step(s, n.legs[0].steps.length - 1)
                                    }
                                }
                            }
                            if (t.length > 0 && e.end) {
                                e.end(t[t.length - 1])
                            }
                        }
                    })
                } else if (e.route) {
                    if (e.route.legs.length > 0) {
                        var t = e.route.legs[0].steps;
                        for (var n = 0, r; r = t[n]; n++) {
                            r.step_number = n;
                            e.step(r)
                        }
                    }
                }
            }; GMaps.prototype.drawSteppedRoute = function(e) {
                var t = this;
                if (e.origin && e.destination) {
                    this.getRoutes({
                        origin: e.origin,
                        destination: e.destination,
                        travelMode: e.travelMode,
                        waypoints: e.waypoints,
                        callback: function(n) {
                            if (n.length > 0 && e.start) {
                                e.start(n[n.length - 1])
                            }
                            if (n.length > 0 && e.step) {
                                var r = n[n.length - 1];
                                if (r.legs.length > 0) {
                                    var i = r.legs[0].steps;
                                    for (var s = 0, o; o = i[s]; s++) {
                                        o.step_number = s;
                                        t.drawPolyline({
                                            path: o.path,
                                            strokeColor: e.strokeColor,
                                            strokeOpacity: e.strokeOpacity,
                                            strokeWeight: e.strokeWeight
                                        });
                                        e.step(o, r.legs[0].steps.length - 1)
                                    }
                                }
                            }
                            if (n.length > 0 && e.end) {
                                e.end(n[n.length - 1])
                            }
                        }
                    })
                } else if (e.route) {
                    if (e.route.legs.length > 0) {
                        var n = e.route.legs[0].steps;
                        for (var r = 0, i; i = n[r]; r++) {
                            i.step_number = r;
                            t.drawPolyline({
                                path: i.path,
                                strokeColor: e.strokeColor,
                                strokeOpacity: e.strokeOpacity,
                                strokeWeight: e.strokeWeight
                            });
                            e.step(i)
                        }
                    }
                }
            }; GMaps.Route = function(e) {
                this.origin = e.origin;
                this.destination = e.destination;
                this.waypoints = e.waypoints;
                this.map = e.map;
                this.route = e.route;
                this.step_count = 0;
                this.steps = this.route.legs[0].steps;
                this.steps_length = this.steps.length;
                this.polyline = this.map.drawPolyline({
                    path: new google.maps.MVCArray,
                    strokeColor: e.strokeColor,
                    strokeOpacity: e.strokeOpacity,
                    strokeWeight: e.strokeWeight
                }).getPath()
            }; GMaps.Route.prototype.getRoute = function(t) {
                var n = this;
                this.map.getRoutes({
                    origin: this.origin,
                    destination: this.destination,
                    travelMode: t.travelMode,
                    waypoints: this.waypoints || [],
                    callback: function() {
                        n.route = e[0];
                        if (t.callback) {
                            t.callback.call(n)
                        }
                    }
                })
            }; GMaps.Route.prototype.back = function() {
                if (this.step_count > 0) {
                    this.step_count--;
                    var e = this.route.legs[0].steps[this.step_count].path;
                    for (var t in e) {
                        if (e.hasOwnProperty(t)) {
                            this.polyline.pop()
                        }
                    }
                }
            }; GMaps.Route.prototype.forward = function() {
                if (this.step_count < this.steps_length) {
                    var e = this.route.legs[0].steps[this.step_count].path;
                    for (var t in e) {
                        if (e.hasOwnProperty(t)) {
                            this.polyline.push(e[t])
                        }
                    }
                    this.step_count++
                }
            }; GMaps.prototype.checkGeofence = function(e, t, n) {
                return n.containsLatLng(new google.maps.LatLng(e, t))
            }; GMaps.prototype.checkMarkerGeofence = function(e, t) {
                if (e.fences) {
                    for (var n = 0, r; r = e.fences[n]; n++) {
                        var i = e.getPosition();
                        if (!this.checkGeofence(i.lat(), i.lng(), r)) {
                            t(e, r)
                        }
                    }
                }
            }; GMaps.prototype.toImage = function(e) {
                var e = e || {},
                    t = {};
                t["size"] = e["size"] || [this.el.clientWidth, this.el.clientHeight];
                t["lat"] = this.getCenter().lat();
                t["lng"] = this.getCenter().lng();
                if (this.markers.length > 0) {
                    t["markers"] = [];
                    for (var n = 0; n < this.markers.length; n++) {
                        t["markers"].push({
                            lat: this.markers[n].getPosition().lat(),
                            lng: this.markers[n].getPosition().lng()
                        })
                    }
                }
                if (this.polylines.length > 0) {
                    var r = this.polylines[0];
                    t["polyline"] = {};
                    t["polyline"]["path"] = google.maps.geometry.encoding.encodePath(r.getPath());
                    t["polyline"]["strokeColor"] = r.strokeColor;
                    t["polyline"]["strokeOpacity"] = r.strokeOpacity;
                    t["polyline"]["strokeWeight"] = r.strokeWeight
                }
                return GMaps.staticMapURL(t)
            }; GMaps.staticMapURL = function(e) {
                function t(e, t) {
                    if (e[0] === "#") {
                        e = e.replace("#", "0x");
                        if (t) {
                            t = parseFloat(t);
                            t = Math.min(1, Math.max(t, 0));
                            if (t === 0) {
                                return "0x00000000"
                            }
                            t = (t * 255).toString(16);
                            if (t.length === 1) {
                                t += t
                            }
                            e = e.slice(0, 8) + t
                        }
                    }
                    return e
                }
                var n = [],
                    r, i = "http://maps.googleapis.com/maps/api/staticmap";
                if (e.url) {
                    i = e.url;
                    delete e.url
                }
                i += "?";
                var s = e.markers;
                delete e.markers;
                if (!s && e.marker) {
                    s = [e.marker];
                    delete e.marker
                }
                var o = e.polyline;
                delete e.polyline;
                if (e.center) {
                    n.push("center=" + e.center);
                    delete e.center
                } else if (e.address) {
                    n.push("center=" + e.address);
                    delete e.address
                } else if (e.lat) {
                    n.push(["center=", e.lat, ",", e.lng].join(""));
                    delete e.lat;
                    delete e.lng
                } else if (e.visible) {
                    var u = encodeURI(e.visible.join("|"));
                    n.push("visible=" + u)
                }
                var a = e.size;
                if (a) {
                    if (a.join) {
                        a = a.join("x")
                    }
                    delete e.size
                } else {
                    a = "630x300"
                }
                n.push("size=" + a);
                if (!e.zoom) {
                    e.zoom = 15
                }
                var f = e.hasOwnProperty("sensor") ? !!e.sensor : true;
                delete e.sensor;
                n.push("sensor=" + f);
                for (var l in e) {
                    if (e.hasOwnProperty(l)) {
                        n.push(l + "=" + e[l])
                    }
                }
                if (s) {
                    var c, h;
                    for (var p = 0; r = s[p]; p++) {
                        c = [];
                        if (r.size && r.size !== "normal") {
                            c.push("size:" + r.size)
                        } else if (r.icon) {
                            c.push("icon:" + encodeURI(r.icon))
                        }
                        if (r.color) {
                            c.push("color:" + r.color.replace("#", "0x"))
                        }
                        if (r.label) {
                            c.push("label:" + r.label[0].toUpperCase())
                        }
                        h = r.address ? r.address : r.lat + "," + r.lng;
                        if (c.length || p === 0) {
                            c.push(h);
                            c = c.join("|");
                            n.push("markers=" + encodeURI(c))
                        } else {
                            c = n.pop() + encodeURI("|" + h);
                            n.push(c)
                        }
                    }
                }
                if (o) {
                    r = o;
                    o = [];
                    if (r.strokeWeight) {
                        o.push("weight:" + parseInt(r.strokeWeight, 10))
                    }
                    if (r.strokeColor) {
                        var d = t(r.strokeColor, r.strokeOpacity);
                        o.push("color:" + d)
                    }
                    if (r.fillColor) {
                        var v = t(r.fillColor, r.fillOpacity);
                        o.push("fillcolor:" + v)
                    }
                    var m = r.path;
                    if (m.join) {
                        for (var g = 0, y; y = m[g]; g++) {
                            o.push(y.join(","))
                        }
                    } else {
                        o.push("enc:" + m)
                    }
                    o = o.join("|");
                    n.push("path=" + encodeURI(o))
                }
                n = n.join("&");
                return i + n
            }; GMaps.prototype.addMapType = function(e, t) {
                if (t.hasOwnProperty("getTileUrl") && typeof t["getTileUrl"] == "function") {
                    t.tileSize = t.tileSize || new google.maps.Size(256, 256);
                    var n = new google.maps.ImageMapType(t);
                    this.map.mapTypes.set(e, n)
                } else {
                    throw "'getTileUrl' function required."
                }
            }; GMaps.prototype.addOverlayMapType = function(e) {
                if (e.hasOwnProperty("getTile") && typeof e["getTile"] == "function") {
                    var t = e.index;
                    delete e.index;
                    this.map.overlayMapTypes.insertAt(t, e)
                } else {
                    throw "'getTile' function required."
                }
            }; GMaps.prototype.removeOverlayMapType = function(e) {
                this.map.overlayMapTypes.removeAt(e)
            }; GMaps.prototype.addStyle = function(e) {
                var t = new google.maps.StyledMapType(e.styles, e.styledMapName);
                this.map.mapTypes.set(e.mapTypeId, t)
            }; GMaps.prototype.setStyle = function(e) {
                this.map.setMapTypeId(e)
            }; GMaps.prototype.createPanorama = function(e) {
                if (!e.hasOwnProperty("lat") || !e.hasOwnProperty("lng")) {
                    e.lat = this.getCenter().lat();
                    e.lng = this.getCenter().lng()
                }
                this.panorama = GMaps.createPanorama(e);
                this.map.setStreetView(this.panorama);
                return this.panorama
            }; GMaps.createPanorama = function(e) {
                var t = getElementById(e.el, e.context);
                e.position = new google.maps.LatLng(e.lat, e.lng);
                delete e.el;
                delete e.context;
                delete e.lat;
                delete e.lng;
                var n = ["closeclick", "links_changed", "pano_changed", "position_changed", "pov_changed", "resize", "visible_changed"],
                    r = extend_object({
                        visible: true
                    }, e);
                for (var i = 0; i < n.length; i++) {
                    delete r[n[i]]
                }
                var s = new google.maps.StreetViewPanorama(t, r);
                for (var i = 0; i < n.length; i++) {
                    (function(t, n) {
                        if (e[n]) {
                            google.maps.event.addListener(t, n, function() {
                                e[n].apply(this)
                            })
                        }
                    })(s, n[i])
                }
                return s
            }; GMaps.prototype.on = function(e, t) {
                return GMaps.on(e, this, t)
            }; GMaps.prototype.off = function(e) {
                GMaps.off(e, this)
            }; GMaps.custom_events = ["marker_added", "marker_removed", "polyline_added", "polyline_removed", "polygon_added", "polygon_removed", "geolocated", "geolocation_failed"]; GMaps.on = function(e, t, n) {
                if (GMaps.custom_events.indexOf(e) == -1) {
                    return google.maps.event.addListener(t, e, n)
                } else {
                    var r = {
                        handler: n,
                        eventName: e
                    };
                    t.registered_events[e] = t.registered_events[e] || [];
                    t.registered_events[e].push(r);
                    return r
                }
            }; GMaps.off = function(e, t) {
                if (GMaps.custom_events.indexOf(e) == -1) {
                    google.maps.event.clearListeners(t, e)
                } else {
                    t.registered_events[e] = []
                }
            }; GMaps.fire = function(e, t, n) {
                if (GMaps.custom_events.indexOf(e) == -1) {
                    google.maps.event.trigger(t, e, Array.prototype.slice.apply(arguments).slice(2))
                } else {
                    if (e in n.registered_events) {
                        var r = n.registered_events[e];
                        for (var i = 0; i < r.length; i++) {
                            (function(e, t, n) {
                                e.apply(t, [n])
                            })(r[i]["handler"], n, t)
                        }
                    }
                }
            }; GMaps.geolocate = function(e) {
                var t = e.always || e.complete;
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(function(n) {
                        e.success(n);
                        if (t) {
                            t()
                        }
                    }, function(n) {
                        e.error(n);
                        if (t) {
                            t()
                        }
                    }, e.options)
                } else {
                    e.not_supported();
                    if (t) {
                        t()
                    }
                }
            }; GMaps.geocode = function(e) {
                this.geocoder = new google.maps.Geocoder;
                var t = e.callback;
                if (e.hasOwnProperty("lat") && e.hasOwnProperty("lng")) {
                    e.latLng = new google.maps.LatLng(e.lat, e.lng)
                }
                delete e.lat;
                delete e.lng;
                delete e.callback;
                this.geocoder.geocode(e, function(e, n) {
                    t(e, n)
                })
            };
            if (!google.maps.Polygon.prototype.getBounds) {
                google.maps.Polygon.prototype.getBounds = function(e) {
                    var t = new google.maps.LatLngBounds;
                    var n = this.getPaths();
                    var r;
                    for (var i = 0; i < n.getLength(); i++) {
                        r = n.getAt(i);
                        for (var s = 0; s < r.getLength(); s++) {
                            t.extend(r.getAt(s))
                        }
                    }
                    return t
                }
            }
            if (!google.maps.Polygon.prototype.containsLatLng) {
                google.maps.Polygon.prototype.containsLatLng = function(e) {
                    var t = this.getBounds();
                    if (t !== null && !t.contains(e)) {
                        return false
                    }
                    var n = false;
                    var r = this.getPaths().getLength();
                    for (var i = 0; i < r; i++) {
                        var s = this.getPaths().getAt(i);
                        var o = s.getLength();
                        var u = o - 1;
                        for (var a = 0; a < o; a++) {
                            var f = s.getAt(a);
                            var l = s.getAt(u);
                            if (f.lng() < e.lng() && l.lng() >= e.lng() || l.lng() < e.lng() && f.lng() >= e.lng()) {
                                if (f.lat() + (e.lng() - f.lng()) / (l.lng() - f.lng()) * (l.lat() - f.lat()) < e.lat()) {
                                    n = !n
                                }
                            }
                            u = a
                        }
                    }
                    return n
                }
            }
            google.maps.LatLngBounds.prototype.containsLatLng = function(e) {
                return this.contains(e)
            }; google.maps.Marker.prototype.setFences = function(e) {
                this.fences = e
            }; google.maps.Marker.prototype.addFence = function(e) {
                this.fences.push(e)
            }; google.maps.Marker.prototype.getId = function() {
                return this["__gm_id"]
            };
            if (!Array.prototype.indexOf) {
                Array.prototype.indexOf = function(e) {
                    "use strict";
                    if (this == null) {
                        throw new TypeError
                    }
                    var t = Object(this);
                    var n = t.length >>> 0;
                    if (n === 0) {
                        return -1
                    }
                    var r = 0;
                    if (arguments.length > 1) {
                        r = Number(arguments[1]);
                        if (r != r) {
                            r = 0
                        } else if (r != 0 && r != Infinity && r != -Infinity) {
                            r = (r > 0 || -1) * Math.floor(Math.abs(r))
                        }
                    }
                    if (r >= n) {
                        return -1
                    }
                    var i = r >= 0 ? r : Math.max(n - Math.abs(r), 0);
                    for (; i < n; i++) {
                        if (i in t && t[i] === e) {
                            return i
                        }
                    }
                    return -1
                }
            }(function(e) {
                function t() {
                    if (e.fn.ajaxSubmit.debug) {
                        var t = "[jquery.form] " + Array.prototype.join.call(arguments, "");
                        if (window.console && window.console.log) window.console.log(t);
                        else if (window.opera && window.opera.postError) window.opera.postError(t)
                    }
                }
                e.fn.ajaxSubmit = function(n) {
                    function r() {
                        function r() {
                            var t = l.attr("target"),
                                n = l.attr("action");
                            o.setAttribute("target", f);
                            if (o.getAttribute("method") != "POST") o.setAttribute("method", "POST");
                            if (o.getAttribute("action") != u.url) o.setAttribute("action", u.url);
                            if (!u.skipEncodingOverride) {
                                l.attr({
                                    encoding: "multipart/form-data",
                                    enctype: "multipart/form-data"
                                })
                            }
                            if (u.timeout) setTimeout(function() {
                                m = true;
                                i()
                            }, u.timeout);
                            var r = [];
                            try {
                                if (u.extraData)
                                    for (var s in u.extraData) r.push(e('<input type="hidden" name="' + s + '" value="' + u.extraData[s] + '" />').appendTo(o)[0]);
                                c.appendTo("body");
                                c.data("form-plugin-onload", i);
                                o.submit()
                            } finally {
                                o.setAttribute("action", n);
                                t ? o.setAttribute("target", t) : l.removeAttr("target");
                                e(r).remove()
                            }
                        }

                        function i() {
                            if (v) return;
                            var n = true;
                            try {
                                if (m) throw "timeout";
                                var r, o;
                                o = h.contentWindow ? h.contentWindow.document : h.contentDocument ? h.contentDocument : h.document;
                                var a = u.dataType == "xml" || o.XMLDocument || e.isXMLDoc(o);
                                t("isXml=" + a);
                                if (!a && (o.body == null || o.body.innerHTML == "")) {
                                    if (--b) {
                                        t("requeing onLoad callback, DOM not available");
                                        setTimeout(i, 250);
                                        return
                                    }
                                    t("Could not access iframe DOM after 100 tries.");
                                    return
                                }
                                t("response detected");
                                v = true;
                                p.responseText = o.body ? o.body.innerHTML : null;
                                p.responseXML = o.XMLDocument ? o.XMLDocument : o;
                                p.getResponseHeader = function(e) {
                                    var t = {
                                        "content-type": u.dataType
                                    };
                                    return t[e]
                                };
                                if (u.dataType == "json" || u.dataType == "script") {
                                    var f = o.getElementsByTagName("textarea")[0];
                                    if (f) p.responseText = f.value;
                                    else {
                                        var l = o.getElementsByTagName("pre")[0];
                                        if (l) p.responseText = l.innerHTML
                                    }
                                } else if (u.dataType == "xml" && !p.responseXML && p.responseText != null) {
                                    p.responseXML = s(p.responseText)
                                }
                                r = e.httpData(p, u.dataType)
                            } catch (g) {
                                t("error caught:", g);
                                n = false;
                                p.error = g;
                                e.handleError(u, p, "error", g)
                            }
                            if (n) {
                                u.success(r, "success");
                                if (d) e.event.trigger("ajaxSuccess", [p, u])
                            }
                            if (d) e.event.trigger("ajaxComplete", [p, u]);
                            if (d && !--e.active) e.event.trigger("ajaxStop");
                            if (u.complete) u.complete(p, n ? "success" : "error");
                            setTimeout(function() {
                                c.removeData("form-plugin-onload");
                                c.remove();
                                p.responseXML = null
                            }, 100)
                        }

                        function s(e, t) {
                            if (window.ActiveXObject) {
                                t = new ActiveXObject("Microsoft.XMLDOM");
                                t.async = "false";
                                t.loadXML(e)
                            } else t = (new DOMParser).parseFromString(e, "text/xml");
                            return t && t.documentElement && t.documentElement.tagName != "parsererror" ? t : null
                        }
                        var o = l[0];
                        if (e(":input[name=submit]", o).length) {
                            alert('Error: Form elements must not be named "submit".');
                            return
                        }
                        var u = e.extend({}, e.ajaxSettings, n);
                        var a = e.extend(true, {}, e.extend(true, {}, e.ajaxSettings), u);
                        var f = "jqFormIO" + (new Date).getTime();
                        var c = e('<iframe id="' + f + '" name="' + f + '" src="' + u.iframeSrc + '" onload="(jQuery(this).data(\'form-plugin-onload\'))()" />');
                        var h = c[0];
                        c.css({
                            position: "absolute",
                            top: "-1000px",
                            left: "-1000px"
                        });
                        var p = {
                            aborted: 0,
                            responseText: null,
                            responseXML: null,
                            status: 0,
                            statusText: "n/a",
                            getAllResponseHeaders: function() {},
                            getResponseHeader: function() {},
                            setRequestHeader: function() {},
                            abort: function() {
                                this.aborted = 1;
                                c.attr("src", u.iframeSrc)
                            }
                        };
                        var d = u.global;
                        if (d && !(e.active++)) e.event.trigger("ajaxStart");
                        if (d) e.event.trigger("ajaxSend", [p, u]);
                        if (a.beforeSend && a.beforeSend(p, a) === false) {
                            a.global && e.active--;
                            return
                        }
                        if (p.aborted) return;
                        var v = false;
                        var m = 0;
                        var g = o.clk;
                        if (g) {
                            var y = g.name;
                            if (y && !g.disabled) {
                                u.extraData = u.extraData || {};
                                u.extraData[y] = g.value;
                                if (g.type == "image") {
                                    u.extraData[y + ".x"] = o.clk_x;
                                    u.extraData[y + ".y"] = o.clk_y
                                }
                            }
                        }
                        if (u.forceSync) r();
                        else setTimeout(r, 10);
                        var b = 100
                    }
                    if (!this.length) {
                        t("ajaxSubmit: skipping submit process - no element selected");
                        return this
                    }
                    if (typeof n == "function") n = {
                        success: n
                    };
                    var i = e.trim(this.attr("action"));
                    if (i) {
                        i = (i.match(/^([^#]+)/) || [])[1]
                    }
                    i = i || window.location.href || "";
                    n = e.extend({
                        url: i,
                        type: this.attr("method") || "GET",
                        iframeSrc: /^https/i.test(window.location.href || "") ? "javascript:false" : "about:blank"
                    }, n || {});
                    var s = {};
                    this.trigger("form-pre-serialize", [this, n, s]);
                    if (s.veto) {
                        t("ajaxSubmit: submit vetoed via form-pre-serialize trigger");
                        return this
                    }
                    if (n.beforeSerialize && n.beforeSerialize(this, n) === false) {
                        t("ajaxSubmit: submit aborted via beforeSerialize callback");
                        return this
                    }
                    var o = this.formToArray(n.semantic);
                    if (n.data) {
                        n.extraData = n.data;
                        for (var u in n.data) {
                            if (n.data[u] instanceof Array) {
                                for (var a in n.data[u]) o.push({
                                    name: u,
                                    value: n.data[u][a]
                                })
                            } else o.push({
                                name: u,
                                value: n.data[u]
                            })
                        }
                    }
                    if (n.beforeSubmit && n.beforeSubmit(o, this, n) === false) {
                        t("ajaxSubmit: submit aborted via beforeSubmit callback");
                        return this
                    }
                    this.trigger("form-submit-validate", [o, this, n, s]);
                    if (s.veto) {
                        t("ajaxSubmit: submit vetoed via form-submit-validate trigger");
                        return this
                    }
                    var f = e.param(o);
                    if (n.type.toUpperCase() == "GET") {
                        n.url += (n.url.indexOf("?") >= 0 ? "&" : "?") + f;
                        n.data = null
                    } else n.data = f;
                    var l = this,
                        c = [];
                    if (n.resetForm) c.push(function() {
                        l.resetForm()
                    });
                    if (n.clearForm) c.push(function() {
                        l.clearForm()
                    });
                    if (!n.dataType && n.target) {
                        var h = n.success || function() {};
                        c.push(function(t) {
                            var r = n.replaceTarget ? "replaceWith" : "html";
                            e(n.target)[r](t).each(h, arguments)
                        })
                    } else if (n.success) c.push(n.success);
                    n.success = function(e, t, r) {
                        for (var i = 0, s = c.length; i < s; i++) c[i].apply(n, [e, t, r || l, l])
                    };
                    var p = e("input:file", this).fieldValue();
                    var d = false;
                    for (var v = 0; v < p.length; v++)
                        if (p[v]) d = true;
                    var m = false;
                    if (p.length && n.iframe !== false || n.iframe || d || m) {
                        if (n.closeKeepAlive) e.get(n.closeKeepAlive, r);
                        else r()
                    } else e.ajax(n);
                    this.trigger("form-submit-notify", [this, n]);
                    return this
                };
                e.fn.ajaxForm = function(t) {
                    return this.ajaxFormUnbind().bind("submit.form-plugin", function(n) {
                        n.preventDefault();
                        e(this).ajaxSubmit(t)
                    }).bind("click.form-plugin", function(t) {
                        var n = t.target;
                        var r = e(n);
                        if (!r.is(":submit,input:image")) {
                            var i = r.closest(":submit");
                            if (i.length == 0) return;
                            n = i[0]
                        }
                        var s = this;
                        s.clk = n;
                        if (n.type == "image") {
                            if (t.offsetX != undefined) {
                                s.clk_x = t.offsetX;
                                s.clk_y = t.offsetY
                            } else if (typeof e.fn.offset == "function") {
                                var o = r.offset();
                                s.clk_x = t.pageX - o.left;
                                s.clk_y = t.pageY - o.top
                            } else {
                                s.clk_x = t.pageX - n.offsetLeft;
                                s.clk_y = t.pageY - n.offsetTop
                            }
                        }
                        setTimeout(function() {
                            s.clk = s.clk_x = s.clk_y = null
                        }, 100)
                    })
                };
                e.fn.ajaxFormUnbind = function() {
                    return this.unbind("submit.form-plugin click.form-plugin")
                };
                e.fn.formToArray = function(t) {
                    var n = [];
                    if (this.length == 0) return n;
                    var r = this[0];
                    var i = t ? r.getElementsByTagName("*") : r.elements;
                    if (!i) return n;
                    for (var s = 0, o = i.length; s < o; s++) {
                        var u = i[s];
                        var a = u.name;
                        if (!a) continue;
                        if (t && r.clk && u.type == "image") {
                            if (!u.disabled && r.clk == u) {
                                n.push({
                                    name: a,
                                    value: e(u).val()
                                });
                                n.push({
                                    name: a + ".x",
                                    value: r.clk_x
                                }, {
                                    name: a + ".y",
                                    value: r.clk_y
                                })
                            }
                            continue
                        }
                        var f = e.fieldValue(u, true);
                        if (f && f.constructor == Array) {
                            for (var l = 0, c = f.length; l < c; l++) n.push({
                                name: a,
                                value: f[l]
                            })
                        } else if (f !== null && typeof f != "undefined") n.push({
                            name: a,
                            value: f
                        })
                    }
                    if (!t && r.clk) {
                        var h = e(r.clk),
                            p = h[0],
                            a = p.name;
                        if (a && !p.disabled && p.type == "image") {
                            n.push({
                                name: a,
                                value: h.val()
                            });
                            n.push({
                                name: a + ".x",
                                value: r.clk_x
                            }, {
                                name: a + ".y",
                                value: r.clk_y
                            })
                        }
                    }
                    return n
                };
                e.fn.formSerialize = function(t) {
                    return e.param(this.formToArray(t))
                };
                e.fn.fieldSerialize = function(t) {
                    var n = [];
                    this.each(function() {
                        var r = this.name;
                        if (!r) return;
                        var i = e.fieldValue(this, t);
                        if (i && i.constructor == Array) {
                            for (var s = 0, o = i.length; s < o; s++) n.push({
                                name: r,
                                value: i[s]
                            })
                        } else if (i !== null && typeof i != "undefined") n.push({
                            name: this.name,
                            value: i
                        })
                    });
                    return e.param(n)
                };
                e.fn.fieldValue = function(t) {
                    for (var n = [], r = 0, i = this.length; r < i; r++) {
                        var s = this[r];
                        var o = e.fieldValue(s, t);
                        if (o === null || typeof o == "undefined" || o.constructor == Array && !o.length) continue;
                        o.constructor == Array ? e.merge(n, o) : n.push(o)
                    }
                    return n
                };
                e.fieldValue = function(e, t) {
                    var n = e.name,
                        r = e.type,
                        i = e.tagName.toLowerCase();
                    if (typeof t == "undefined") t = true;
                    if (t && (!n || e.disabled || r == "reset" || r == "button" || (r == "checkbox" || r == "radio") && !e.checked || (r == "submit" || r == "image") && e.form && e.form.clk != e || i == "select" && e.selectedIndex == -1)) return null;
                    if (i == "select") {
                        var s = e.selectedIndex;
                        if (s < 0) return null;
                        var o = [],
                            u = e.options;
                        var a = r == "select-one";
                        var f = a ? s + 1 : u.length;
                        for (var l = a ? s : 0; l < f; l++) {
                            var c = u[l];
                            if (c.selected) {
                                var h = c.value;
                                if (!h) h = c.attributes && c.attributes["value"] && !c.attributes["value"].specified ? c.text : c.value;
                                if (a) return h;
                                o.push(h)
                            }
                        }
                        return o
                    }
                    return e.value
                };
                e.fn.clearForm = function() {
                    return this.each(function() {
                        e("input,select,textarea", this).clearFields()
                    })
                };
                e.fn.clearFields = e.fn.clearInputs = function() {
                    return this.each(function() {
                        var e = this.type,
                            t = this.tagName.toLowerCase();
                        if (e == "text" || e == "password" || t == "textarea") this.value = "";
                        else if (e == "checkbox" || e == "radio") this.checked = false;
                        else if (t == "select") this.selectedIndex = -1
                    })
                };
                e.fn.resetForm = function() {
                    return this.each(function() {
                        if (typeof this.reset == "function" || typeof this.reset == "object" && !this.reset.nodeType) this.reset()
                    })
                };
                e.fn.enable = function(e) {
                    if (e == undefined) e = true;
                    return this.each(function() {
                        this.disabled = !e
                    })
                };
                e.fn.selected = function(t) {
                    if (t == undefined) t = true;
                    return this.each(function() {
                        var n = this.type;
                        if (n == "checkbox" || n == "radio") this.checked = t;
                        else if (this.tagName.toLowerCase() == "option") {
                            var r = e(this).parent("select");
                            if (t && r[0] && r[0].type == "select-one") {
                                r.find("option").selected(false)
                            }
                            this.selected = t
                        }
                    })
                }
            })(jQuery);
            (function(e) {
                e.extend(e.fn, {
                    validate: function(n) {
                        if (!this.length) return n && n.debug && window.console && console.warn("Nothing selected, can't validate, returning nothing."), void 0;
                        var r = e.data(this[0], "validator");
                        return r ? r : (this.attr("novalidate", "novalidate"), r = new e.validator(n, this[0]), e.data(this[0], "validator", r), r.settings.onsubmit && (this.validateDelegate(":submit", "click", function(n) {
                            r.settings.submitHandler && (r.submitButton = n.target), e(n.target).hasClass("cancel") && (r.cancelSubmit = !0), void 0 !== e(n.target).attr("formnovalidate") && (r.cancelSubmit = !0)
                        }), this.submit(function(n) {
                            function s() {
                                var s;
                                return r.settings.submitHandler ? (r.submitButton && (s = e("<input type='hidden'/>").attr("name", r.submitButton.name).val(e(r.submitButton).val()).appendTo(r.currentForm)), r.settings.submitHandler.call(r, r.currentForm, n), r.submitButton && s.remove(), !1) : !0
                            }
                            return r.settings.debug && n.preventDefault(), r.cancelSubmit ? (r.cancelSubmit = !1, s()) : r.form() ? r.pendingRequest ? (r.formSubmitted = !0, !1) : s() : (r.focusInvalid(), !1)
                        })), r)
                    },
                    valid: function() {
                        if (e(this[0]).is("form")) return this.validate().form();
                        var n = !0,
                            r = e(this[0].form).validate();
                        return this.each(function() {
                            n = n && r.element(this)
                        }), n
                    },
                    removeAttrs: function(n) {
                        var r = {},
                            i = this;
                        return e.each(n.split(/\s/), function(e, t) {
                            r[t] = i.attr(t), i.removeAttr(t)
                        }), r
                    },
                    rules: function(n, r) {
                        var i = this[0];
                        if (n) {
                            var s = e.data(i.form, "validator").settings,
                                o = s.rules,
                                u = e.validator.staticRules(i);
                            switch (n) {
                                case "add":
                                    e.extend(u, e.validator.normalizeRule(r)), delete u.messages, o[i.name] = u, r.messages && (s.messages[i.name] = e.extend(s.messages[i.name], r.messages));
                                    break;
                                case "remove":
                                    if (!r) return delete o[i.name], u;
                                    var a = {};
                                    return e.each(r.split(/\s/), function(e, t) {
                                        a[t] = u[t], delete u[t]
                                    }), a
                            }
                        }
                        var f = e.validator.normalizeRules(e.extend({}, e.validator.classRules(i), e.validator.attributeRules(i), e.validator.dataRules(i), e.validator.staticRules(i)), i);
                        if (f.required) {
                            var l = f.required;
                            delete f.required, f = e.extend({
                                required: l
                            }, f)
                        }
                        return f
                    }
                }), e.extend(e.expr[":"], {
                    blank: function(n) {
                        return !e.trim("" + e(n).val())
                    },
                    filled: function(n) {
                        return !!e.trim("" + e(n).val())
                    },
                    unchecked: function(n) {
                        return !e(n).prop("checked")
                    }
                }), e.validator = function(n, r) {
                    this.settings = e.extend(!0, {}, e.validator.defaults, n), this.currentForm = r, this.init()
                }, e.validator.format = function(n, r) {
                    return 1 === arguments.length ? function() {
                        var r = e.makeArray(arguments);
                        return r.unshift(n), e.validator.format.apply(this, r)
                    } : (arguments.length > 2 && r.constructor !== Array && (r = e.makeArray(arguments).slice(1)), r.constructor !== Array && (r = [r]), e.each(r, function(e, t) {
                        n = n.replace(RegExp("\\{" + e + "\\}", "g"), function() {
                            return t
                        })
                    }), n)
                }, e.extend(e.validator, {
                    defaults: {
                        messages: {},
                        groups: {},
                        rules: {},
                        errorClass: "error",
                        validClass: "valid",
                        errorElement: "label",
                        focusInvalid: !0,
                        errorContainer: e([]),
                        errorLabelContainer: e([]),
                        onsubmit: !0,
                        ignore: ":hidden",
                        ignoreTitle: !1,
                        onfocusin: function(e) {
                            this.lastActive = e, this.settings.focusCleanup && !this.blockFocusCleanup && (this.settings.unhighlight && this.settings.unhighlight.call(this, e, this.settings.errorClass, this.settings.validClass), this.addWrapper(this.errorsFor(e)).hide())
                        },
                        onfocusout: function(e) {
                            this.checkable(e) || !(e.name in this.submitted) && this.optional(e) || this.element(e)
                        },
                        onkeyup: function(e, t) {
                            (9 !== t.which || "" !== this.elementValue(e)) && (e.name in this.submitted || e === this.lastElement) && this.element(e)
                        },
                        onclick: function(e) {
                            e.name in this.submitted ? this.element(e) : e.parentNode.name in this.submitted && this.element(e.parentNode)
                        },
                        highlight: function(n, r, i) {
                            "radio" === n.type ? this.findByName(n.name).addClass(r).removeClass(i) : e(n).addClass(r).removeClass(i)
                        },
                        unhighlight: function(n, r, i) {
                            "radio" === n.type ? this.findByName(n.name).removeClass(r).addClass(i) : e(n).removeClass(r).addClass(i)
                        }
                    },
                    setDefaults: function(n) {
                        e.extend(e.validator.defaults, n)
                    },
                    messages: {
                        required: "This field is required.",
                        remote: "Please fix this field.",
                        email: "Please enter a valid email address.",
                        url: "Please enter a valid URL.",
                        date: "Please enter a valid date.",
                        dateISO: "Please enter a valid date (ISO).",
                        number: "Please enter a valid number.",
                        digits: "Please enter only digits.",
                        creditcard: "Please enter a valid credit card number.",
                        equalTo: "Please enter the same value again.",
                        maxlength: e.validator.format("Please enter no more than {0} characters."),
                        minlength: e.validator.format("Please enter at least {0} characters."),
                        rangelength: e.validator.format("Please enter a value between {0} and {1} characters long."),
                        range: e.validator.format("Please enter a value between {0} and {1}."),
                        max: e.validator.format("Please enter a value less than or equal to {0}."),
                        min: e.validator.format("Please enter a value greater than or equal to {0}.")
                    },
                    autoCreateRanges: !1,
                    prototype: {
                        init: function() {
                            function n(n) {
                                var r = e.data(this[0].form, "validator"),
                                    i = "on" + n.type.replace(/^validate/, "");
                                r.settings[i] && r.settings[i].call(r, this[0], n)
                            }
                            this.labelContainer = e(this.settings.errorLabelContainer), this.errorContext = this.labelContainer.length && this.labelContainer || e(this.currentForm), this.containers = e(this.settings.errorContainer).add(this.settings.errorLabelContainer), this.submitted = {}, this.valueCache = {}, this.pendingRequest = 0, this.pending = {}, this.invalid = {}, this.reset();
                            var r = this.groups = {};
                            e.each(this.settings.groups, function(n, i) {
                                "string" == typeof i && (i = i.split(/\s/)), e.each(i, function(e, t) {
                                    r[t] = n
                                })
                            });
                            var i = this.settings.rules;
                            e.each(i, function(n, r) {
                                i[n] = e.validator.normalizeRule(r)
                            }), e(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ", "focusin focusout keyup", n).validateDelegate("[type='radio'], [type='checkbox'], select, option", "click", n), this.settings.invalidHandler && e(this.currentForm).bind("invalid-form.validate", this.settings.invalidHandler)
                        },
                        form: function() {
                            return this.checkForm(), e.extend(this.submitted, this.errorMap), this.invalid = e.extend({}, this.errorMap), this.valid() || e(this.currentForm).triggerHandler("invalid-form", [this]), this.showErrors(), this.valid()
                        },
                        checkForm: function() {
                            this.prepareForm();
                            for (var e = 0, t = this.currentElements = this.elements(); t[e]; e++) this.check(t[e]);
                            return this.valid()
                        },
                        element: function(n) {
                            n = this.validationTargetFor(this.clean(n)), this.lastElement = n, this.prepareElement(n), this.currentElements = e(n);
                            var r = this.check(n) !== !1;
                            return r ? delete this.invalid[n.name] : this.invalid[n.name] = !0, this.numberOfInvalids() || (this.toHide = this.toHide.add(this.containers)), this.showErrors(), r
                        },
                        showErrors: function(n) {
                            if (n) {
                                e.extend(this.errorMap, n), this.errorList = [];
                                for (var r in n) this.errorList.push({
                                    message: n[r],
                                    element: this.findByName(r)[0]
                                });
                                this.successList = e.grep(this.successList, function(e) {
                                    return !(e.name in n)
                                })
                            }
                            this.settings.showErrors ? this.settings.showErrors.call(this, this.errorMap, this.errorList) : this.defaultShowErrors()
                        },
                        resetForm: function() {
                            e.fn.resetForm && e(this.currentForm).resetForm(), this.submitted = {}, this.lastElement = null, this.prepareForm(), this.hideErrors(), this.elements().removeClass(this.settings.errorClass).removeData("previousValue")
                        },
                        numberOfInvalids: function() {
                            return this.objectLength(this.invalid)
                        },
                        objectLength: function(e) {
                            var t = 0;
                            for (var n in e) t++;
                            return t
                        },
                        hideErrors: function() {
                            this.addWrapper(this.toHide).hide()
                        },
                        valid: function() {
                            return 0 === this.size()
                        },
                        size: function() {
                            return this.errorList.length
                        },
                        focusInvalid: function() {
                            if (this.settings.focusInvalid) try {
                                e(this.findLastActive() || this.errorList.length && this.errorList[0].element || []).filter(":visible").focus().trigger("focusin")
                            } catch (n) {}
                        },
                        findLastActive: function() {
                            var n = this.lastActive;
                            return n && 1 === e.grep(this.errorList, function(e) {
                                return e.element.name === n.name
                            }).length && n
                        },
                        elements: function() {
                            var n = this,
                                r = {};
                            return e(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function() {
                                return !this.name && n.settings.debug && window.console && console.error("%o has no name assigned", this), this.name in r || !n.objectLength(e(this).rules()) ? !1 : (r[this.name] = !0, !0)
                            })
                        },
                        clean: function(n) {
                            return e(n)[0]
                        },
                        errors: function() {
                            var n = this.settings.errorClass.replace(" ", ".");
                            return e(this.settings.errorElement + "." + n, this.errorContext)
                        },
                        reset: function() {
                            this.successList = [], this.errorList = [], this.errorMap = {}, this.toShow = e([]), this.toHide = e([]), this.currentElements = e([])
                        },
                        prepareForm: function() {
                            this.reset(), this.toHide = this.errors().add(this.containers)
                        },
                        prepareElement: function(e) {
                            this.reset(), this.toHide = this.errorsFor(e)
                        },
                        elementValue: function(n) {
                            var r = e(n).attr("type"),
                                i = e(n).val();
                            return "radio" === r || "checkbox" === r ? e("input[name='" + e(n).attr("name") + "']:checked").val() : "string" == typeof i ? i.replace(/\r/g, "") : i
                        },
                        check: function(n) {
                            n = this.validationTargetFor(this.clean(n));
                            var r, i = e(n).rules(),
                                s = !1,
                                o = this.elementValue(n);
                            for (var u in i) {
                                var a = {
                                    method: u,
                                    parameters: i[u]
                                };
                                try {
                                    if (r = e.validator.methods[u].call(this, o, n, a.parameters), "dependency-mismatch" === r) {
                                        s = !0;
                                        continue
                                    }
                                    if (s = !1, "pending" === r) return this.toHide = this.toHide.not(this.errorsFor(n)), void 0;
                                    if (!r) return this.formatAndAdd(n, a), !1
                                } catch (f) {
                                    throw this.settings.debug && window.console && console.log("Exception occurred when checking element " + n.id + ", check the '" + a.method + "' method.", f), f
                                }
                            }
                            return s ? void 0 : (this.objectLength(i) && this.successList.push(n), !0)
                        },
                        customDataMessage: function(n, r) {
                            return e(n).data("msg-" + r.toLowerCase()) || n.attributes && e(n).attr("data-msg-" + r.toLowerCase())
                        },
                        customMessage: function(e, t) {
                            var n = this.settings.messages[e];
                            return n && (n.constructor === String ? n : n[t])
                        },
                        findDefined: function() {
                            for (var e = 0; arguments.length > e; e++)
                                if (void 0 !== arguments[e]) return arguments[e];
                            return void 0
                        },
                        defaultMessage: function(n, r) {
                            return this.findDefined(this.customMessage(n.name, r), this.customDataMessage(n, r), !this.settings.ignoreTitle && n.title || void 0, e.validator.messages[r], "<strong>Warning: No message defined for " + n.name + "</strong>")
                        },
                        formatAndAdd: function(n, r) {
                            var i = this.defaultMessage(n, r.method),
                                s = /\$?\{(\d+)\}/g;
                            "function" == typeof i ? i = i.call(this, r.parameters, n) : s.test(i) && (i = e.validator.format(i.replace(s, "{$1}"), r.parameters)), this.errorList.push({
                                message: i,
                                element: n
                            }), this.errorMap[n.name] = i, this.submitted[n.name] = i
                        },
                        addWrapper: function(e) {
                            return this.settings.wrapper && (e = e.add(e.parent(this.settings.wrapper))), e
                        },
                        defaultShowErrors: function() {
                            var e, t;
                            for (e = 0; this.errorList[e]; e++) {
                                var n = this.errorList[e];
                                this.settings.highlight && this.settings.highlight.call(this, n.element, this.settings.errorClass, this.settings.validClass), this.showLabel(n.element, n.message)
                            }
                            if (this.errorList.length && (this.toShow = this.toShow.add(this.containers)), this.settings.success)
                                for (e = 0; this.successList[e]; e++) this.showLabel(this.successList[e]);
                            if (this.settings.unhighlight)
                                for (e = 0, t = this.validElements(); t[e]; e++) this.settings.unhighlight.call(this, t[e], this.settings.errorClass, this.settings.validClass);
                            this.toHide = this.toHide.not(this.toShow), this.hideErrors(), this.addWrapper(this.toShow).show()
                        },
                        validElements: function() {
                            return this.currentElements.not(this.invalidElements())
                        },
                        invalidElements: function() {
                            return e(this.errorList).map(function() {
                                return this.element
                            })
                        },
                        showLabel: function(n, r) {
                            var i = this.errorsFor(n);
                            i.length ? (i.removeClass(this.settings.validClass).addClass(this.settings.errorClass), i.html(r)) : (i = e("<" + this.settings.errorElement + ">").attr("for", this.idOrName(n)).addClass(this.settings.errorClass).html(r || ""), this.settings.wrapper && (i = i.hide().show().wrap("<" + this.settings.wrapper + "/>").parent()), this.labelContainer.append(i).length || (this.settings.errorPlacement ? this.settings.errorPlacement(i, e(n)) : i.insertAfter(n))), !r && this.settings.success && (i.text(""), "string" == typeof this.settings.success ? i.addClass(this.settings.success) : this.settings.success(i, n)), this.toShow = this.toShow.add(i)
                        },
                        errorsFor: function(n) {
                            var r = this.idOrName(n);
                            return this.errors().filter(function() {
                                return e(this).attr("for") === r
                            })
                        },
                        idOrName: function(e) {
                            return this.groups[e.name] || (this.checkable(e) ? e.name : e.id || e.name)
                        },
                        validationTargetFor: function(e) {
                            return this.checkable(e) && (e = this.findByName(e.name).not(this.settings.ignore)[0]), e
                        },
                        checkable: function(e) {
                            return /radio|checkbox/i.test(e.type)
                        },
                        findByName: function(n) {
                            return e(this.currentForm).find("[name='" + n + "']")
                        },
                        getLength: function(n, r) {
                            switch (r.nodeName.toLowerCase()) {
                                case "select":
                                    return e("option:selected", r).length;
                                case "input":
                                    if (this.checkable(r)) return this.findByName(r.name).filter(":checked").length
                            }
                            return n.length
                        },
                        depend: function(e, t) {
                            return this.dependTypes[typeof e] ? this.dependTypes[typeof e](e, t) : !0
                        },
                        dependTypes: {
                            "boolean": function(e) {
                                return e
                            },
                            string: function(n, r) {
                                return !!e(n, r.form).length
                            },
                            "function": function(e, t) {
                                return e(t)
                            }
                        },
                        optional: function(n) {
                            var r = this.elementValue(n);
                            return !e.validator.methods.required.call(this, r, n) && "dependency-mismatch"
                        },
                        startRequest: function(e) {
                            this.pending[e.name] || (this.pendingRequest++, this.pending[e.name] = !0)
                        },
                        stopRequest: function(n, r) {
                            this.pendingRequest--, 0 > this.pendingRequest && (this.pendingRequest = 0), delete this.pending[n.name], r && 0 === this.pendingRequest && this.formSubmitted && this.form() ? (e(this.currentForm).submit(), this.formSubmitted = !1) : !r && 0 === this.pendingRequest && this.formSubmitted && (e(this.currentForm).triggerHandler("invalid-form", [this]), this.formSubmitted = !1)
                        },
                        previousValue: function(n) {
                            return e.data(n, "previousValue") || e.data(n, "previousValue", {
                                old: null,
                                valid: !0,
                                message: this.defaultMessage(n, "remote")
                            })
                        }
                    },
                    classRuleSettings: {
                        required: {
                            required: !0
                        },
                        email: {
                            email: !0
                        },
                        url: {
                            url: !0
                        },
                        date: {
                            date: !0
                        },
                        dateISO: {
                            dateISO: !0
                        },
                        number: {
                            number: !0
                        },
                        digits: {
                            digits: !0
                        },
                        creditcard: {
                            creditcard: !0
                        }
                    },
                    addClassRules: function(n, r) {
                        n.constructor === String ? this.classRuleSettings[n] = r : e.extend(this.classRuleSettings, n)
                    },
                    classRules: function(n) {
                        var r = {},
                            i = e(n).attr("class");
                        return i && e.each(i.split(" "), function() {
                            this in e.validator.classRuleSettings && e.extend(r, e.validator.classRuleSettings[this])
                        }), r
                    },
                    attributeRules: function(n) {
                        var r = {},
                            i = e(n),
                            s = i[0].getAttribute("type");
                        for (var o in e.validator.methods) {
                            var u;
                            "required" === o ? (u = i.get(0).getAttribute(o), "" === u && (u = !0), u = !!u) : u = i.attr(o), /min|max/.test(o) && (null === s || /number|range|text/.test(s)) && (u = Number(u)), u ? r[o] = u : s === o && "range" !== s && (r[o] = !0)
                        }
                        return r.maxlength && /-1|2147483647|524288/.test(r.maxlength) && delete r.maxlength, r
                    },
                    dataRules: function(n) {
                        var r, i, s = {},
                            o = e(n);
                        for (r in e.validator.methods) i = o.data("rule-" + r.toLowerCase()), void 0 !== i && (s[r] = i);
                        return s
                    },
                    staticRules: function(n) {
                        var r = {},
                            i = e.data(n.form, "validator");
                        return i.settings.rules && (r = e.validator.normalizeRule(i.settings.rules[n.name]) || {}), r
                    },
                    normalizeRules: function(n, r) {
                        return e.each(n, function(s, o) {
                            if (o === !1) return delete n[s], void 0;
                            if (o.param || o.depends) {
                                var u = !0;
                                switch (typeof o.depends) {
                                    case "string":
                                        u = !!e(o.depends, r.form).length;
                                        break;
                                    case "function":
                                        u = o.depends.call(r, r)
                                }
                                u ? n[s] = void 0 !== o.param ? o.param : !0 : delete n[s]
                            }
                        }), e.each(n, function(s, o) {
                            n[s] = e.isFunction(o) ? o(r) : o
                        }), e.each(["minlength", "maxlength"], function() {
                            n[this] && (n[this] = Number(n[this]))
                        }), e.each(["rangelength", "range"], function() {
                            var r;
                            n[this] && (e.isArray(n[this]) ? n[this] = [Number(n[this][0]), Number(n[this][1])] : "string" == typeof n[this] && (r = n[this].split(/[\s,]+/), n[this] = [Number(r[0]), Number(r[1])]))
                        }), e.validator.autoCreateRanges && (n.min && n.max && (n.range = [n.min, n.max], delete n.min, delete n.max), n.minlength && n.maxlength && (n.rangelength = [n.minlength, n.maxlength], delete n.minlength, delete n.maxlength)), n
                    },
                    normalizeRule: function(n) {
                        if ("string" == typeof n) {
                            var r = {};
                            e.each(n.split(/\s/), function() {
                                r[this] = !0
                            }), n = r
                        }
                        return n
                    },
                    addMethod: function(n, r, i) {
                        e.validator.methods[n] = r, e.validator.messages[n] = void 0 !== i ? i : e.validator.messages[n], 3 > r.length && e.validator.addClassRules(n, e.validator.normalizeRule(n))
                    },
                    methods: {
                        required: function(n, r, i) {
                            if (!this.depend(i, r)) return "dependency-mismatch";
                            if ("select" === r.nodeName.toLowerCase()) {
                                var s = e(r).val();
                                return s && s.length > 0
                            }
                            return this.checkable(r) ? this.getLength(n, r) > 0 : e.trim(n).length > 0
                        },
                        email: function(e, t) {
                            return this.optional(t) || /^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)
                        },
                        url: function(e, t) {
                            return this.optional(t) || /^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)
                        },
                        date: function(e, t) {
                            return this.optional(t) || !/Invalid|NaN/.test("" + new Date(e))
                        },
                        dateISO: function(e, t) {
                            return this.optional(t) || /^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(e)
                        },
                        number: function(e, t) {
                            return this.optional(t) || /^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)
                        },
                        digits: function(e, t) {
                            return this.optional(t) || /^\d+$/.test(e)
                        },
                        creditcard: function(e, t) {
                            if (this.optional(t)) return "dependency-mismatch";
                            if (/[^0-9 \-]+/.test(e)) return !1;
                            var n = 0,
                                r = 0,
                                i = !1;
                            e = e.replace(/\D/g, "");
                            for (var s = e.length - 1; s >= 0; s--) {
                                var o = e.charAt(s);
                                r = parseInt(o, 10), i && (r *= 2) > 9 && (r -= 9), n += r, i = !i
                            }
                            return 0 === n % 10
                        },
                        minlength: function(n, r, i) {
                            var s = e.isArray(n) ? n.length : this.getLength(e.trim(n), r);
                            return this.optional(r) || s >= i
                        },
                        maxlength: function(n, r, i) {
                            var s = e.isArray(n) ? n.length : this.getLength(e.trim(n), r);
                            return this.optional(r) || i >= s
                        },
                        rangelength: function(n, r, i) {
                            var s = e.isArray(n) ? n.length : this.getLength(e.trim(n), r);
                            return this.optional(r) || s >= i[0] && i[1] >= s
                        },
                        min: function(e, t, n) {
                            return this.optional(t) || e >= n
                        },
                        max: function(e, t, n) {
                            return this.optional(t) || n >= e
                        },
                        range: function(e, t, n) {
                            return this.optional(t) || e >= n[0] && n[1] >= e
                        },
                        equalTo: function(n, r, i) {
                            var s = e(i);
                            return this.settings.onfocusout && s.unbind(".validate-equalTo").bind("blur.validate-equalTo", function() {
                                e(r).valid()
                            }), n === s.val()
                        },
                        remote: function(n, r, i) {
                            if (this.optional(r)) return "dependency-mismatch";
                            var s = this.previousValue(r);
                            if (this.settings.messages[r.name] || (this.settings.messages[r.name] = {}), s.originalMessage = this.settings.messages[r.name].remote, this.settings.messages[r.name].remote = s.message, i = "string" == typeof i && {
                                    url: i
                                } || i, s.old === n) return s.valid;
                            s.old = n;
                            var o = this;
                            this.startRequest(r);
                            var u = {};
                            return u[r.name] = n, e.ajax(e.extend(!0, {
                                url: i,
                                mode: "abort",
                                port: "validate" + r.name,
                                dataType: "json",
                                data: u,
                                success: function(i) {
                                    o.settings.messages[r.name].remote = s.originalMessage;
                                    var u = i === !0 || "true" === i;
                                    if (u) {
                                        var a = o.formSubmitted;
                                        o.prepareElement(r), o.formSubmitted = a, o.successList.push(r), delete o.invalid[r.name], o.showErrors()
                                    } else {
                                        var f = {},
                                            l = i || o.defaultMessage(r, "remote");
                                        f[r.name] = s.message = e.isFunction(l) ? l(n) : l, o.invalid[r.name] = !0, o.showErrors(f)
                                    }
                                    s.valid = u, o.stopRequest(r, u)
                                }
                            }, i)), "pending"
                        }
                    }
                }), e.format = e.validator.format
            })(jQuery),
            function(e) {
                var t = {};
                if (e.ajaxPrefilter) e.ajaxPrefilter(function(e, n, r) {
                    var i = e.port;
                    "abort" === e.mode && (t[i] && t[i].abort(), t[i] = r)
                });
                else {
                    var n = e.ajax;
                    e.ajax = function(r) {
                        var s = ("mode" in r ? r : e.ajaxSettings).mode,
                            o = ("port" in r ? r : e.ajaxSettings).port;
                        return "abort" === s ? (t[o] && t[o].abort(), t[o] = n.apply(this, arguments), t[o]) : n.apply(this, arguments)
                    }
                }
            }(jQuery),
            function(e) {
                e.extend(e.fn, {
                    validateDelegate: function(n, r, i) {
                        return this.bind(r, function(r) {
                            var o = e(r.target);
                            return o.is(n) ? i.apply(o, arguments) : void 0
                        })
                    }
                })
            }(jQuery);
            (function(e) {
                e.widget("ui.formwizard", {
                    _init: function() {
                        var t = this;
                        var n = this.options.formOptions.success;
                        var r = this.options.formOptions.complete;
                        var i = this.options.formOptions.beforeSend;
                        var s = this.options.formOptions.beforeSubmit;
                        var o = this.options.formOptions.beforeSerialize;
                        this.options.formOptions = e.extend(this.options.formOptions, {
                            success: function(e, r, i) {
                                if (n) {
                                    n(e, r, i)
                                }
                                if (t.options.formOptions && t.options.formOptions.resetForm || !t.options.formOptions) {
                                    t._reset()
                                }
                            },
                            complete: function(e, n) {
                                if (r) {
                                    r(e, n)
                                }
                                t._enableNavigation()
                            },
                            beforeSubmit: function(e, n, r) {
                                if (s) {
                                    var i = s(e, n, r);
                                    if (!i) t._enableNavigation();
                                    return i
                                }
                            },
                            beforeSend: function(e) {
                                if (i) {
                                    var n = i(e);
                                    if (!n) t._enableNavigation();
                                    return n
                                }
                            },
                            beforeSerialize: function(e, n) {
                                if (o) {
                                    var r = o(e, n);
                                    if (!r) t._enableNavigation();
                                    return r
                                }
                            }
                        });
                        if (this.options.historyEnabled) {
                            e.bbq.removeState("_" + e(this.element).attr("id"))
                        }
                        this.steps = this.element.find(".step").hide();
                        this.firstStep = this.steps.eq(0).attr("id");
                        this.activatedSteps = new Array;
                        this.isLastStep = false;
                        this.previousStep = undefined;
                        this.currentStep = this.steps.eq(0).attr("id");
                        this.nextButton = this.element.find(this.options.next).click(function() {
                            return t._next()
                        });
                        this.nextButtonInitinalValue = this.nextButton.val();
                        this.nextButton.val(this.options.textNext);
                        this.backButton = this.element.find(this.options.back).click(function() {
                            t._back();
                            return false
                        });
                        this.backButtonInitinalValue = this.backButton.val();
                        this.backButton.val(this.options.textBack);
                        if (this.options.validationEnabled && jQuery().validate == undefined) {
                            this.options.validationEnabled = false;
                            if (window["console"] !== undefined) {
                                console.log("%s", "validationEnabled option set, but the validation plugin is not included")
                            }
                        } else if (this.options.validationEnabled) {
                            this.element.validate(this.options.validationOptions)
                        }
                        if (this.options.formPluginEnabled && jQuery().ajaxSubmit == undefined) {
                            this.options.formPluginEnabled = false;
                            if (window["console"] !== undefined) {
                                console.log("%s", "formPluginEnabled option set but the form plugin is not included")
                            }
                        }
                        if (this.options.disableInputFields == true) {
                            e(this.steps).find(":input:not('.wizard-ignore')").attr("disabled", "disabled")
                        }
                        if (this.options.historyEnabled) {
                            e(window).bind("hashchange", undefined, function(n) {
                                var r = n.getState("_" + e(t.element).attr("id")) || t.firstStep;
                                if (r !== t.currentStep) {
                                    if (t.options.validationEnabled && r === t._navigate(t.currentStep)) {
                                        if (!t.element.valid()) {
                                            t._updateHistory(t.currentStep);
                                            t.element.validate().focusInvalid();
                                            return false
                                        }
                                    }
                                    if (r !== t.currentStep) t._show(r)
                                }
                            })
                        }
                        this.element.addClass("ui-formwizard");
                        this.element.find(":input").addClass("ui-wizard-content");
                        this.steps.addClass("ui-formwizard-content");
                        this.backButton.addClass("ui-formwizard-button ui-wizard-content");
                        this.nextButton.addClass("ui-formwizard-button ui-wizard-content");
                        if (!this.options.disableUIStyles) {
                            this.element.addClass("ui-helper-reset ui-widget ui-widget-content ui-helper-reset ui-corner-all");
                            this.element.find(":input").addClass("ui-helper-reset ui-state-default");
                            this.steps.addClass("ui-helper-reset ui-corner-all");
                            this.backButton.addClass("ui-helper-reset ui-state-default");
                            this.nextButton.addClass("ui-helper-reset ui-state-default")
                        }
                        this._show(undefined);
                        return e(this)
                    },
                    _next: function() {
                        if (this.options.validationEnabled) {
                            if (!this.element.valid()) {
                                this.element.validate().focusInvalid();
                                return false
                            }
                        }
                        if (this.options.remoteAjax != undefined) {
                            var t = this.options.remoteAjax[this.currentStep];
                            var n = this;
                            if (t !== undefined) {
                                var r = t.success;
                                var i = t.beforeSend;
                                var s = t.complete;
                                t = e.extend({}, t, {
                                    success: function(e, t) {
                                        if (r !== undefined && r(e, t) || r == undefined) {
                                            n._continueToNextStep()
                                        }
                                    },
                                    beforeSend: function(t) {
                                        n._disableNavigation();
                                        if (i !== undefined) i(t);
                                        e(n.element).trigger("before_remote_ajax", {
                                            currentStep: n.currentStep
                                        })
                                    },
                                    complete: function(t, r) {
                                        if (s !== undefined) s(t, r);
                                        e(n.element).trigger("after_remote_ajax", {
                                            currentStep: n.currentStep
                                        });
                                        n._enableNavigation()
                                    }
                                });
                                this.element.ajaxSubmit(t);
                                return false
                            }
                        }
                        return this._continueToNextStep()
                    },
                    _back: function() {
                        if (this.activatedSteps.length > 0) {
                            if (this.options.historyEnabled) {
                                this._updateHistory(this.activatedSteps[this.activatedSteps.length - 2])
                            } else {
                                this._show(this.activatedSteps[this.activatedSteps.length - 2], true)
                            }
                        }
                        return false
                    },
                    _continueToNextStep: function() {
                        if (this.isLastStep) {
                            for (var e = 0; e < this.activatedSteps.length; e++) {
                                this.steps.filter("#" + this.activatedSteps[e]).find(":input").not(".wizard-ignore").removeAttr("disabled")
                            }
                            if (!this.options.formPluginEnabled) {
                                return true
                            } else {
                                this._disableNavigation();
                                this.element.ajaxSubmit(this.options.formOptions);
                                return false
                            }
                        }
                        var t = this._navigate(this.currentStep);
                        if (t == this.currentStep) {
                            return false
                        }
                        if (this.options.historyEnabled) {
                            this._updateHistory(t)
                        } else {
                            this._show(t, true)
                        }
                        return false
                    },
                    _updateHistory: function(t) {
                        var n = {};
                        n["_" + e(this.element).attr("id")] = t;
                        e.bbq.pushState(n)
                    },
                    _disableNavigation: function() {
                        this.nextButton.attr("disabled", "disabled");
                        this.backButton.attr("disabled", "disabled");
                        if (!this.options.disableUIStyles) {
                            this.nextButton.removeClass("ui-state-active").addClass("ui-state-disabled");
                            this.backButton.removeClass("ui-state-active").addClass("ui-state-disabled")
                        }
                    },
                    _enableNavigation: function() {
                        if (this.isLastStep) {
                            this.nextButton.val(this.options.textSubmit)
                        } else {
                            this.nextButton.val(this.options.textNext)
                        }
                        if (e.trim(this.currentStep) !== this.steps.eq(0).attr("id")) {
                            this.backButton.removeAttr("disabled");
                            if (!this.options.disableUIStyles) {
                                this.backButton.removeClass("ui-state-disabled").addClass("ui-state-active")
                            }
                        }
                        this.nextButton.removeAttr("disabled");
                        if (!this.options.disableUIStyles) {
                            this.nextButton.removeClass("ui-state-disabled").addClass("ui-state-active")
                        }
                    },
                    _animate: function(e, t, n) {
                        this._disableNavigation();
                        var r = this.steps.filter("#" + e);
                        var i = this.steps.filter("#" + t);
                        r.find(":input").not(".wizard-ignore").attr("disabled", "disabled");
                        i.find(":input").not(".wizard-ignore").removeAttr("disabled");
                        var s = this;
                        r.animate(s.options.outAnimation, s.options.outDuration, s.options.easing, function() {
                            i.animate(s.options.inAnimation, s.options.inDuration, s.options.easing, function() {
                                if (s.options.focusFirstInput) i.find(":input:first").focus();
                                s._enableNavigation();
                                n.apply(s)
                            });
                            return
                        })
                    },
                    _checkIflastStep: function(t) {
                        this.isLastStep = false;
                        if (e("#" + t).hasClass(this.options.submitStepClass) || this.steps.filter(":last").attr("id") == t) {
                            this.isLastStep = true
                        }
                    },
                    _getLink: function(t) {
                        var n = undefined;
                        var r = this.steps.filter("#" + t).find(this.options.linkClass);
                        if (r != undefined) {
                            if (r.filter(":radio,:checkbox").size() > 0) {
                                n = r.filter(this.options.linkClass + ":checked").val()
                            } else {
                                n = e(r).val()
                            }
                        }
                        return n
                    },
                    _navigate: function(e) {
                        var t = this._getLink(e);
                        if (t != undefined) {
                            if (t != "" && t != null && t != undefined && this.steps.filter("#" + t).attr("id") != undefined) {
                                return t
                            }
                            return this.currentStep
                        } else if (t == undefined && !this.isLastStep) {
                            var n = this.steps.filter("#" + e).next().attr("id");
                            return n
                        }
                    },
                    _show: function(t) {
                        var n = false;
                        var r = t !== undefined;
                        if (t == undefined || t == "") {
                            this.activatedSteps.pop();
                            t = this.firstStep;
                            this.activatedSteps.push(t)
                        } else {
                            if (e.inArray(t, this.activatedSteps) > -1) {
                                n = true;
                                this.activatedSteps.pop()
                            } else {
                                this.activatedSteps.push(t)
                            }
                        }
                        if (this.currentStep !== t || t === this.firstStep) {
                            this.previousStep = this.currentStep;
                            this._checkIflastStep(t);
                            this.currentStep = t;
                            var i = function() {
                                if (r) {
                                    e(this.element).trigger("step_shown", e.extend({
                                        isBackNavigation: n
                                    }, this._state()))
                                }
                            };
                            if (r) {
                                e(this.element).trigger("before_step_shown", e.extend({
                                    isBackNavigation: n
                                }, this._state()))
                            }
                            this._animate(this.previousStep, t, i)
                        }
                    },
                    _reset: function() {
                        this.element.resetForm();
                        e("label,:input,textarea", this).removeClass("error");
                        for (var t = 0; t < this.activatedSteps.length; t++) {
                            this.steps.filter("#" + this.activatedSteps[t]).hide().find(":input").attr("disabled", "disabled")
                        }
                        this.activatedSteps = new Array;
                        this.previousStep = undefined;
                        this.isLastStep = false;
                        if (this.options.historyEnabled) {
                            this._updateHistory(this.firstStep)
                        } else {
                            this._show(this.firstStep)
                        }
                    },
                    _state: function(e) {
                        var t = {
                            settings: this.options,
                            activatedSteps: this.activatedSteps,
                            isLastStep: this.isLastStep,
                            isFirstStep: this.currentStep === this.firstStep,
                            previousStep: this.previousStep,
                            currentStep: this.currentStep,
                            backButton: this.backButton,
                            nextButton: this.nextButton,
                            steps: this.steps,
                            firstStep: this.firstStep
                        };
                        if (e !== undefined) return t[e];
                        return t
                    },
                    show: function(e) {
                        if (this.options.historyEnabled) {
                            this._updateHistory(e)
                        } else {
                            this._show(e)
                        }
                    },
                    state: function(e) {
                        return this._state(e)
                    },
                    reset: function() {
                        this._reset()
                    },
                    next: function() {
                        this._next()
                    },
                    back: function() {
                        this._back()
                    },
                    destroy: function() {
                        this.element.find("*").removeAttr("disabled").show();
                        this.nextButton.unbind("click").val(this.nextButtonInitinalValue).removeClass("ui-state-disabled").addClass("ui-state-active");
                        this.backButton.unbind("click").val(this.backButtonInitinalValue).removeClass("ui-state-disabled").addClass("ui-state-active");
                        this.backButtonInitinalValue = undefined;
                        this.nextButtonInitinalValue = undefined;
                        this.activatedSteps = undefined;
                        this.previousStep = undefined;
                        this.currentStep = undefined;
                        this.isLastStep = undefined;
                        this.options = undefined;
                        this.nextButton = undefined;
                        this.backButton = undefined;
                        this.formwizard = undefined;
                        this.element = undefined;
                        this.steps = undefined;
                        this.firstStep = undefined
                    },
                    update_steps: function() {
                        this.steps = this.element.find(".step").addClass("ui-formwizard-content");
                        this.firstStep = this.steps.eq(0).attr("id");
                        this.steps.not("#" + this.currentStep).hide().find(":input").addClass("ui-wizard-content").attr("disabled", "disabled");
                        this._checkIflastStep(this.currentStep);
                        this._enableNavigation();
                        if (!this.options.disableUIStyles) {
                            this.steps.addClass("ui-helper-reset ui-corner-all");
                            this.steps.find(":input").addClass("ui-helper-reset ui-state-default")
                        }
                    },
                    options: {
                        historyEnabled: false,
                        validationEnabled: false,
                        validationOptions: undefined,
                        formPluginEnabled: false,
                        linkClass: ".link",
                        submitStepClass: "submit_step",
                        back: ":reset",
                        next: ":submit",
                        textSubmit: "Submit",
                        textNext: "Next",
                        textBack: "Back",
                        remoteAjax: undefined,
                        inAnimation: {
                            opacity: "show"
                        },
                        outAnimation: {
                            opacity: "hide"
                        },
                        inDuration: 400,
                        outDuration: 400,
                        easing: "swing",
                        focusFirstInput: false,
                        disableInputFields: true,
                        formOptions: {
                            reset: true,
                            success: function(e) {
                                if (window["console"] !== undefined) {
                                    console.log("%s", "form submit successful")
                                }
                            },
                            disableUIStyles: false
                        }
                    }
                })
            })(jQuery);
            (function() {
                var e = /\blang(?:uage)?-(?!\*)(\w+)\b/i,
                    t = self.Prism = {
                        util: {
                            type: function(e) {
                                return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]
                            },
                            clone: function(e) {
                                var n = t.util.type(e);
                                switch (n) {
                                    case "Object":
                                        var r = {};
                                        for (var i in e) e.hasOwnProperty(i) && (r[i] = t.util.clone(e[i]));
                                        return r;
                                    case "Array":
                                        return e.slice()
                                }
                                return e
                            }
                        },
                        languages: {
                            extend: function(e, n) {
                                var r = t.util.clone(t.languages[e]);
                                for (var i in n) r[i] = n[i];
                                return r
                            },
                            insertBefore: function(e, n, r, i) {
                                i = i || t.languages;
                                var s = i[e],
                                    o = {};
                                for (var u in s)
                                    if (s.hasOwnProperty(u)) {
                                        if (u == n)
                                            for (var a in r) r.hasOwnProperty(a) && (o[a] = r[a]);
                                        o[u] = s[u]
                                    }
                                return i[e] = o
                            },
                            DFS: function(e, n) {
                                for (var r in e) {
                                    n.call(e, r, e[r]);
                                    t.util.type(e) === "Object" && t.languages.DFS(e[r], n)
                                }
                            }
                        },
                        highlightAll: function(e, n) {
                            var r = document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code');
                            for (var i = 0, s; s = r[i++];) t.highlightElement(s, e === !0, n)
                        },
                        highlightElement: function(r, i, s) {
                            var o, u, a = r;
                            while (a && !e.test(a.className)) a = a.parentNode;
                            if (a) {
                                o = (a.className.match(e) || [, ""])[1];
                                u = t.languages[o]
                            }
                            if (!u) return;
                            r.className = r.className.replace(e, "").replace(/\s+/g, " ") + " language-" + o;
                            a = r.parentNode;
                            /pre/i.test(a.nodeName) && (a.className = a.className.replace(e, "").replace(/\s+/g, " ") + " language-" + o);
                            var f = r.textContent;
                            if (!f) return;
                            f = f.replace(/&/g, "&").replace(/</g, "<").replace(/>/g, ">").replace(/\u00a0/g, " ");
                            var l = {
                                element: r,
                                language: o,
                                grammar: u,
                                code: f
                            };
                            t.hooks.run("before-highlight", l);
                            if (i && self.Worker) {
                                var c = new Worker(t.filename);
                                c.onmessage = function(e) {
                                    l.highlightedCode = n.stringify(JSON.parse(e.data), o);
                                    t.hooks.run("before-insert", l);
                                    l.element.innerHTML = l.highlightedCode;
                                    s && s.call(l.element);
                                    t.hooks.run("after-highlight", l)
                                };
                                c.postMessage(JSON.stringify({
                                    language: l.language,
                                    code: l.code
                                }))
                            } else {
                                l.highlightedCode = t.highlight(l.code, l.grammar, l.language);
                                t.hooks.run("before-insert", l);
                                l.element.innerHTML = l.highlightedCode;
                                s && s.call(r);
                                t.hooks.run("after-highlight", l)
                            }
                        },
                        highlight: function(e, r, i) {
                            return n.stringify(t.tokenize(e, r), i)
                        },
                        tokenize: function(e, n, r) {
                            var i = t.Token,
                                s = [e],
                                o = n.rest;
                            if (o) {
                                for (var u in o) n[u] = o[u];
                                delete n.rest
                            }
                            e: for (var u in n) {
                                if (!n.hasOwnProperty(u) || !n[u]) continue;
                                var a = n[u],
                                    f = a.inside,
                                    l = !!a.lookbehind || 0;
                                a = a.pattern || a;
                                for (var c = 0; c < s.length; c++) {
                                    var h = s[c];
                                    if (s.length > e.length) break e;
                                    if (h instanceof i) continue;
                                    a.lastIndex = 0;
                                    var p = a.exec(h);
                                    if (p) {
                                        l && (l = p[1].length);
                                        var d = p.index - 1 + l,
                                            p = p[0].slice(l),
                                            v = p.length,
                                            m = d + v,
                                            g = h.slice(0, d + 1),
                                            y = h.slice(m + 1),
                                            b = [c, 1];
                                        g && b.push(g);
                                        var w = new i(u, f ? t.tokenize(p, f) : p);
                                        b.push(w);
                                        y && b.push(y);
                                        Array.prototype.splice.apply(s, b)
                                    }
                                }
                            }
                            return s
                        },
                        hooks: {
                            all: {},
                            add: function(e, n) {
                                var r = t.hooks.all;
                                r[e] = r[e] || [];
                                r[e].push(n)
                            },
                            run: function(e, n) {
                                var r = t.hooks.all[e];
                                if (!r || !r.length) return;
                                for (var i = 0, s; s = r[i++];) s(n)
                            }
                        }
                    },
                    n = t.Token = function(e, t) {
                        this.type = e;
                        this.content = t
                    };
                n.stringify = function(e, r, i) {
                    if (typeof e == "string") return e;
                    if (Object.prototype.toString.call(e) == "[object Array]") return e.map(function(t) {
                        return n.stringify(t, r, e)
                    }).join("");
                    var s = {
                        type: e.type,
                        content: n.stringify(e.content, r, i),
                        tag: "span",
                        classes: ["token", e.type],
                        attributes: {},
                        language: r,
                        parent: i
                    };
                    s.type == "comment" && (s.attributes.spellcheck = "true");
                    t.hooks.run("wrap", s);
                    var o = "";
                    for (var u in s.attributes) o += u + '="' + (s.attributes[u] || "") + '"';
                    return "<" + s.tag + ' class="' + s.classes.join(" ") + '" ' + o + ">" + s.content + "</" + s.tag + ">"
                };
                if (!self.document) {
                    self.addEventListener("message", function(e) {
                        var n = JSON.parse(e.data),
                            r = n.language,
                            i = n.code;
                        self.postMessage(JSON.stringify(t.tokenize(i, t.languages[r])));
                        self.close()
                    }, !1);
                    return
                }
                var r = document.getElementsByTagName("script");
                r = r[r.length - 1];
                if (r) {
                    t.filename = r.src;
                    document.addEventListener && !r.hasAttribute("data-manual") && document.addEventListener("DOMContentLoaded", t.highlightAll)
                }
            })();
            (function() {
                function e(e, t) {
                    return Array.prototype.slice.call((t || document).querySelectorAll(e))
                }

                function t(e, t, n) {
                    var r = t.replace(/\s+/g, "").split(","),
                        i = +e.getAttribute("data-line-offset") || 0,
                        s = parseFloat(getComputedStyle(e).lineHeight);
                    for (var o = 0, u; u = r[o++];) {
                        u = u.split("-");
                        var a = +u[0],
                            f = +u[1] || a,
                            l = document.createElement("div");
                        l.textContent = Array(f - a + 2).join(" \r\n");
                        l.className = (n || "") + " line-highlight";
                        l.setAttribute("data-start", a);
                        f > a && l.setAttribute("data-end", f);
                        l.style.top = (a - i - 1) * s + "px";
                        (e.querySelector("code") || e).appendChild(l)
                    }
                }

                function n() {
                    var n = location.hash.slice(1);
                    e(".temporary.line-highlight").forEach(function(e) {
                        e.parentNode.removeChild(e)
                    });
                    var r = (n.match(/\.([\d,-]+)$/) || [, ""])[1];
                    if (!r || document.getElementById(n)) return;
                    var i = n.slice(0, n.lastIndexOf(".")),
                        s = document.getElementById(i);
                    if (!s) return;
                    s.hasAttribute("data-line") || s.setAttribute("data-line", "");
                    t(s, r, "temporary ");
                    document.querySelector(".temporary.line-highlight").scrollIntoView()
                }
                if (!window.Prism) return;
                var r = crlf = /\r?\n|\r/g,
                    i = 0;
                Prism.hooks.add("after-highlight", function(r) {
                    var s = r.element.parentNode,
                        o = s && s.getAttribute("data-line");
                    if (!s || !o || !/pre/i.test(s.nodeName)) return;
                    clearTimeout(i);
                    e(".line-highlight", s).forEach(function(e) {
                        e.parentNode.removeChild(e)
                    });
                    t(s, o);
                    i = setTimeout(n, 1)
                });
                addEventListener("hashchange", n)
            })(); undefined; Prism.hooks.add("after-highlight", function(e) {
                var t = e.element.parentNode;
                if (!t || !/pre/i.test(t.nodeName) || t.className.indexOf("line-numbers") === -1) {
                    return
                }
                var n = 1 + e.code.split("\n").length;
                var r;
                lines = new Array(n);
                lines = lines.join("<span></span>");
                r = document.createElement("span");
                r.className = "line-numbers-rows";
                r.innerHTML = lines;
                if (t.hasAttribute("data-start")) {
                    t.style.counterReset = "linenumber " + (parseInt(t.getAttribute("data-start"), 10) - 1)
                }
                e.element.appendChild(r)
            }); Prism.languages.markup = {
                comment: /<!--[\w\W]*?--(>|>)/g,
                prolog: /<\?.+?\?>/,
                doctype: /<!DOCTYPE.+?>/,
                cdata: /<!\[CDATA\[[\w\W]+?]]>/i,
                tag: {
                    pattern: /<\/?[\w:-]+\s*(?:\s+[\w:-]+(?:=(?:("|')(\\?[\w\W])*?\1|\w+))?\s*)*\/?>/gi,
                    inside: {
                        tag: {
                            pattern: /^<\/?[\w:-]+/i,
                            inside: {
                                punctuation: /^<\/?/,
                                namespace: /^[\w-]+?:/
                            }
                        },
                        "attr-value": {
                            pattern: /=(?:('|")[\w\W]*?(\1)|[^\s>]+)/gi,
                            inside: {
                                punctuation: /=|>|"/g
                            }
                        },
                        punctuation: /\/?>/g,
                        "attr-name": {
                            pattern: /[\w:-]+/g,
                            inside: {
                                namespace: /^[\w-]+?:/
                            }
                        }
                    }
                },
                entity: /&#?[\da-z]{1,8};/gi
            }; Prism.hooks.add("wrap", function(e) {
                e.type === "entity" && (e.attributes.title = e.content.replace(/&/, "&"))
            }); Prism.languages.css = {
                comment: /\/\*[\w\W]*?\*\//g,
                atrule: /@[\w-]+?(\s+[^;{]+)?(?=\s*{|\s*;)/gi,
                url: /url\((["']?).*?\1\)/gi,
                selector: /[^\{\}\s][^\{\}]*(?=\s*\{)/g,
                property: /(\b|\B)[a-z-]+(?=\s*:)/ig,
                string: /("|')(\\?.)*?\1/g,
                important: /\B!important\b/gi,
                ignore: /&(lt|gt|amp);/gi,
                punctuation: /[\{\};:]/g
            }; Prism.languages.markup && Prism.languages.insertBefore("markup", "tag", {
                style: {
                    pattern: /(<|<)style[\w\W]*?(>|>)[\w\W]*?(<|<)\/style(>|>)/ig,
                    inside: {
                        tag: {
                            pattern: /(<|<)style[\w\W]*?(>|>)|(<|<)\/style(>|>)/ig,
                            inside: Prism.languages.markup.tag.inside
                        },
                        rest: Prism.languages.css
                    }
                }
            }); Prism.languages.css.selector = {
                pattern: /[^\{\}\s][^\{\}]*(?=\s*\{)/g,
                inside: {
                    "pseudo-element": /:(?:after|before|first-letter|first-line|selection)|::[-\w]+/g,
                    "pseudo-class": /:[-\w]+(?:\(.*\))?/g,
                    "class": /\.[-:\.\w]+/g,
                    id: /#[-:\.\w]+/g
                }
            }; Prism.languages.insertBefore("css", "ignore", {
                hexcode: /#[\da-f]{3,6}/gi,
                entity: /\\[\da-f]{1,8}/gi,
                number: /[\d%\.]+/g,
                "function": /(attr|calc|cross-fade|cycle|element|hsl|hsla|image|lang|linear-gradient|matrix|matrix3d|perspective|radial-gradient|repeating-linear-gradient|repeating-radial-gradient|rgb|rgba|rotate|rotatex|rotatey|rotatez|rotate3d|scale|scalex|scaley|scalez|scale3d|skew|skewx|skewy|steps|translate|translatex|translatey|translatez|translate3d|url|var)/ig
            }); Prism.languages.clike = {
                comment: {
                    pattern: /(^|[^\\])(\/\*[\w\W]*?\*\/|(^|[^:])\/\/.*?(\r?\n|$))/g,
                    lookbehind: !0
                },
                string: /("|')(\\?.)*?\1/g,
                "class-name": {
                    pattern: /((?:class|interface|extends|implements|trait|instanceof|new)\s+)[a-z0-9_\.\\]+/ig,
                    lookbehind: !0,
                    inside: {
                        punctuation: /(\.|\\)/
                    }
                },
                keyword: /\b(if|else|while|do|for|return|in|instanceof|function|new|try|catch|finally|null|break|continue)\b/g,
                "boolean": /\b(true|false)\b/g,
                "function": {
                    pattern: /[a-z0-9_]+\(/ig,
                    inside: {
                        punctuation: /\(/
                    }
                },
                number: /\b-?(0x[\dA-Fa-f]+|\d*\.?\d+([Ee]-?\d+)?)\b/g,
                operator: /[-+]{1,2}|!|=?<|=?>|={1,2}|(&){1,2}|\|?\||\?|\*|\/|\~|\^|\%/g,
                ignore: /&(lt|gt|amp);/gi,
                punctuation: /[{}[\];(),.:]/g
            }; Prism.languages.javascript = Prism.languages.extend("clike", {
                keyword: /\b(var|let|if|else|while|do|for|return|in|instanceof|function|new|with|typeof|try|catch|finally|null|break|continue)\b/g,
                number: /\b-?(0x[\dA-Fa-f]+|\d*\.?\d+([Ee]-?\d+)?|NaN|-?Infinity)\b/g
            }); Prism.languages.insertBefore("javascript", "keyword", {
                regex: {
                    pattern: /(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\r\n])+\/[gim]{0,3}(?=\s*($|[\r\n,.;})]))/g,
                    lookbehind: !0
                }
            }); Prism.languages.markup && Prism.languages.insertBefore("markup", "tag", {
                script: {
                    pattern: /(<|<)script[\w\W]*?(>|>)[\w\W]*?(<|<)\/script(>|>)/ig,
                    inside: {
                        tag: {
                            pattern: /(<|<)script[\w\W]*?(>|>)|(<|<)\/script(>|>)/ig,
                            inside: Prism.languages.markup.tag.inside
                        },
                        rest: Prism.languages.javascript
                    }
                }
            }); Prism.languages.php = Prism.languages.extend("clike", {
                keyword: /\b(and|or|xor|array|as|break|case|cfunction|class|const|continue|declare|default|die|do|else|elseif|enddeclare|endfor|endforeach|endif|endswitch|endwhile|extends|for|foreach|function|include|include_once|global|if|new|return|static|switch|use|require|require_once|var|while|abstract|interface|public|implements|extends|private|protected|parent|static|throw|null|echo|print|trait|namespace|use|final|yield|goto)\b/ig,
                constant: /[A-Z0-9_]{2,}/g
            }); Prism.languages.insertBefore("php", "keyword", {
                deliminator: /(\?>|\?>|<\?php|<\?php)/ig,
                "this": /\$this/,
                variable: /(\$\w+)\b/ig,
                scope: {
                    pattern: /\b[a-z0-9_\\]+::/ig,
                    inside: {
                        keyword: /(static|self|parent)/,
                        punctuation: /(::|\\)/
                    }
                },
                "package": {
                    pattern: /(\\|namespace\s+|use\s+)[a-z0-9_\\]+/ig,
                    lookbehind: !0,
                    inside: {
                        punctuation: /\\/
                    }
                }
            }); Prism.languages.insertBefore("php", "operator", {
                property: {
                    pattern: /(->)[a-z0-9_]+/ig,
                    lookbehind: !0
                }
            }); Prism.languages.markup && Prism.languages.insertBefore("php", "comment", {
                markup: {
                    pattern: /(\?>|\?>)[\w\W]*?(?=(<\?php|<\?php))/ig,
                    lookbehind: !0,
                    inside: {
                        markup: {
                            pattern: /<\/?[\w:-]+\s*[\w\W]*?>/gi,
                            inside: Prism.languages.markup.tag.inside
                        },
                        rest: Prism.languages.php
                    }
                }
            });
            (function($) {
                $.fn.editable = function(e, t) {
                    if ("disable" == e) {
                        $(this).data("disabled.editable", true);
                        return
                    }
                    if ("enable" == e) {
                        $(this).data("disabled.editable", false);
                        return
                    }
                    if ("destroy" == e) {
                        $(this).unbind($(this).data("event.editable")).removeData("disabled.editable").removeData("event.editable");
                        return
                    }
                    var n = $.extend({}, $.fn.editable.defaults, {
                        target: e
                    }, t);
                    var r = $.editable.types[n.type].plugin || function() {};
                    var i = $.editable.types[n.type].submit || function() {};
                    var s = $.editable.types[n.type].buttons || $.editable.types["defaults"].buttons;
                    var o = $.editable.types[n.type].content || $.editable.types["defaults"].content;
                    var u = $.editable.types[n.type].element || $.editable.types["defaults"].element;
                    var a = $.editable.types[n.type].reset || $.editable.types["defaults"].reset;
                    var f = n.callback || function() {};
                    var l = n.onedit || function() {};
                    var c = n.onsubmit || function() {};
                    var h = n.onreset || function() {};
                    var p = n.onerror || a;
                    if (n.tooltip) {
                        $(this).attr("title", n.tooltip)
                    }
                    n.autowidth = "auto" == n.width;
                    n.autoheight = "auto" == n.height;
                    return this.each(function() {
                        var e = this;
                        var t = $(e).width();
                        var d = $(e).height();
                        $(this).data("event.editable", n.event);
                        if (!$.trim($(this).html())) {
                            $(this).html(n.placeholder)
                        }
                        $(this).bind(n.event, function(h) {
                            if (true === $(this).data("disabled.editable")) {
                                return
                            }
                            if (e.editing) {
                                return
                            }
                            if (false === l.apply(this, [n, e])) {
                                return
                            }
                            h.preventDefault();
                            h.stopPropagation();
                            if (n.tooltip) {
                                $(e).removeAttr("title")
                            }
                            if (0 == $(e).width()) {
                                n.width = t;
                                n.height = d
                            } else {
                                if (n.width != "none") {
                                    n.width = n.autowidth ? $(e).width() : n.width
                                }
                                if (n.height != "none") {
                                    n.height = n.autoheight ? $(e).height() : n.height
                                }
                            }
                            if ($(this).html().toLowerCase().replace(/(;|"|\/)/g, "") == n.placeholder.toLowerCase().replace(/(;|"|\/)/g, "")) {
                                $(this).html("")
                            }
                            e.editing = true;
                            e.revert = $(e).html();
                            $(e).html("");
                            var v = $("<form />");
                            if (n.cssclass) {
                                if ("inherit" == n.cssclass) {
                                    v.attr("class", $(e).attr("class"))
                                } else {
                                    v.attr("class", n.cssclass)
                                }
                            }
                            if (n.style) {
                                if ("inherit" == n.style) {
                                    v.attr("style", $(e).attr("style"));
                                    v.css("display", $(e).css("display"))
                                } else {
                                    v.attr("style", n.style)
                                }
                            }
                            var m = u.apply(v, [n, e]);
                            var g;
                            if (n.loadurl) {
                                var y = setTimeout(function() {
                                    m.disabled = true;
                                    o.apply(v, [n.loadtext, n, e])
                                }, 100);
                                var b = {};
                                b[n.id] = e.id;
                                if ($.isFunction(n.loaddata)) {
                                    $.extend(b, n.loaddata.apply(e, [e.revert, n]))
                                } else {
                                    $.extend(b, n.loaddata)
                                }
                                $.ajax({
                                    type: n.loadtype,
                                    url: n.loadurl,
                                    data: b,
                                    async: false,
                                    success: function(e) {
                                        window.clearTimeout(y);
                                        g = e;
                                        m.disabled = false
                                    }
                                })
                            } else if (n.data) {
                                g = n.data;
                                if ($.isFunction(n.data)) {
                                    g = n.data.apply(e, [e.revert, n])
                                }
                            } else {
                                g = e.revert
                            }
                            o.apply(v, [g, n, e]);
                            m.attr("name", n.name);
                            s.apply(v, [n, e]);
                            $(e).append(v);
                            r.apply(v, [n, e]);
                            $(":input:visible:enabled:first", v).focus();
                            if (n.select) {
                                m.select()
                            }
                            m.keydown(function(t) {
                                if (t.keyCode == 27) {
                                    t.preventDefault();
                                    a.apply(v, [n, e])
                                }
                            });
                            var y;
                            if ("cancel" == n.onblur) {
                                m.blur(function(t) {
                                    y = setTimeout(function() {
                                        a.apply(v, [n, e])
                                    }, 500)
                                })
                            } else if ("submit" == n.onblur) {
                                m.blur(function(e) {
                                    y = setTimeout(function() {
                                        v.submit()
                                    }, 200)
                                })
                            } else if ($.isFunction(n.onblur)) {
                                m.blur(function(t) {
                                    n.onblur.apply(e, [m.val(), n])
                                })
                            } else {
                                m.blur(function(e) {})
                            }
                            v.submit(function(t) {
                                if (y) {
                                    clearTimeout(y)
                                }
                                t.preventDefault();
                                if (false !== c.apply(v, [n, e])) {
                                    if (false !== i.apply(v, [n, e])) {
                                        if ($.isFunction(n.target)) {
                                            var r = n.target.apply(e, [m.val(), n]);
                                            $(e).html(r);
                                            e.editing = false;
                                            f.apply(e, [e.innerHTML, n]);
                                            if (!$.trim($(e).html())) {
                                                $(e).html(n.placeholder)
                                            }
                                        } else {
                                            var s = {};
                                            s[n.name] = m.val();
                                            s[n.id] = e.id;
                                            if ($.isFunction(n.submitdata)) {
                                                $.extend(s, n.submitdata.apply(e, [e.revert, n]))
                                            } else {
                                                $.extend(s, n.submitdata)
                                            }
                                            if ("PUT" == n.method) {
                                                s["_method"] = "put"
                                            }
                                            $(e).html(n.indicator);
                                            var o = {
                                                type: "POST",
                                                data: s,
                                                dataType: "html",
                                                url: n.target,
                                                success: function(t, r) {
                                                    if (o.dataType == "html") {
                                                        $(e).html(t)
                                                    }
                                                    e.editing = false;
                                                    f.apply(e, [t, n]);
                                                    if (!$.trim($(e).html())) {
                                                        $(e).html(n.placeholder)
                                                    }
                                                },
                                                error: function(t, r, i) {
                                                    p.apply(v, [n, e, t])
                                                }
                                            };
                                            $.extend(o, n.ajaxoptions);
                                            $.ajax(o)
                                        }
                                    }
                                }
                                $(e).attr("title", n.tooltip);
                                return false
                            })
                        });
                        this.reset = function(t) {
                            if (this.editing) {
                                if (false !== h.apply(t, [n, e])) {
                                    $(e).html(e.revert);
                                    e.editing = false;
                                    if (!$.trim($(e).html())) {
                                        $(e).html(n.placeholder)
                                    }
                                    if (n.tooltip) {
                                        $(e).attr("title", n.tooltip)
                                    }
                                }
                            }
                        }
                    })
                };
                $.editable = {
                    types: {
                        defaults: {
                            element: function(e, t) {
                                var n = $('<input type="hidden"></input>');
                                $(this).append(n);
                                return n
                            },
                            content: function(e, t, n) {
                                $(":input:first", this).val(e)
                            },
                            reset: function(e, t) {
                                t.reset(this)
                            },
                            buttons: function(e, t) {
                                var n = this;
                                if (e.submit) {
                                    if (e.submit.match(/>$/)) {
                                        var r = $(e.submit).click(function() {
                                            if (r.attr("type") != "submit") {
                                                n.submit()
                                            }
                                        })
                                    } else {
                                        var r = $('<button type="submit" class="btn btn-success" />');
                                        r.html(e.submit)
                                    }
                                    $(this).append(r)
                                }
                                if (e.cancel) {
                                    if (e.cancel.match(/>$/)) {
                                        var i = $(e.cancel)
                                    } else {
                                        var i = $('<button type="cancel" class="btn btn-danger" />');
                                        i.html(e.cancel)
                                    }
                                    $(this).append(i);
                                    $(i).click(function(r) {
                                        if ($.isFunction($.editable.types[e.type].reset)) {
                                            var i = $.editable.types[e.type].reset
                                        } else {
                                            var i = $.editable.types["defaults"].reset
                                        }
                                        i.apply(n, [e, t]);
                                        return false
                                    })
                                }
                            }
                        },
                        text: {
                            element: function(e, t) {
                                var n = $('<input type="text"/>');
                                if (e.width != "none") {
                                    n.attr("width", e.width)
                                }
                                if (e.height != "none") {
                                    n.attr("height", e.height)
                                }
                                n.attr("autocomplete", "off");
                                $(this).append(n);
                                return n
                            }
                        },
                        textarea: {
                            element: function(e, t) {
                                var n = $("<textarea />");
                                if (e.rows) {
                                    n.attr("rows", e.rows)
                                } else if (e.height != "none") {
                                    n.height(e.height)
                                }
                                if (e.cols) {
                                    n.attr("cols", e.cols)
                                } else if (e.width != "none") {
                                    n.width(e.width)
                                }
                                $(this).append(n);
                                return n
                            }
                        },
                        select: {
                            element: function(e, t) {
                                var n = $("<select />");
                                $(this).append(n);
                                return n
                            },
                            content: function(data, settings, original) {
                                if (String == data.constructor) {
                                    eval("var json = " + data)
                                } else {
                                    var json = data
                                }
                                for (var key in json) {
                                    if (!json.hasOwnProperty(key)) {
                                        continue
                                    }
                                    if ("selected" == key) {
                                        continue
                                    }
                                    var option = $("<option />").val(key).append(json[key]);
                                    $("select", this).append(option)
                                }
                                $("select", this).children().each(function() {
                                    if ($(this).val() == json["selected"] || $(this).text() == $.trim(original.revert)) {
                                        $(this).attr("selected", "selected")
                                    }
                                });
                                if (!settings.submit) {
                                    var form = this;
                                    $("select", this).change(function() {
                                        form.submit()
                                    })
                                }
                            }
                        }
                    },
                    addInputType: function(e, t) {
                        $.editable.types[e] = t
                    }
                };
                $.fn.editable.defaults = {
                    name: "value",
                    id: "id",
                    type: "text",
                    width: "auto",
                    height: "auto",
                    event: "click.editable",
                    onblur: "cancel",
                    loadtype: "GET",
                    loadtext: "Loading...",
                    placeholder: "Click to edit",
                    loaddata: {},
                    submitdata: {},
                    ajaxoptions: {}
                }
            })(jQuery)
